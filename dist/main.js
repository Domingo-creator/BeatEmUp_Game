/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
/******/ (function() { // webpackBootstrap
/******/ 	var __webpack_modules__ = ({

/***/ "./src/character.js":
/*!**************************!*\
  !*** ./src/character.js ***!
  \**************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"Character\": function() { return /* binding */ Character; }\n/* harmony export */ });\n/* harmony import */ var _characterModels__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./characterModels */ \"./src/characterModels.js\");\n/* harmony import */ var _lifebar__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./lifebar */ \"./src/lifebar.js\");\n\n\nclass Character {\n  constructor(game, startPos, model, startingDirection = 'left', size = {\n    height: 110,\n    width: 40\n  }, items = [], powerups = []) {\n    this.game = game;\n    this.model = model;\n    this.currentAnimation = 'Idle';\n    this.size = size;\n    this.lifebar = new _lifebar__WEBPACK_IMPORTED_MODULE_1__.LifeBar(this.game.ctx, this.game.dimensions, this);\n    this.position = startPos;\n    this.stunned = false;\n    this.currentAction = null;\n    this.hitbox = [];\n    this.directionFaced = startingDirection;\n    this.framesDrawn = 0;\n    this.currentFrame = 0;\n    this.xVel = 0;\n    this.yVel = 0;\n  } /// probably unnecessary. i think all its doing is checking for a combo attack. maybe just rename something else\n\n\n  resetCurrentFrame() {\n    let data = _characterModels__WEBPACK_IMPORTED_MODULE_0__.CharacterModels[`${this.model}`][`${this.currentAnimation}`];\n\n    if (!this.comboWindowOpen || this.currentFrame === 0) {\n      this.currentFrame = this.directionFaced === 'right' ? 0 : data.max_frames - 1;\n    }\n  }\n\n  setCurrentAnimation() {\n    if (this.currentAction) {\n      this.currentAnimation = this.currentAction;\n    } else {\n      if (this.xVel === 0 && this.yVel === 0) {\n        this.currentAnimation = 'Idle';\n      } else {\n        this.currentAnimation = 'Run';\n      }\n    }\n  }\n\n  drawCharacter() {\n    //TODO make a better character animation\n    this.setCurrentAnimation();\n    let spriteSheet = new Image();\n    let data = _characterModels__WEBPACK_IMPORTED_MODULE_0__.CharacterModels[`${this.model}`][`${this.currentAnimation}`]; // if(this.currentAnimation === 'hit')console.log('way before', this.currentFrame)\n\n    this.currentFrame = this.currentFrame % data.frames;\n\n    spriteSheet.onload = () => {\n      let spriteWidth = spriteSheet.width / data.max_frames;\n      let spriteHeight = spriteSheet.height / data.num_rows;\n      let srcX;\n\n      if (this.directionFaced === 'left') {\n        srcX = this.currentFrame * spriteWidth + (data.max_frames - data.frames) * spriteWidth + data[`${this.directionFaced}_offset`];\n      } else {\n        srcX = this.currentFrame * spriteWidth + data[`${this.directionFaced}_offset`];\n      }\n\n      let srcY = spriteHeight * data.row / data.top_offset_multiplier;\n      let scaleFactor = 3;\n      this.game.ctx.drawImage(spriteSheet, srcX, srcY, spriteWidth, spriteHeight, this.position[0] + data[`${this.directionFaced}_pos_offset`], this.position[1], spriteWidth * scaleFactor, spriteHeight * scaleFactor); // this.game.ctx.fillStyle = 'yellow'\n      // this.game.ctx.fillRect(this.position[0], this.position[1], 40, 110)\n      // this.game.ctx.fillRect(this.position[0] + spriteWidth,this.position[1] + spriteSheet.height, 15, 70)\n    };\n\n    if (this.model === 'knight') {\n      spriteSheet.src = `./images/${this.model}/${this.currentAnimation}_${this.directionFaced}.png`;\n    } else {\n      spriteSheet.src = `./images/${this.model}/${this.model}_${this.directionFaced}.png`;\n    } //only update frame ever 10 draws\n\n\n    this.framesDrawn++;\n\n    if (this.framesDrawn >= 10) {\n      // if current action is death, stop animating at last frame\n      if (this.currentAction === 'death' || this.currentAction === 'hit') {\n        if (this.directionFaced === 'right') {\n          if (this.currentFrame !== data.frames - 1) this.currentFrame++;\n        } else {\n          if (this.currentFrame !== data.max_frames - data.frames) {\n            this.currentFrame--; // if(this.model === 'skeleton' && this.currentAction === 'hit')console.log(this.currentFrame)\n          }\n        }\n      } else {\n        this.directionFaced === 'right' ? this.currentFrame++ : this.currentFrame--; //reset current frame to end if left-case brings it below 0\n\n        if (this.currentFrame < 0) {\n          this.currentFrame = data.frames - 1;\n        }\n      }\n\n      this.framesDrawn = 0;\n    }\n  }\n\n  move() {\n    console.log('fell to super class move');\n  }\n\n  takeDamage(amount) {\n    if (this.currentAnimation !== 'death' && !this.iFrames) {\n      this.getHitSound();\n      this.lifebar.reduceHealth(amount);\n      this.stunned = true;\n      this.currentFrame = 0;\n      this.resetCurrentFrame();\n      this.currentAction = 'hit';\n      setTimeout(() => {\n        if (this.currentAction !== 'death') {\n          this.currentAction = null;\n        }\n      }, 500);\n      setTimeout(() => this.stunned = false, 800);\n\n      if (this.model === 'knight') {\n        this.iFrames = true;\n        setTimeout(() => this.iFrames = false, 1500);\n        this.game.currentScreen.startFlashScreen();\n      }\n    }\n  }\n\n  death() {\n    this.getDeathSound();\n    this.currentFrame = 0;\n    this.resetCurrentFrame();\n    this.stunned = true;\n    this.currentAction = 'death';\n  }\n\n  performLightAttack() {\n    // console.log('attacking')\n    if (this.directionFaced === 'right') this.hitbox = [this.position[0], this.position[1] + this.size.height, this.position[0] + 185, this.position[1]];else {\n      this.hitbox = [this.position[0] - 175, this.position[1] + this.size.height, this.position[0], this.position[1]];\n    }\n    this.currentAction = 'lAttack';\n    this.comboWindowOpen = true;\n    setTimeout(() => {\n      this.comboWindowOpen = false;\n      this.hitbox = [];\n      this.currentAction = null;\n    }, 500);\n  }\n\n  performHeavyAttack() {}\n\n  performThrow() {}\n\n  calculateHurtBox() {\n    return [this.position[0], this.position[1] + this.size.height, this.position[0] + this.size.width, this.position[1]];\n  } ///////// FIX THIS TO NOT TAKE ARGUMENTS\n\n\n  checkXInbounds(xPos) {\n    if (xPos < this.game.currentScreen.dimensions.width - 20 && xPos > 0) {\n      return true;\n    } else {\n      return false;\n    }\n  }\n\n  checkYInbounds(yPos) {\n    if (yPos > this.game.currentScreen.floorHeight - 50 && yPos < this.game.currentScreen.dimensions.height - 80) {\n      return true;\n    } else {\n      return false;\n    }\n  }\n\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFHLEtBQUs5RCxJQUFMLENBQVVtRCxhQUFWLENBQXdCWSxXQUF4QixHQUFzQyxFQUE3QyxJQUNDRCxJQUFJLEdBQUcsS0FBSzlELElBQUwsQ0FBVW1ELGFBQVYsQ0FBd0J2QyxVQUF4QixDQUFtQ1AsTUFBbkMsR0FBNEMsRUFEdkQsRUFDMkQ7QUFDdkQsYUFBTyxJQUFQO0FBQ0gsS0FIRCxNQUdPO0FBQ0gsYUFBTyxLQUFQO0FBQ0g7QUFDSjs7QUE1S2tCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYUFfSlNfUHJvamVjdC8uL3NyYy9jaGFyYWN0ZXIuanM/NWIwOCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDaGFyYWN0ZXJNb2RlbHMgfSBmcm9tIFwiLi9jaGFyYWN0ZXJNb2RlbHNcIjtcbmltcG9ydCB7IExpZmVCYXIgfSBmcm9tIFwiLi9saWZlYmFyXCI7XG5cbmV4cG9ydCBjbGFzcyBDaGFyYWN0ZXIge1xuICAgIGNvbnN0cnVjdG9yKGdhbWUsIHN0YXJ0UG9zLCBtb2RlbCwgc3RhcnRpbmdEaXJlY3Rpb24gPSAnbGVmdCcsIHNpemUgPXsgaGVpZ2h0OiAxMTAsIHdpZHRoOiA0MH0sIGl0ZW1zID0gW10sIHBvd2VydXBzID0gW10pIHtcbiAgICAgICAgdGhpcy5nYW1lID0gZ2FtZTtcbiAgICAgICAgdGhpcy5tb2RlbCA9IG1vZGVsO1xuICAgICAgICB0aGlzLmN1cnJlbnRBbmltYXRpb24gPSAnSWRsZSdcbiAgICAgICAgdGhpcy5zaXplID0gc2l6ZTtcbiAgICAgICAgdGhpcy5saWZlYmFyID0gbmV3IExpZmVCYXIodGhpcy5nYW1lLmN0eCwgdGhpcy5nYW1lLmRpbWVuc2lvbnMsIHRoaXMpO1xuICAgICAgICB0aGlzLnBvc2l0aW9uID0gc3RhcnRQb3M7XG4gICAgICAgIHRoaXMuc3R1bm5lZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLmN1cnJlbnRBY3Rpb24gPSBudWxsO1xuICAgICAgICB0aGlzLmhpdGJveCA9IFtdXG4gICAgICAgIHRoaXMuZGlyZWN0aW9uRmFjZWQgPSBzdGFydGluZ0RpcmVjdGlvbjtcbiAgICAgICAgdGhpcy5mcmFtZXNEcmF3biA9IDA7XG4gICAgICAgIHRoaXMuY3VycmVudEZyYW1lID0gMDtcbiAgICAgICAgdGhpcy54VmVsID0gMDtcbiAgICAgICAgdGhpcy55VmVsID0gMDtcbiAgICB9XG5cbiAgICAvLy8gcHJvYmFibHkgdW5uZWNlc3NhcnkuIGkgdGhpbmsgYWxsIGl0cyBkb2luZyBpcyBjaGVja2luZyBmb3IgYSBjb21ibyBhdHRhY2suIG1heWJlIGp1c3QgcmVuYW1lIHNvbWV0aGluZyBlbHNlXG4gICAgcmVzZXRDdXJyZW50RnJhbWUoKSB7XG4gICAgICAgIGxldCBkYXRhID0gQ2hhcmFjdGVyTW9kZWxzW2Ake3RoaXMubW9kZWx9YF1bYCR7dGhpcy5jdXJyZW50QW5pbWF0aW9ufWBdXG4gICAgICAgIGlmKCF0aGlzLmNvbWJvV2luZG93T3BlbiB8fCB0aGlzLmN1cnJlbnRGcmFtZSA9PT0gMCkge1xuICAgICAgICAgICAgdGhpcy5jdXJyZW50RnJhbWUgPSB0aGlzLmRpcmVjdGlvbkZhY2VkID09PSAncmlnaHQnID8gMCA6IGRhdGEubWF4X2ZyYW1lcyAtIDE7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBzZXRDdXJyZW50QW5pbWF0aW9uKCkge1xuICAgICAgICBpZih0aGlzLmN1cnJlbnRBY3Rpb24pIHtcbiAgICAgICAgICAgIHRoaXMuY3VycmVudEFuaW1hdGlvbiA9IHRoaXMuY3VycmVudEFjdGlvbjtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpZih0aGlzLnhWZWwgPT09IDAgJiYgdGhpcy55VmVsID09PSAwKSB7XG4gICAgICAgICAgICAgIHRoaXMuY3VycmVudEFuaW1hdGlvbiA9ICdJZGxlJ1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHRoaXMuY3VycmVudEFuaW1hdGlvbiA9ICdSdW4nXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgZHJhd0NoYXJhY3RlcigpIHtcbiAgICAvL1RPRE8gbWFrZSBhIGJldHRlciBjaGFyYWN0ZXIgYW5pbWF0aW9uXG4gICAgdGhpcy5zZXRDdXJyZW50QW5pbWF0aW9uKCk7XG4gICAgICAgIGxldCBzcHJpdGVTaGVldCA9IG5ldyBJbWFnZSgpO1xuICAgICAgICBsZXQgZGF0YSA9IENoYXJhY3Rlck1vZGVsc1tgJHt0aGlzLm1vZGVsfWBdW2Ake3RoaXMuY3VycmVudEFuaW1hdGlvbn1gXVxuICAgICAgICAvLyBpZih0aGlzLmN1cnJlbnRBbmltYXRpb24gPT09ICdoaXQnKWNvbnNvbGUubG9nKCd3YXkgYmVmb3JlJywgdGhpcy5jdXJyZW50RnJhbWUpXG4gICAgICAgIHRoaXMuY3VycmVudEZyYW1lID0gdGhpcy5jdXJyZW50RnJhbWUgJSBkYXRhLmZyYW1lcztcbiAgICAgICAgc3ByaXRlU2hlZXQub25sb2FkID0gKCkgPT4ge1xuICAgICAgICAgICAgICAgIGxldCBzcHJpdGVXaWR0aCA9IChzcHJpdGVTaGVldC53aWR0aCkvIGRhdGEubWF4X2ZyYW1lc1xuICAgICAgICAgICAgICAgIGxldCBzcHJpdGVIZWlnaHQgPSBzcHJpdGVTaGVldC5oZWlnaHQgLyBkYXRhLm51bV9yb3dzO1xuICAgICAgICAgICAgICAgIGxldCBzcmNYO1xuICAgICAgICAgICAgICAgIGlmKHRoaXMuZGlyZWN0aW9uRmFjZWQgPT09ICdsZWZ0Jykge1xuICAgICAgICAgICAgICAgICAgICBzcmNYID0gdGhpcy5jdXJyZW50RnJhbWUgKiBzcHJpdGVXaWR0aCArICgoZGF0YS5tYXhfZnJhbWVzIC0gZGF0YS5mcmFtZXMpICogc3ByaXRlV2lkdGgpICsgZGF0YVtgJHt0aGlzLmRpcmVjdGlvbkZhY2VkfV9vZmZzZXRgXVxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHNyY1ggPSB0aGlzLmN1cnJlbnRGcmFtZSAqIHNwcml0ZVdpZHRoICArIGRhdGFbYCR7dGhpcy5kaXJlY3Rpb25GYWNlZH1fb2Zmc2V0YF1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgbGV0IHNyY1kgPSAoc3ByaXRlSGVpZ2h0ICogZGF0YS5yb3cpIC8gZGF0YS50b3Bfb2Zmc2V0X211bHRpcGxpZXJcbiAgICAgICAgICAgICAgICBsZXQgc2NhbGVGYWN0b3IgPSAzO1xuICAgICAgICAgICAgICAgIHRoaXMuZ2FtZS5jdHguZHJhd0ltYWdlKHNwcml0ZVNoZWV0LCBzcmNYLCBzcmNZLCBzcHJpdGVXaWR0aCwgc3ByaXRlSGVpZ2h0LCB0aGlzLnBvc2l0aW9uWzBdICsgZGF0YVtgJHt0aGlzLmRpcmVjdGlvbkZhY2VkfV9wb3Nfb2Zmc2V0YF0sIHRoaXMucG9zaXRpb25bMV0sIHNwcml0ZVdpZHRoICogc2NhbGVGYWN0b3IsIHNwcml0ZUhlaWdodCAqIHNjYWxlRmFjdG9yKVxuICAgICAgICAgICAgICAgIC8vIHRoaXMuZ2FtZS5jdHguZmlsbFN0eWxlID0gJ3llbGxvdydcbiAgICAgICAgICAgICAgICAvLyB0aGlzLmdhbWUuY3R4LmZpbGxSZWN0KHRoaXMucG9zaXRpb25bMF0sIHRoaXMucG9zaXRpb25bMV0sIDQwLCAxMTApXG4gICAgICAgICAgICAgICAgLy8gdGhpcy5nYW1lLmN0eC5maWxsUmVjdCh0aGlzLnBvc2l0aW9uWzBdICsgc3ByaXRlV2lkdGgsdGhpcy5wb3NpdGlvblsxXSArIHNwcml0ZVNoZWV0LmhlaWdodCwgMTUsIDcwKVxuICAgICAgICB9O1xuICAgICAgICBpZiAodGhpcy5tb2RlbCA9PT0gJ2tuaWdodCcpIHtcbiAgICAgICAgICAgIHNwcml0ZVNoZWV0LnNyYyA9IGAuL2ltYWdlcy8ke3RoaXMubW9kZWx9LyR7dGhpcy5jdXJyZW50QW5pbWF0aW9ufV8ke3RoaXMuZGlyZWN0aW9uRmFjZWR9LnBuZ2A7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBzcHJpdGVTaGVldC5zcmMgPSBgLi9pbWFnZXMvJHt0aGlzLm1vZGVsfS8ke3RoaXMubW9kZWx9XyR7dGhpcy5kaXJlY3Rpb25GYWNlZH0ucG5nYDtcbiAgICAgICAgfVxuICAgICAgICAvL29ubHkgdXBkYXRlIGZyYW1lIGV2ZXIgMTAgZHJhd3NcbiAgICAgICAgdGhpcy5mcmFtZXNEcmF3bisrXG4gICAgICAgIGlmKHRoaXMuZnJhbWVzRHJhd24gPj0gMTApIHtcbiAgICAgICAgICAgIC8vIGlmIGN1cnJlbnQgYWN0aW9uIGlzIGRlYXRoLCBzdG9wIGFuaW1hdGluZyBhdCBsYXN0IGZyYW1lXG4gICAgICAgICAgICBpZiAoIHRoaXMuY3VycmVudEFjdGlvbiA9PT0gJ2RlYXRoJyB8fCB0aGlzLmN1cnJlbnRBY3Rpb24gPT09ICdoaXQnKXtcbiAgICAgICAgICAgICAgICBpZih0aGlzLmRpcmVjdGlvbkZhY2VkID09PSAncmlnaHQnKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmKCB0aGlzLmN1cnJlbnRGcmFtZSAhPT0gZGF0YS5mcmFtZXMgLSAxKVxuICAgICAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRGcmFtZSsrO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGlmKCB0aGlzLmN1cnJlbnRGcmFtZSAhPT0gZGF0YS5tYXhfZnJhbWVzIC0gZGF0YS5mcmFtZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudEZyYW1lLS07XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBpZih0aGlzLm1vZGVsID09PSAnc2tlbGV0b24nICYmIHRoaXMuY3VycmVudEFjdGlvbiA9PT0gJ2hpdCcpY29uc29sZS5sb2codGhpcy5jdXJyZW50RnJhbWUpXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuZGlyZWN0aW9uRmFjZWQgPT09ICdyaWdodCcgPyB0aGlzLmN1cnJlbnRGcmFtZSsrOiB0aGlzLmN1cnJlbnRGcmFtZS0tO1xuICAgICAgICAgICAgICAgIC8vcmVzZXQgY3VycmVudCBmcmFtZSB0byBlbmQgaWYgbGVmdC1jYXNlIGJyaW5ncyBpdCBiZWxvdyAwXG4gICAgICAgICAgICAgICAgaWYodGhpcy5jdXJyZW50RnJhbWUgPCAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudEZyYW1lID0gZGF0YS5mcmFtZXMgLSAxO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgIFxuICAgICAgICAgICAgdGhpcy5mcmFtZXNEcmF3biA9IDA7XG4gICAgICAgIH1cbiAgICBcbiAgICB9XG5cbiAgICBtb3ZlKCkge1xuICAgICAgICBjb25zb2xlLmxvZygnZmVsbCB0byBzdXBlciBjbGFzcyBtb3ZlJylcbiAgICB9XG4gICAgXG4gICAgdGFrZURhbWFnZShhbW91bnQpIHtcbiAgICAgICAgaWYodGhpcy5jdXJyZW50QW5pbWF0aW9uICE9PSAnZGVhdGgnICYmICF0aGlzLmlGcmFtZXMpIHtcbiAgICAgICAgICAgIHRoaXMuZ2V0SGl0U291bmQoKTtcbiAgICAgICAgICAgIHRoaXMubGlmZWJhci5yZWR1Y2VIZWFsdGgoYW1vdW50KVxuICAgICAgICAgICAgdGhpcy5zdHVubmVkID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMuY3VycmVudEZyYW1lID0gMDtcbiAgICAgICAgICAgIHRoaXMucmVzZXRDdXJyZW50RnJhbWUoKTtcbiAgICAgICAgICAgIHRoaXMuY3VycmVudEFjdGlvbiA9ICdoaXQnXG4gICAgICAgICAgICBzZXRUaW1lb3V0KCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYodGhpcy5jdXJyZW50QWN0aW9uICE9PSAnZGVhdGgnKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50QWN0aW9uID0gbnVsbDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LCA1MDApXG4gICAgICAgICAgICBzZXRUaW1lb3V0KCAoKSA9PiB0aGlzLnN0dW5uZWQgPSBmYWxzZSwgODAwKVxuICAgICAgICAgICAgaWYodGhpcy5tb2RlbCA9PT0gJ2tuaWdodCcpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmlGcmFtZXMgPSB0cnVlO1xuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoICgpID0+IHRoaXMuaUZyYW1lcyA9IGZhbHNlLCAxNTAwKVxuICAgICAgICAgICAgICAgIHRoaXMuZ2FtZS5jdXJyZW50U2NyZWVuLnN0YXJ0Rmxhc2hTY3JlZW4oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIGRlYXRoKCkge1xuICAgICAgICB0aGlzLmdldERlYXRoU291bmQoKTtcbiAgICAgICAgdGhpcy5jdXJyZW50RnJhbWUgPSAwO1xuICAgICAgICB0aGlzLnJlc2V0Q3VycmVudEZyYW1lKCk7XG4gICAgICAgIHRoaXMuc3R1bm5lZCA9IHRydWU7XG4gICAgICAgIHRoaXMuY3VycmVudEFjdGlvbiA9ICdkZWF0aCc7XG4gICAgfVxuICBcbiAgICBwZXJmb3JtTGlnaHRBdHRhY2soKXtcbiAgICAgICAgLy8gY29uc29sZS5sb2coJ2F0dGFja2luZycpXG4gICAgICAgIGlmICh0aGlzLmRpcmVjdGlvbkZhY2VkID09PSAncmlnaHQnKVxuICAgICAgICAgICAgdGhpcy5oaXRib3ggPSBbdGhpcy5wb3NpdGlvblswXSx0aGlzLnBvc2l0aW9uWzFdK3RoaXMuc2l6ZS5oZWlnaHQsdGhpcy5wb3NpdGlvblswXSsxODUsIHRoaXMucG9zaXRpb25bMV1dXG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5oaXRib3ggPSBbdGhpcy5wb3NpdGlvblswXSAtIDE3NSx0aGlzLnBvc2l0aW9uWzFdK3RoaXMuc2l6ZS5oZWlnaHQsdGhpcy5wb3NpdGlvblswXSwgdGhpcy5wb3NpdGlvblsxXV1cbiAgICAgICAgfVxuICAgICAgICB0aGlzLmN1cnJlbnRBY3Rpb24gPSAnbEF0dGFjayc7XG4gICAgICAgIHRoaXMuY29tYm9XaW5kb3dPcGVuID0gdHJ1ZTtcbiAgICAgICAgc2V0VGltZW91dCggKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5jb21ib1dpbmRvd09wZW4gPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMuaGl0Ym94ID0gW11cbiAgICAgICAgICAgIHRoaXMuY3VycmVudEFjdGlvbiA9IG51bGw7XG4gICAgICAgIH0sNTAwKVxuICAgIH1cblxuICAgIHBlcmZvcm1IZWF2eUF0dGFjaygpIHtcblxuICAgIH1cblxuICAgIHBlcmZvcm1UaHJvdygpe1xuXG4gICAgfVxuICBcbiAgICBjYWxjdWxhdGVIdXJ0Qm94KCkge1xuICAgICAgICByZXR1cm4gIFt0aGlzLnBvc2l0aW9uWzBdLHRoaXMucG9zaXRpb25bMV0rdGhpcy5zaXplLmhlaWdodCwgdGhpcy5wb3NpdGlvblswXSArIHRoaXMuc2l6ZS53aWR0aCwgdGhpcy5wb3NpdGlvblsxXV1cbiAgICB9XG5cblxuICAgIC8vLy8vLy8vLyBGSVggVEhJUyBUTyBOT1QgVEFLRSBBUkdVTUVOVFNcbiAgICBjaGVja1hJbmJvdW5kcyh4UG9zKSB7XG4gICAgICAgIGlmICh4UG9zIDwgdGhpcy5nYW1lLmN1cnJlbnRTY3JlZW4uZGltZW5zaW9ucy53aWR0aCAtIDIwICYmIHhQb3MgPiAwICl7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfSBlbHNlIHsgXG4gICAgICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGNoZWNrWUluYm91bmRzKHlQb3MpIHtcbiAgICAgICAgaWYoeVBvcyA+IHRoaXMuZ2FtZS5jdXJyZW50U2NyZWVuLmZsb29ySGVpZ2h0IC0gNTAgJiZcbiAgICAgICAgICAgIHlQb3MgPCB0aGlzLmdhbWUuY3VycmVudFNjcmVlbi5kaW1lbnNpb25zLmhlaWdodCAtIDgwKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgfVxufSJdLCJuYW1lcyI6WyJDaGFyYWN0ZXJNb2RlbHMiLCJMaWZlQmFyIiwiQ2hhcmFjdGVyIiwiY29uc3RydWN0b3IiLCJnYW1lIiwic3RhcnRQb3MiLCJtb2RlbCIsInN0YXJ0aW5nRGlyZWN0aW9uIiwic2l6ZSIsImhlaWdodCIsIndpZHRoIiwiaXRlbXMiLCJwb3dlcnVwcyIsImN1cnJlbnRBbmltYXRpb24iLCJsaWZlYmFyIiwiY3R4IiwiZGltZW5zaW9ucyIsInBvc2l0aW9uIiwic3R1bm5lZCIsImN1cnJlbnRBY3Rpb24iLCJoaXRib3giLCJkaXJlY3Rpb25GYWNlZCIsImZyYW1lc0RyYXduIiwiY3VycmVudEZyYW1lIiwieFZlbCIsInlWZWwiLCJyZXNldEN1cnJlbnRGcmFtZSIsImRhdGEiLCJjb21ib1dpbmRvd09wZW4iLCJtYXhfZnJhbWVzIiwic2V0Q3VycmVudEFuaW1hdGlvbiIsImRyYXdDaGFyYWN0ZXIiLCJzcHJpdGVTaGVldCIsIkltYWdlIiwiZnJhbWVzIiwib25sb2FkIiwic3ByaXRlV2lkdGgiLCJzcHJpdGVIZWlnaHQiLCJudW1fcm93cyIsInNyY1giLCJzcmNZIiwicm93IiwidG9wX29mZnNldF9tdWx0aXBsaWVyIiwic2NhbGVGYWN0b3IiLCJkcmF3SW1hZ2UiLCJzcmMiLCJtb3ZlIiwiY29uc29sZSIsImxvZyIsInRha2VEYW1hZ2UiLCJhbW91bnQiLCJpRnJhbWVzIiwiZ2V0SGl0U291bmQiLCJyZWR1Y2VIZWFsdGgiLCJzZXRUaW1lb3V0IiwiY3VycmVudFNjcmVlbiIsInN0YXJ0Rmxhc2hTY3JlZW4iLCJkZWF0aCIsImdldERlYXRoU291bmQiLCJwZXJmb3JtTGlnaHRBdHRhY2siLCJwZXJmb3JtSGVhdnlBdHRhY2siLCJwZXJmb3JtVGhyb3ciLCJjYWxjdWxhdGVIdXJ0Qm94IiwiY2hlY2tYSW5ib3VuZHMiLCJ4UG9zIiwiY2hlY2tZSW5ib3VuZHMiLCJ5UG9zIiwiZmxvb3JIZWlnaHQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/character.js\n");

/***/ }),

/***/ "./src/characterModels.js":
/*!********************************!*\
  !*** ./src/characterModels.js ***!
  \********************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"CharacterModels\": function() { return /* binding */ CharacterModels; },\n/* harmony export */   \"BackgroundModels\": function() { return /* binding */ BackgroundModels; }\n/* harmony export */ });\nconst CharacterModels = {\n  //left_offset = how much over over in the frame to shift over to make knight centered \n  //pos_offset = how much to be offset to make frames on screen match where they should be\n  knight: {\n    Idle: {\n      row: 1,\n      num_rows: 1,\n      frames: 10,\n      max_frames: 10,\n      left_offset: 40,\n      right_offset: 40,\n      left_pos_offset: -60,\n      right_pos_offset: -20,\n      top_offset_multiplier: 1.9\n    },\n    lAttack: {\n      row: 1,\n      num_rows: 1,\n      frames: 10,\n      max_frames: 10,\n      left_offset: -20,\n      right_offset: 0,\n      left_pos_offset: -260,\n      right_pos_offset: -120,\n      top_offset_multiplier: 1.9\n    },\n    hAttack: {\n      row: 1,\n      num_rows: 1,\n      frames: 6,\n      max_frames: 6,\n      left_offset: 20,\n      right_offset: 20,\n      left_pos_offset: 0,\n      right_pos_offset: 0,\n      top_offset_multiplier: 1.9\n    },\n    jump: {\n      row: 1,\n      num_rows: 1,\n      frames: 3,\n      max_frames: 3,\n      left_offset: 20,\n      right_offset: 20,\n      pos_offset: 0,\n      left_pos_offset: -130,\n      right_pos_offset: -100,\n      top_offset_multiplier: 1.9\n    },\n    jumpFallinbetween: {\n      row: 1,\n      num_rows: 1,\n      frames: 2,\n      max_frames: 2,\n      left_offset: 20,\n      right_offset: 20,\n      left_pos_offset: 0,\n      right_pos_offset: 0,\n      top_offset_multiplier: 1.9\n    },\n    Run: {\n      row: 1,\n      num_rows: 1,\n      frames: 10,\n      max_frames: 10,\n      left_offset: 40,\n      right_offset: 40,\n      left_pos_offset: -40,\n      right_pos_offset: -40,\n      top_offset_multiplier: 1.9\n    },\n    hit: {\n      row: 1,\n      num_rows: 1,\n      frames: 1,\n      max_frames: 1,\n      left_offset: 0,\n      right_offset: 0,\n      left_pos_offset: -120,\n      right_pos_offset: -80,\n      top_offset_multiplier: 1.9\n    },\n    death: {\n      row: 1,\n      num_rows: 1,\n      frames: 10,\n      max_frames: 10,\n      left_offset: 0,\n      right_offset: 0,\n      left_pos_offset: -260,\n      right_pos_offset: -120,\n      top_offset_multiplier: 1.9\n    }\n  },\n  skeleton: {\n    Idle: {\n      row: 4,\n      num_rows: 5,\n      frames: 4,\n      max_frames: 13,\n      left_offset: 0,\n      right_offset: 0,\n      left_pos_offset: -80,\n      right_pos_offset: -80,\n      top_offset_multiplier: 1.8\n    },\n    lAttack: {\n      row: 1,\n      num_rows: 5,\n      frames: 13,\n      max_frames: 13,\n      left_offset: 0,\n      right_offset: 0,\n      left_pos_offset: -80,\n      right_pos_offset: -80,\n      top_offset_multiplier: 4.6\n    },\n    death: {\n      row: 2,\n      num_rows: 5,\n      frames: 13,\n      max_frames: 13,\n      left_offset: 0,\n      right_offset: 0,\n      left_pos_offset: -80,\n      right_pos_offset: -80,\n      top_offset_multiplier: 1.70\n    },\n    hit: {\n      row: 2,\n      num_rows: 5,\n      frames: 3,\n      max_frames: 13,\n      left_offset: 0,\n      right_offset: 0,\n      left_pos_offset: -80,\n      right_pos_offset: -80,\n      top_offset_multiplier: 1.65\n    },\n    Run: {\n      row: 3,\n      num_rows: 5,\n      frames: 12,\n      max_frames: 13,\n      left_offset: 0,\n      right_offset: 0,\n      left_pos_offset: -80,\n      right_pos_offset: -80,\n      top_offset_multiplier: 1.35\n    }\n  }\n};\nconst BackgroundModels = {\n  lightning: {\n    typeA: {\n      row: 1,\n      num_rows: 2,\n      frames: 6,\n      max_frames: 6,\n      left_offset: 0,\n      right_offset: 0,\n      left_pos_offset: 0,\n      right_pos_offset: 0,\n      top_offset_multiplier: 0\n    },\n    typeB: {\n      row: 2,\n      num_rows: 2,\n      frames: 6,\n      max_frames: 6,\n      left_offset: 0,\n      right_offset: 0,\n      left_pos_offset: 0,\n      right_pos_offset: 0,\n      top_offset_multiplier: 0\n    }\n  }\n};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RUFBQyxDQUE1QjtBQUErQkMsTUFBQUEsVUFBVSxFQUFFLENBQTNDO0FBQThDQyxNQUFBQSxXQUFXLEVBQUMsQ0FBMUQ7QUFBNERDLE1BQUFBLFlBQVksRUFBQyxDQUF6RTtBQUEyRUMsTUFBQUEsZUFBZSxFQUFFLENBQTVGO0FBQStGQyxNQUFBQSxnQkFBZ0IsRUFBRSxDQUFqSDtBQUFvSEMsTUFBQUEscUJBQXFCLEVBQUU7QUFBM0k7QUFEUjtBQUZhLENBQXpCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYUFfSlNfUHJvamVjdC8uL3NyYy9jaGFyYWN0ZXJNb2RlbHMuanM/MWQ3MiJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgY29uc3QgQ2hhcmFjdGVyTW9kZWxzID0ge1xuICAgICAgICAvL2xlZnRfb2Zmc2V0ID0gaG93IG11Y2ggb3ZlciBvdmVyIGluIHRoZSBmcmFtZSB0byBzaGlmdCBvdmVyIHRvIG1ha2Uga25pZ2h0IGNlbnRlcmVkIFxuICAgICAgICAvL3Bvc19vZmZzZXQgPSBob3cgbXVjaCB0byBiZSBvZmZzZXQgdG8gbWFrZSBmcmFtZXMgb24gc2NyZWVuIG1hdGNoIHdoZXJlIHRoZXkgc2hvdWxkIGJlXG5cbiAgICAgICAga25pZ2h0OiB7SWRsZToge3JvdzogMSwgbnVtX3Jvd3M6IDEsIGZyYW1lczogMTAsIG1heF9mcmFtZXM6IDEwLCBsZWZ0X29mZnNldDogNDAsIHJpZ2h0X29mZnNldDogNDAsIGxlZnRfcG9zX29mZnNldDogLTYwLCByaWdodF9wb3Nfb2Zmc2V0OiAtMjAsIHRvcF9vZmZzZXRfbXVsdGlwbGllcjogMS45IH0sXG4gICAgICAgICAgICAgICAgIGxBdHRhY2s6IHtyb3c6IDEsIG51bV9yb3dzOiAxLCBmcmFtZXM6IDEwLCBtYXhfZnJhbWVzOiAxMCwgbGVmdF9vZmZzZXQ6IC0yMCwgcmlnaHRfb2Zmc2V0OiAwLCBsZWZ0X3Bvc19vZmZzZXQ6IC0yNjAscmlnaHRfcG9zX29mZnNldDogLTEyMCwgdG9wX29mZnNldF9tdWx0aXBsaWVyOiAxLjl9LFxuICAgICAgICAgICAgICAgICBoQXR0YWNrOiB7cm93OiAxLCBudW1fcm93czogMSwgZnJhbWVzOiA2LCBtYXhfZnJhbWVzOiA2LCBsZWZ0X29mZnNldDogMjAsIHJpZ2h0X29mZnNldDogMjAsbGVmdF9wb3Nfb2Zmc2V0OiAwLHJpZ2h0X3Bvc19vZmZzZXQ6IDAsIHRvcF9vZmZzZXRfbXVsdGlwbGllcjogMS45fSxcbiAgICAgICAgICAgICAgICAganVtcDoge3JvdzogMSwgbnVtX3Jvd3M6IDEsIGZyYW1lczogMywgbWF4X2ZyYW1lczogMywgbGVmdF9vZmZzZXQ6IDIwLCByaWdodF9vZmZzZXQ6IDIwLCBwb3Nfb2Zmc2V0OiAwLGxlZnRfcG9zX29mZnNldDogLTEzMCxyaWdodF9wb3Nfb2Zmc2V0OiAtMTAwLCB0b3Bfb2Zmc2V0X211bHRpcGxpZXI6IDEuOX0sXG4gICAgICAgICAgICAgICAgIGp1bXBGYWxsaW5iZXR3ZWVuOiB7cm93OiAxLCBudW1fcm93czogMSwgZnJhbWVzOiAyLCBtYXhfZnJhbWVzOiAyLCBsZWZ0X29mZnNldDogMjAsIHJpZ2h0X29mZnNldDogMjAsbGVmdF9wb3Nfb2Zmc2V0OiAwLHJpZ2h0X3Bvc19vZmZzZXQ6IDAsIHRvcF9vZmZzZXRfbXVsdGlwbGllcjogMS45fSxcbiAgICAgICAgICAgICAgICAgUnVuOiB7IHJvdzogMSwgbnVtX3Jvd3M6IDEsIGZyYW1lczogMTAsIG1heF9mcmFtZXM6IDEwLCBsZWZ0X29mZnNldDogNDAsIHJpZ2h0X29mZnNldDogNDAsIGxlZnRfcG9zX29mZnNldDogLTQwLHJpZ2h0X3Bvc19vZmZzZXQ6LTQwLCB0b3Bfb2Zmc2V0X211bHRpcGxpZXI6IDEuOX0sXG4gICAgICAgICAgICAgICAgIGhpdDogeyByb3c6IDEsIG51bV9yb3dzOiAxLCBmcmFtZXM6IDEsIG1heF9mcmFtZXM6IDEsIGxlZnRfb2Zmc2V0OiAwLCByaWdodF9vZmZzZXQ6IDAsbGVmdF9wb3Nfb2Zmc2V0OiAtMTIwLHJpZ2h0X3Bvc19vZmZzZXQ6LTgwLCB0b3Bfb2Zmc2V0X211bHRpcGxpZXI6IDEuOX0sXG4gICAgICAgICAgICAgICAgIGRlYXRoOiB7IHJvdzogMSwgbnVtX3Jvd3M6IDEsIGZyYW1lczogMTAsIG1heF9mcmFtZXM6IDEwLCBsZWZ0X29mZnNldDogMCwgcmlnaHRfb2Zmc2V0OiAwLGxlZnRfcG9zX29mZnNldDogLTI2MCxyaWdodF9wb3Nfb2Zmc2V0Oi0xMjAsIHRvcF9vZmZzZXRfbXVsdGlwbGllcjogMS45fSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICBcbiAgICAgICAgc2tlbGV0b246e0lkbGU6IHtyb3c6IDQsIG51bV9yb3dzOiA1LGZyYW1lczo0LCBtYXhfZnJhbWVzOiAxMywgbGVmdF9vZmZzZXQ6MCxyaWdodF9vZmZzZXQ6MCxsZWZ0X3Bvc19vZmZzZXQ6LTgwLCByaWdodF9wb3Nfb2Zmc2V0Oi04MCwgdG9wX29mZnNldF9tdWx0aXBsaWVyOiAxLjh9LFxuICAgICAgICAgICAgICAgICAgbEF0dGFjazoge3JvdzoxLCBudW1fcm93czogNSxmcmFtZXM6IDEzLCBtYXhfZnJhbWVzOiAxMywgbGVmdF9vZmZzZXQ6IDAsIHJpZ2h0X29mZnNldDowLCBsZWZ0X3Bvc19vZmZzZXQ6LTgwLCByaWdodF9wb3Nfb2Zmc2V0OiAtODAsIHRvcF9vZmZzZXRfbXVsdGlwbGllcjogNC42fSxcbiAgICAgICAgICAgICAgICAgIGRlYXRoOiB7cm93OjIsIG51bV9yb3dzOiA1LCBmcmFtZXM6IDEzLCBtYXhfZnJhbWVzOiAxMywgbGVmdF9vZmZzZXQ6IDAsIHJpZ2h0X29mZnNldDowLCBsZWZ0X3Bvc19vZmZzZXQ6LTgwLCByaWdodF9wb3Nfb2Zmc2V0OiAtODAsIHRvcF9vZmZzZXRfbXVsdGlwbGllcjogMS43MH0sXG4gICAgICAgICAgICAgICAgICBoaXQ6IHtyb3c6MiwgbnVtX3Jvd3M6IDUsIGZyYW1lczogMywgbWF4X2ZyYW1lczogMTMsIGxlZnRfb2Zmc2V0OiAwLCByaWdodF9vZmZzZXQ6MCwgbGVmdF9wb3Nfb2Zmc2V0Oi04MCwgcmlnaHRfcG9zX29mZnNldDogLTgwLCB0b3Bfb2Zmc2V0X211bHRpcGxpZXI6IDEuNjV9LFxuICAgICAgICAgICAgICAgICAgUnVuOiB7cm93OjMsIG51bV9yb3dzOiA1LCBmcmFtZXM6IDEyLCBtYXhfZnJhbWVzOiAxMywgbGVmdF9vZmZzZXQ6IDAsIHJpZ2h0X29mZnNldDowLCBsZWZ0X3Bvc19vZmZzZXQ6LTgwLCByaWdodF9wb3Nfb2Zmc2V0OiAtODAsIHRvcF9vZmZzZXRfbXVsdGlwbGllcjogMS4zNX0sXG5cbiAgICAgICAgfSxcblxufVxuXG5leHBvcnQgY29uc3QgQmFja2dyb3VuZE1vZGVscyA9IHtcbiAgICAgICAgXG4gICAgICAgIGxpZ2h0bmluZzoge3R5cGVBOiB7cm93OiAxLCBudW1fcm93czogMixmcmFtZXM6NiwgbWF4X2ZyYW1lczogNiwgbGVmdF9vZmZzZXQ6MCxyaWdodF9vZmZzZXQ6MCxsZWZ0X3Bvc19vZmZzZXQ6IDAsIHJpZ2h0X3Bvc19vZmZzZXQ6IDAsIHRvcF9vZmZzZXRfbXVsdGlwbGllcjogMH0sXG4gICAgICAgICAgICAgICAgICAgIHR5cGVCOiB7cm93OiAyLCBudW1fcm93czogMixmcmFtZXM6NiwgbWF4X2ZyYW1lczogNiwgbGVmdF9vZmZzZXQ6MCxyaWdodF9vZmZzZXQ6MCxsZWZ0X3Bvc19vZmZzZXQ6IDAsIHJpZ2h0X3Bvc19vZmZzZXQ6IDAsIHRvcF9vZmZzZXRfbXVsdGlwbGllcjogMH1cbiAgICAgICAgICAgICAgICAgICB9XG59XG4iXSwibmFtZXMiOlsiQ2hhcmFjdGVyTW9kZWxzIiwia25pZ2h0IiwiSWRsZSIsInJvdyIsIm51bV9yb3dzIiwiZnJhbWVzIiwibWF4X2ZyYW1lcyIsImxlZnRfb2Zmc2V0IiwicmlnaHRfb2Zmc2V0IiwibGVmdF9wb3Nfb2Zmc2V0IiwicmlnaHRfcG9zX29mZnNldCIsInRvcF9vZmZzZXRfbXVsdGlwbGllciIsImxBdHRhY2siLCJoQXR0YWNrIiwianVtcCIsInBvc19vZmZzZXQiLCJqdW1wRmFsbGluYmV0d2VlbiIsIlJ1biIsImhpdCIsImRlYXRoIiwic2tlbGV0b24iLCJCYWNrZ3JvdW5kTW9kZWxzIiwibGlnaHRuaW5nIiwidHlwZUEiLCJ0eXBlQiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/characterModels.js\n");

/***/ }),

/***/ "./src/continueScreen.js":
/*!*******************************!*\
  !*** ./src/continueScreen.js ***!
  \*******************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"ContinueScreen\": function() { return /* binding */ ContinueScreen; }\n/* harmony export */ });\n/* harmony import */ var _stage__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./stage */ \"./src/stage.js\");\n/* harmony import */ var _start_menu__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./start_menu */ \"./src/start_menu.js\");\n\n\nclass ContinueScreen {\n  constructor(game) {\n    this.game = game;\n    this.ctx = this.game.ctx;\n    this.dimensions = this.game.dimensions;\n    this.continueDelay = 100; //number of frames to delay the continue option\n\n    this.optionSelected = 'Yes';\n    this.score = this.game.currentScreen.score;\n    this.score.timer.stopTimer();\n    this.moveLockout = true;\n    setTimeout(() => this.moveLockout = false, 1000);\n  }\n\n  draw() {\n    this.ctx.globalAlpha = 0.5; // set global alpha\n\n    this.ctx.fillStyle = \"gray\";\n    this.ctx.fillRect(0, 0, this.dimensions.width, this.dimensions.height);\n    this.ctx.globalAlpha = 1.0;\n    this.ctx.font = '100px Sans-serif';\n    this.ctx.strokeStyle = 'black';\n    this.ctx.lineWidth = 8;\n    this.ctx.fillStyle = 'red';\n    this.ctx.strokeText('Game Over', this.dimensions.width / 2, this.dimensions.height / 2 - 100);\n    this.ctx.fillText('Game Over', this.dimensions.width / 2, this.dimensions.height / 2 - 100);\n    this.ctx.fillStyle = 'yellow';\n    this.ctx.font = '60px Sans-serif';\n    this.ctx.strokeText('Retry?', this.dimensions.width / 2, this.dimensions.height / 2 + 100);\n    this.ctx.fillText('Retry?', this.dimensions.width / 2, this.dimensions.height / 2 + 100);\n    this.ctx.font = '40px Sans-serif';\n    this.ctx.fillStyle = this.optionSelected === 'Yes' ? 'yellow' : 'red';\n    this.ctx.strokeText('Yes', this.dimensions.width / 2 - 50, this.dimensions.height - 60);\n    this.ctx.fillText('Yes', this.dimensions.width / 2 - 50, this.dimensions.height - 60);\n    this.ctx.fillStyle = this.optionSelected === 'No' ? 'yellow' : 'red';\n    this.ctx.strokeText('No', this.dimensions.width / 2 + 50, this.dimensions.height - 60);\n    this.ctx.fillText('No', this.dimensions.width / 2 + 50, this.dimensions.height - 60);\n  }\n\n  move(command) {\n    if (!this.moveLockout) if (command.left || command.right) {\n      this.optionSelected = this.optionSelected === 'Yes' ? 'No' : 'Yes';\n      this.playSound();\n      this.moveLockout = true;\n      setTimeout(() => this.moveLockout = false, 200);\n    }\n  }\n\n  performAction(command) {\n    if (!this.moveLockout) {\n      if (command.lAttack) {\n        if (this.optionSelected === 'Yes') {\n          this.playSound();\n          this.game.currentScreen = new _stage__WEBPACK_IMPORTED_MODULE_0__.Stage(this.game);\n        } else {\n          this.playSound();\n          this.game.currentScreen.stopMusic();\n          this.game.currentScreen = new _start_menu__WEBPACK_IMPORTED_MODULE_1__.StartMenu(this.game);\n        }\n      }\n    }\n  }\n\n  playSound() {\n    if (this.game.options.sound === 'on') {\n      var sound = new Howl({\n        src: ['./sounds/menu_sounds/MENU_Pick.wav']\n      });\n      sound.play();\n    }\n  }\n\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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dUI7QUFDbkIsVUFBSWMsT0FBTyxDQUFDSyxPQUFaLEVBQXFCO0FBQ2pCLFlBQUcsS0FBS3hCLGNBQUwsS0FBd0IsS0FBM0IsRUFBa0M7QUFDOUIsZUFBS3NCLFNBQUw7QUFDQSxlQUFLMUIsSUFBTCxDQUFVTSxhQUFWLEdBQTBCLElBQUlWLHlDQUFKLENBQVUsS0FBS0ksSUFBZixDQUExQjtBQUNILFNBSEQsTUFHTztBQUNILGVBQUswQixTQUFMO0FBQ0EsZUFBSzFCLElBQUwsQ0FBVU0sYUFBVixDQUF3QnVCLFNBQXhCO0FBQ0EsZUFBSzdCLElBQUwsQ0FBVU0sYUFBVixHQUEwQixJQUFJVCxrREFBSixDQUFjLEtBQUtHLElBQW5CLENBQTFCO0FBQ0g7QUFDSjtBQUNKO0FBQ0o7O0FBRUQwQixFQUFBQSxTQUFTLEdBQUc7QUFDUixRQUFHLEtBQUsxQixJQUFMLENBQVU4QixPQUFWLENBQWtCQyxLQUFsQixLQUE0QixJQUEvQixFQUFxQztBQUNqQyxVQUFJQSxLQUFLLEdBQUcsSUFBSUMsSUFBSixDQUFTO0FBQ2pCQyxRQUFBQSxHQUFHLEVBQUUsQ0FBQyxvQ0FBRDtBQURZLE9BQVQsQ0FBWjtBQUlBRixNQUFBQSxLQUFLLENBQUNHLElBQU47QUFDSDtBQUVKOztBQTFFdUIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9hQV9KU19Qcm9qZWN0Ly4vc3JjL2NvbnRpbnVlU2NyZWVuLmpzPzA4N2IiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgU3RhZ2UgfSBmcm9tIFwiLi9zdGFnZVwiO1xuaW1wb3J0IHsgU3RhcnRNZW51IH0gZnJvbSBcIi4vc3RhcnRfbWVudVwiO1xuXG5leHBvcnQgY2xhc3MgQ29udGludWVTY3JlZW4ge1xuICAgIGNvbnN0cnVjdG9yKGdhbWUpIHtcbiAgICAgICAgdGhpcy5nYW1lID0gZ2FtZTtcbiAgICAgICAgdGhpcy5jdHggPSB0aGlzLmdhbWUuY3R4O1xuICAgICAgICB0aGlzLmRpbWVuc2lvbnMgPSB0aGlzLmdhbWUuZGltZW5zaW9uc1xuICAgICAgICB0aGlzLmNvbnRpbnVlRGVsYXkgPSAxMDA7IC8vbnVtYmVyIG9mIGZyYW1lcyB0byBkZWxheSB0aGUgY29udGludWUgb3B0aW9uXG4gICAgICAgIHRoaXMub3B0aW9uU2VsZWN0ZWQgPSAnWWVzJztcbiAgICAgICAgdGhpcy5zY29yZSA9IHRoaXMuZ2FtZS5jdXJyZW50U2NyZWVuLnNjb3JlO1xuICAgICAgICB0aGlzLnNjb3JlLnRpbWVyLnN0b3BUaW1lcigpO1xuICAgICAgICB0aGlzLm1vdmVMb2Nrb3V0ID0gdHJ1ZTtcbiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB0aGlzLm1vdmVMb2Nrb3V0ID0gZmFsc2UsIDEwMDApXG5cblxuICAgIH1cblxuICAgIGRyYXcoKSB7XG4gICAgICAgIHRoaXMuY3R4Lmdsb2JhbEFscGhhID0gMC41OyAvLyBzZXQgZ2xvYmFsIGFscGhhXG4gICAgICAgIHRoaXMuY3R4LmZpbGxTdHlsZSA9IFwiZ3JheVwiO1xuICAgICAgICB0aGlzLmN0eC5maWxsUmVjdCgwLDAsIHRoaXMuZGltZW5zaW9ucy53aWR0aCwgdGhpcy5kaW1lbnNpb25zLmhlaWdodCk7XG4gICAgICAgIHRoaXMuY3R4Lmdsb2JhbEFscGhhID0gMS4wXG4gICAgICAgIHRoaXMuY3R4LmZvbnQgPSAnMTAwcHggU2Fucy1zZXJpZic7XG4gICAgICAgIHRoaXMuY3R4LnN0cm9rZVN0eWxlID0gJ2JsYWNrJztcbiAgICAgICAgdGhpcy5jdHgubGluZVdpZHRoID0gODtcbiAgICAgICAgdGhpcy5jdHguZmlsbFN0eWxlID0gJ3JlZCc7XG4gICAgICAgIHRoaXMuY3R4LnN0cm9rZVRleHQoJ0dhbWUgT3ZlcicsIHRoaXMuZGltZW5zaW9ucy53aWR0aC8gMiAsIHRoaXMuZGltZW5zaW9ucy5oZWlnaHQvMiAtIDEwMClcbiAgICAgICAgdGhpcy5jdHguZmlsbFRleHQoJ0dhbWUgT3ZlcicsIHRoaXMuZGltZW5zaW9ucy53aWR0aCAvIDIgLCB0aGlzLmRpbWVuc2lvbnMuaGVpZ2h0LzIgLTEwMCk7XG4gICAgICAgIHRoaXMuY3R4LmZpbGxTdHlsZSA9ICd5ZWxsb3cnXG4gICAgICAgIHRoaXMuY3R4LmZvbnQgPSAnNjBweCBTYW5zLXNlcmlmJztcbiAgICAgICAgdGhpcy5jdHguc3Ryb2tlVGV4dCgnUmV0cnk/Jyx0aGlzLmRpbWVuc2lvbnMud2lkdGggLyAyICwgdGhpcy5kaW1lbnNpb25zLmhlaWdodC8yICsgMTAwKTtcbiAgICAgICAgdGhpcy5jdHguZmlsbFRleHQoJ1JldHJ5PycsIHRoaXMuZGltZW5zaW9ucy53aWR0aCAvIDIgLCB0aGlzLmRpbWVuc2lvbnMuaGVpZ2h0LzIgKyAxMDApOyBcbiAgICAgICAgdGhpcy5jdHguZm9udCA9ICc0MHB4IFNhbnMtc2VyaWYnO1xuICAgICAgICB0aGlzLmN0eC5maWxsU3R5bGUgPSB0aGlzLm9wdGlvblNlbGVjdGVkID09PSAnWWVzJyA/ICd5ZWxsb3cnIDogJ3JlZCdcbiAgICAgICAgdGhpcy5jdHguc3Ryb2tlVGV4dCgnWWVzJyx0aGlzLmRpbWVuc2lvbnMud2lkdGggLyAyIC01MCAsIHRoaXMuZGltZW5zaW9ucy5oZWlnaHQgLSA2MCk7XG4gICAgICAgIHRoaXMuY3R4LmZpbGxUZXh0KCdZZXMnLCB0aGlzLmRpbWVuc2lvbnMud2lkdGgvMiAtIDUwLCB0aGlzLmRpbWVuc2lvbnMuaGVpZ2h0IC0gNjApXG4gICAgICAgIHRoaXMuY3R4LmZpbGxTdHlsZSA9IHRoaXMub3B0aW9uU2VsZWN0ZWQgPT09ICdObycgPyAneWVsbG93JyA6ICdyZWQnXG4gICAgICAgIHRoaXMuY3R4LnN0cm9rZVRleHQoJ05vJyx0aGlzLmRpbWVuc2lvbnMud2lkdGggLyAyICs1MCAsIHRoaXMuZGltZW5zaW9ucy5oZWlnaHQgLSA2MCk7XG4gICAgICAgIHRoaXMuY3R4LmZpbGxUZXh0KCdObycsIHRoaXMuZGltZW5zaW9ucy53aWR0aC8yICsgNTAsIHRoaXMuZGltZW5zaW9ucy5oZWlnaHQgLSA2MCkgXG4gICAgfVxuXG4gICAgbW92ZShjb21tYW5kKSB7XG4gICAgICAgIGlmICghdGhpcy5tb3ZlTG9ja291dClcbiAgICAgICAgICAgIGlmIChjb21tYW5kLmxlZnQgfHwgY29tbWFuZC5yaWdodCkge1xuICAgICAgICAgICAgICAgIHRoaXMub3B0aW9uU2VsZWN0ZWQgPSB0aGlzLm9wdGlvblNlbGVjdGVkID09PSAnWWVzJyA/ICdObycgOiAnWWVzJ1xuICAgICAgICAgICAgICAgIHRoaXMucGxheVNvdW5kKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5tb3ZlTG9ja291dCA9IHRydWU7XG4gICAgICAgICAgICAgICAgc2V0VGltZW91dCggKCkgPT4gdGhpcy5tb3ZlTG9ja291dCA9IGZhbHNlLCAyMDApXG4gICAgICAgICAgICB9XG5cbiAgICB9XG5cbiAgICBwZXJmb3JtQWN0aW9uKGNvbW1hbmQpIHtcbiAgICAgICAgaWYgKCF0aGlzLm1vdmVMb2Nrb3V0KSB7XG4gICAgICAgICAgICBpZiAoY29tbWFuZC5sQXR0YWNrKSB7XG4gICAgICAgICAgICAgICAgaWYodGhpcy5vcHRpb25TZWxlY3RlZCA9PT0gJ1llcycpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbGF5U291bmQoKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5nYW1lLmN1cnJlbnRTY3JlZW4gPSBuZXcgU3RhZ2UodGhpcy5nYW1lKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsYXlTb3VuZCgpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmdhbWUuY3VycmVudFNjcmVlbi5zdG9wTXVzaWMoKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5nYW1lLmN1cnJlbnRTY3JlZW4gPSBuZXcgU3RhcnRNZW51KHRoaXMuZ2FtZSlcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwbGF5U291bmQoKSB7XG4gICAgICAgIGlmKHRoaXMuZ2FtZS5vcHRpb25zLnNvdW5kID09PSAnb24nKSB7XG4gICAgICAgICAgICB2YXIgc291bmQgPSBuZXcgSG93bCh7XG4gICAgICAgICAgICAgICAgc3JjOiBbJy4vc291bmRzL21lbnVfc291bmRzL01FTlVfUGljay53YXYnXVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHNvdW5kLnBsYXkoKTtcbiAgICAgICAgfVxuXG4gICAgfVxufSJdLCJuYW1lcyI6WyJTdGFnZSIsIlN0YXJ0TWVudSIsIkNvbnRpbnVlU2NyZWVuIiwiY29uc3RydWN0b3IiLCJnYW1lIiwiY3R4IiwiZGltZW5zaW9ucyIsImNvbnRpbnVlRGVsYXkiLCJvcHRpb25TZWxlY3RlZCIsInNjb3JlIiwiY3VycmVudFNjcmVlbiIsInRpbWVyIiwic3RvcFRpbWVyIiwibW92ZUxvY2tvdXQiLCJzZXRUaW1lb3V0IiwiZHJhdyIsImdsb2JhbEFscGhhIiwiZmlsbFN0eWxlIiwiZmlsbFJlY3QiLCJ3aWR0aCIsImhlaWdodCIsImZvbnQiLCJzdHJva2VTdHlsZSIsImxpbmVXaWR0aCIsInN0cm9rZVRleHQiLCJmaWxsVGV4dCIsIm1vdmUiLCJjb21tYW5kIiwibGVmdCIsInJpZ2h0IiwicGxheVNvdW5kIiwicGVyZm9ybUFjdGlvbiIsImxBdHRhY2siLCJzdG9wTXVzaWMiLCJvcHRpb25zIiwic291bmQiLCJIb3dsIiwic3JjIiwicGxheSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/continueScreen.js\n");

/***/ }),

/***/ "./src/cpuCharacter.js":
/*!*****************************!*\
  !*** ./src/cpuCharacter.js ***!
  \*****************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"cpuCharacter\": function() { return /* binding */ cpuCharacter; }\n/* harmony export */ });\n/* harmony import */ var _character__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./character */ \"./src/character.js\");\n\nclass cpuCharacter extends _character__WEBPACK_IMPORTED_MODULE_0__.Character {\n  constructor(game, startPos, enermyType = 'skeleton', scoreBase = 50) {\n    super(game, startPos, enermyType, Math.floor(Math.random() * 2) === 1 ? 'left' : 'right');\n    this.hitBoxRange = [175, 50];\n    this.agressionRating = this.getAggressionRating(); // a number between 0-100, indicating likelyhood that enemy attacks while in range\n\n    this.ActionLockOut = false;\n    this.scoreBase = scoreBase;\n  }\n\n  getAggressionRating() {\n    if (this.game.options.difficulty === 'easy') {\n      return 10;\n    }\n  }\n\n  determineNextAction() {\n    //simple logic AI.  Maybe make this easy mode later\n    if (!this.stunned && !this.ActionLockOut) //if not in bounds\n      if (!this.checkXInbounds(this.position[0])) {\n        this.move();\n      } else {\n        //move toards player or randomly attack\n        this.isPlayerInRange() ? this.getRandomInRangeAction() : this.move();\n      }\n  }\n\n  facePlayer() {\n    if (this.game.currentScreen.player.position[0] < this.position[0]) {\n      this.directionFaced = 'left';\n    } else {\n      this.directionFaced = 'right';\n    }\n  }\n\n  isPlayerInRange() {\n    let playerPosition = this.game.currentScreen.player.position; // console.log(this.position[0] - playerPosition[0] < this.hitBoxRange[0])\n\n    if (Math.abs(this.position[0] - playerPosition[0]) < this.hitBoxRange[0] && Math.abs(this.position[1] - playerPosition[1]) < this.hitBoxRange[1] && this.game.currentScreen.player.currentAction !== 'jump') {\n      return true;\n    }\n\n    return false;\n  }\n\n  getRandomInRangeAction() {\n    if (Math.random() * 100 < this.agressionRating) this.performLightAttack();\n  }\n\n  move() {\n    this.facePlayer();\n\n    if (!this.checkXInbounds(this.position[0])) {\n      this.xVel = this.directionFaced === 'left' ? -2 : 2;\n    } else {\n      this.xVel = Math.floor(Math.random()) + 1;\n      this.yVel = Math.floor(Math.random() * 2);\n      if (this.directionFaced === 'left') this.xVel = -this.xVel;\n      if (this.position[1] > this.game.currentScreen.player.position[1]) this.yVel = -this.yVel;\n    }\n\n    this.updateCurrentPos();\n  }\n\n  updateCurrentPos() {\n    this.position[0] += this.xVel;\n    this.position[1] += this.yVel;\n  }\n\n  lockOutAction() {\n    this.ActionLockOut = true;\n    this.xVel = 0;\n    this.yVel = 0;\n    setTimeout(() => this.ActionLockOut = false, 500);\n  }\n\n  posture() {}\n\n  getAttackTimeOut() {}\n\n  performAction() {}\n\n  getHitSound() {}\n\n  getDeathSound() {}\n\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9hQV9KU19Qcm9qZWN0Ly4vc3JjL2NwdUNoYXJhY3Rlci5qcz8wZDYyIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IENoYXJhY3RlciB9IGZyb20gXCIuL2NoYXJhY3RlclwiO1xuXG5leHBvcnQgY2xhc3MgY3B1Q2hhcmFjdGVyIGV4dGVuZHMgQ2hhcmFjdGVye1xuICAgIGNvbnN0cnVjdG9yKGdhbWUsIHN0YXJ0UG9zLCBlbmVybXlUeXBlID0gJ3NrZWxldG9uJywgc2NvcmVCYXNlID0gNTApIHtcbiAgICAgICAgc3VwZXIoZ2FtZSwgc3RhcnRQb3MsIGVuZXJteVR5cGUsIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDIpID09PSAxID8gJ2xlZnQnIDogJ3JpZ2h0JylcbiAgICAgICAgdGhpcy5oaXRCb3hSYW5nZSA9IFsxNzUsIDUwXVxuICAgICAgICB0aGlzLmFncmVzc2lvblJhdGluZyA9IHRoaXMuZ2V0QWdncmVzc2lvblJhdGluZygpIC8vIGEgbnVtYmVyIGJldHdlZW4gMC0xMDAsIGluZGljYXRpbmcgbGlrZWx5aG9vZCB0aGF0IGVuZW15IGF0dGFja3Mgd2hpbGUgaW4gcmFuZ2VcbiAgICAgICAgdGhpcy5BY3Rpb25Mb2NrT3V0ID0gZmFsc2U7XG4gICAgICAgIHRoaXMuc2NvcmVCYXNlID0gc2NvcmVCYXNlO1xuICAgIH1cblxuICAgIGdldEFnZ3Jlc3Npb25SYXRpbmcoKSB7XG4gICAgICAgIGlmKHRoaXMuZ2FtZS5vcHRpb25zLmRpZmZpY3VsdHkgPT09ICdlYXN5Jykge1xuICAgICAgICAgICAgcmV0dXJuIDEwO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZGV0ZXJtaW5lTmV4dEFjdGlvbigpIHtcbiAgICAgICAgLy9zaW1wbGUgbG9naWMgQUkuICBNYXliZSBtYWtlIHRoaXMgZWFzeSBtb2RlIGxhdGVyXG4gICAgICAgIGlmKCF0aGlzLnN0dW5uZWQgJiYgIXRoaXMuQWN0aW9uTG9ja091dClcbiAgICAgICAgICAgIC8vaWYgbm90IGluIGJvdW5kc1xuICAgICAgICAgICAgaWYgKCF0aGlzLmNoZWNrWEluYm91bmRzKHRoaXMucG9zaXRpb25bMF0pKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5tb3ZlKCApXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAvL21vdmUgdG9hcmRzIHBsYXllciBvciByYW5kb21seSBhdHRhY2tcbiAgICAgICAgICAgICAgICB0aGlzLmlzUGxheWVySW5SYW5nZSgpID8gdGhpcy5nZXRSYW5kb21JblJhbmdlQWN0aW9uKCkgOiB0aGlzLm1vdmUoKSAgICBcbiAgICAgICAgICAgIH1cbiAgICB9XG5cbiAgICBmYWNlUGxheWVyKCkge1xuICAgICAgICBpZih0aGlzLmdhbWUuY3VycmVudFNjcmVlbi5wbGF5ZXIucG9zaXRpb25bMF0gPCB0aGlzLnBvc2l0aW9uWzBdKSB7XG4gICAgICAgICAgICB0aGlzLmRpcmVjdGlvbkZhY2VkID0gJ2xlZnQnXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmRpcmVjdGlvbkZhY2VkID0gJ3JpZ2h0JztcbiAgICAgICAgfVxuXG4gICAgfVxuXG4gICAgaXNQbGF5ZXJJblJhbmdlKCkge1xuICAgICAgICBsZXQgcGxheWVyUG9zaXRpb24gPSB0aGlzLmdhbWUuY3VycmVudFNjcmVlbi5wbGF5ZXIucG9zaXRpb25cbiAgICAgICAgLy8gY29uc29sZS5sb2codGhpcy5wb3NpdGlvblswXSAtIHBsYXllclBvc2l0aW9uWzBdIDwgdGhpcy5oaXRCb3hSYW5nZVswXSlcbiAgICAgICAgaWYgKChNYXRoLmFicyh0aGlzLnBvc2l0aW9uWzBdIC0gcGxheWVyUG9zaXRpb25bMF0pIDwgdGhpcy5oaXRCb3hSYW5nZVswXSkgJiZcbiAgICAgICAgICAgIChNYXRoLmFicyh0aGlzLnBvc2l0aW9uWzFdIC0gcGxheWVyUG9zaXRpb25bMV0pIDwgdGhpcy5oaXRCb3hSYW5nZVsxXSkgJiZcbiAgICAgICAgICAgIHRoaXMuZ2FtZS5jdXJyZW50U2NyZWVuLnBsYXllci5jdXJyZW50QWN0aW9uICE9PSAnanVtcCcpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgZ2V0UmFuZG9tSW5SYW5nZUFjdGlvbigpIHtcbiAgICAgICBpZiggTWF0aC5yYW5kb20oKSAqIDEwMCA8IHRoaXMuYWdyZXNzaW9uUmF0aW5nKSB0aGlzLnBlcmZvcm1MaWdodEF0dGFjaygpXG4gICAgfVxuXG4gIFxuXG4gICAgbW92ZSgpIHtcbiAgICAgICAgdGhpcy5mYWNlUGxheWVyKCk7XG4gICAgICAgIGlmKCF0aGlzLmNoZWNrWEluYm91bmRzKHRoaXMucG9zaXRpb25bMF0pKSB7XG4gICAgICAgICAgICB0aGlzLnhWZWwgPSB0aGlzLmRpcmVjdGlvbkZhY2VkID09PSAnbGVmdCcgPyAtMiA6IDI7IFxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy54VmVsID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpKSArIDFcbiAgICAgICAgICAgIHRoaXMueVZlbCA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDIpXG4gICAgICAgICAgICBpZih0aGlzLmRpcmVjdGlvbkZhY2VkID09PSAnbGVmdCcpIHRoaXMueFZlbCA9IC10aGlzLnhWZWw7XG4gICAgICAgICAgICBpZih0aGlzLnBvc2l0aW9uWzFdID4gdGhpcy5nYW1lLmN1cnJlbnRTY3JlZW4ucGxheWVyLnBvc2l0aW9uWzFdKSB0aGlzLnlWZWwgPSAtdGhpcy55VmVsXG4gICAgICAgIH1cbiAgICAgICAgdGhpcy51cGRhdGVDdXJyZW50UG9zKCk7XG4gICAgfVxuXG4gICAgdXBkYXRlQ3VycmVudFBvcygpIHtcbiAgICAgICAgdGhpcy5wb3NpdGlvblswXSArPSB0aGlzLnhWZWw7XG4gICAgICAgIHRoaXMucG9zaXRpb25bMV0gKz0gdGhpcy55VmVsO1xuICAgIH1cbiAgICBcbiAgICBsb2NrT3V0QWN0aW9uKCkge1xuICAgICAgICB0aGlzLkFjdGlvbkxvY2tPdXQgPSB0cnVlO1xuICAgICAgICB0aGlzLnhWZWwgPSAwO1xuICAgICAgICB0aGlzLnlWZWwgPSAwO1xuICAgICAgICBzZXRUaW1lb3V0KCAoKSA9PiB0aGlzLkFjdGlvbkxvY2tPdXQgPSBmYWxzZSwgNTAwKVxuICAgIH1cbiAgIFxuICAgIHBvc3R1cmUoKSB7XG5cbiAgICB9XG5cbiAgICBnZXRBdHRhY2tUaW1lT3V0KCkge1xuXG4gICAgfVxuXG4gICAgcGVyZm9ybUFjdGlvbigpIHtcblxuICAgIH1cblxuICAgIGdldEhpdFNvdW5kKCkge31cblxuICAgIGdldERlYXRoU291bmQoKSB7fVxuXG5cbn0iXSwibmFtZXMiOlsiQ2hhcmFjdGVyIiwiY3B1Q2hhcmFjdGVyIiwiY29uc3RydWN0b3IiLCJnYW1lIiwic3RhcnRQb3MiLCJlbmVybXlUeXBlIiwic2NvcmVCYXNlIiwiTWF0aCIsImZsb29yIiwicmFuZG9tIiwiaGl0Qm94UmFuZ2UiLCJhZ3Jlc3Npb25SYXRpbmciLCJnZXRBZ2dyZXNzaW9uUmF0aW5nIiwiQWN0aW9uTG9ja091dCIsIm9wdGlvbnMiLCJkaWZmaWN1bHR5IiwiZGV0ZXJtaW5lTmV4dEFjdGlvbiIsInN0dW5uZWQiLCJjaGVja1hJbmJvdW5kcyIsInBvc2l0aW9uIiwibW92ZSIsImlzUGxheWVySW5SYW5nZSIsImdldFJhbmRvbUluUmFuZ2VBY3Rpb24iLCJmYWNlUGxheWVyIiwiY3VycmVudFNjcmVlbiIsInBsYXllciIsImRpcmVjdGlvbkZhY2VkIiwicGxheWVyUG9zaXRpb24iLCJhYnMiLCJjdXJyZW50QWN0aW9uIiwicGVyZm9ybUxpZ2h0QXR0YWNrIiwieFZlbCIsInlWZWwiLCJ1cGRhdGVDdXJyZW50UG9zIiwibG9ja091dEFjdGlvbiIsInNldFRpbWVvdXQiLCJwb3N0dXJlIiwiZ2V0QXR0YWNrVGltZU91dCIsInBlcmZvcm1BY3Rpb24iLCJnZXRIaXRTb3VuZCIsImdldERlYXRoU291bmQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/cpuCharacter.js\n");

/***/ }),

/***/ "./src/game.js":
/*!*********************!*\
  !*** ./src/game.js ***!
  \*********************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"Game\": function() { return /* binding */ Game; }\n/* harmony export */ });\n/* harmony import */ var _character__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./character */ \"./src/character.js\");\n/* harmony import */ var _gameInstruction__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./gameInstruction */ \"./src/gameInstruction.js\");\n/* harmony import */ var _options__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./options */ \"./src/options.js\");\n/* harmony import */ var _playerCharacter__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./playerCharacter */ \"./src/playerCharacter.js\");\n/* harmony import */ var _stage__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./stage */ \"./src/stage.js\");\n/* harmony import */ var _start_menu__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./start_menu */ \"./src/start_menu.js\");\n\n\n\n\n\n\nclass Game {\n  constructor(canvas) {\n    this.ctx = canvas.getContext(\"2d\");\n    this.dimensions = {\n      width: canvas.width,\n      height: canvas.height\n    };\n    this.options = new _options__WEBPACK_IMPORTED_MODULE_2__.Options();\n    this.startMenu();\n    this.controller = {\n      up: false,\n      down: false,\n      left: false,\n      right: false,\n      lAttack: false,\n      hAttack: false,\n      jump: false,\n      throw: false\n    };\n    this.update();\n    this.ctx.webkitImageSmoothingEnabled = false;\n    this.ctx.imageSmoothingEnabled = false;\n  }\n\n  startMenu() {\n    this.currentScreen = new _start_menu__WEBPACK_IMPORTED_MODULE_5__.StartMenu(this);\n  }\n\n  startInstructions() {\n    this.currentScreen = new _gameInstruction__WEBPACK_IMPORTED_MODULE_1__.GameInstructions(this);\n  }\n\n  startGame() {\n    this.currentScreen = new _stage__WEBPACK_IMPORTED_MODULE_4__.Stage(this);\n  }\n\n  startDashTimeOut() {\n    this.dashTimeOut = setTimeout(() => {\n      this.dashWindow = null;\n    }, 2000);\n  }\n\n  setKeyDown(command) {\n    if (command === 'left' || command === 'right') {\n      if (this.dashWindow && this.dashWindow.direction === command) {\n        if (this.dashWindow.numUp > 0) this.dashWindow.numDown++;\n      } else {\n        this.dashWindow = {\n          numDown: 1,\n          numUp: 0,\n          direction: command\n        };\n        this.startDashTimeOut();\n      }\n    }\n\n    this.controller[`${command}`] = true;\n  }\n\n  setKeyUp(command) {\n    if (command === 'left' || command === 'right') {\n      if (this.dashWindow && this.dashWindow.direction === command) {\n        this.dashWindow.numUp++;\n\n        if (this.dashWindow.numDown >= 2 && this.dashWindow.numUp >= 2) {\n          if (this.currentScreen.constructor === _stage__WEBPACK_IMPORTED_MODULE_4__.Stage) {\n            this.currentScreen.player.dash(`${command}`);\n            this.dashTimeOut = null;\n          }\n        }\n      }\n    }\n\n    this.controller[`${command}`] = false;\n  }\n\n  checkInputs() {\n    let moveInputs = {\n      left: this.controller.left,\n      up: this.controller.up,\n      right: this.controller.right,\n      down: this.controller.down\n    };\n    let actionInputs = {\n      lAttack: this.controller.lAttack,\n      hAttack: this.controller.hAttack,\n      jump: this.controller.jump,\n      throw: this.controller.throw\n    };\n    this.currentScreen.move(moveInputs);\n    this.currentScreen.performAction(actionInputs);\n  }\n\n  update() {\n    this.currentScreen.draw(this.ctx);\n    this.checkInputs();\n\n    if (this.currentScreen.constructor === _stage__WEBPACK_IMPORTED_MODULE_4__.Stage) {\n      this.currentScreen.checkAttacksLanded();\n      this.currentScreen.checkKilledEnemies();\n      this.currentScreen.checkKilledPlayer();\n      this.currentScreen.addNewEnemies();\n      this.currentScreen.enemies.forEach(enemy => enemy.determineNextAction());\n    }\n\n    requestAnimationFrame(this.update.bind(this));\n  }\n\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFMLENBQW1CckIsV0FBbkIsS0FBbUNILHlDQUF2QyxFQUE4QztBQUMxQyxXQUFLd0IsYUFBTCxDQUFtQnFCLGtCQUFuQjtBQUNBLFdBQUtyQixhQUFMLENBQW1Cc0Isa0JBQW5CO0FBQ0EsV0FBS3RCLGFBQUwsQ0FBbUJ1QixpQkFBbkI7QUFDQSxXQUFLdkIsYUFBTCxDQUFtQndCLGFBQW5CO0FBQ0EsV0FBS3hCLGFBQUwsQ0FBbUJ5QixPQUFuQixDQUEyQkMsT0FBM0IsQ0FBb0NDLEtBQUssSUFBSUEsS0FBSyxDQUFDQyxtQkFBTixFQUE3QztBQUNIOztBQUNEQyxJQUFBQSxxQkFBcUIsQ0FBQyxLQUFLaEMsTUFBTCxDQUFZaUMsSUFBWixDQUFpQixJQUFqQixDQUFELENBQXJCO0FBQ0g7O0FBekZhIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYUFfSlNfUHJvamVjdC8uL3NyYy9nYW1lLmpzPzdkZTAiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ2hhcmFjdGVyIH0gZnJvbSBcIi4vY2hhcmFjdGVyXCI7XG5pbXBvcnQgeyBHYW1lSW5zdHJ1Y3Rpb25zIH0gZnJvbSBcIi4vZ2FtZUluc3RydWN0aW9uXCI7XG5pbXBvcnQgeyBPcHRpb25zIH0gZnJvbSBcIi4vb3B0aW9uc1wiO1xuaW1wb3J0IHsgUGxheWVyQ2hhcmFjdGVyIH0gZnJvbSBcIi4vcGxheWVyQ2hhcmFjdGVyXCI7XG5pbXBvcnQgeyBTdGFnZSB9IGZyb20gXCIuL3N0YWdlXCI7XG5pbXBvcnQgeyBTdGFydE1lbnUgfSBmcm9tIFwiLi9zdGFydF9tZW51XCI7XG5cbmV4cG9ydCBjbGFzcyBHYW1lIHtcbiAgICBjb25zdHJ1Y3RvcihjYW52YXMpIHtcbiAgICAgICAgdGhpcy5jdHggPSBjYW52YXMuZ2V0Q29udGV4dChcIjJkXCIpO1xuICAgICAgICB0aGlzLmRpbWVuc2lvbnMgPSB7d2lkdGg6IGNhbnZhcy53aWR0aCwgaGVpZ2h0OiBjYW52YXMuaGVpZ2h0fVxuICAgICAgICB0aGlzLm9wdGlvbnMgPSBuZXcgT3B0aW9ucygpO1xuICAgICAgICB0aGlzLnN0YXJ0TWVudSgpO1xuICAgICAgICB0aGlzLmNvbnRyb2xsZXIgPSB7XG4gICAgICAgICAgICB1cDogZmFsc2UsXG4gICAgICAgICAgICBkb3duOmZhbHNlLFxuICAgICAgICAgICAgbGVmdDpmYWxzZSxcbiAgICAgICAgICAgIHJpZ2h0OmZhbHNlLFxuICAgICAgICAgICAgbEF0dGFjazpmYWxzZSxcbiAgICAgICAgICAgIGhBdHRhY2s6ZmFsc2UsXG4gICAgICAgICAgICBqdW1wOmZhbHNlLFxuICAgICAgICAgICAgdGhyb3c6ZmFsc2VcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnVwZGF0ZSgpO1xuICAgICAgICB0aGlzLmN0eC53ZWJraXRJbWFnZVNtb290aGluZ0VuYWJsZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5jdHguaW1hZ2VTbW9vdGhpbmdFbmFibGVkID0gZmFsc2U7XG4gICAgfVxuICAgIHN0YXJ0TWVudSgpIHtcbiAgICAgICAgdGhpcy5jdXJyZW50U2NyZWVuID0gbmV3IFN0YXJ0TWVudSh0aGlzKTtcbiAgICB9XG4gICAgXG4gICAgc3RhcnRJbnN0cnVjdGlvbnMoKSB7XG4gICAgICAgIHRoaXMuY3VycmVudFNjcmVlbiA9IG5ldyBHYW1lSW5zdHJ1Y3Rpb25zKHRoaXMpXG4gICAgfVxuXG4gICAgc3RhcnRHYW1lKCkge1xuICAgICAgICB0aGlzLmN1cnJlbnRTY3JlZW4gPSBuZXcgU3RhZ2UodGhpcykgXG4gICAgfVxuXG4gICAgc3RhcnREYXNoVGltZU91dCgpIHtcbiAgICAgICAgdGhpcy5kYXNoVGltZU91dCA9IHNldFRpbWVvdXQoICgpID0+IHt0aGlzLmRhc2hXaW5kb3cgPSBudWxsfSwgMjAwMClcbiAgICB9XG5cbiAgICBzZXRLZXlEb3duKGNvbW1hbmQpIHtcbiAgICAgICAgaWYgKGNvbW1hbmQgPT09ICdsZWZ0JyB8fCBjb21tYW5kID09PSAncmlnaHQnKSB7XG4gICAgICAgICAgICBpZih0aGlzLmRhc2hXaW5kb3cgJiYgdGhpcy5kYXNoV2luZG93LmRpcmVjdGlvbiA9PT0gY29tbWFuZCkge1xuICAgICAgICAgICAgICAgIGlmKHRoaXMuZGFzaFdpbmRvdy5udW1VcCA+IDApIHRoaXMuZGFzaFdpbmRvdy5udW1Eb3duKys7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuZGFzaFdpbmRvdyA9IHtudW1Eb3duOiAxLG51bVVwOiAwLCBkaXJlY3Rpb246IGNvbW1hbmR9XG4gICAgICAgICAgICAgICAgdGhpcy5zdGFydERhc2hUaW1lT3V0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5jb250cm9sbGVyW2Ake2NvbW1hbmR9YF0gPSB0cnVlO1xuICAgIH1cblxuICAgIHNldEtleVVwKGNvbW1hbmQpIHtcbiAgICAgICAgaWYgKGNvbW1hbmQgPT09ICdsZWZ0JyB8fCBjb21tYW5kID09PSAncmlnaHQnKXtcbiAgICAgICAgICAgIGlmKHRoaXMuZGFzaFdpbmRvdyAmJiB0aGlzLmRhc2hXaW5kb3cuZGlyZWN0aW9uID09PSBjb21tYW5kKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5kYXNoV2luZG93Lm51bVVwKytcbiAgICAgICAgICAgICAgICBpZih0aGlzLmRhc2hXaW5kb3cubnVtRG93biA+PSAyICYmIHRoaXMuZGFzaFdpbmRvdy5udW1VcCA+PSAyKXtcbiAgICAgICAgICAgICAgICAgICAgaWYodGhpcy5jdXJyZW50U2NyZWVuLmNvbnN0cnVjdG9yID09PSBTdGFnZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50U2NyZWVuLnBsYXllci5kYXNoKGAke2NvbW1hbmR9YClcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGFzaFRpbWVPdXQgPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRoaXMuY29udHJvbGxlcltgJHtjb21tYW5kfWBdID0gZmFsc2VcblxuICAgIH1cblxuICAgIGNoZWNrSW5wdXRzKCkge1xuICAgICAgICBsZXQgbW92ZUlucHV0cyA9IHtsZWZ0OiB0aGlzLmNvbnRyb2xsZXIubGVmdCwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHVwOiB0aGlzLmNvbnRyb2xsZXIudXAsIFxuICAgICAgICAgICAgICAgICAgICAgICAgICByaWdodDogdGhpcy5jb250cm9sbGVyLnJpZ2h0LFxuICAgICAgICAgICAgICAgICAgICAgICAgICBkb3duOiB0aGlzLmNvbnRyb2xsZXIuZG93bn1cbiAgICAgICAgbGV0IGFjdGlvbklucHV0cyA9IHtsQXR0YWNrOiB0aGlzLmNvbnRyb2xsZXIubEF0dGFjayxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoQXR0YWNrOiB0aGlzLmNvbnRyb2xsZXIuaEF0dGFjaywgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAganVtcDogdGhpcy5jb250cm9sbGVyLmp1bXAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3c6IHRoaXMuY29udHJvbGxlci50aHJvd31cblxuICAgICAgICB0aGlzLmN1cnJlbnRTY3JlZW4ubW92ZShtb3ZlSW5wdXRzKVxuICAgICAgICB0aGlzLmN1cnJlbnRTY3JlZW4ucGVyZm9ybUFjdGlvbihhY3Rpb25JbnB1dHMpXG4gICAgfVxuXG4gICAgdXBkYXRlKCkge1xuICAgICAgICB0aGlzLmN1cnJlbnRTY3JlZW4uZHJhdyh0aGlzLmN0eClcbiAgICAgICAgdGhpcy5jaGVja0lucHV0cygpXG4gICAgICAgIGlmICh0aGlzLmN1cnJlbnRTY3JlZW4uY29uc3RydWN0b3IgPT09IFN0YWdlKSB7XG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRTY3JlZW4uY2hlY2tBdHRhY2tzTGFuZGVkKCk7XG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRTY3JlZW4uY2hlY2tLaWxsZWRFbmVtaWVzKCk7XG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRTY3JlZW4uY2hlY2tLaWxsZWRQbGF5ZXIoKTtcbiAgICAgICAgICAgIHRoaXMuY3VycmVudFNjcmVlbi5hZGROZXdFbmVtaWVzKCk7XG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRTY3JlZW4uZW5lbWllcy5mb3JFYWNoKCBlbmVteSA9PiBlbmVteS5kZXRlcm1pbmVOZXh0QWN0aW9uKCkpXG4gICAgICAgIH1cbiAgICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKHRoaXMudXBkYXRlLmJpbmQodGhpcykpXG4gICAgfVxuXG59XG4iXSwibmFtZXMiOlsiQ2hhcmFjdGVyIiwiR2FtZUluc3RydWN0aW9ucyIsIk9wdGlvbnMiLCJQbGF5ZXJDaGFyYWN0ZXIiLCJTdGFnZSIsIlN0YXJ0TWVudSIsIkdhbWUiLCJjb25zdHJ1Y3RvciIsImNhbnZhcyIsImN0eCIsImdldENvbnRleHQiLCJkaW1lbnNpb25zIiwid2lkdGgiLCJoZWlnaHQiLCJvcHRpb25zIiwic3RhcnRNZW51IiwiY29udHJvbGxlciIsInVwIiwiZG93biIsImxlZnQiLCJyaWdodCIsImxBdHRhY2siLCJoQXR0YWNrIiwianVtcCIsInRocm93IiwidXBkYXRlIiwid2Via2l0SW1hZ2VTbW9vdGhpbmdFbmFibGVkIiwiaW1hZ2VTbW9vdGhpbmdFbmFibGVkIiwiY3VycmVudFNjcmVlbiIsInN0YXJ0SW5zdHJ1Y3Rpb25zIiwic3RhcnRHYW1lIiwic3RhcnREYXNoVGltZU91dCIsImRhc2hUaW1lT3V0Iiwic2V0VGltZW91dCIsImRhc2hXaW5kb3ciLCJzZXRLZXlEb3duIiwiY29tbWFuZCIsImRpcmVjdGlvbiIsIm51bVVwIiwibnVtRG93biIsInNldEtleVVwIiwicGxheWVyIiwiZGFzaCIsImNoZWNrSW5wdXRzIiwibW92ZUlucHV0cyIsImFjdGlvbklucHV0cyIsIm1vdmUiLCJwZXJmb3JtQWN0aW9uIiwiZHJhdyIsImNoZWNrQXR0YWNrc0xhbmRlZCIsImNoZWNrS2lsbGVkRW5lbWllcyIsImNoZWNrS2lsbGVkUGxheWVyIiwiYWRkTmV3RW5lbWllcyIsImVuZW1pZXMiLCJmb3JFYWNoIiwiZW5lbXkiLCJkZXRlcm1pbmVOZXh0QWN0aW9uIiwicmVxdWVzdEFuaW1hdGlvbkZyYW1lIiwiYmluZCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/game.js\n");

/***/ }),

/***/ "./src/gameInstruction.js":
/*!********************************!*\
  !*** ./src/gameInstruction.js ***!
  \********************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"GameInstructions\": function() { return /* binding */ GameInstructions; }\n/* harmony export */ });\n/* harmony import */ var _characterModels__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./characterModels */ \"./src/characterModels.js\");\n\nclass GameInstructions {\n  constructor(game) {\n    this.game = game;\n    this.ctx = game.ctx;\n    this.dimensions = game.dimensions;\n    this.framesDrawn = 0;\n    this.currentFrame = 0;\n    this.currentStep = 0;\n    this.getNextStep();\n  }\n\n  draw(ctx) {\n    // console.log(this.currentFrame)\n    if (this.currentStep >= 4) {\n      this.ctx.fillStyle = 'black';\n      this.ctx.fillRect(0, 0, this.dimensions.width, this.dimensions.height);\n      this.ctx.fillStyle = 'red';\n      this.ctx.font = '80px Sans-serif';\n      this.ctx.fillText(`${this.currentInstruction}`, this.dimensions.width / 2, this.dimensions.height / 2);\n    } else {\n      this.currentFrame = this.currentFrame % this.currentData.max_frames;\n      let spriteSheet = new Image();\n\n      spriteSheet.onload = () => {\n        this.ctx.fillStyle = 'black';\n        this.ctx.fillRect(0, 0, this.dimensions.width, this.dimensions.height);\n        let spriteWidth = spriteSheet.width / this.currentData.max_frames;\n        let spriteHeight = spriteSheet.height / this.currentData.num_rows;\n        let srcX = this.currentFrame * spriteWidth + this.currentData.right_offset;\n        let srcY = spriteHeight * this.currentData.row / this.currentData.top_offset_multiplier;\n        let scaleFactor = 3;\n        this.ctx.drawImage(spriteSheet, srcX, srcY, spriteWidth, spriteHeight, this.dimensions.width / 2.6, this.dimensions.height / 2, spriteWidth * scaleFactor, spriteHeight * scaleFactor);\n        this.ctx.fillStyle = 'red';\n        this.ctx.font = '20px Sans-serif';\n        let text;\n\n        switch (this.currentStep) {\n          case 1:\n            text = 'Movement Controls: A: Left, S: down, D: right, W: up';\n            break;\n\n          case 2:\n            text = 'Use the space bar to jump';\n            break;\n\n          case 3:\n            text = 'Attack with \"J\".  Slay the skeletons before they slay you!';\n            break;\n        }\n\n        this.ctx.fillText(`${text}`, this.dimensions.width / 2, this.dimensions.height / 1.2);\n      };\n\n      spriteSheet.src = `./images/knight/${this.currentInstruction}_right.png`;\n      this.framesDrawn++;\n\n      if (this.framesDrawn >= 10) {\n        this.currentFrame++;\n        this.framesDrawn = 0;\n      }\n    }\n  }\n\n  getNextStep() {\n    this.currentStep++;\n\n    if (this.currentStep === 1) {\n      this.currentInstruction = 'Run';\n      this.currentData = _characterModels__WEBPACK_IMPORTED_MODULE_0__.CharacterModels.knight.Run;\n      setTimeout(() => this.getNextStep(), 6000);\n    } else if (this.currentStep === 2) {\n      this.currentInstruction = 'jump';\n      this.currentData = _characterModels__WEBPACK_IMPORTED_MODULE_0__.CharacterModels.knight.jump;\n      setTimeout(() => this.getNextStep(), 3000);\n    } else if (this.currentStep === 3) {\n      this.currentInstruction = 'lAttack';\n      this.currentData = _characterModels__WEBPACK_IMPORTED_MODULE_0__.CharacterModels.knight.lAttack;\n      setTimeout(() => this.getNextStep(), 7000);\n    } else if (this.currentStep === 4) {\n      this.currentInstruction = 'Get Ready...';\n      setTimeout(() => this.getNextStep(), 3000);\n    } else if (this.currentStep === 5) {\n      this.currentInstruction = 'Start';\n      setTimeout(() => this.game.startGame(), 1000);\n    }\n  }\n\n  move() {} //dummy funcion}\n\n\n  performAction() {} //dummy function\n\n\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvZ2FtZUluc3RydWN0aW9uLmpzLmpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQUE7QUFFTyxNQUFNQyxnQkFBTixDQUF1QjtBQUMxQkMsRUFBQUEsV0FBVyxDQUFDQyxJQUFELEVBQU87QUFDZCxTQUFLQSxJQUFMLEdBQVlBLElBQVo7QUFDQSxTQUFLQyxHQUFMLEdBQVdELElBQUksQ0FBQ0MsR0FBaEI7QUFDQSxTQUFLQyxVQUFMLEdBQWtCRixJQUFJLENBQUNFLFVBQXZCO0FBQ0EsU0FBS0MsV0FBTCxHQUFtQixDQUFuQjtBQUNBLFNBQUtDLFlBQUwsR0FBb0IsQ0FBcEI7QUFDQSxTQUFLQyxXQUFMLEdBQW1CLENBQW5CO0FBQ0EsU0FBS0MsV0FBTDtBQUNIOztBQUVEQyxFQUFBQSxJQUFJLENBQUNOLEdBQUQsRUFBSztBQUNMO0FBQ0EsUUFBRyxLQUFLSSxXQUFMLElBQW9CLENBQXZCLEVBQTBCO0FBQ3RCLFdBQUtKLEdBQUwsQ0FBU08sU0FBVCxHQUFxQixPQUFyQjtBQUNBLFdBQUtQLEdBQUwsQ0FBU1EsUUFBVCxDQUFrQixDQUFsQixFQUFxQixDQUFyQixFQUF3QixLQUFLUCxVQUFMLENBQWdCUSxLQUF4QyxFQUErQyxLQUFLUixVQUFMLENBQWdCUyxNQUEvRDtBQUNBLFdBQUtWLEdBQUwsQ0FBU08sU0FBVCxHQUFxQixLQUFyQjtBQUNBLFdBQUtQLEdBQUwsQ0FBU1csSUFBVCxHQUFnQixpQkFBaEI7QUFDQSxXQUFLWCxHQUFMLENBQVNZLFFBQVQsQ0FBbUIsR0FBRSxLQUFLQyxrQkFBbUIsRUFBN0MsRUFBZ0QsS0FBS1osVUFBTCxDQUFnQlEsS0FBaEIsR0FBc0IsQ0FBdEUsRUFBeUUsS0FBS1IsVUFBTCxDQUFnQlMsTUFBaEIsR0FBdUIsQ0FBaEc7QUFDSCxLQU5ELE1BTU87QUFDSCxXQUFLUCxZQUFMLEdBQW9CLEtBQUtBLFlBQUwsR0FBb0IsS0FBS1csV0FBTCxDQUFpQkMsVUFBekQ7QUFDQSxVQUFJQyxXQUFXLEdBQUcsSUFBSUMsS0FBSixFQUFsQjs7QUFDQUQsTUFBQUEsV0FBVyxDQUFDRSxNQUFaLEdBQXFCLE1BQU07QUFDdkIsYUFBS2xCLEdBQUwsQ0FBU08sU0FBVCxHQUFxQixPQUFyQjtBQUNBLGFBQUtQLEdBQUwsQ0FBU1EsUUFBVCxDQUFrQixDQUFsQixFQUFvQixDQUFwQixFQUF1QixLQUFLUCxVQUFMLENBQWdCUSxLQUF2QyxFQUE4QyxLQUFLUixVQUFMLENBQWdCUyxNQUE5RDtBQUNBLFlBQUlTLFdBQVcsR0FBR0gsV0FBVyxDQUFDUCxLQUFaLEdBQW9CLEtBQUtLLFdBQUwsQ0FBaUJDLFVBQXZEO0FBQ0EsWUFBSUssWUFBWSxHQUFHSixXQUFXLENBQUNOLE1BQVosR0FBcUIsS0FBS0ksV0FBTCxDQUFpQk8sUUFBekQ7QUFDQSxZQUFJQyxJQUFJLEdBQUcsS0FBS25CLFlBQUwsR0FBb0JnQixXQUFwQixHQUFtQyxLQUFLTCxXQUFMLENBQWlCUyxZQUEvRDtBQUNBLFlBQUlDLElBQUksR0FBSUosWUFBWSxHQUFHLEtBQUtOLFdBQUwsQ0FBaUJXLEdBQWpDLEdBQXdDLEtBQUtYLFdBQUwsQ0FBaUJZLHFCQUFwRTtBQUNBLFlBQUlDLFdBQVcsR0FBRyxDQUFsQjtBQUNBLGFBQUszQixHQUFMLENBQVM0QixTQUFULENBQW1CWixXQUFuQixFQUFnQ00sSUFBaEMsRUFBc0NFLElBQXRDLEVBQTRDTCxXQUE1QyxFQUF5REMsWUFBekQsRUFBdUUsS0FBS25CLFVBQUwsQ0FBZ0JRLEtBQWhCLEdBQXNCLEdBQTdGLEVBQWtHLEtBQUtSLFVBQUwsQ0FBZ0JTLE1BQWhCLEdBQXVCLENBQXpILEVBQTRIUyxXQUFXLEdBQUdRLFdBQTFJLEVBQXVKUCxZQUFZLEdBQUdPLFdBQXRLO0FBQ0EsYUFBSzNCLEdBQUwsQ0FBU08sU0FBVCxHQUFxQixLQUFyQjtBQUNBLGFBQUtQLEdBQUwsQ0FBU1csSUFBVCxHQUFnQixpQkFBaEI7QUFDQSxZQUFJa0IsSUFBSjs7QUFDQSxnQkFBTyxLQUFLekIsV0FBWjtBQUNJLGVBQUssQ0FBTDtBQUNJeUIsWUFBQUEsSUFBSSxHQUFHLHNEQUFQO0FBQ0E7O0FBQ0osZUFBSyxDQUFMO0FBQ0lBLFlBQUFBLElBQUksR0FBRywyQkFBUDtBQUNBOztBQUNKLGVBQUssQ0FBTDtBQUNJQSxZQUFBQSxJQUFJLEdBQUUsNERBQU47QUFDQTtBQVRSOztBQVdBLGFBQUs3QixHQUFMLENBQVNZLFFBQVQsQ0FBbUIsR0FBRWlCLElBQUssRUFBMUIsRUFBNkIsS0FBSzVCLFVBQUwsQ0FBZ0JRLEtBQWhCLEdBQXNCLENBQW5ELEVBQXNELEtBQUtSLFVBQUwsQ0FBZ0JTLE1BQWhCLEdBQXVCLEdBQTdFO0FBRUgsT0F6QkQ7O0FBMEJBTSxNQUFBQSxXQUFXLENBQUNjLEdBQVosR0FBbUIsbUJBQWtCLEtBQUtqQixrQkFBbUIsWUFBN0Q7QUFFQSxXQUFLWCxXQUFMOztBQUNBLFVBQUcsS0FBS0EsV0FBTCxJQUFvQixFQUF2QixFQUEyQjtBQUN2QixhQUFLQyxZQUFMO0FBQ0EsYUFBS0QsV0FBTCxHQUFtQixDQUFuQjtBQUNIO0FBQ0o7QUFDSjs7QUFFREcsRUFBQUEsV0FBVyxHQUFFO0FBQ1QsU0FBS0QsV0FBTDs7QUFDQSxRQUFHLEtBQUtBLFdBQUwsS0FBcUIsQ0FBeEIsRUFBMkI7QUFDdkIsV0FBS1Msa0JBQUwsR0FBMEIsS0FBMUI7QUFDQSxXQUFLQyxXQUFMLEdBQW1CbEIsd0VBQW5CO0FBQ0FxQyxNQUFBQSxVQUFVLENBQUUsTUFBTSxLQUFLNUIsV0FBTCxFQUFSLEVBQTRCLElBQTVCLENBQVY7QUFDSCxLQUpELE1BSU8sSUFBRyxLQUFLRCxXQUFMLEtBQXFCLENBQXhCLEVBQTJCO0FBQzlCLFdBQUtTLGtCQUFMLEdBQTBCLE1BQTFCO0FBQ0EsV0FBS0MsV0FBTCxHQUFtQmxCLHlFQUFuQjtBQUNBcUMsTUFBQUEsVUFBVSxDQUFFLE1BQU0sS0FBSzVCLFdBQUwsRUFBUixFQUE0QixJQUE1QixDQUFWO0FBQ0gsS0FKTSxNQUlBLElBQUcsS0FBS0QsV0FBTCxLQUFxQixDQUF4QixFQUEyQjtBQUM5QixXQUFLUyxrQkFBTCxHQUEwQixTQUExQjtBQUNBLFdBQUtDLFdBQUwsR0FBbUJsQiw0RUFBbkI7QUFDQXFDLE1BQUFBLFVBQVUsQ0FBRSxNQUFNLEtBQUs1QixXQUFMLEVBQVIsRUFBNEIsSUFBNUIsQ0FBVjtBQUNILEtBSk0sTUFJQSxJQUFHLEtBQUtELFdBQUwsS0FBcUIsQ0FBeEIsRUFBMEI7QUFDN0IsV0FBS1Msa0JBQUwsR0FBMEIsY0FBMUI7QUFDQW9CLE1BQUFBLFVBQVUsQ0FBRSxNQUFNLEtBQUs1QixXQUFMLEVBQVIsRUFBNEIsSUFBNUIsQ0FBVjtBQUNILEtBSE0sTUFHRCxJQUFHLEtBQUtELFdBQUwsS0FBcUIsQ0FBeEIsRUFBMkI7QUFDN0IsV0FBS1Msa0JBQUwsR0FBMEIsT0FBMUI7QUFDQW9CLE1BQUFBLFVBQVUsQ0FBRSxNQUFNLEtBQUtsQyxJQUFMLENBQVVxQyxTQUFWLEVBQVIsRUFBK0IsSUFBL0IsQ0FBVjtBQUNIO0FBQ0o7O0FBR0RDLEVBQUFBLElBQUksR0FBRyxDQUFFLENBbEZpQixDQWtGakI7OztBQUVUQyxFQUFBQSxhQUFhLEdBQUcsQ0FBRSxDQXBGUSxDQW9GUjs7O0FBcEZRIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYUFfSlNfUHJvamVjdC8uL3NyYy9nYW1lSW5zdHJ1Y3Rpb24uanM/ZGJmNyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDaGFyYWN0ZXJNb2RlbHMgfSBmcm9tIFwiLi9jaGFyYWN0ZXJNb2RlbHNcIjtcblxuZXhwb3J0IGNsYXNzIEdhbWVJbnN0cnVjdGlvbnMge1xuICAgIGNvbnN0cnVjdG9yKGdhbWUpIHtcbiAgICAgICAgdGhpcy5nYW1lID0gZ2FtZVxuICAgICAgICB0aGlzLmN0eCA9IGdhbWUuY3R4O1xuICAgICAgICB0aGlzLmRpbWVuc2lvbnMgPSBnYW1lLmRpbWVuc2lvbnM7XG4gICAgICAgIHRoaXMuZnJhbWVzRHJhd24gPSAwO1xuICAgICAgICB0aGlzLmN1cnJlbnRGcmFtZSA9IDA7XG4gICAgICAgIHRoaXMuY3VycmVudFN0ZXAgPSAwXG4gICAgICAgIHRoaXMuZ2V0TmV4dFN0ZXAoKTtcbiAgICB9XG5cbiAgICBkcmF3KGN0eCl7XG4gICAgICAgIC8vIGNvbnNvbGUubG9nKHRoaXMuY3VycmVudEZyYW1lKVxuICAgICAgICBpZih0aGlzLmN1cnJlbnRTdGVwID49IDQpIHtcbiAgICAgICAgICAgIHRoaXMuY3R4LmZpbGxTdHlsZSA9ICdibGFjaydcbiAgICAgICAgICAgIHRoaXMuY3R4LmZpbGxSZWN0KDAsIDAsIHRoaXMuZGltZW5zaW9ucy53aWR0aCwgdGhpcy5kaW1lbnNpb25zLmhlaWdodClcbiAgICAgICAgICAgIHRoaXMuY3R4LmZpbGxTdHlsZSA9ICdyZWQnXG4gICAgICAgICAgICB0aGlzLmN0eC5mb250ID0gJzgwcHggU2Fucy1zZXJpZic7XG4gICAgICAgICAgICB0aGlzLmN0eC5maWxsVGV4dChgJHt0aGlzLmN1cnJlbnRJbnN0cnVjdGlvbn1gLCB0aGlzLmRpbWVuc2lvbnMud2lkdGgvMiwgdGhpcy5kaW1lbnNpb25zLmhlaWdodC8yKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5jdXJyZW50RnJhbWUgPSB0aGlzLmN1cnJlbnRGcmFtZSAlIHRoaXMuY3VycmVudERhdGEubWF4X2ZyYW1lc1xuICAgICAgICAgICAgbGV0IHNwcml0ZVNoZWV0ID0gbmV3IEltYWdlKCk7XG4gICAgICAgICAgICBzcHJpdGVTaGVldC5vbmxvYWQgPSAoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5jdHguZmlsbFN0eWxlID0gJ2JsYWNrJ1xuICAgICAgICAgICAgICAgIHRoaXMuY3R4LmZpbGxSZWN0KDAsMCwgdGhpcy5kaW1lbnNpb25zLndpZHRoLCB0aGlzLmRpbWVuc2lvbnMuaGVpZ2h0KVxuICAgICAgICAgICAgICAgIGxldCBzcHJpdGVXaWR0aCA9IHNwcml0ZVNoZWV0LndpZHRoIC8gdGhpcy5jdXJyZW50RGF0YS5tYXhfZnJhbWVzO1xuICAgICAgICAgICAgICAgIGxldCBzcHJpdGVIZWlnaHQgPSBzcHJpdGVTaGVldC5oZWlnaHQgLyB0aGlzLmN1cnJlbnREYXRhLm51bV9yb3dzXG4gICAgICAgICAgICAgICAgbGV0IHNyY1ggPSB0aGlzLmN1cnJlbnRGcmFtZSAqIHNwcml0ZVdpZHRoICArIHRoaXMuY3VycmVudERhdGEucmlnaHRfb2Zmc2V0O1xuICAgICAgICAgICAgICAgIGxldCBzcmNZID0gKHNwcml0ZUhlaWdodCAqIHRoaXMuY3VycmVudERhdGEucm93KSAvIHRoaXMuY3VycmVudERhdGEudG9wX29mZnNldF9tdWx0aXBsaWVyO1xuICAgICAgICAgICAgICAgIGxldCBzY2FsZUZhY3RvciA9IDNcbiAgICAgICAgICAgICAgICB0aGlzLmN0eC5kcmF3SW1hZ2Uoc3ByaXRlU2hlZXQsIHNyY1gsIHNyY1ksIHNwcml0ZVdpZHRoLCBzcHJpdGVIZWlnaHQsIHRoaXMuZGltZW5zaW9ucy53aWR0aC8yLjYsIHRoaXMuZGltZW5zaW9ucy5oZWlnaHQvMiwgc3ByaXRlV2lkdGggKiBzY2FsZUZhY3Rvciwgc3ByaXRlSGVpZ2h0ICogc2NhbGVGYWN0b3IpO1xuICAgICAgICAgICAgICAgIHRoaXMuY3R4LmZpbGxTdHlsZSA9ICdyZWQnXG4gICAgICAgICAgICAgICAgdGhpcy5jdHguZm9udCA9ICcyMHB4IFNhbnMtc2VyaWYnO1xuICAgICAgICAgICAgICAgIGxldCB0ZXh0XG4gICAgICAgICAgICAgICAgc3dpdGNoKHRoaXMuY3VycmVudFN0ZXApIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOiBcbiAgICAgICAgICAgICAgICAgICAgICAgIHRleHQgPSAnTW92ZW1lbnQgQ29udHJvbHM6IEE6IExlZnQsIFM6IGRvd24sIEQ6IHJpZ2h0LCBXOiB1cCdcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6IFxuICAgICAgICAgICAgICAgICAgICAgICAgdGV4dCA9ICdVc2UgdGhlIHNwYWNlIGJhciB0byBqdW1wJ1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMzogXG4gICAgICAgICAgICAgICAgICAgICAgICB0ZXh0ID0nQXR0YWNrIHdpdGggXCJKXCIuICBTbGF5IHRoZSBza2VsZXRvbnMgYmVmb3JlIHRoZXkgc2xheSB5b3UhJ1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMuY3R4LmZpbGxUZXh0KGAke3RleHR9YCwgdGhpcy5kaW1lbnNpb25zLndpZHRoLzIsIHRoaXMuZGltZW5zaW9ucy5oZWlnaHQvMS4yKVxuXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzcHJpdGVTaGVldC5zcmMgPSBgLi9pbWFnZXMva25pZ2h0LyR7dGhpcy5jdXJyZW50SW5zdHJ1Y3Rpb259X3JpZ2h0LnBuZ2BcblxuICAgICAgICAgICAgdGhpcy5mcmFtZXNEcmF3bisrXG4gICAgICAgICAgICBpZih0aGlzLmZyYW1lc0RyYXduID49IDEwKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50RnJhbWUrKztcbiAgICAgICAgICAgICAgICB0aGlzLmZyYW1lc0RyYXduID0gMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIGdldE5leHRTdGVwKCl7XG4gICAgICAgIHRoaXMuY3VycmVudFN0ZXArK1xuICAgICAgICBpZih0aGlzLmN1cnJlbnRTdGVwID09PSAxKSB7XG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRJbnN0cnVjdGlvbiA9ICdSdW4nXG4gICAgICAgICAgICB0aGlzLmN1cnJlbnREYXRhID0gQ2hhcmFjdGVyTW9kZWxzLmtuaWdodC5SdW5cbiAgICAgICAgICAgIHNldFRpbWVvdXQoICgpID0+IHRoaXMuZ2V0TmV4dFN0ZXAoKSwgNjAwMClcbiAgICAgICAgfSBlbHNlIGlmKHRoaXMuY3VycmVudFN0ZXAgPT09IDIpIHtcbiAgICAgICAgICAgIHRoaXMuY3VycmVudEluc3RydWN0aW9uID0gJ2p1bXAnXG4gICAgICAgICAgICB0aGlzLmN1cnJlbnREYXRhID0gQ2hhcmFjdGVyTW9kZWxzLmtuaWdodC5qdW1wXG4gICAgICAgICAgICBzZXRUaW1lb3V0KCAoKSA9PiB0aGlzLmdldE5leHRTdGVwKCksIDMwMDApXG4gICAgICAgIH0gZWxzZSBpZih0aGlzLmN1cnJlbnRTdGVwID09PSAzKSB7XG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRJbnN0cnVjdGlvbiA9ICdsQXR0YWNrJ1xuICAgICAgICAgICAgdGhpcy5jdXJyZW50RGF0YSA9IENoYXJhY3Rlck1vZGVscy5rbmlnaHQubEF0dGFja1xuICAgICAgICAgICAgc2V0VGltZW91dCggKCkgPT4gdGhpcy5nZXROZXh0U3RlcCgpLCA3MDAwKSAgICBcbiAgICAgICAgfSBlbHNlIGlmKHRoaXMuY3VycmVudFN0ZXAgPT09IDQpe1xuICAgICAgICAgICAgdGhpcy5jdXJyZW50SW5zdHJ1Y3Rpb24gPSAnR2V0IFJlYWR5Li4uJ1xuICAgICAgICAgICAgc2V0VGltZW91dCggKCkgPT4gdGhpcy5nZXROZXh0U3RlcCgpLCAzMDAwKVxuICAgICAgICB9ZWxzZSBpZih0aGlzLmN1cnJlbnRTdGVwID09PSA1KSB7XG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRJbnN0cnVjdGlvbiA9ICdTdGFydCdcbiAgICAgICAgICAgIHNldFRpbWVvdXQoICgpID0+IHRoaXMuZ2FtZS5zdGFydEdhbWUoKSwgMTAwMClcbiAgICAgICAgfSBcbiAgICB9XG5cblxuICAgIG1vdmUoKSB7fS8vZHVtbXkgZnVuY2lvbn1cbiAgICBcbiAgICBwZXJmb3JtQWN0aW9uKCkge30vL2R1bW15IGZ1bmN0aW9uXG5cblxuXG59Il0sIm5hbWVzIjpbIkNoYXJhY3Rlck1vZGVscyIsIkdhbWVJbnN0cnVjdGlvbnMiLCJjb25zdHJ1Y3RvciIsImdhbWUiLCJjdHgiLCJkaW1lbnNpb25zIiwiZnJhbWVzRHJhd24iLCJjdXJyZW50RnJhbWUiLCJjdXJyZW50U3RlcCIsImdldE5leHRTdGVwIiwiZHJhdyIsImZpbGxTdHlsZSIsImZpbGxSZWN0Iiwid2lkdGgiLCJoZWlnaHQiLCJmb250IiwiZmlsbFRleHQiLCJjdXJyZW50SW5zdHJ1Y3Rpb24iLCJjdXJyZW50RGF0YSIsIm1heF9mcmFtZXMiLCJzcHJpdGVTaGVldCIsIkltYWdlIiwib25sb2FkIiwic3ByaXRlV2lkdGgiLCJzcHJpdGVIZWlnaHQiLCJudW1fcm93cyIsInNyY1giLCJyaWdodF9vZmZzZXQiLCJzcmNZIiwicm93IiwidG9wX29mZnNldF9tdWx0aXBsaWVyIiwic2NhbGVGYWN0b3IiLCJkcmF3SW1hZ2UiLCJ0ZXh0Iiwic3JjIiwia25pZ2h0IiwiUnVuIiwic2V0VGltZW91dCIsImp1bXAiLCJsQXR0YWNrIiwic3RhcnRHYW1lIiwibW92ZSIsInBlcmZvcm1BY3Rpb24iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/gameInstruction.js\n");

/***/ }),

/***/ "./src/index.js":
/*!**********************!*\
  !*** ./src/index.js ***!
  \**********************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var howler__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! howler */ \"./node_modules/howler/dist/howler.js\");\n/* harmony import */ var howler__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(howler__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _game_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./game.js */ \"./src/game.js\");\n\n\ndocument.addEventListener(\"DOMContentLoaded\", () => {\n  //Page Open Screen\n  let backgroundContainer = document.querySelector('.background-container');\n  let enterGameCheckbox = document.querySelector('#enter-checkbox');\n  let enterSign = document.createElement('img');\n  let clickHereSign = document.createElement('img');\n  let arcadeOpenSign = document.createElement('img');\n  let clickContainer = document.createElement('div');\n  let muteButton = document.querySelector('.mute-button');\n  enterSign.setAttribute('src', './images/mainPage/neon_enter_sign.gif');\n  clickHereSign.setAttribute('src', './images/mainPage/neon_click_here.gif');\n  arcadeOpenSign.setAttribute('src', './images/mainPage/arcadeSign.gif');\n  enterSign.classList.add('enter-sign');\n  arcadeOpenSign.classList.add('arcade-open-sign');\n  clickHereSign.classList.add('click-here-sign');\n  clickContainer.classList.add('click-container');\n  backgroundContainer.appendChild(arcadeOpenSign);\n  clickContainer.appendChild(enterSign);\n  clickContainer.appendChild(clickHereSign);\n  backgroundContainer.appendChild(clickContainer);\n  let game;\n  muteButton.addEventListener('click', e => {\n    if (muteButton.value === 'mute') {}\n  });\n  clickContainer.addEventListener('click', e => {\n    //hide neon signs\n    clickContainer.style.display = 'none';\n    clickHereSign.style.display = 'none';\n    enterSign.style.display = 'none';\n    arcadeOpenSign.style.display = 'none';\n    enterGameCheckbox.checked = true; // Display Game Screen after zoom animation\n\n    setTimeout(() => {\n      backgroundContainer.style.backgroundImage = \"url('./images/mainPage/arcade_screen_background.jpg')\";\n      backgroundContainer.style.backgroundSize = 'contain';\n      document.querySelector('.canvas-container').style.display = 'flex';\n      let canvas = document.getElementById('game-canvas');\n      game = new _game_js__WEBPACK_IMPORTED_MODULE_1__.Game(canvas);\n      enterGameCheckbox.checked = false;\n      document.addEventListener('keydown', e => {\n        // console.log(e.code)\n        let command = Object.keys(game.options.controls).filter(key => game.options.controls[key] === e.code);\n        if (command.length) game.setKeyDown(command[0]);\n      });\n      document.addEventListener('keyup', e => {\n        let command = Object.keys(game.options.controls).filter(key => game.options.controls[key] === e.code);\n        if (command.length) game.setKeyUp(command[0]);\n      });\n    }, 5000);\n  });\n});//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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YUFBeEIsQ0FBYjtBQUNBVixNQUFBQSxJQUFJLEdBQUcsSUFBSWhCLDBDQUFKLENBQVN5QixNQUFULENBQVA7QUFDQXBCLE1BQUFBLGlCQUFpQixDQUFDZ0IsT0FBbEIsR0FBNEIsS0FBNUI7QUFLQXBCLE1BQUFBLFFBQVEsQ0FBQ0MsZ0JBQVQsQ0FBMEIsU0FBMUIsRUFBc0NlLENBQUQsSUFBTztBQUN4QztBQUNBLFlBQUlVLE9BQU8sR0FBR0MsTUFBTSxDQUFDQyxJQUFQLENBQVliLElBQUksQ0FBQ2MsT0FBTCxDQUFhQyxRQUF6QixFQUFtQ0MsTUFBbkMsQ0FBMkNDLEdBQUcsSUFBSWpCLElBQUksQ0FBQ2MsT0FBTCxDQUFhQyxRQUFiLENBQXNCRSxHQUF0QixNQUErQmhCLENBQUMsQ0FBQ2lCLElBQW5GLENBQWQ7QUFDQSxZQUFJUCxPQUFPLENBQUNRLE1BQVosRUFBb0JuQixJQUFJLENBQUNvQixVQUFMLENBQWdCVCxPQUFPLENBQUMsQ0FBRCxDQUF2QjtBQUN2QixPQUpEO0FBTUExQixNQUFBQSxRQUFRLENBQUNDLGdCQUFULENBQTBCLE9BQTFCLEVBQW9DZSxDQUFELElBQU87QUFDdEMsWUFBSVUsT0FBTyxHQUFHQyxNQUFNLENBQUNDLElBQVAsQ0FBWWIsSUFBSSxDQUFDYyxPQUFMLENBQWFDLFFBQXpCLEVBQW1DQyxNQUFuQyxDQUEyQ0MsR0FBRyxJQUFJakIsSUFBSSxDQUFDYyxPQUFMLENBQWFDLFFBQWIsQ0FBc0JFLEdBQXRCLE1BQStCaEIsQ0FBQyxDQUFDaUIsSUFBbkYsQ0FBZDtBQUNBLFlBQUlQLE9BQU8sQ0FBQ1EsTUFBWixFQUFvQm5CLElBQUksQ0FBQ3FCLFFBQUwsQ0FBY1YsT0FBTyxDQUFDLENBQUQsQ0FBckI7QUFDM0IsT0FIRztBQUlILEtBckJTLEVBcUJQLElBckJPLENBQVY7QUFzQkgsR0FoQ0Q7QUFpQ0gsQ0E5REQiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9hQV9KU19Qcm9qZWN0Ly4vc3JjL2luZGV4LmpzP2I2MzUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtIb3dsLCBIb3dsZXJ9IGZyb20gJ2hvd2xlcic7XG5pbXBvcnQgeyBHYW1lIH0gZnJvbSAnLi9nYW1lLmpzJ1xuXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwiRE9NQ29udGVudExvYWRlZFwiLCAoKSA9PiB7XG4gICAgLy9QYWdlIE9wZW4gU2NyZWVuXG4gICAgbGV0IGJhY2tncm91bmRDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYmFja2dyb3VuZC1jb250YWluZXInKVxuICAgIGxldCBlbnRlckdhbWVDaGVja2JveCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNlbnRlci1jaGVja2JveCcpXG4gICAgbGV0IGVudGVyU2lnbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2ltZycpXG4gICAgbGV0IGNsaWNrSGVyZVNpZ24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKVxuICAgIGxldCBhcmNhZGVPcGVuU2lnbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2ltZycpXG4gICAgbGV0IGNsaWNrQ29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JylcbiAgICBsZXQgbXV0ZUJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tdXRlLWJ1dHRvbicpXG4gICAgZW50ZXJTaWduLnNldEF0dHJpYnV0ZSgnc3JjJywgJy4vaW1hZ2VzL21haW5QYWdlL25lb25fZW50ZXJfc2lnbi5naWYnKVxuICAgIGNsaWNrSGVyZVNpZ24uc2V0QXR0cmlidXRlKCdzcmMnLCAnLi9pbWFnZXMvbWFpblBhZ2UvbmVvbl9jbGlja19oZXJlLmdpZicpXG4gICAgYXJjYWRlT3BlblNpZ24uc2V0QXR0cmlidXRlKCdzcmMnLCAnLi9pbWFnZXMvbWFpblBhZ2UvYXJjYWRlU2lnbi5naWYnKVxuICAgIGVudGVyU2lnbi5jbGFzc0xpc3QuYWRkKCdlbnRlci1zaWduJylcbiAgICBhcmNhZGVPcGVuU2lnbi5jbGFzc0xpc3QuYWRkKCdhcmNhZGUtb3Blbi1zaWduJylcbiAgICBjbGlja0hlcmVTaWduLmNsYXNzTGlzdC5hZGQoJ2NsaWNrLWhlcmUtc2lnbicpXG4gICAgY2xpY2tDb250YWluZXIuY2xhc3NMaXN0LmFkZCgnY2xpY2stY29udGFpbmVyJylcbiAgICBiYWNrZ3JvdW5kQ29udGFpbmVyLmFwcGVuZENoaWxkKGFyY2FkZU9wZW5TaWduKVxuICAgIGNsaWNrQ29udGFpbmVyLmFwcGVuZENoaWxkKGVudGVyU2lnbilcbiAgICBjbGlja0NvbnRhaW5lci5hcHBlbmRDaGlsZChjbGlja0hlcmVTaWduKVxuICAgIGJhY2tncm91bmRDb250YWluZXIuYXBwZW5kQ2hpbGQoY2xpY2tDb250YWluZXIpXG4gICAgbGV0IGdhbWU7XG5cblxuICAgIG11dGVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lciggJ2NsaWNrJywgKGUpID0+IHtcbiAgICAgICAgaWYobXV0ZUJ1dHRvbi52YWx1ZSA9PT0gJ211dGUnKSB7XG4gICAgICAgICAgICBcbiAgICAgICAgfVxuICAgIH0pXG5cbiAgICBjbGlja0NvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKCAnY2xpY2snLCAoZSkgPT4ge1xuICAgICAgICAvL2hpZGUgbmVvbiBzaWduc1xuICAgICAgICBjbGlja0NvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnXG4gICAgICAgIGNsaWNrSGVyZVNpZ24uc3R5bGUuZGlzcGxheSA9J25vbmUnXG4gICAgICAgIGVudGVyU2lnbi5zdHlsZS5kaXNwbGF5ID0nbm9uZSdcbiAgICAgICAgYXJjYWRlT3BlblNpZ24uc3R5bGUuZGlzcGxheSA9ICdub25lJ1xuICAgICAgICBlbnRlckdhbWVDaGVja2JveC5jaGVja2VkID0gdHJ1ZTtcblxuXG4gICAgICAgIC8vIERpc3BsYXkgR2FtZSBTY3JlZW4gYWZ0ZXIgem9vbSBhbmltYXRpb25cbiAgICAgICAgc2V0VGltZW91dCggKCkgPT4ge1xuICAgICAgICAgICAgYmFja2dyb3VuZENvbnRhaW5lci5zdHlsZS5iYWNrZ3JvdW5kSW1hZ2UgPSBcInVybCgnLi9pbWFnZXMvbWFpblBhZ2UvYXJjYWRlX3NjcmVlbl9iYWNrZ3JvdW5kLmpwZycpXCJcbiAgICAgICAgICAgIGJhY2tncm91bmRDb250YWluZXIuc3R5bGUuYmFja2dyb3VuZFNpemUgPSAnY29udGFpbidcbiAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYW52YXMtY29udGFpbmVyJykuc3R5bGUuZGlzcGxheSA9ICdmbGV4JztcbiAgICAgICAgICAgIGxldCBjYW52YXMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZ2FtZS1jYW52YXMnKSBcbiAgICAgICAgICAgIGdhbWUgPSBuZXcgR2FtZShjYW52YXMpO1xuICAgICAgICAgICAgZW50ZXJHYW1lQ2hlY2tib3guY2hlY2tlZCA9IGZhbHNlO1xuICAgICAgICBcbiAgICBcbiAgIFxuXG4gICAgICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgKGUpID0+IHtcbiAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhlLmNvZGUpXG4gICAgICAgICAgICAgICAgbGV0IGNvbW1hbmQgPSBPYmplY3Qua2V5cyhnYW1lLm9wdGlvbnMuY29udHJvbHMpLmZpbHRlcigga2V5ID0+IGdhbWUub3B0aW9ucy5jb250cm9sc1trZXldID09PSBlLmNvZGUpXG4gICAgICAgICAgICAgICAgaWYgKGNvbW1hbmQubGVuZ3RoKSBnYW1lLnNldEtleURvd24oY29tbWFuZFswXSk7XG4gICAgICAgICAgICB9KVxuXG4gICAgICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXl1cCcsIChlKSA9PiB7XG4gICAgICAgICAgICAgICAgbGV0IGNvbW1hbmQgPSBPYmplY3Qua2V5cyhnYW1lLm9wdGlvbnMuY29udHJvbHMpLmZpbHRlcigga2V5ID0+IGdhbWUub3B0aW9ucy5jb250cm9sc1trZXldID09PSBlLmNvZGUpXG4gICAgICAgICAgICAgICAgaWYgKGNvbW1hbmQubGVuZ3RoKSBnYW1lLnNldEtleVVwKGNvbW1hbmRbMF0pO1xuICAgICAgICB9KVxuICAgICAgICB9LCA1MDAwKTtcbiAgICB9KVxufSlcblxuIl0sIm5hbWVzIjpbIkhvd2wiLCJIb3dsZXIiLCJHYW1lIiwiZG9jdW1lbnQiLCJhZGRFdmVudExpc3RlbmVyIiwiYmFja2dyb3VuZENvbnRhaW5lciIsInF1ZXJ5U2VsZWN0b3IiLCJlbnRlckdhbWVDaGVja2JveCIsImVudGVyU2lnbiIsImNyZWF0ZUVsZW1lbnQiLCJjbGlja0hlcmVTaWduIiwiYXJjYWRlT3BlblNpZ24iLCJjbGlja0NvbnRhaW5lciIsIm11dGVCdXR0b24iLCJzZXRBdHRyaWJ1dGUiLCJjbGFzc0xpc3QiLCJhZGQiLCJhcHBlbmRDaGlsZCIsImdhbWUiLCJlIiwidmFsdWUiLCJzdHlsZSIsImRpc3BsYXkiLCJjaGVja2VkIiwic2V0VGltZW91dCIsImJhY2tncm91bmRJbWFnZSIsImJhY2tncm91bmRTaXplIiwiY2FudmFzIiwiZ2V0RWxlbWVudEJ5SWQiLCJjb21tYW5kIiwiT2JqZWN0Iiwia2V5cyIsIm9wdGlvbnMiLCJjb250cm9scyIsImZpbHRlciIsImtleSIsImNvZGUiLCJsZW5ndGgiLCJzZXRLZXlEb3duIiwic2V0S2V5VXAiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/index.js\n");

/***/ }),

/***/ "./src/lifebar.js":
/*!************************!*\
  !*** ./src/lifebar.js ***!
  \************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"LifeBar\": function() { return /* binding */ LifeBar; }\n/* harmony export */ });\nclass LifeBar {\n  constructor(ctx, dimensions, owner) {\n    this.ctx = ctx;\n    this.dimensions = dimensions;\n    this.owner = owner;\n    this.health = 100;\n  }\n\n  reduceHealth(amount) {\n    this.health -= amount;\n    if (this.health < 0) this.health = 0;\n  }\n\n  increaseHealth(amount) {} // drawLifebar() {\n  //     this.ctx.fillStyle = 'yellow';\n  //     this.ctx.fillRect(this.getPosition(), 40, this.dimensions.width/2 - 120, 30)\n  //     this.ctx.fillStyle = 'red'\n  //     this.ctx.fillRect(this.getPosition(), 40, ((100-this.health)/100)*(this.dimensions.width/2 - 120), 30)\n  //     this.ctx.fillStyle = 'black'\n  //     this.ctx.font = '20px Arial';\n  //     if(this.lifeBarSide === 'left') {\n  //         this.ctx.fillText(`Player Health`, 80, 60);\n  //     } else {\n  //         this.ctx.fillText('Enemy Health', this.dimensions.width/1.6 + 80, 60)\n  //     }\n  // }\n\n\n  drawLifebar() {\n    if (this.owner.model === 'knight') {\n      this.ctx.fillStyle = 'yellow';\n      this.ctx.fillRect(10, 20, this.dimensions.width / 2 - 120, 30);\n      this.ctx.fillStyle = 'red';\n      this.ctx.fillRect(10, 20, (100 - this.health) / 100 * (this.dimensions.width / 2 - 120), 30);\n      this.ctx.font = '25px Sans-serif';\n      this.ctx.fillStyle = 'black';\n      this.ctx.lineWidth = 2;\n      this.ctx.fillText(`Player Health`, 100, 42);\n    } else {\n      this.ctx.fillStyle = 'yellow';\n      this.ctx.fillRect(this.owner.position[0] - 10, this.owner.position[1] - 20, this.owner.size.width + 20, 5);\n      this.ctx.fillStyle = 'red';\n      this.ctx.fillRect(this.owner.position[0] - 10, this.owner.position[1] - 20, (100 - this.health) / 100 * (this.owner.size.width + 20), 5);\n    }\n  }\n\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvbGlmZWJhci5qcy5qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQU8sTUFBTUEsT0FBTixDQUFjO0FBQ2pCQyxFQUFBQSxXQUFXLENBQUNDLEdBQUQsRUFBTUMsVUFBTixFQUFrQkMsS0FBbEIsRUFBMEI7QUFDakMsU0FBS0YsR0FBTCxHQUFXQSxHQUFYO0FBQ0EsU0FBS0MsVUFBTCxHQUFrQkEsVUFBbEI7QUFDQSxTQUFLQyxLQUFMLEdBQWFBLEtBQWI7QUFDQSxTQUFLQyxNQUFMLEdBQWMsR0FBZDtBQUNIOztBQUVEQyxFQUFBQSxZQUFZLENBQUNDLE1BQUQsRUFBUztBQUNqQixTQUFLRixNQUFMLElBQWVFLE1BQWY7QUFDQSxRQUFHLEtBQUtGLE1BQUwsR0FBYyxDQUFqQixFQUFvQixLQUFLQSxNQUFMLEdBQWMsQ0FBZDtBQUN2Qjs7QUFFREcsRUFBQUEsY0FBYyxDQUFDRCxNQUFELEVBQVMsQ0FFdEIsQ0FmZ0IsQ0FpQmpCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFHQUUsRUFBQUEsV0FBVyxHQUFHO0FBQ1YsUUFBRyxLQUFLTCxLQUFMLENBQVdNLEtBQVgsS0FBcUIsUUFBeEIsRUFBa0M7QUFDOUIsV0FBS1IsR0FBTCxDQUFTUyxTQUFULEdBQXFCLFFBQXJCO0FBQ0EsV0FBS1QsR0FBTCxDQUFTVSxRQUFULENBQWtCLEVBQWxCLEVBQXNCLEVBQXRCLEVBQTBCLEtBQUtULFVBQUwsQ0FBZ0JVLEtBQWhCLEdBQXNCLENBQXRCLEdBQTBCLEdBQXBELEVBQXlELEVBQXpEO0FBQ0EsV0FBS1gsR0FBTCxDQUFTUyxTQUFULEdBQXFCLEtBQXJCO0FBQ0EsV0FBS1QsR0FBTCxDQUFTVSxRQUFULENBQWtCLEVBQWxCLEVBQXNCLEVBQXRCLEVBQTJCLENBQUMsTUFBSSxLQUFLUCxNQUFWLElBQWtCLEdBQW5CLElBQXlCLEtBQUtGLFVBQUwsQ0FBZ0JVLEtBQWhCLEdBQXNCLENBQXRCLEdBQTBCLEdBQW5ELENBQTFCLEVBQW1GLEVBQW5GO0FBQ0EsV0FBS1gsR0FBTCxDQUFTWSxJQUFULEdBQWdCLGlCQUFoQjtBQUNBLFdBQUtaLEdBQUwsQ0FBU1MsU0FBVCxHQUFxQixPQUFyQjtBQUNBLFdBQUtULEdBQUwsQ0FBU2EsU0FBVCxHQUFxQixDQUFyQjtBQUNBLFdBQUtiLEdBQUwsQ0FBU2MsUUFBVCxDQUFtQixlQUFuQixFQUFtQyxHQUFuQyxFQUF3QyxFQUF4QztBQUNILEtBVEQsTUFTTztBQUNILFdBQUtkLEdBQUwsQ0FBU1MsU0FBVCxHQUFxQixRQUFyQjtBQUNBLFdBQUtULEdBQUwsQ0FBU1UsUUFBVCxDQUFrQixLQUFLUixLQUFMLENBQVdhLFFBQVgsQ0FBb0IsQ0FBcEIsSUFBeUIsRUFBM0MsRUFBK0MsS0FBS2IsS0FBTCxDQUFXYSxRQUFYLENBQW9CLENBQXBCLElBQXlCLEVBQXhFLEVBQTZFLEtBQUtiLEtBQUwsQ0FBV2MsSUFBWCxDQUFnQkwsS0FBaEIsR0FBd0IsRUFBckcsRUFBeUcsQ0FBekc7QUFDQSxXQUFLWCxHQUFMLENBQVNTLFNBQVQsR0FBcUIsS0FBckI7QUFDQSxXQUFLVCxHQUFMLENBQVNVLFFBQVQsQ0FBa0IsS0FBS1IsS0FBTCxDQUFXYSxRQUFYLENBQW9CLENBQXBCLElBQXlCLEVBQTNDLEVBQStDLEtBQUtiLEtBQUwsQ0FBV2EsUUFBWCxDQUFvQixDQUFwQixJQUF5QixFQUF4RSxFQUE2RSxDQUFDLE1BQUksS0FBS1osTUFBVixJQUFrQixHQUFuQixJQUF5QixLQUFLRCxLQUFMLENBQVdjLElBQVgsQ0FBZ0JMLEtBQWhCLEdBQXdCLEVBQWpELENBQTVFLEVBQWtJLENBQWxJO0FBRUg7QUFFSjs7QUFsRGdCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYUFfSlNfUHJvamVjdC8uL3NyYy9saWZlYmFyLmpzP2UyZGYiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNsYXNzIExpZmVCYXIge1xuICAgIGNvbnN0cnVjdG9yKGN0eCwgZGltZW5zaW9ucywgb3duZXIgKSB7XG4gICAgICAgIHRoaXMuY3R4ID0gY3R4O1xuICAgICAgICB0aGlzLmRpbWVuc2lvbnMgPSBkaW1lbnNpb25zXG4gICAgICAgIHRoaXMub3duZXIgPSBvd25lclxuICAgICAgICB0aGlzLmhlYWx0aCA9IDEwMDtcbiAgICB9XG5cbiAgICByZWR1Y2VIZWFsdGgoYW1vdW50KSB7XG4gICAgICAgIHRoaXMuaGVhbHRoIC09IGFtb3VudDtcbiAgICAgICAgaWYodGhpcy5oZWFsdGggPCAwKSB0aGlzLmhlYWx0aCA9IDA7XG4gICAgfVxuXG4gICAgaW5jcmVhc2VIZWFsdGgoYW1vdW50KSB7XG5cbiAgICB9XG5cbiAgICAvLyBkcmF3TGlmZWJhcigpIHtcbiAgICAvLyAgICAgdGhpcy5jdHguZmlsbFN0eWxlID0gJ3llbGxvdyc7XG4gICAgLy8gICAgIHRoaXMuY3R4LmZpbGxSZWN0KHRoaXMuZ2V0UG9zaXRpb24oKSwgNDAsIHRoaXMuZGltZW5zaW9ucy53aWR0aC8yIC0gMTIwLCAzMClcbiAgICAvLyAgICAgdGhpcy5jdHguZmlsbFN0eWxlID0gJ3JlZCdcbiAgICAvLyAgICAgdGhpcy5jdHguZmlsbFJlY3QodGhpcy5nZXRQb3NpdGlvbigpLCA0MCwgKCgxMDAtdGhpcy5oZWFsdGgpLzEwMCkqKHRoaXMuZGltZW5zaW9ucy53aWR0aC8yIC0gMTIwKSwgMzApXG4gICAgLy8gICAgIHRoaXMuY3R4LmZpbGxTdHlsZSA9ICdibGFjaydcbiAgICAvLyAgICAgdGhpcy5jdHguZm9udCA9ICcyMHB4IEFyaWFsJztcbiAgICAvLyAgICAgaWYodGhpcy5saWZlQmFyU2lkZSA9PT0gJ2xlZnQnKSB7XG4gICAgLy8gICAgICAgICB0aGlzLmN0eC5maWxsVGV4dChgUGxheWVyIEhlYWx0aGAsIDgwLCA2MCk7XG4gICAgLy8gICAgIH0gZWxzZSB7XG4gICAgLy8gICAgICAgICB0aGlzLmN0eC5maWxsVGV4dCgnRW5lbXkgSGVhbHRoJywgdGhpcy5kaW1lbnNpb25zLndpZHRoLzEuNiArIDgwLCA2MClcbiAgICAvLyAgICAgfVxuICAgIC8vIH1cbiAgIFxuXG4gICAgZHJhd0xpZmViYXIoKSB7XG4gICAgICAgIGlmKHRoaXMub3duZXIubW9kZWwgPT09ICdrbmlnaHQnKSB7XG4gICAgICAgICAgICB0aGlzLmN0eC5maWxsU3R5bGUgPSAneWVsbG93JztcbiAgICAgICAgICAgIHRoaXMuY3R4LmZpbGxSZWN0KDEwLCAyMCwgdGhpcy5kaW1lbnNpb25zLndpZHRoLzIgLSAxMjAsIDMwKVxuICAgICAgICAgICAgdGhpcy5jdHguZmlsbFN0eWxlID0gJ3JlZCdcbiAgICAgICAgICAgIHRoaXMuY3R4LmZpbGxSZWN0KDEwLCAyMCwgKCgxMDAtdGhpcy5oZWFsdGgpLzEwMCkqKHRoaXMuZGltZW5zaW9ucy53aWR0aC8yIC0gMTIwKSwgMzApXG4gICAgICAgICAgICB0aGlzLmN0eC5mb250ID0gJzI1cHggU2Fucy1zZXJpZic7XG4gICAgICAgICAgICB0aGlzLmN0eC5maWxsU3R5bGUgPSAnYmxhY2snXG4gICAgICAgICAgICB0aGlzLmN0eC5saW5lV2lkdGggPSAyO1xuICAgICAgICAgICAgdGhpcy5jdHguZmlsbFRleHQoYFBsYXllciBIZWFsdGhgLCAxMDAsIDQyKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuY3R4LmZpbGxTdHlsZSA9ICd5ZWxsb3cnO1xuICAgICAgICAgICAgdGhpcy5jdHguZmlsbFJlY3QodGhpcy5vd25lci5wb3NpdGlvblswXSAtIDEwLCB0aGlzLm93bmVyLnBvc2l0aW9uWzFdIC0gMjAsICB0aGlzLm93bmVyLnNpemUud2lkdGggKyAyMCwgNSlcbiAgICAgICAgICAgIHRoaXMuY3R4LmZpbGxTdHlsZSA9ICdyZWQnXG4gICAgICAgICAgICB0aGlzLmN0eC5maWxsUmVjdCh0aGlzLm93bmVyLnBvc2l0aW9uWzBdIC0gMTAsIHRoaXMub3duZXIucG9zaXRpb25bMV0gLSAyMCwgKCgxMDAtdGhpcy5oZWFsdGgpLzEwMCkqKHRoaXMub3duZXIuc2l6ZS53aWR0aCArIDIwKSwgNSlcblxuICAgICAgICB9XG4gICAgICBcbiAgICB9XG5cbn0iXSwibmFtZXMiOlsiTGlmZUJhciIsImNvbnN0cnVjdG9yIiwiY3R4IiwiZGltZW5zaW9ucyIsIm93bmVyIiwiaGVhbHRoIiwicmVkdWNlSGVhbHRoIiwiYW1vdW50IiwiaW5jcmVhc2VIZWFsdGgiLCJkcmF3TGlmZWJhciIsIm1vZGVsIiwiZmlsbFN0eWxlIiwiZmlsbFJlY3QiLCJ3aWR0aCIsImZvbnQiLCJsaW5lV2lkdGgiLCJmaWxsVGV4dCIsInBvc2l0aW9uIiwic2l6ZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/lifebar.js\n");

/***/ }),

/***/ "./src/menu_option.js":
/*!****************************!*\
  !*** ./src/menu_option.js ***!
  \****************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"MenuOption\": function() { return /* binding */ MenuOption; }\n/* harmony export */ });\nclass MenuOption {\n  constructor(optionText, position, selectedAction, selectedStatus = false) {\n    this.optionText = optionText;\n    this.selectedStatus = selectedStatus;\n    this.selectedAction = selectedAction;\n    this.position = position;\n  }\n\n  draw(ctx) {\n    // console.log(this.selectedStatus)\n    ctx.fillStyle = this.selectedStatus ? 'yellow' : 'red';\n    ctx.font = '30px Comic Sans MS';\n    ctx.fillText(`${this.optionText}`, this.position[0], this.position[1]);\n  }\n\n  toggleHighlight() {\n    this.selectedStatus === true ? this.selectedStatus = false : this.selectedStatus = true;\n  }\n\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvbWVudV9vcHRpb24uanMuanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFPLE1BQU1BLFVBQU4sQ0FBaUI7QUFDcEJDLEVBQUFBLFdBQVcsQ0FBQ0MsVUFBRCxFQUFhQyxRQUFiLEVBQXVCQyxjQUF2QixFQUF1Q0MsY0FBYyxHQUFHLEtBQXhELEVBQStEO0FBQ3RFLFNBQUtILFVBQUwsR0FBa0JBLFVBQWxCO0FBQ0EsU0FBS0csY0FBTCxHQUFzQkEsY0FBdEI7QUFDQSxTQUFLRCxjQUFMLEdBQXNCQSxjQUF0QjtBQUNBLFNBQUtELFFBQUwsR0FBZ0JBLFFBQWhCO0FBQ0g7O0FBRURHLEVBQUFBLElBQUksQ0FBQ0MsR0FBRCxFQUFNO0FBQ047QUFDQUEsSUFBQUEsR0FBRyxDQUFDQyxTQUFKLEdBQWdCLEtBQUtILGNBQUwsR0FBc0IsUUFBdEIsR0FBaUMsS0FBakQ7QUFDQUUsSUFBQUEsR0FBRyxDQUFDRSxJQUFKLEdBQVcsb0JBQVg7QUFDQUYsSUFBQUEsR0FBRyxDQUFDRyxRQUFKLENBQWMsR0FBRSxLQUFLUixVQUFXLEVBQWhDLEVBQW1DLEtBQUtDLFFBQUwsQ0FBYyxDQUFkLENBQW5DLEVBQXFELEtBQUtBLFFBQUwsQ0FBYyxDQUFkLENBQXJEO0FBQ0g7O0FBRURRLEVBQUFBLGVBQWUsR0FBRztBQUNkLFNBQUtOLGNBQUwsS0FBd0IsSUFBeEIsR0FBK0IsS0FBS0EsY0FBTCxHQUFzQixLQUFyRCxHQUE2RCxLQUFLQSxjQUFMLEdBQXNCLElBQW5GO0FBQ0g7O0FBakJtQiIsInNvdXJjZXMiOlsid2VicGFjazovL2FBX0pTX1Byb2plY3QvLi9zcmMvbWVudV9vcHRpb24uanM/OGNmNyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgY2xhc3MgTWVudU9wdGlvbiB7XG4gICAgY29uc3RydWN0b3Iob3B0aW9uVGV4dCwgcG9zaXRpb24sIHNlbGVjdGVkQWN0aW9uLCBzZWxlY3RlZFN0YXR1cyA9IGZhbHNlKSB7XG4gICAgICAgIHRoaXMub3B0aW9uVGV4dCA9IG9wdGlvblRleHQ7XG4gICAgICAgIHRoaXMuc2VsZWN0ZWRTdGF0dXMgPSBzZWxlY3RlZFN0YXR1cztcbiAgICAgICAgdGhpcy5zZWxlY3RlZEFjdGlvbiA9IHNlbGVjdGVkQWN0aW9uO1xuICAgICAgICB0aGlzLnBvc2l0aW9uID0gcG9zaXRpb247IFxuICAgIH1cblxuICAgIGRyYXcoY3R4KSB7XG4gICAgICAgIC8vIGNvbnNvbGUubG9nKHRoaXMuc2VsZWN0ZWRTdGF0dXMpXG4gICAgICAgIGN0eC5maWxsU3R5bGUgPSB0aGlzLnNlbGVjdGVkU3RhdHVzID8gJ3llbGxvdycgOiAncmVkJ1xuICAgICAgICBjdHguZm9udCA9ICczMHB4IENvbWljIFNhbnMgTVMnO1xuICAgICAgICBjdHguZmlsbFRleHQoYCR7dGhpcy5vcHRpb25UZXh0fWAsIHRoaXMucG9zaXRpb25bMF0sIHRoaXMucG9zaXRpb25bMV0pO1xuICAgIH1cblxuICAgIHRvZ2dsZUhpZ2hsaWdodCgpIHtcbiAgICAgICAgdGhpcy5zZWxlY3RlZFN0YXR1cyA9PT0gdHJ1ZSA/IHRoaXMuc2VsZWN0ZWRTdGF0dXMgPSBmYWxzZSA6IHRoaXMuc2VsZWN0ZWRTdGF0dXMgPSB0cnVlOyBcbiAgICB9XG59Il0sIm5hbWVzIjpbIk1lbnVPcHRpb24iLCJjb25zdHJ1Y3RvciIsIm9wdGlvblRleHQiLCJwb3NpdGlvbiIsInNlbGVjdGVkQWN0aW9uIiwic2VsZWN0ZWRTdGF0dXMiLCJkcmF3IiwiY3R4IiwiZmlsbFN0eWxlIiwiZm9udCIsImZpbGxUZXh0IiwidG9nZ2xlSGlnaGxpZ2h0Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/menu_option.js\n");

/***/ }),

/***/ "./src/options.js":
/*!************************!*\
  !*** ./src/options.js ***!
  \************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"Options\": function() { return /* binding */ Options; }\n/* harmony export */ });\nclass Options {\n  constructor() {\n    this.controls = {\n      up: 'KeyW',\n      down: 'KeyS',\n      left: 'KeyA',\n      right: 'KeyD',\n      lAttack: 'KeyJ',\n      hAttack: 'KeyK',\n      throw: 'KeyL',\n      jump: 'Space'\n    };\n    this.difficulty = 'easy';\n    this.stage = 'random';\n    this.sound = 'on';\n    this.volume = {\n      BGM: .5,\n      SFX: .5\n    };\n  }\n\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvb3B0aW9ucy5qcy5qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQU8sTUFBTUEsT0FBTixDQUFjO0FBQ2pCQyxFQUFBQSxXQUFXLEdBQUc7QUFDVixTQUFLQyxRQUFMLEdBQWdCO0FBQ0lDLE1BQUFBLEVBQUUsRUFBRSxNQURSO0FBRUlDLE1BQUFBLElBQUksRUFBRSxNQUZWO0FBR0lDLE1BQUFBLElBQUksRUFBRSxNQUhWO0FBSUlDLE1BQUFBLEtBQUssRUFBRSxNQUpYO0FBS0lDLE1BQUFBLE9BQU8sRUFBRSxNQUxiO0FBTUlDLE1BQUFBLE9BQU8sRUFBRSxNQU5iO0FBT0lDLE1BQUFBLEtBQUssRUFBRSxNQVBYO0FBUUlDLE1BQUFBLElBQUksRUFBRTtBQVJWLEtBQWhCO0FBVUEsU0FBS0MsVUFBTCxHQUFrQixNQUFsQjtBQUNBLFNBQUtDLEtBQUwsR0FBYSxRQUFiO0FBQ0EsU0FBS0MsS0FBTCxHQUFhLElBQWI7QUFDQSxTQUFLQyxNQUFMLEdBQWM7QUFBRUMsTUFBQUEsR0FBRyxFQUFFLEVBQVA7QUFDRUMsTUFBQUEsR0FBRyxFQUFFO0FBRFAsS0FBZDtBQUdIOztBQWxCZ0IiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9hQV9KU19Qcm9qZWN0Ly4vc3JjL29wdGlvbnMuanM/NGM2YiJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgY2xhc3MgT3B0aW9ucyB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMuY29udHJvbHMgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdXA6ICdLZXlXJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb3duOiAnS2V5UycsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGVmdDogJ0tleUEnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJpZ2h0OiAnS2V5RCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbEF0dGFjazogJ0tleUonLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhBdHRhY2s6ICdLZXlLJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdzogJ0tleUwnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGp1bXA6ICdTcGFjZSdcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgIHRoaXMuZGlmZmljdWx0eSA9ICdlYXN5JztcbiAgICAgICAgdGhpcy5zdGFnZSA9ICdyYW5kb20nO1xuICAgICAgICB0aGlzLnNvdW5kID0gJ29uJztcbiAgICAgICAgdGhpcy52b2x1bWUgPSB7IEJHTTogLjUsXG4gICAgICAgICAgICAgICAgICAgICAgICBTRlg6IC41XG4gICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICB9XG59Il0sIm5hbWVzIjpbIk9wdGlvbnMiLCJjb25zdHJ1Y3RvciIsImNvbnRyb2xzIiwidXAiLCJkb3duIiwibGVmdCIsInJpZ2h0IiwibEF0dGFjayIsImhBdHRhY2siLCJ0aHJvdyIsImp1bXAiLCJkaWZmaWN1bHR5Iiwic3RhZ2UiLCJzb3VuZCIsInZvbHVtZSIsIkJHTSIsIlNGWCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/options.js\n");

/***/ }),

/***/ "./src/playerCharacter.js":
/*!********************************!*\
  !*** ./src/playerCharacter.js ***!
  \********************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"PlayerCharacter\": function() { return /* binding */ PlayerCharacter; }\n/* harmony export */ });\n/* harmony import */ var _character__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./character */ \"./src/character.js\");\n\nclass PlayerCharacter extends _character__WEBPACK_IMPORTED_MODULE_0__.Character {\n  constructor(game) {\n    super(game, [30, 450], 'knight', 'right', {\n      height: 110,\n      width: 40\n    });\n    this.blockGuage = 100;\n    this.blockStatus = false; //false if not blocking\n\n    this.score = 0;\n    this.jumpVel = 0;\n    this.jumpHeight = 0;\n    this.moveLockOut = false;\n    this.moveSpeed = 1;\n  }\n\n  HIT_SOUNDS = ['./sounds/player_sounds/hit/pain1.wav', './sounds/player_sounds/hit/pain2.wav', './sounds/player_sounds/hit/pain3.wav'];\n  ATTACK_SOUNDS = ['./sounds/player_sounds/lAttack/hammer-1a.wav', './sounds/player_sounds/lAttack/hammer-1b.wav', './sounds/player_sounds/lAttack/sword-arm-2a.wav', './sounds/player_sounds/lAttack/sword-arm-2b.wav'];\n  RUN_SOUNDS = ['./sounds/player_sounds/move/step_metal1.ogg', './sounds/player_sounds/move/step_metal2.ogg', './sounds/player_sounds/move/step_metal3.ogg', './sounds/player_sounds/move/step_metal4.ogg'];\n\n  lockOutMove() {\n    this.moveLockOut = true;\n    setTimeout(() => this.moveLockOut = false, 50);\n  }\n\n  move() {\n    //reduce velocity of everything not pressed\n    if (this.currentAction !== 'jump' && this.currentAnimation !== 'death' && !this.stunned) {\n      if (!this.game.controller.up && this.yVel < 0) this.yVel += this.moveSpeed;\n      if (!this.game.controller.down && this.yVel > 0) this.yVel -= this.moveSpeed;\n      if (!this.game.controller.left && this.xVel < 0) this.xVel += this.moveSpeed;\n      if (!this.game.controller.right && this.xVel > 0) this.xVel -= this.moveSpeed; //increase velocity of everything pressed\n\n      if (!this.moveLockOut) {\n        if (this.game.controller.up) {\n          //check if moving opp direction and not still pressing.  reset if so\n          if (!this.game.controller.down && this.yVel > 0) this.yVel = 0;\n          this.dashDirection = null;\n          if (this.yVel > -5) this.yVel -= this.moveSpeed;\n        }\n\n        if (this.game.controller.down) {\n          if (!this.game.controller.up && this.yVel < 0) this.yVel = 0;\n          this.dashDirection = null;\n          if (this.yVel < 5) this.yVel += this.moveSpeed;\n        }\n\n        if (this.game.controller.left) {\n          if (!this.game.controller.right && this.xVel > 0) this.xVel = 0;\n          if (this.dashDirection === 'right') this.dashDirection === null;\n\n          if (this.xVel > -5 || this.dashDirection === 'left' && this.xVel > -15) {\n            this.xVel -= this.moveSpeed;\n          }\n        }\n\n        if (this.game.controller.right) {\n          if (!this.game.controller.left && this.xVel < 0) this.xVel = 0;\n          if (this.dashDirection === 'left') this.dashDirection === null;\n\n          if (this.xVel < 5 || this.dashDirection === 'right' && this.xVel < 15) {\n            this.xVel += this.moveSpeed;\n          }\n        }\n      }\n    }\n\n    this.updateNewPos();\n    this.lockOutMove();\n  }\n\n  performAction(inputs) {\n    if (!this.currentAction) {\n      if (inputs.lAttack) {\n        this.getAttackSound();\n        this.performLightAttack();\n      } else if (inputs.hAttack) {\n        this.performHeavyAttack();\n      } else if (inputs.jump) {\n        this.jump();\n      } else if (inputs.throw) {\n        this.performThrow();\n      }\n    }\n  }\n\n  updateNewPos() {\n    let prevPos = this.position.slice();\n\n    if (this.stunned) {\n      this.xVel = 0;\n      this.yVel = 0;\n    }\n\n    if (this.checkXInbounds(this.position[0] + this.xVel)) {\n      this.position[0] += this.xVel;\n    }\n\n    if (this.currentAction !== 'jump') {\n      if (this.checkYInbounds(this.position[1] + this.yVel)) {\n        this.position[1] += this.yVel;\n      }\n\n      if (prevPos[0] !== this.position[0] || prevPos[1] !== this.position[1]) {\n        this.getRunSound();\n      }\n    } else {\n      //if before apex\n      if (this.yVel < 0) {\n        this.position[1] += this.yVel;\n        this.jumpHeight -= this.yVel;\n        this.yVel += 2.5;\n      } else {\n        if (this.jumpHeight - this.yVel < 0) {\n          this.position[1] += this.jumpHeight;\n          this.jumpHeight = 0;\n          this.yVel = 0;\n          this.xVel = 0;\n        } else {\n          this.position[1] += this.yVel;\n          this.jumpHeight -= this.yVel;\n          this.yVel += 2.5;\n        }\n      }\n\n      if (this.yVel === 0 && this.jumpHeight === 0) this.currentAction = null;\n    }\n\n    let prevDirection = this.directionFaced;\n    if (this.xVel > 0) this.directionFaced = 'right';\n    if (this.xVel < 0) this.directionFaced = 'left';\n    if (prevDirection !== this.directionFaced) this.resetCurrentFrame();\n  }\n\n  jump() {\n    this.currentAction = 'jump';\n    this.yVel -= 40;\n\n    if (this.game.controller.left && !this.game.controller.right) {\n      this.xVel = -10;\n    }\n\n    if (this.game.controller.right && !this.game.controller.left) {\n      this.xVel = 10;\n    }\n  } //command sent all the way from game class keyUp(). janky, maybe fix\n\n\n  dash(direction) {\n    this.dashDirection = direction;\n  }\n\n  getRunSound() {\n    if (!this.runSoundTimeOut) {\n      this.runSoundTimeOut = true;\n      setTimeout(() => this.runSoundTimeOut = false, 700);\n\n      if (this.game.options.sound === 'on') {\n        var sound = new Howl({\n          src: ['./sounds/player_sounds/move/steps_platform.ogg']\n        });\n        sound.volume(this.game.options.volume.SFX * .1);\n        sound.play();\n      }\n    }\n  }\n\n  getAttackSound() {\n    if (!this.currentAttackSound) this.currentAttackSound = 0;\n\n    if (this.game.options.sound === 'on') {\n      var sound = new Howl({\n        src: [this.ATTACK_SOUNDS[this.currentAttackSound]]\n      });\n      sound.volume(this.game.options.volume.SFX * .1);\n      sound.play();\n    }\n\n    this.currentAttackSound++;\n    this.currentAttackSound = this.currentAttackSound % this.ATTACK_SOUNDS.length;\n  }\n\n  getHitSound() {\n    if (!this.currentHitSound) this.currentHitSound = 0;\n\n    if (this.game.options.sound === 'on') {\n      var sound = new Howl({\n        src: [this.HIT_SOUNDS[this.currentHitSound]]\n      });\n      sound.volume(this.game.options.volume.SFX * .1);\n      sound.play();\n    }\n\n    this.currentHitSound++;\n    this.currentHitSound = this.currentHitSound % this.ATTACK_SOUNDS.length;\n  }\n\n  getDeathSound() {\n    if (this.game.options.sound === 'on') {\n      var sound = new Howl({\n        src: ['./sounds/player_sounds/death/die2.wav']\n      });\n      sound.volume(this.game.options.volume.SFX * .1);\n      sound.play();\n    }\n  }\n\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUF1QixLQUFLQSxlQUFMLEdBQXVCLEtBQUtqRCxhQUFMLENBQW1CK0MsTUFBakU7QUFDSDs7QUFFREcsRUFBQUEsYUFBYSxHQUFHO0FBQ1osUUFBRyxLQUFLN0QsSUFBTCxDQUFVa0QsT0FBVixDQUFrQkMsS0FBbEIsS0FBNEIsSUFBL0IsRUFBcUM7QUFDakMsVUFBSUEsS0FBSyxHQUFHLElBQUlDLElBQUosQ0FBUztBQUNqQkMsUUFBQUEsR0FBRyxFQUFFLENBQUMsdUNBQUQ7QUFEWSxPQUFULENBQVo7QUFHQUYsTUFBQUEsS0FBSyxDQUFDRyxNQUFOLENBQWEsS0FBS3RELElBQUwsQ0FBVWtELE9BQVYsQ0FBa0JJLE1BQWxCLENBQXlCQyxHQUF6QixHQUErQixFQUE1QztBQUNBSixNQUFBQSxLQUFLLENBQUNLLElBQU47QUFDSDtBQUVKOztBQXhNeUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9hQV9KU19Qcm9qZWN0Ly4vc3JjL3BsYXllckNoYXJhY3Rlci5qcz85OWU4Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IENoYXJhY3RlciB9IGZyb20gXCIuL2NoYXJhY3RlclwiO1xuXG5cblxuZXhwb3J0IGNsYXNzIFBsYXllckNoYXJhY3RlciBleHRlbmRzIENoYXJhY3RlcnsgXG4gICAgY29uc3RydWN0b3IoZ2FtZSkge1xuICAgICAgICBzdXBlcihnYW1lLCBbMzAsIDQ1MF0sICdrbmlnaHQnLCAncmlnaHQnLCB7aGVpZ2h0OjExMCwgd2lkdGg6IDQwfSlcbiAgICAgICAgdGhpcy5ibG9ja0d1YWdlID0gMTAwO1xuICAgICAgICB0aGlzLmJsb2NrU3RhdHVzID0gZmFsc2U7ICAvL2ZhbHNlIGlmIG5vdCBibG9ja2luZ1xuICAgICAgICB0aGlzLnNjb3JlID0gMDtcbiAgICAgICAgdGhpcy5qdW1wVmVsID0gMFxuICAgICAgICB0aGlzLmp1bXBIZWlnaHQgPSAwO1xuICAgICAgICB0aGlzLm1vdmVMb2NrT3V0ID0gZmFsc2U7XG4gICAgICAgIHRoaXMubW92ZVNwZWVkID0gMTtcbiAgICB9XG5cbiAgICBISVRfU09VTkRTID0gWycuL3NvdW5kcy9wbGF5ZXJfc291bmRzL2hpdC9wYWluMS53YXYnLFxuICAgICAgICAgICAgICAgICAgJy4vc291bmRzL3BsYXllcl9zb3VuZHMvaGl0L3BhaW4yLndhdicsXG4gICAgICAgICAgICAgICAgICAnLi9zb3VuZHMvcGxheWVyX3NvdW5kcy9oaXQvcGFpbjMud2F2JyxcbiAgICAgICAgICAgICAgICAgXVxuXG4gICAgQVRUQUNLX1NPVU5EUyA9IFsnLi9zb3VuZHMvcGxheWVyX3NvdW5kcy9sQXR0YWNrL2hhbW1lci0xYS53YXYnLFxuICAgICAgICAgICAgICAgICAgICAgJy4vc291bmRzL3BsYXllcl9zb3VuZHMvbEF0dGFjay9oYW1tZXItMWIud2F2JyxcbiAgICAgICAgICAgICAgICAgICAgICcuL3NvdW5kcy9wbGF5ZXJfc291bmRzL2xBdHRhY2svc3dvcmQtYXJtLTJhLndhdicsXG4gICAgICAgICAgICAgICAgICAgICAnLi9zb3VuZHMvcGxheWVyX3NvdW5kcy9sQXR0YWNrL3N3b3JkLWFybS0yYi53YXYnXG4gICAgICAgICAgICAgICAgICAgIF1cblxuICAgIFJVTl9TT1VORFMgPSBbJy4vc291bmRzL3BsYXllcl9zb3VuZHMvbW92ZS9zdGVwX21ldGFsMS5vZ2cnLFxuICAgICAgICAgICAgICAgICAgJy4vc291bmRzL3BsYXllcl9zb3VuZHMvbW92ZS9zdGVwX21ldGFsMi5vZ2cnLFxuICAgICAgICAgICAgICAgICAgJy4vc291bmRzL3BsYXllcl9zb3VuZHMvbW92ZS9zdGVwX21ldGFsMy5vZ2cnLFxuICAgICAgICAgICAgICAgICAgJy4vc291bmRzL3BsYXllcl9zb3VuZHMvbW92ZS9zdGVwX21ldGFsNC5vZ2cnXG4gICAgICAgICAgICAgICAgIF1cblxuICAgIGxvY2tPdXRNb3ZlKCkge1xuICAgICAgICB0aGlzLm1vdmVMb2NrT3V0ID0gdHJ1ZTtcbiAgICAgICAgc2V0VGltZW91dCggKCkgPT4gdGhpcy5tb3ZlTG9ja091dCA9IGZhbHNlLCA1MClcbiAgICB9XG5cbiAgICBtb3ZlKCkge1xuICAgICAgICAvL3JlZHVjZSB2ZWxvY2l0eSBvZiBldmVyeXRoaW5nIG5vdCBwcmVzc2VkXG4gICAgICAgIGlmICh0aGlzLmN1cnJlbnRBY3Rpb24gIT09ICdqdW1wJyAmJiB0aGlzLmN1cnJlbnRBbmltYXRpb24gIT09ICdkZWF0aCcgICYmICF0aGlzLnN0dW5uZWQpIHtcbiAgICAgICAgICAgIGlmKCF0aGlzLmdhbWUuY29udHJvbGxlci51cCAmJiB0aGlzLnlWZWwgPCAwKSB0aGlzLnlWZWwgKz0gdGhpcy5tb3ZlU3BlZWRcbiAgICAgICAgICAgIGlmKCF0aGlzLmdhbWUuY29udHJvbGxlci5kb3duICYmIHRoaXMueVZlbCA+IDApIHRoaXMueVZlbCAtPSB0aGlzLm1vdmVTcGVlZFxuICAgICAgICAgICAgaWYoIXRoaXMuZ2FtZS5jb250cm9sbGVyLmxlZnQgJiYgdGhpcy54VmVsIDwgMCkgdGhpcy54VmVsICs9IHRoaXMubW92ZVNwZWVkXG4gICAgICAgICAgICBpZighdGhpcy5nYW1lLmNvbnRyb2xsZXIucmlnaHQgJiYgdGhpcy54VmVsID4gMCkgdGhpcy54VmVsIC09IHRoaXMubW92ZVNwZWVkXG4gICAgICAgIC8vaW5jcmVhc2UgdmVsb2NpdHkgb2YgZXZlcnl0aGluZyBwcmVzc2VkXG4gICAgICAgICAgICBpZighdGhpcy5tb3ZlTG9ja091dCkge1xuICAgICAgICAgICAgICAgIGlmKHRoaXMuZ2FtZS5jb250cm9sbGVyLnVwKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vY2hlY2sgaWYgbW92aW5nIG9wcCBkaXJlY3Rpb24gYW5kIG5vdCBzdGlsbCBwcmVzc2luZy4gIHJlc2V0IGlmIHNvXG4gICAgICAgICAgICAgICAgICAgIGlmKCF0aGlzLmdhbWUuY29udHJvbGxlci5kb3duICYmIHRoaXMueVZlbCA+IDApIHRoaXMueVZlbCA9IDA7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGFzaERpcmVjdGlvbiA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgIGlmKHRoaXMueVZlbCA+IC01KSB0aGlzLnlWZWwgLT0gdGhpcy5tb3ZlU3BlZWQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmKHRoaXMuZ2FtZS5jb250cm9sbGVyLmRvd24pIHtcbiAgICAgICAgICAgICAgICAgICAgaWYoIXRoaXMuZ2FtZS5jb250cm9sbGVyLnVwICYmIHRoaXMueVZlbCA8IDApIHRoaXMueVZlbCA9IDA7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGFzaERpcmVjdGlvbiA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgIGlmKHRoaXMueVZlbCA8IDUgKSB0aGlzLnlWZWwgKz0gdGhpcy5tb3ZlU3BlZWQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmKHRoaXMuZ2FtZS5jb250cm9sbGVyLmxlZnQpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYoIXRoaXMuZ2FtZS5jb250cm9sbGVyLnJpZ2h0ICYmIHRoaXMueFZlbCA+IDApIHRoaXMueFZlbCA9IDA7XG4gICAgICAgICAgICAgICAgICAgIGlmKHRoaXMuZGFzaERpcmVjdGlvbiA9PT0gJ3JpZ2h0JykgdGhpcy5kYXNoRGlyZWN0aW9uID09PSBudWxsO1xuICAgICAgICAgICAgICAgICAgICBpZih0aGlzLnhWZWwgPiAtNSB8fCAodGhpcy5kYXNoRGlyZWN0aW9uID09PSAnbGVmdCcgJiYgdGhpcy54VmVsID4gLTE1KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy54VmVsIC09IHRoaXMubW92ZVNwZWVkO1xuICAgICAgICAgICAgICAgICAgICB9IFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZih0aGlzLmdhbWUuY29udHJvbGxlci5yaWdodCkge1xuICAgICAgICAgICAgICAgICAgICBpZighdGhpcy5nYW1lLmNvbnRyb2xsZXIubGVmdCAmJiB0aGlzLnhWZWwgPCAwKSB0aGlzLnhWZWwgPSAwO1xuICAgICAgICAgICAgICAgICAgICBpZih0aGlzLmRhc2hEaXJlY3Rpb24gPT09ICdsZWZ0JykgdGhpcy5kYXNoRGlyZWN0aW9uID09PSBudWxsO1xuICAgICAgICAgICAgICAgICAgICBpZih0aGlzLnhWZWwgPCA1ICB8fCAodGhpcy5kYXNoRGlyZWN0aW9uID09PSAncmlnaHQnICYmIHRoaXMueFZlbCA8IDE1KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy54VmVsICs9IHRoaXMubW92ZVNwZWVkO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9IFxuICAgICAgICB0aGlzLnVwZGF0ZU5ld1BvcygpO1xuICAgICAgICB0aGlzLmxvY2tPdXRNb3ZlKCk7XG4gICAgfVxuXG4gICAgcGVyZm9ybUFjdGlvbihpbnB1dHMpIHtcbiAgICAgICAgaWYoIXRoaXMuY3VycmVudEFjdGlvbikge1xuICAgICAgICAgICAgaWYgKGlucHV0cy5sQXR0YWNrKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5nZXRBdHRhY2tTb3VuZCgpO1xuICAgICAgICAgICAgICAgIHRoaXMucGVyZm9ybUxpZ2h0QXR0YWNrKCk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGlucHV0cy5oQXR0YWNrKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wZXJmb3JtSGVhdnlBdHRhY2soKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoaW5wdXRzLmp1bXApIHtcbiAgICAgICAgICAgICAgICB0aGlzLmp1bXAoKVxuICAgICAgICAgICAgfSBlbHNlIGlmIChpbnB1dHMudGhyb3cpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnBlcmZvcm1UaHJvdygpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgdXBkYXRlTmV3UG9zKCkge1xuICAgICAgICBsZXQgcHJldlBvcyA9IHRoaXMucG9zaXRpb24uc2xpY2UoKVxuICAgICAgICBpZih0aGlzLnN0dW5uZWQpIHtcbiAgICAgICAgICAgIHRoaXMueFZlbCA9IDA7XG4gICAgICAgICAgICB0aGlzLnlWZWwgPSAwO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmNoZWNrWEluYm91bmRzKHRoaXMucG9zaXRpb25bMF0gKyB0aGlzLnhWZWwpKXtcbiAgICAgICAgICAgIHRoaXMucG9zaXRpb25bMF0gKz0gdGhpcy54VmVsO1xuICAgICAgICB9IFxuICAgICAgICBpZih0aGlzLmN1cnJlbnRBY3Rpb24gIT09ICdqdW1wJykgeyAgIFxuICAgICAgICAgICAgaWYgKHRoaXMuY2hlY2tZSW5ib3VuZHModGhpcy5wb3NpdGlvblsxXSArIHRoaXMueVZlbCkpe1xuICAgICAgICAgICAgICAgIHRoaXMucG9zaXRpb25bMV0gKz0gdGhpcy55VmVsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICBcbiAgICAgICAgICAgIGlmKHByZXZQb3NbMF0gIT09IHRoaXMucG9zaXRpb25bMF0gfHwgcHJldlBvc1sxXSAhPT0gdGhpcy5wb3NpdGlvblsxXSkge1xuICAgICAgICAgICAgICAgIHRoaXMuZ2V0UnVuU291bmQoKTtcbiAgICAgICAgICAgIH0gICAgICAgICAgXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvL2lmIGJlZm9yZSBhcGV4XG4gICAgICAgICAgICBpZih0aGlzLnlWZWwgPCAwKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wb3NpdGlvblsxXSArPSB0aGlzLnlWZWw7XG4gICAgICAgICAgICAgICAgdGhpcy5qdW1wSGVpZ2h0IC09IHRoaXMueVZlbDtcbiAgICAgICAgICAgICAgICB0aGlzLnlWZWwgKz0gMi41O1xuICAgICAgICAgICAgfSBlbHNle1xuICAgICAgICAgICAgICAgIGlmKHRoaXMuanVtcEhlaWdodCAtIHRoaXMueVZlbCA8IDApIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wb3NpdGlvblsxXSArPSB0aGlzLmp1bXBIZWlnaHRcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5qdW1wSGVpZ2h0ID0gMDtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy55VmVsID0gMDtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy54VmVsID0gMDtcbiAgICAgICAgICAgICAgICB9IGVsc2V7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucG9zaXRpb25bMV0gKz0gdGhpcy55VmVsO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmp1bXBIZWlnaHQgLT0gdGhpcy55VmVsO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnlWZWwgKz0gMi41O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmKHRoaXMueVZlbCA9PT0gMCAmJiB0aGlzLmp1bXBIZWlnaHQgPT09IDApIHRoaXMuY3VycmVudEFjdGlvbiA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IHByZXZEaXJlY3Rpb24gPSB0aGlzLmRpcmVjdGlvbkZhY2VkO1xuICAgICAgICBpZih0aGlzLnhWZWwgPiAwKSB0aGlzLmRpcmVjdGlvbkZhY2VkID0gJ3JpZ2h0JztcbiAgICAgICAgaWYodGhpcy54VmVsIDwgMCkgdGhpcy5kaXJlY3Rpb25GYWNlZCA9ICdsZWZ0JztcbiAgICAgICAgaWYoIHByZXZEaXJlY3Rpb24gIT09IHRoaXMuZGlyZWN0aW9uRmFjZWQpIHRoaXMucmVzZXRDdXJyZW50RnJhbWUoKTtcbiAgICB9XG5cbiAgICBcbiAgIFxuXG4gICAganVtcCgpIHtcbiAgICAgICAgdGhpcy5jdXJyZW50QWN0aW9uID0gJ2p1bXAnXG4gICAgICAgIHRoaXMueVZlbCAtPSA0MDtcbiAgICAgICAgaWYodGhpcy5nYW1lLmNvbnRyb2xsZXIubGVmdCAmJiAhdGhpcy5nYW1lLmNvbnRyb2xsZXIucmlnaHQpIHtcbiAgICAgICAgICAgIHRoaXMueFZlbCA9IC0xMDtcbiAgICAgICAgfVxuICAgICAgICBpZih0aGlzLmdhbWUuY29udHJvbGxlci5yaWdodCAmJiAhdGhpcy5nYW1lLmNvbnRyb2xsZXIubGVmdCkge1xuICAgICAgICAgICAgdGhpcy54VmVsID0gMTA7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvL2NvbW1hbmQgc2VudCBhbGwgdGhlIHdheSBmcm9tIGdhbWUgY2xhc3Mga2V5VXAoKS4gamFua3ksIG1heWJlIGZpeFxuICAgIGRhc2goZGlyZWN0aW9uKSB7XG4gICAgICAgIHRoaXMuZGFzaERpcmVjdGlvbiA9IGRpcmVjdGlvbjtcbiAgICB9XG5cbiAgICBnZXRSdW5Tb3VuZCgpIHtcbiAgICAgICAgaWYoIXRoaXMucnVuU291bmRUaW1lT3V0KSB7XG4gICAgICAgICAgICB0aGlzLnJ1blNvdW5kVGltZU91dCA9IHRydWU7XG4gICAgICAgICAgICBzZXRUaW1lb3V0KCAoKSA9PiB0aGlzLnJ1blNvdW5kVGltZU91dCA9IGZhbHNlLCA3MDApXG4gICAgICAgICAgICBpZih0aGlzLmdhbWUub3B0aW9ucy5zb3VuZCA9PT0gJ29uJykge1xuICAgICAgICAgICAgICAgIHZhciBzb3VuZCA9IG5ldyBIb3dsKHtcbiAgICAgICAgICAgICAgICAgICAgc3JjOiBbJy4vc291bmRzL3BsYXllcl9zb3VuZHMvbW92ZS9zdGVwc19wbGF0Zm9ybS5vZ2cnXVxuICAgICAgICAgICAgICAgIH0pOyBcbiAgICAgICAgICAgICAgICBzb3VuZC52b2x1bWUodGhpcy5nYW1lLm9wdGlvbnMudm9sdW1lLlNGWCAqIC4xKVxuICAgICAgICAgICAgICAgIHNvdW5kLnBsYXkoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIGdldEF0dGFja1NvdW5kKCkge1xuICAgICAgICBpZighdGhpcy5jdXJyZW50QXR0YWNrU291bmQpIHRoaXMuY3VycmVudEF0dGFja1NvdW5kID0gMDtcbiAgICAgICAgaWYodGhpcy5nYW1lLm9wdGlvbnMuc291bmQgPT09ICdvbicpIHtcbiAgICAgICAgICAgIHZhciBzb3VuZCA9IG5ldyBIb3dsKHtcbiAgICAgICAgICAgICAgICBzcmM6IFt0aGlzLkFUVEFDS19TT1VORFNbdGhpcy5jdXJyZW50QXR0YWNrU291bmRdXVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBzb3VuZC52b2x1bWUodGhpcy5nYW1lLm9wdGlvbnMudm9sdW1lLlNGWCAqIC4xKVxuICAgICAgICAgICAgc291bmQucGxheSgpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuY3VycmVudEF0dGFja1NvdW5kKys7XG4gICAgICAgIHRoaXMuY3VycmVudEF0dGFja1NvdW5kID0gdGhpcy5jdXJyZW50QXR0YWNrU291bmQgJSB0aGlzLkFUVEFDS19TT1VORFMubGVuZ3RoXG4gICAgfVxuXG4gICAgZ2V0SGl0U291bmQoKSB7XG4gICAgICAgIGlmKCF0aGlzLmN1cnJlbnRIaXRTb3VuZCkgdGhpcy5jdXJyZW50SGl0U291bmQgPSAwO1xuICAgICAgICBpZih0aGlzLmdhbWUub3B0aW9ucy5zb3VuZCA9PT0gJ29uJykge1xuICAgICAgICAgICAgdmFyIHNvdW5kID0gbmV3IEhvd2woe1xuICAgICAgICAgICAgICAgIHNyYzogW3RoaXMuSElUX1NPVU5EU1t0aGlzLmN1cnJlbnRIaXRTb3VuZF1dXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHNvdW5kLnZvbHVtZSh0aGlzLmdhbWUub3B0aW9ucy52b2x1bWUuU0ZYICogLjEpXG4gICAgICAgICAgICBzb3VuZC5wbGF5KCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5jdXJyZW50SGl0U291bmQrKztcbiAgICAgICAgdGhpcy5jdXJyZW50SGl0U291bmQgPSB0aGlzLmN1cnJlbnRIaXRTb3VuZCAlIHRoaXMuQVRUQUNLX1NPVU5EUy5sZW5ndGhcbiAgICB9XG5cbiAgICBnZXREZWF0aFNvdW5kKCkge1xuICAgICAgICBpZih0aGlzLmdhbWUub3B0aW9ucy5zb3VuZCA9PT0gJ29uJykge1xuICAgICAgICAgICAgdmFyIHNvdW5kID0gbmV3IEhvd2woe1xuICAgICAgICAgICAgICAgIHNyYzogWycuL3NvdW5kcy9wbGF5ZXJfc291bmRzL2RlYXRoL2RpZTIud2F2J11cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgc291bmQudm9sdW1lKHRoaXMuZ2FtZS5vcHRpb25zLnZvbHVtZS5TRlggKiAuMSlcbiAgICAgICAgICAgIHNvdW5kLnBsYXkoKTtcbiAgICAgICAgfVxuXG4gICAgfVxuXG59Il0sIm5hbWVzIjpbIkNoYXJhY3RlciIsIlBsYXllckNoYXJhY3RlciIsImNvbnN0cnVjdG9yIiwiZ2FtZSIsImhlaWdodCIsIndpZHRoIiwiYmxvY2tHdWFnZSIsImJsb2NrU3RhdHVzIiwic2NvcmUiLCJqdW1wVmVsIiwianVtcEhlaWdodCIsIm1vdmVMb2NrT3V0IiwibW92ZVNwZWVkIiwiSElUX1NPVU5EUyIsIkFUVEFDS19TT1VORFMiLCJSVU5fU09VTkRTIiwibG9ja091dE1vdmUiLCJzZXRUaW1lb3V0IiwibW92ZSIsImN1cnJlbnRBY3Rpb24iLCJjdXJyZW50QW5pbWF0aW9uIiwic3R1bm5lZCIsImNvbnRyb2xsZXIiLCJ1cCIsInlWZWwiLCJkb3duIiwibGVmdCIsInhWZWwiLCJyaWdodCIsImRhc2hEaXJlY3Rpb24iLCJ1cGRhdGVOZXdQb3MiLCJwZXJmb3JtQWN0aW9uIiwiaW5wdXRzIiwibEF0dGFjayIsImdldEF0dGFja1NvdW5kIiwicGVyZm9ybUxpZ2h0QXR0YWNrIiwiaEF0dGFjayIsInBlcmZvcm1IZWF2eUF0dGFjayIsImp1bXAiLCJ0aHJvdyIsInBlcmZvcm1UaHJvdyIsInByZXZQb3MiLCJwb3NpdGlvbiIsInNsaWNlIiwiY2hlY2tYSW5ib3VuZHMiLCJjaGVja1lJbmJvdW5kcyIsImdldFJ1blNvdW5kIiwicHJldkRpcmVjdGlvbiIsImRpcmVjdGlvbkZhY2VkIiwicmVzZXRDdXJyZW50RnJhbWUiLCJkYXNoIiwiZGlyZWN0aW9uIiwicnVuU291bmRUaW1lT3V0Iiwib3B0aW9ucyIsInNvdW5kIiwiSG93bCIsInNyYyIsInZvbHVtZSIsIlNGWCIsInBsYXkiLCJjdXJyZW50QXR0YWNrU291bmQiLCJsZW5ndGgiLCJnZXRIaXRTb3VuZCIsImN1cnJlbnRIaXRTb3VuZCIsImdldERlYXRoU291bmQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/playerCharacter.js\n");

/***/ }),

/***/ "./src/score.js":
/*!**********************!*\
  !*** ./src/score.js ***!
  \**********************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"Score\": function() { return /* binding */ Score; }\n/* harmony export */ });\nclass Score {\n  constructor(ctx, dimensions, timer) {\n    this.timer = timer;\n    this.dimensions = dimensions;\n    this.ctx = ctx;\n    this.score = 0;\n  }\n\n  increaseScore(enemy) {\n    let multiplier = 1 + Math.floor(this.timer.time / 20);\n    this.score += enemy.scoreBase * multiplier;\n  }\n\n  draw() {\n    this.ctx.font = '40px Sans-serif';\n    this.ctx.strokeStyle = 'black';\n    this.ctx.lineWidth = 8;\n    this.ctx.fillStyle = 'yellow';\n    this.ctx.strokeText('SCORE', this.dimensions.width / 1.4, 40);\n    this.ctx.fillText('SCORE', this.dimensions.width / 1.4, 40);\n    this.ctx.font = '40px Sans-serif';\n    this.ctx.strokeText(this.score, this.dimensions.width / 1.1, 40);\n    this.ctx.fillText(this.score, this.dimensions.width / 1.1, 40);\n  }\n\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvc2NvcmUuanMuanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFPLE1BQU1BLEtBQU4sQ0FBWTtBQUNmQyxFQUFBQSxXQUFXLENBQUNDLEdBQUQsRUFBTUMsVUFBTixFQUFrQkMsS0FBbEIsRUFBeUI7QUFDaEMsU0FBS0EsS0FBTCxHQUFhQSxLQUFiO0FBQ0EsU0FBS0QsVUFBTCxHQUFrQkEsVUFBbEI7QUFDQSxTQUFLRCxHQUFMLEdBQVdBLEdBQVg7QUFDQSxTQUFLRyxLQUFMLEdBQWEsQ0FBYjtBQUNIOztBQUVEQyxFQUFBQSxhQUFhLENBQUNDLEtBQUQsRUFBUTtBQUNqQixRQUFJQyxVQUFVLEdBQUcsSUFBSUMsSUFBSSxDQUFDQyxLQUFMLENBQVcsS0FBS04sS0FBTCxDQUFXTyxJQUFYLEdBQWtCLEVBQTdCLENBQXJCO0FBQ0EsU0FBS04sS0FBTCxJQUFjRSxLQUFLLENBQUNLLFNBQU4sR0FBa0JKLFVBQWhDO0FBQ0g7O0FBRURLLEVBQUFBLElBQUksR0FBRztBQUNILFNBQUtYLEdBQUwsQ0FBU1ksSUFBVCxHQUFnQixpQkFBaEI7QUFDQSxTQUFLWixHQUFMLENBQVNhLFdBQVQsR0FBdUIsT0FBdkI7QUFDQSxTQUFLYixHQUFMLENBQVNjLFNBQVQsR0FBcUIsQ0FBckI7QUFDQSxTQUFLZCxHQUFMLENBQVNlLFNBQVQsR0FBcUIsUUFBckI7QUFDQSxTQUFLZixHQUFMLENBQVNnQixVQUFULENBQW9CLE9BQXBCLEVBQTZCLEtBQUtmLFVBQUwsQ0FBZ0JnQixLQUFoQixHQUFzQixHQUFuRCxFQUF3RCxFQUF4RDtBQUNBLFNBQUtqQixHQUFMLENBQVNrQixRQUFULENBQWtCLE9BQWxCLEVBQTJCLEtBQUtqQixVQUFMLENBQWdCZ0IsS0FBaEIsR0FBc0IsR0FBakQsRUFBc0QsRUFBdEQ7QUFDQSxTQUFLakIsR0FBTCxDQUFTWSxJQUFULEdBQWdCLGlCQUFoQjtBQUNBLFNBQUtaLEdBQUwsQ0FBU2dCLFVBQVQsQ0FBb0IsS0FBS2IsS0FBekIsRUFBZ0MsS0FBS0YsVUFBTCxDQUFnQmdCLEtBQWhCLEdBQXNCLEdBQXRELEVBQTJELEVBQTNEO0FBQ0EsU0FBS2pCLEdBQUwsQ0FBU2tCLFFBQVQsQ0FBa0IsS0FBS2YsS0FBdkIsRUFBOEIsS0FBS0YsVUFBTCxDQUFnQmdCLEtBQWhCLEdBQXNCLEdBQXBELEVBQXlELEVBQXpEO0FBQ0g7O0FBdkJjIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYUFfSlNfUHJvamVjdC8uL3NyYy9zY29yZS5qcz9iMWFkIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBjbGFzcyBTY29yZSB7XG4gICAgY29uc3RydWN0b3IoY3R4LCBkaW1lbnNpb25zLCB0aW1lcikge1xuICAgICAgICB0aGlzLnRpbWVyID0gdGltZXJcbiAgICAgICAgdGhpcy5kaW1lbnNpb25zID0gZGltZW5zaW9uc1xuICAgICAgICB0aGlzLmN0eCA9IGN0eDtcbiAgICAgICAgdGhpcy5zY29yZSA9IDA7XG4gICAgfVxuXG4gICAgaW5jcmVhc2VTY29yZShlbmVteSkge1xuICAgICAgICBsZXQgbXVsdGlwbGllciA9IDEgKyBNYXRoLmZsb29yKHRoaXMudGltZXIudGltZSAvIDIwKVxuICAgICAgICB0aGlzLnNjb3JlICs9IGVuZW15LnNjb3JlQmFzZSAqIG11bHRpcGxpZXJcbiAgICB9XG5cbiAgICBkcmF3KCkge1xuICAgICAgICB0aGlzLmN0eC5mb250ID0gJzQwcHggU2Fucy1zZXJpZic7XG4gICAgICAgIHRoaXMuY3R4LnN0cm9rZVN0eWxlID0gJ2JsYWNrJztcbiAgICAgICAgdGhpcy5jdHgubGluZVdpZHRoID0gODtcbiAgICAgICAgdGhpcy5jdHguZmlsbFN0eWxlID0gJ3llbGxvdyc7XG4gICAgICAgIHRoaXMuY3R4LnN0cm9rZVRleHQoJ1NDT1JFJywgdGhpcy5kaW1lbnNpb25zLndpZHRoLzEuNCwgNDApXG4gICAgICAgIHRoaXMuY3R4LmZpbGxUZXh0KCdTQ09SRScsIHRoaXMuZGltZW5zaW9ucy53aWR0aC8xLjQsIDQwKTtcbiAgICAgICAgdGhpcy5jdHguZm9udCA9ICc0MHB4IFNhbnMtc2VyaWYnO1xuICAgICAgICB0aGlzLmN0eC5zdHJva2VUZXh0KHRoaXMuc2NvcmUsIHRoaXMuZGltZW5zaW9ucy53aWR0aC8xLjEsIDQwKTtcbiAgICAgICAgdGhpcy5jdHguZmlsbFRleHQodGhpcy5zY29yZSwgdGhpcy5kaW1lbnNpb25zLndpZHRoLzEuMSwgNDApO1xuICAgIH1cblxuXG59Il0sIm5hbWVzIjpbIlNjb3JlIiwiY29uc3RydWN0b3IiLCJjdHgiLCJkaW1lbnNpb25zIiwidGltZXIiLCJzY29yZSIsImluY3JlYXNlU2NvcmUiLCJlbmVteSIsIm11bHRpcGxpZXIiLCJNYXRoIiwiZmxvb3IiLCJ0aW1lIiwic2NvcmVCYXNlIiwiZHJhdyIsImZvbnQiLCJzdHJva2VTdHlsZSIsImxpbmVXaWR0aCIsImZpbGxTdHlsZSIsInN0cm9rZVRleHQiLCJ3aWR0aCIsImZpbGxUZXh0Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/score.js\n");

/***/ }),

/***/ "./src/stage.js":
/*!**********************!*\
  !*** ./src/stage.js ***!
  \**********************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"Stage\": function() { return /* binding */ Stage; }\n/* harmony export */ });\n/* harmony import */ var _continueScreen__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./continueScreen */ \"./src/continueScreen.js\");\n/* harmony import */ var _cpuCharacter__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./cpuCharacter */ \"./src/cpuCharacter.js\");\n/* harmony import */ var _playerCharacter__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./playerCharacter */ \"./src/playerCharacter.js\");\n/* harmony import */ var _score__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./score */ \"./src/score.js\");\n/* harmony import */ var _timer__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./timer */ \"./src/timer.js\");\n\n\n\n\n\nclass Stage {\n  constructor(game) {\n    this.game = game;\n    this.dimensions = game.dimensions;\n    this.floorHeight = game.dimensions.height / 2.2;\n    this.ctx = game.ctx; //list of stages.  eventually probably want to replace with images\n    //list properties: sky-color, ground-color\n\n    this.enemies = [];\n    this.killed_characters = [];\n    this.player = new _playerCharacter__WEBPACK_IMPORTED_MODULE_2__.PlayerCharacter(game);\n    this.timer = new _timer__WEBPACK_IMPORTED_MODULE_4__.Timer(this.ctx, this.dimensions);\n    this.score = new _score__WEBPACK_IMPORTED_MODULE_3__.Score(this.ctx, this.dimensions, this.timer);\n    this.addNewEnemies();\n    this.startMusic();\n    this.gameOver = false; // this.pickStage()\n  }\n\n  startMusic() {\n    if (this.game.options.sound === 'on') {\n      this.sound = new Howl({\n        src: ['./sounds/The_Dark_Amulet.mp3']\n      });\n      this.sound.volume(this.game.options.volume.BGM * .1);\n      this.sound.play();\n    }\n  }\n\n  stopMusic() {\n    this.sound.stop();\n  } // pickStage() {\n  //     let stageNum;\n  //     if (this.game.options.stage === 'random') {\n  //         stageNum = Math.floor(Math.random()  * this.stageList.length)\n  //     } else {\n  //         stageNum = 0 // TODO CHANGE THIS \n  //         /// take stage number/name\n  //     }\n  //     this.stage = this.stageList[stageNum]\n  // }\n\n\n  draw() {\n    if (this.flashScreen) {\n      this.ctx.fillStyle = 'white';\n      this.ctx.fillRect(0, 0, this.dimensions.width, this.dimensions.height);\n      this.flashScreen = false;\n    } else {\n      var img = new Image();\n\n      img.onload = () => {\n        this.ctx.drawImage(img, 0, 0, this.dimensions.width, this.dimensions.height);\n      };\n\n      img.src = './images/gameBackgrounds/stageBackground.png';\n      this.player.drawCharacter();\n      this.player.lifebar.drawLifebar();\n      this.timer.draw();\n      this.score.draw();\n      this.enemies.forEach(enemy => {\n        enemy.drawCharacter();\n        enemy.lifebar.drawLifebar();\n      });\n      this.killed_characters.forEach(killedEnemy => {\n        killedEnemy.drawCharacter();\n        killedEnemy.lifebar.drawLifebar();\n      });\n\n      if (this.gameOver) {\n        if (!this.continueScreen) this.continueScreen = new _continueScreen__WEBPACK_IMPORTED_MODULE_0__.ContinueScreen(this.game);\n        this.continueScreen.draw();\n      }\n    }\n  }\n\n  move(command) {\n    if (this.gameOver) {\n      if (!this.continueScreen) this.continueScreen = new _continueScreen__WEBPACK_IMPORTED_MODULE_0__.ContinueScreen(this.game);\n      this.continueScreen.move(command);\n    } else {\n      this.player.move(command);\n    }\n  }\n\n  performAction(command) {\n    if (this.gameOver) {\n      if (!this.continueScreen) this.continueScreen = new _continueScreen__WEBPACK_IMPORTED_MODULE_0__.ContinueScreen(this.game);\n      this.continueScreen.performAction(command);\n    } else {\n      this.player.performAction(command);\n    }\n  }\n\n  addNewEnemies() {\n    let totalEnemies = 2 + Math.floor(this.timer.time / 20);\n\n    while (this.enemies.length < totalEnemies) {\n      this.generateEnemy();\n    }\n  }\n\n  generateEnemy() {\n    let newEnemy = new _cpuCharacter__WEBPACK_IMPORTED_MODULE_1__.cpuCharacter(this.game, this.getRandomStartPos());\n    this.enemies.push(newEnemy);\n  }\n\n  getRandomStartPos() {\n    let side = Math.floor(Math.random() * 2) === 1 ? 'left' : 'right';\n    let yStart = Math.floor(Math.random() * (this.dimensions.height - this.floorHeight)) + this.floorHeight;\n    let xStart = side === 'left' ? 1000 : -100; // change this to off screen later\n\n    return [xStart, yStart];\n  }\n\n  checkAttacksLanded() {\n    this.checkPlayerAttacks();\n    this.checkEnemyAttack();\n  }\n\n  checkKilledEnemies() {\n    this.enemies.forEach((enemy, i) => {\n      if (enemy.lifebar.health === 0) {\n        this.enemies = this.enemies.slice(0, i).concat(this.enemies.slice(i + 1));\n        this.killed_characters.push(enemy);\n        setTimeout(() => this.killed_characters.shift(), 5000);\n        enemy.death();\n        this.score.increaseScore(enemy);\n      }\n    });\n  }\n\n  checkKilledPlayer() {\n    if (this.player.lifebar.health === 0 && this.player.currentAction !== 'death') {\n      this.killed_characters.push(this.player);\n      setTimeout(() => this.killed_characters.shift(), 5000);\n      this.player.death();\n      this.gameOver = true; // setTimeout( () => this.player = new PlayerCharacter(this.game), 6000);\n    }\n  }\n\n  checkPlayerAttacks() {\n    if (this.player.hitbox.length) {\n      this.enemies.forEach(enemy => {\n        if (this.checkCollision(this.player.hitbox, enemy.calculateHurtBox())) {\n          // console.log('passed collision')\n          switch (this.player.currentAction) {\n            case 'lAttack':\n              if (!enemy.stunned) {\n                enemy.takeDamage(15);\n              }\n\n              break;\n\n            case 'hAttack':\n              enemy.takeDamage(30);\n              break;\n\n            case 'throw':\n              enemy.takeDamage(50);\n              break;\n          }\n        }\n      });\n    }\n  }\n\n  checkEnemyAttack() {\n    this.enemies.forEach(enemy => {\n      if (this.checkCollision(enemy.hitbox, this.player.calculateHurtBox())) {\n        if (!this.player.stunned) {\n          this.player.takeDamage(10);\n        }\n      }\n    });\n  }\n\n  checkCollision(hitbox, hurtbox) {\n    if (hitbox[0] <= hurtbox[0] && hitbox[2] >= hurtbox[0] || hitbox[0] <= hurtbox[2] && hitbox[2] >= hurtbox[2]) {\n      if (hitbox[1] >= hurtbox[1] && hitbox[3] <= hurtbox[1] || hitbox[1] >= hurtbox[3] && hitbox[3] <= hurtbox[3]) {\n        return true;\n      }\n    }\n\n    return false;\n  }\n\n  startFlashScreen() {\n    this.flashScreen = true;\n  }\n\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LEVBQzBEO0FBQ2xELFVBQUlMLE1BQU0sQ0FBQyxDQUFELENBQU4sSUFBYUssT0FBTyxDQUFDLENBQUQsQ0FBcEIsSUFBMkJMLE1BQU0sQ0FBQyxDQUFELENBQU4sSUFBYUssT0FBTyxDQUFDLENBQUQsQ0FBaEQsSUFDQ0wsTUFBTSxDQUFDLENBQUQsQ0FBTixJQUFhSyxPQUFPLENBQUMsQ0FBRCxDQUFwQixJQUEyQkwsTUFBTSxDQUFDLENBQUQsQ0FBTixJQUFhSyxPQUFPLENBQUMsQ0FBRCxDQURuRCxFQUN1RDtBQUNuRCxlQUFPLElBQVA7QUFDSDtBQUNSOztBQUNELFdBQU8sS0FBUDtBQUNIOztBQUVEQyxFQUFBQSxnQkFBZ0IsR0FBRztBQUNmLFNBQUtuRCxXQUFMLEdBQW1CLElBQW5CO0FBQ0g7O0FBeExjIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYUFfSlNfUHJvamVjdC8uL3NyYy9zdGFnZS5qcz83ZWU1Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IENvbnRpbnVlU2NyZWVuIH0gZnJvbSBcIi4vY29udGludWVTY3JlZW5cIjtcbmltcG9ydCB7IGNwdUNoYXJhY3RlciB9IGZyb20gXCIuL2NwdUNoYXJhY3RlclwiO1xuaW1wb3J0IHsgUGxheWVyQ2hhcmFjdGVyIH0gZnJvbSBcIi4vcGxheWVyQ2hhcmFjdGVyXCI7XG5pbXBvcnQgeyBTY29yZSB9IGZyb20gXCIuL3Njb3JlXCI7XG5pbXBvcnQgeyBUaW1lciB9IGZyb20gXCIuL3RpbWVyXCI7XG5cbmV4cG9ydCBjbGFzcyBTdGFnZSB7XG4gICAgY29uc3RydWN0b3IoZ2FtZSkge1xuICAgICAgICB0aGlzLmdhbWUgPSBnYW1lO1xuICAgICAgICB0aGlzLmRpbWVuc2lvbnMgPSBnYW1lLmRpbWVuc2lvbnM7XG4gICAgICAgIHRoaXMuZmxvb3JIZWlnaHQgPSBnYW1lLmRpbWVuc2lvbnMuaGVpZ2h0LzIuMlxuICAgICAgICB0aGlzLmN0eCA9IGdhbWUuY3R4O1xuICAgICAgICAvL2xpc3Qgb2Ygc3RhZ2VzLiAgZXZlbnR1YWxseSBwcm9iYWJseSB3YW50IHRvIHJlcGxhY2Ugd2l0aCBpbWFnZXNcbiAgICAgICAgLy9saXN0IHByb3BlcnRpZXM6IHNreS1jb2xvciwgZ3JvdW5kLWNvbG9yXG4gICAgICAgIHRoaXMuZW5lbWllcyA9IFtdO1xuICAgICAgICB0aGlzLmtpbGxlZF9jaGFyYWN0ZXJzID0gW107ICAgIFxuICAgICAgICB0aGlzLnBsYXllciA9IG5ldyBQbGF5ZXJDaGFyYWN0ZXIoZ2FtZSk7XG4gICAgICAgIHRoaXMudGltZXIgPSBuZXcgVGltZXIodGhpcy5jdHgsIHRoaXMuZGltZW5zaW9ucyk7XG4gICAgICAgIHRoaXMuc2NvcmUgPSBuZXcgU2NvcmUodGhpcy5jdHgsIHRoaXMuZGltZW5zaW9ucywgdGhpcy50aW1lcik7XG4gICAgICAgIHRoaXMuYWRkTmV3RW5lbWllcygpO1xuICAgICAgICB0aGlzLnN0YXJ0TXVzaWMoKTtcbiAgICAgICAgdGhpcy5nYW1lT3ZlciA9IGZhbHNlO1xuICAgICAgICAvLyB0aGlzLnBpY2tTdGFnZSgpXG4gICAgfVxuXG4gICAgc3RhcnRNdXNpYygpIHtcbiAgICAgICAgaWYodGhpcy5nYW1lLm9wdGlvbnMuc291bmQgPT09ICdvbicpIHtcbiAgICAgICAgICAgIHRoaXMuc291bmQgPSBuZXcgSG93bCh7XG4gICAgICAgICAgICAgICAgc3JjOiBbJy4vc291bmRzL1RoZV9EYXJrX0FtdWxldC5tcDMnXVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLnNvdW5kLnZvbHVtZSh0aGlzLmdhbWUub3B0aW9ucy52b2x1bWUuQkdNICogLjEpO1xuICAgICAgICAgICAgdGhpcy5zb3VuZC5wbGF5KCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBzdG9wTXVzaWMoKSB7XG4gICAgICAgIHRoaXMuc291bmQuc3RvcCgpO1xuICAgIH1cbiAgICAvLyBwaWNrU3RhZ2UoKSB7XG4gICAgLy8gICAgIGxldCBzdGFnZU51bTtcbiAgICAvLyAgICAgaWYgKHRoaXMuZ2FtZS5vcHRpb25zLnN0YWdlID09PSAncmFuZG9tJykge1xuICAgIC8vICAgICAgICAgc3RhZ2VOdW0gPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgICogdGhpcy5zdGFnZUxpc3QubGVuZ3RoKVxuICAgIC8vICAgICB9IGVsc2Uge1xuICAgIC8vICAgICAgICAgc3RhZ2VOdW0gPSAwIC8vIFRPRE8gQ0hBTkdFIFRISVMgXG4gICAgLy8gICAgICAgICAvLy8gdGFrZSBzdGFnZSBudW1iZXIvbmFtZVxuICAgIC8vICAgICB9XG4gICAgLy8gICAgIHRoaXMuc3RhZ2UgPSB0aGlzLnN0YWdlTGlzdFtzdGFnZU51bV1cbiAgICAvLyB9XG5cbiAgICBkcmF3KCkge1xuICAgICAgaWYodGhpcy5mbGFzaFNjcmVlbikge1xuICAgICAgICAgdGhpcy5jdHguZmlsbFN0eWxlID0gJ3doaXRlJ1xuICAgICAgICAgdGhpcy5jdHguZmlsbFJlY3QoMCwgMCwgdGhpcy5kaW1lbnNpb25zLndpZHRoLCB0aGlzLmRpbWVuc2lvbnMuaGVpZ2h0KSBcbiAgICAgICAgIHRoaXMuZmxhc2hTY3JlZW4gPSBmYWxzZTtcbiAgICAgIH0gIGVsc2Uge1xuICAgICAgICB2YXIgaW1nID0gbmV3IEltYWdlKCk7XG4gICAgICAgIGltZy5vbmxvYWQgPSAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmN0eC5kcmF3SW1hZ2UoaW1nLCAwLCAwLCB0aGlzLmRpbWVuc2lvbnMud2lkdGgsIHRoaXMuZGltZW5zaW9ucy5oZWlnaHQpO1xuICAgICAgICB9O1xuICAgICAgICBpbWcuc3JjID0gJy4vaW1hZ2VzL2dhbWVCYWNrZ3JvdW5kcy9zdGFnZUJhY2tncm91bmQucG5nJztcbiAgICAgICAgdGhpcy5wbGF5ZXIuZHJhd0NoYXJhY3RlcigpO1xuICAgICAgICB0aGlzLnBsYXllci5saWZlYmFyLmRyYXdMaWZlYmFyKCk7XG4gICAgICAgIHRoaXMudGltZXIuZHJhdygpO1xuICAgICAgICB0aGlzLnNjb3JlLmRyYXcoKTtcbiAgICAgICAgdGhpcy5lbmVtaWVzLmZvckVhY2goIGVuZW15ID0+IHtcbiAgICAgICAgICAgIGVuZW15LmRyYXdDaGFyYWN0ZXIoKVxuICAgICAgICAgICAgZW5lbXkubGlmZWJhci5kcmF3TGlmZWJhcigpO1xuICAgICAgICB9KVxuICAgICAgICB0aGlzLmtpbGxlZF9jaGFyYWN0ZXJzLmZvckVhY2goIGtpbGxlZEVuZW15ID0+IHtcbiAgICAgICAgICAgIGtpbGxlZEVuZW15LmRyYXdDaGFyYWN0ZXIoKVxuICAgICAgICAgICAga2lsbGVkRW5lbXkubGlmZWJhci5kcmF3TGlmZWJhcigpXG4gICAgICAgIH0pXG4gICAgICAgIGlmKHRoaXMuZ2FtZU92ZXIpIHtcbiAgICAgICAgICAgIGlmKCF0aGlzLmNvbnRpbnVlU2NyZWVuKSB0aGlzLmNvbnRpbnVlU2NyZWVuID0gbmV3IENvbnRpbnVlU2NyZWVuKHRoaXMuZ2FtZSk7XG4gICAgICAgICAgICB0aGlzLmNvbnRpbnVlU2NyZWVuLmRyYXcoKTtcblxuICAgICAgICB9XG4gICAgICB9IFxuICAgIH1cblxuICAgIG1vdmUoY29tbWFuZCkge1xuICAgICAgICBpZih0aGlzLmdhbWVPdmVyKSB7XG4gICAgICAgICAgICBpZighdGhpcy5jb250aW51ZVNjcmVlbikgdGhpcy5jb250aW51ZVNjcmVlbiA9IG5ldyBDb250aW51ZVNjcmVlbih0aGlzLmdhbWUpO1xuICAgICAgICAgICAgdGhpcy5jb250aW51ZVNjcmVlbi5tb3ZlKGNvbW1hbmQpXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnBsYXllci5tb3ZlKGNvbW1hbmQpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHBlcmZvcm1BY3Rpb24oY29tbWFuZCkge1xuICAgICAgICBpZih0aGlzLmdhbWVPdmVyKSB7XG4gICAgICAgICAgICBpZighdGhpcy5jb250aW51ZVNjcmVlbikgdGhpcy5jb250aW51ZVNjcmVlbiA9IG5ldyBDb250aW51ZVNjcmVlbih0aGlzLmdhbWUpO1xuICAgICAgICAgICAgdGhpcy5jb250aW51ZVNjcmVlbi5wZXJmb3JtQWN0aW9uKGNvbW1hbmQpXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnBsYXllci5wZXJmb3JtQWN0aW9uKGNvbW1hbmQpXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBhZGROZXdFbmVtaWVzKCkge1xuICAgICAgICBsZXQgdG90YWxFbmVtaWVzID0gMiArIE1hdGguZmxvb3IodGhpcy50aW1lci50aW1lIC8gMjApXG4gICAgICAgIHdoaWxlKHRoaXMuZW5lbWllcy5sZW5ndGggPCB0b3RhbEVuZW1pZXMpIHtcbiAgICAgICAgICAgIHRoaXMuZ2VuZXJhdGVFbmVteSgpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZ2VuZXJhdGVFbmVteSgpIHtcbiAgICAgICAgbGV0IG5ld0VuZW15ID0gbmV3IGNwdUNoYXJhY3Rlcih0aGlzLmdhbWUsIHRoaXMuZ2V0UmFuZG9tU3RhcnRQb3MoKSk7XG4gICAgICAgIHRoaXMuZW5lbWllcy5wdXNoKG5ld0VuZW15KVxuICAgIH1cblxuICAgIGdldFJhbmRvbVN0YXJ0UG9zKCkge1xuICAgICAgICBsZXQgc2lkZSA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDIpID09PSAxID8gJ2xlZnQnIDogJ3JpZ2h0J1xuICAgICAgICBsZXQgeVN0YXJ0ID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogKHRoaXMuZGltZW5zaW9ucy5oZWlnaHQgLSB0aGlzLmZsb29ySGVpZ2h0KSkgKyB0aGlzLmZsb29ySGVpZ2h0IFxuICAgICAgICBsZXQgeFN0YXJ0ID0gc2lkZSA9PT0gJ2xlZnQnID8gMTAwMCA6IC0xMDA7ICAvLyBjaGFuZ2UgdGhpcyB0byBvZmYgc2NyZWVuIGxhdGVyXG4gICAgICAgIHJldHVybiBbeFN0YXJ0LCB5U3RhcnRdXG4gICAgfVxuXG4gICAgY2hlY2tBdHRhY2tzTGFuZGVkKCkge1xuICAgICAgIHRoaXMuY2hlY2tQbGF5ZXJBdHRhY2tzKClcbiAgICAgICB0aGlzLmNoZWNrRW5lbXlBdHRhY2soKVxuICAgIH1cblxuICAgIGNoZWNrS2lsbGVkRW5lbWllcygpIHtcbiAgICAgICAgdGhpcy5lbmVtaWVzLmZvckVhY2goIChlbmVteSwgaSkgPT4ge1xuICAgICAgICAgICAgaWYoZW5lbXkubGlmZWJhci5oZWFsdGggPT09IDApIHtcbiAgICAgICAgICAgICAgICB0aGlzLmVuZW1pZXMgPSB0aGlzLmVuZW1pZXMuc2xpY2UoMCwgaSkuY29uY2F0KHRoaXMuZW5lbWllcy5zbGljZShpKzEpKVxuICAgICAgICAgICAgICAgIHRoaXMua2lsbGVkX2NoYXJhY3RlcnMucHVzaChlbmVteSk7XG4gICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB0aGlzLmtpbGxlZF9jaGFyYWN0ZXJzLnNoaWZ0KCksIDUwMDApXG4gICAgICAgICAgICAgICAgZW5lbXkuZGVhdGgoKTtcbiAgICAgICAgICAgICAgICB0aGlzLnNjb3JlLmluY3JlYXNlU2NvcmUoZW5lbXkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KVxuICAgIH1cblxuICAgIGNoZWNrS2lsbGVkUGxheWVyKCkge1xuICAgICAgICBpZih0aGlzLnBsYXllci5saWZlYmFyLmhlYWx0aCA9PT0gMCAmJiB0aGlzLnBsYXllci5jdXJyZW50QWN0aW9uICE9PSAnZGVhdGgnKSB7XG4gICAgICAgICAgICB0aGlzLmtpbGxlZF9jaGFyYWN0ZXJzLnB1c2godGhpcy5wbGF5ZXIpO1xuICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB0aGlzLmtpbGxlZF9jaGFyYWN0ZXJzLnNoaWZ0KCksIDUwMDApO1xuICAgICAgICAgICAgdGhpcy5wbGF5ZXIuZGVhdGgoKTtcbiAgICAgICAgICAgIHRoaXMuZ2FtZU92ZXIgPSB0cnVlO1xuICAgICAgICAgICAgLy8gc2V0VGltZW91dCggKCkgPT4gdGhpcy5wbGF5ZXIgPSBuZXcgUGxheWVyQ2hhcmFjdGVyKHRoaXMuZ2FtZSksIDYwMDApO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgY2hlY2tQbGF5ZXJBdHRhY2tzKCkge1xuICAgICAgICBpZiAodGhpcy5wbGF5ZXIuaGl0Ym94Lmxlbmd0aCkge1xuICAgICAgICAgICAgdGhpcy5lbmVtaWVzLmZvckVhY2goZW5lbXkgPT4ge1xuICAgICAgICAgICAgICAgIGlmKHRoaXMuY2hlY2tDb2xsaXNpb24odGhpcy5wbGF5ZXIuaGl0Ym94LCBlbmVteS5jYWxjdWxhdGVIdXJ0Qm94KCkpKXtcbiAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ3Bhc3NlZCBjb2xsaXNpb24nKVxuICAgICAgICAgICAgICAgICAgICBzd2l0Y2godGhpcy5wbGF5ZXIuY3VycmVudEFjdGlvbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnbEF0dGFjayc6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFlbmVteS5zdHVubmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZW15LnRha2VEYW1hZ2UoMTUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ2hBdHRhY2snOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZW15LnRha2VEYW1hZ2UoMzApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlICd0aHJvdyc6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5lbXkudGFrZURhbWFnZSg1MClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGNoZWNrRW5lbXlBdHRhY2soKSB7XG4gICAgICAgIHRoaXMuZW5lbWllcy5mb3JFYWNoKCBlbmVteSA9PiB7XG4gICAgICAgICAgICBpZih0aGlzLmNoZWNrQ29sbGlzaW9uKGVuZW15LmhpdGJveCwgdGhpcy5wbGF5ZXIuY2FsY3VsYXRlSHVydEJveCgpKSkge1xuICAgICAgICAgICAgICAgIGlmKCF0aGlzLnBsYXllci5zdHVubmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGxheWVyLnRha2VEYW1hZ2UoMTApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSlcblxuICAgIH1cblxuICAgIGNoZWNrQ29sbGlzaW9uKGhpdGJveCwgaHVydGJveCkge1xuICAgICAgICBpZiAoKGhpdGJveFswXSA8PSBodXJ0Ym94WzBdICYmIGhpdGJveFsyXSA+PSBodXJ0Ym94WzBdKSB8fFxuICAgICAgICAgICAgKGhpdGJveFswXSA8PSBodXJ0Ym94WzJdICYmIGhpdGJveFsyXSA+PSBodXJ0Ym94WzJdKSkge1xuICAgICAgICAgICAgICAgIGlmKChoaXRib3hbMV0gPj0gaHVydGJveFsxXSAmJiBoaXRib3hbM10gPD0gaHVydGJveFsxXSkgfHxcbiAgICAgICAgICAgICAgICAgICAgaGl0Ym94WzFdID49IGh1cnRib3hbM10gJiYgaGl0Ym94WzNdIDw9IGh1cnRib3hbM10pe1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgIH0gXG4gICAgICAgIHJldHVybiBmYWxzZVxuICAgIH1cblxuICAgIHN0YXJ0Rmxhc2hTY3JlZW4oKSB7XG4gICAgICAgIHRoaXMuZmxhc2hTY3JlZW4gPSB0cnVlO1xuICAgIH1cbiB9Il0sIm5hbWVzIjpbIkNvbnRpbnVlU2NyZWVuIiwiY3B1Q2hhcmFjdGVyIiwiUGxheWVyQ2hhcmFjdGVyIiwiU2NvcmUiLCJUaW1lciIsIlN0YWdlIiwiY29uc3RydWN0b3IiLCJnYW1lIiwiZGltZW5zaW9ucyIsImZsb29ySGVpZ2h0IiwiaGVpZ2h0IiwiY3R4IiwiZW5lbWllcyIsImtpbGxlZF9jaGFyYWN0ZXJzIiwicGxheWVyIiwidGltZXIiLCJzY29yZSIsImFkZE5ld0VuZW1pZXMiLCJzdGFydE11c2ljIiwiZ2FtZU92ZXIiLCJvcHRpb25zIiwic291bmQiLCJIb3dsIiwic3JjIiwidm9sdW1lIiwiQkdNIiwicGxheSIsInN0b3BNdXNpYyIsInN0b3AiLCJkcmF3IiwiZmxhc2hTY3JlZW4iLCJmaWxsU3R5bGUiLCJmaWxsUmVjdCIsIndpZHRoIiwiaW1nIiwiSW1hZ2UiLCJvbmxvYWQiLCJkcmF3SW1hZ2UiLCJkcmF3Q2hhcmFjdGVyIiwibGlmZWJhciIsImRyYXdMaWZlYmFyIiwiZm9yRWFjaCIsImVuZW15Iiwia2lsbGVkRW5lbXkiLCJjb250aW51ZVNjcmVlbiIsIm1vdmUiLCJjb21tYW5kIiwicGVyZm9ybUFjdGlvbiIsInRvdGFsRW5lbWllcyIsIk1hdGgiLCJmbG9vciIsInRpbWUiLCJsZW5ndGgiLCJnZW5lcmF0ZUVuZW15IiwibmV3RW5lbXkiLCJnZXRSYW5kb21TdGFydFBvcyIsInB1c2giLCJzaWRlIiwicmFuZG9tIiwieVN0YXJ0IiwieFN0YXJ0IiwiY2hlY2tBdHRhY2tzTGFuZGVkIiwiY2hlY2tQbGF5ZXJBdHRhY2tzIiwiY2hlY2tFbmVteUF0dGFjayIsImNoZWNrS2lsbGVkRW5lbWllcyIsImkiLCJoZWFsdGgiLCJzbGljZSIsImNvbmNhdCIsInNldFRpbWVvdXQiLCJzaGlmdCIsImRlYXRoIiwiaW5jcmVhc2VTY29yZSIsImNoZWNrS2lsbGVkUGxheWVyIiwiY3VycmVudEFjdGlvbiIsImhpdGJveCIsImNoZWNrQ29sbGlzaW9uIiwiY2FsY3VsYXRlSHVydEJveCIsInN0dW5uZWQiLCJ0YWtlRGFtYWdlIiwiaHVydGJveCIsInN0YXJ0Rmxhc2hTY3JlZW4iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/stage.js\n");

/***/ }),

/***/ "./src/start_menu.js":
/*!***************************!*\
  !*** ./src/start_menu.js ***!
  \***************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"StartMenu\": function() { return /* binding */ StartMenu; }\n/* harmony export */ });\n/* harmony import */ var howler__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! howler */ \"./node_modules/howler/dist/howler.js\");\n/* harmony import */ var howler__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(howler__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _characterModels__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./characterModels */ \"./src/characterModels.js\");\n/* harmony import */ var _menu_option__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./menu_option */ \"./src/menu_option.js\");\n\n\n\nclass StartMenu {\n  constructor(game) {\n    this.game = game;\n    this.dimensions = game.dimensions;\n    this.ctx = game.ctx;\n    this.createMainMenuOptions();\n    this.menuReady = false;\n    setTimeout(() => this.menuReady = true, 4000);\n    this.lightningReady = true;\n    this.framesDrawn = 0;\n    this.currentFrame = 0;\n    this.startMusic();\n  }\n\n  move(inputs) {\n    if (this.menuReady) {\n      if (inputs.up) {\n        this.menuOptions[this.selectedIdx].toggleHighlight();\n        this.selectedIdx--;\n        if (this.selectedIdx < 0) this.selectedIdx = this.menuOptions.length - 1;\n        this.menuOptions[this.selectedIdx].toggleHighlight();\n        this.lockoutMenu();\n      }\n\n      if (inputs.down) {\n        this.menuOptions[this.selectedIdx].toggleHighlight();\n        this.selectedIdx++;\n        if (this.selectedIdx === this.menuOptions.length) this.selectedIdx = 0;\n        this.menuOptions[this.selectedIdx].toggleHighlight();\n        this.lockoutMenu();\n      }\n\n      if (inputs.left) {}\n\n      if (inputs.right) {}\n    }\n  }\n\n  performAction(inputs) {\n    if (this.menuReady) {\n      if (inputs.lAttack) {\n        this.menuOptions[this.selectedIdx].selectedAction();\n        this.menuReady = false;\n        this.lockoutMenu();\n      } // case 'hAttack':\n\n    }\n  }\n\n  playMenuMoveSound() {\n    if (this.game.options.sound === 'on') {\n      this.sound = new howler__WEBPACK_IMPORTED_MODULE_0__.Howl({\n        src: ['./sounds/menu_sounds/MENU_Pick.wav']\n      });\n      this.sound.volume(this.game.options.volume.SFX * .1);\n      this.sound.play();\n    }\n  }\n\n  lockoutMenu() {\n    if (this.menuReady) {\n      this.playMenuMoveSound();\n      this.menuReady = false;\n      setTimeout(() => this.menuReady = true, 200);\n    } else {\n      setTimeout(() => this.menuReady = true, 4000);\n    }\n  }\n\n  createMainMenuOptions() {\n    this.lockoutMenu();\n    this.headline = 'Beat-Em-Up';\n    this.selectedIdx = 0; // const startOption = new MenuOption('Start', [this.dimensions.width/2, this.dimensions.height/2], this.game.startGame.bind(this.game), true)\n\n    const startOption = new _menu_option__WEBPACK_IMPORTED_MODULE_2__.MenuOption('Start', [this.dimensions.width / 2, this.dimensions.height / 2], this.startGame.bind(this), true);\n    const optionsOption = new _menu_option__WEBPACK_IMPORTED_MODULE_2__.MenuOption('Options', [this.dimensions.width / 2, this.dimensions.height / 1.6], this.createOptionsMenuOptions.bind(this));\n    this.menuOptions = [startOption, optionsOption];\n  }\n\n  createOptionsMenuOptions() {\n    this.lockoutMenu();\n    this.headline = 'Options';\n    this.selectedIdx = 0;\n    const soundOption = new _menu_option__WEBPACK_IMPORTED_MODULE_2__.MenuOption('Sound', [this.dimensions.width / 2, this.dimensions.height / 1.85], this.createSoundMenuOptions.bind(this), true);\n    const difficultyOption = new _menu_option__WEBPACK_IMPORTED_MODULE_2__.MenuOption('Difficulty', [this.dimensions.width / 2, this.dimensions.height / 1.6], this.createDifficultyMenuOptions.bind(this));\n    const controlsOption = new _menu_option__WEBPACK_IMPORTED_MODULE_2__.MenuOption('Change Controls', [this.dimensions.width / 2, this.dimensions.height / 1.4], this.createControlsMenuOptions.bind(this));\n    const backOption = new _menu_option__WEBPACK_IMPORTED_MODULE_2__.MenuOption('Back', [this.dimensions.width / 2, this.dimensions.height / 1.2], this.createMainMenuOptions.bind(this));\n    this.menuOptions = [soundOption, difficultyOption, controlsOption, backOption];\n  }\n\n  createControlsMenuOptions() {\n    // TODO:  Make ACTION to change store adjusted controls somehow, then action to actually change controls\n    this.lockoutMenu();\n    this.headline = 'Controls';\n    this.selectedIdx = 0;\n    this.menuOptions = [new _menu_option__WEBPACK_IMPORTED_MODULE_2__.MenuOption(`Reset Default`, [this.dimensions.width / 2, this.dimensions.height / 3], this.updateControls, true), new _menu_option__WEBPACK_IMPORTED_MODULE_2__.MenuOption(`Up: ${this.game.options.controls['up']}`, [this.dimensions.width / 2, this.dimensions.height / 2.5], this.updateControls), new _menu_option__WEBPACK_IMPORTED_MODULE_2__.MenuOption(`Down: ${this.game.options.controls['down']}`, [this.dimensions.width / 2, this.dimensions.height / 2.2], this.updateControls), new _menu_option__WEBPACK_IMPORTED_MODULE_2__.MenuOption(`Left: ${this.game.options.controls['left']}`, [this.dimensions.width / 2, this.dimensions.height / 1.95], this.updateControls), new _menu_option__WEBPACK_IMPORTED_MODULE_2__.MenuOption(`Right: ${this.game.options.controls['right']}`, [this.dimensions.width / 2, this.dimensions.height / 1.75], this.updateControls), new _menu_option__WEBPACK_IMPORTED_MODULE_2__.MenuOption(`Light Attack: ${this.game.options.controls['lAttack']}`, [this.dimensions.width / 2, this.dimensions.height / 1.59], this.updateControls), new _menu_option__WEBPACK_IMPORTED_MODULE_2__.MenuOption(`Heavy Attack: ${this.game.options.controls['hAttack']}`, [this.dimensions.width / 2, this.dimensions.height / 1.46], this.updateControls), new _menu_option__WEBPACK_IMPORTED_MODULE_2__.MenuOption(`Block: ${this.game.options.controls['block']}`, [this.dimensions.width / 2, this.dimensions.height / 1.35], this.updateControls), new _menu_option__WEBPACK_IMPORTED_MODULE_2__.MenuOption(`Throw/Pick Up Item: ${this.game.options.controls['throw']}`, [this.dimensions.width / 2, this.dimensions.height / 1.26], this.updateControls), new _menu_option__WEBPACK_IMPORTED_MODULE_2__.MenuOption(`Confirm Changes`, [this.dimensions.width / 2, this.dimensions.height / 1.10], this.updateControls), new _menu_option__WEBPACK_IMPORTED_MODULE_2__.MenuOption(`Back`, [this.dimensions.width / 2, this.dimensions.height / 1.04], this.createOptionsMenuOptions.bind(this))];\n  }\n\n  createDifficultyMenuOptions() {\n    this.lockoutMenu();\n    this.headline = 'Difficulty';\n    this.menuOptions = [new _menu_option__WEBPACK_IMPORTED_MODULE_2__.MenuOption('Easy', [this.dimensions.width / 2, this.dimensions.height / 1.85], () => this.adjustDifficulty('easy'), this.game.options.difficulty === 'easy' ? true : false), new _menu_option__WEBPACK_IMPORTED_MODULE_2__.MenuOption('Medium', [this.dimensions.width / 2, this.dimensions.height / 1.6], () => this.adjustDifficulty('medium'), this.game.options.difficulty === 'medium' ? true : false), new _menu_option__WEBPACK_IMPORTED_MODULE_2__.MenuOption('Hard', [this.dimensions.width / 2, this.dimensions.height / 1.4], () => this.adjustDifficulty('hard'), this.game.options.difficulty === 'hard' ? true : false)];\n    this.menuOptions.forEach((option, i) => {\n      if (option.selectedStatus) this.selectedIdx = i;\n    });\n  }\n\n  createSoundMenuOptions() {\n    this.lockoutMenu();\n    this.headline = 'Sound';\n    this.menuOptions = [new _menu_option__WEBPACK_IMPORTED_MODULE_2__.MenuOption('On', [this.dimensions.width / 2, this.dimensions.height / 1.85], () => this.adjustSound('on'), this.game.options.sound === 'on' ? true : false), new _menu_option__WEBPACK_IMPORTED_MODULE_2__.MenuOption('Off', [this.dimensions.width / 2, this.dimensions.height / 1.6], () => this.adjustSound('off'), this.game.options.sound === 'off' ? true : false)];\n    this.menuOptions.forEach((option, i) => {\n      if (option.selectedStatus) this.selectedIdx = i;\n    }); // this.draw(this.ctx)\n  }\n\n  draw(ctx) {\n    var img = new Image();\n\n    img.onload = () => {\n      this.ctx.drawImage(img, 0, 0, this.dimensions.width, this.dimensions.height);\n    };\n\n    img.src = './images/gameBackgrounds/titleMenubackground.jpg'; //draw lightning\n\n    if (this.lightningReady) {\n      const data = _characterModels__WEBPACK_IMPORTED_MODULE_1__.BackgroundModels.lightning[this.getRandomType()];\n      const spriteSheet = new Image();\n\n      spriteSheet.onload = () => {\n        let spriteHeight = spriteSheet.height / data.num_rows;\n        let spriteWidth = spriteSheet.width / data.max_frames;\n        let srcX = spriteWidth * this.currentFrame;\n        let srcY = spriteHeight * data.row;\n        let scaleFactor = 3;\n        if (!this.currentLightningPos) this.currentLightningPos = this.getrandomLightningPos();\n        this.ctx.drawImage(spriteSheet, srcX, srcY, spriteWidth, spriteHeight, this.currentLightningPos, 0, spriteWidth * scaleFactor, spriteHeight * scaleFactor);\n        this.framesDrawn++;\n\n        if (this.framesDrawn === 4) {\n          this.currentFrame++;\n\n          if (this.currentFrame > data.max_frames) {\n            this.lightningReady = false;\n            this.currentLightningPos = null;\n            this.startLightningTimeout();\n          }\n\n          this.framesDrawn = 0;\n        }\n      };\n\n      spriteSheet.src = './images/lightning/lightning.png';\n    }\n\n    ctx.font = '50px Comic Sans MS';\n    ctx.fillStyle = \"red\";\n    ctx.textAlign = \"center\";\n    ctx.fillText(`${this.headline}`, this.dimensions.width / 2, this.dimensions.height / 5); // console.log(this)\n\n    this.menuOptions.forEach(option => option.draw(ctx));\n  }\n\n  startGame() {\n    this.stopMusic();\n    this.game.startInstructions();\n  }\n\n  adjustControls() {}\n\n  adjustDifficulty(difficulty) {\n    this.game.options.difficulty = difficulty;\n    this.createOptionsMenuOptions();\n  }\n\n  adjustSound(soundStatus) {\n    this.game.options.sound = soundStatus;\n    this.createOptionsMenuOptions();\n  }\n\n  startLightningTimeout() {\n    //get time between 1 and 5\n    setTimeout(() => {\n      this.lightningReady = true;\n      this.currentFrame = 0;\n    }, Math.random() * 3000);\n  }\n\n  getRandomType() {\n    return Math.floor(Math.random() * 2) === 0 ? 'typeA' : 'typeB';\n  }\n\n  getrandomLightningPos() {\n    return Math.floor(Math.random() * this.dimensions.width);\n  }\n\n  startMusic() {\n    if (this.game.options.sound === 'on') {\n      this.sound = new howler__WEBPACK_IMPORTED_MODULE_0__.Howl({\n        src: ['./sounds/Searching.ogg']\n      });\n      this.sound.volume(this.game.options.volume.BGM * .1);\n      this.sound.play();\n    }\n  }\n\n  stopMusic() {\n    this.sound.stop();\n  }\n\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFXRixJQUFJLENBQUNDLE1BQUwsS0FBZ0IsS0FBS25GLFVBQUwsQ0FBZ0JnQyxLQUEzQyxDQUFQO0FBQ0g7O0FBR0R4QixFQUFBQSxVQUFVLEdBQUc7QUFDVCxRQUFHLEtBQUtULElBQUwsQ0FBVXlCLE9BQVYsQ0FBa0JDLEtBQWxCLEtBQTRCLElBQS9CLEVBQXFDO0FBQ2pDLFdBQUtBLEtBQUwsR0FBYSxJQUFJL0Isd0NBQUosQ0FBUztBQUNsQmdDLFFBQUFBLEdBQUcsRUFBRSxDQUFDLHdCQUFEO0FBRGEsT0FBVCxDQUFiO0FBR0EsV0FBS0QsS0FBTCxDQUFXRSxNQUFYLENBQWtCLEtBQUs1QixJQUFMLENBQVV5QixPQUFWLENBQWtCRyxNQUFsQixDQUF5QjBELEdBQXpCLEdBQStCLEVBQWpEO0FBQ0EsV0FBSzVELEtBQUwsQ0FBV0ksSUFBWDtBQUNIO0FBQ0o7O0FBRURpRCxFQUFBQSxTQUFTLEdBQUc7QUFDUixTQUFLckQsS0FBTCxDQUFXNkQsSUFBWDtBQUNIOztBQXhPa0IiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9hQV9KU19Qcm9qZWN0Ly4vc3JjL3N0YXJ0X21lbnUuanM/YzUzOSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBIb3dsIH0gZnJvbSBcImhvd2xlclwiO1xuaW1wb3J0IHsgQmFja2dyb3VuZE1vZGVscyB9IGZyb20gXCIuL2NoYXJhY3Rlck1vZGVsc1wiO1xuaW1wb3J0IHsgTWVudU9wdGlvbiB9IGZyb20gXCIuL21lbnVfb3B0aW9uXCI7XG5cbmV4cG9ydCBjbGFzcyBTdGFydE1lbnUge1xuICAgIGNvbnN0cnVjdG9yKGdhbWUpIHtcbiAgICAgICAgdGhpcy5nYW1lID0gZ2FtZTtcbiAgICAgICAgdGhpcy5kaW1lbnNpb25zID0gZ2FtZS5kaW1lbnNpb25zO1xuICAgICAgICB0aGlzLmN0eCA9IGdhbWUuY3R4O1xuICAgICAgICB0aGlzLmNyZWF0ZU1haW5NZW51T3B0aW9ucygpXG4gICAgICAgIHRoaXMubWVudVJlYWR5ID0gZmFsc2U7XG4gICAgICAgIHNldFRpbWVvdXQoICgpID0+IHRoaXMubWVudVJlYWR5ID0gdHJ1ZSwgNDAwMClcbiAgICAgICAgdGhpcy5saWdodG5pbmdSZWFkeSA9IHRydWU7XG4gICAgICAgIHRoaXMuZnJhbWVzRHJhd24gPSAwO1xuICAgICAgICB0aGlzLmN1cnJlbnRGcmFtZSA9IDA7XG4gICAgICAgIHRoaXMuc3RhcnRNdXNpYygpXG4gICAgfVxuXG4gICAgbW92ZShpbnB1dHMpIHtcbiAgICAgICAgaWYodGhpcy5tZW51UmVhZHkpIHtcbiAgICAgICAgICAgIGlmIChpbnB1dHMudXApIHtcbiAgICAgICAgICAgICAgICB0aGlzLm1lbnVPcHRpb25zW3RoaXMuc2VsZWN0ZWRJZHhdLnRvZ2dsZUhpZ2hsaWdodCgpO1xuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRJZHgtLTtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5zZWxlY3RlZElkeCA8IDApIHRoaXMuc2VsZWN0ZWRJZHggPSB0aGlzLm1lbnVPcHRpb25zLmxlbmd0aC0xO1xuICAgICAgICAgICAgICAgIHRoaXMubWVudU9wdGlvbnNbdGhpcy5zZWxlY3RlZElkeF0udG9nZ2xlSGlnaGxpZ2h0KCk7XG4gICAgICAgICAgICAgICAgdGhpcy5sb2Nrb3V0TWVudSgpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoaW5wdXRzLmRvd24pIHtcbiAgICAgICAgICAgICAgICB0aGlzLm1lbnVPcHRpb25zW3RoaXMuc2VsZWN0ZWRJZHhdLnRvZ2dsZUhpZ2hsaWdodCgpO1xuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRJZHgrKztcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5zZWxlY3RlZElkeCA9PT0gdGhpcy5tZW51T3B0aW9ucy5sZW5ndGgpIHRoaXMuc2VsZWN0ZWRJZHggPSAwO1xuICAgICAgICAgICAgICAgIHRoaXMubWVudU9wdGlvbnNbdGhpcy5zZWxlY3RlZElkeF0udG9nZ2xlSGlnaGxpZ2h0KCk7XG4gICAgICAgICAgICAgICAgdGhpcy5sb2Nrb3V0TWVudSgpXG5cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChpbnB1dHMubGVmdCkge1xuXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoaW5wdXRzLnJpZ2h0KXtcblxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICB9XG5cbiAgICBwZXJmb3JtQWN0aW9uKGlucHV0cykge1xuICAgICAgICBpZih0aGlzLm1lbnVSZWFkeSkge1xuICAgICAgICAgICAgaWYoaW5wdXRzLmxBdHRhY2spIHtcbiAgICAgICAgICAgICAgICB0aGlzLm1lbnVPcHRpb25zW3RoaXMuc2VsZWN0ZWRJZHhdLnNlbGVjdGVkQWN0aW9uKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5tZW51UmVhZHkgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB0aGlzLmxvY2tvdXRNZW51KClcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIGNhc2UgJ2hBdHRhY2snOlxuICAgICAgICB9XG4gICAgfVxuXG4gICAgcGxheU1lbnVNb3ZlU291bmQoKSB7XG4gICAgICAgIGlmKHRoaXMuZ2FtZS5vcHRpb25zLnNvdW5kID09PSAnb24nKSB7XG4gICAgICAgICAgICB0aGlzLnNvdW5kID0gbmV3IEhvd2woe1xuICAgICAgICAgICAgICAgIHNyYzogWycuL3NvdW5kcy9tZW51X3NvdW5kcy9NRU5VX1BpY2sud2F2J11cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5zb3VuZC52b2x1bWUodGhpcy5nYW1lLm9wdGlvbnMudm9sdW1lLlNGWCAqIC4xKSAgXG4gICAgICAgICAgICB0aGlzLnNvdW5kLnBsYXkoKTtcbiAgICAgICAgfVxuXG4gICAgfVxuXG4gICAgXG5cbiAgICBsb2Nrb3V0TWVudSgpIHtcbiAgICAgICAgaWYodGhpcy5tZW51UmVhZHkpIHtcbiAgICAgICAgICAgIHRoaXMucGxheU1lbnVNb3ZlU291bmQoKTsgXG4gICAgICAgICAgICB0aGlzLm1lbnVSZWFkeSA9IGZhbHNlO1xuICAgICAgICAgICAgc2V0VGltZW91dCggKCkgPT4gdGhpcy5tZW51UmVhZHkgPSB0cnVlLCAyMDApXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBzZXRUaW1lb3V0KCAoKSA9PiB0aGlzLm1lbnVSZWFkeSA9IHRydWUsIDQwMDApXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBjcmVhdGVNYWluTWVudU9wdGlvbnMoKSB7XG4gICAgICAgIHRoaXMubG9ja291dE1lbnUoKTtcbiAgICAgICAgdGhpcy5oZWFkbGluZSA9ICdCZWF0LUVtLVVwJztcbiAgICAgICAgdGhpcy5zZWxlY3RlZElkeCA9IDA7XG4gICAgICAgIC8vIGNvbnN0IHN0YXJ0T3B0aW9uID0gbmV3IE1lbnVPcHRpb24oJ1N0YXJ0JywgW3RoaXMuZGltZW5zaW9ucy53aWR0aC8yLCB0aGlzLmRpbWVuc2lvbnMuaGVpZ2h0LzJdLCB0aGlzLmdhbWUuc3RhcnRHYW1lLmJpbmQodGhpcy5nYW1lKSwgdHJ1ZSlcbiAgICAgICAgY29uc3Qgc3RhcnRPcHRpb24gPSBuZXcgTWVudU9wdGlvbignU3RhcnQnLCBbdGhpcy5kaW1lbnNpb25zLndpZHRoLzIsIHRoaXMuZGltZW5zaW9ucy5oZWlnaHQvMl0sIHRoaXMuc3RhcnRHYW1lLmJpbmQodGhpcyksIHRydWUpXG4gICAgICAgIGNvbnN0IG9wdGlvbnNPcHRpb24gPSBuZXcgTWVudU9wdGlvbignT3B0aW9ucycsIFt0aGlzLmRpbWVuc2lvbnMud2lkdGgvMiwgdGhpcy5kaW1lbnNpb25zLmhlaWdodC8xLjZdLCB0aGlzLmNyZWF0ZU9wdGlvbnNNZW51T3B0aW9ucy5iaW5kKHRoaXMpKVxuICAgICAgICB0aGlzLm1lbnVPcHRpb25zID0gW3N0YXJ0T3B0aW9uLCBvcHRpb25zT3B0aW9uXTtcbiAgICB9XG5cbiAgICBjcmVhdGVPcHRpb25zTWVudU9wdGlvbnMoKSB7XG4gICAgICAgIHRoaXMubG9ja291dE1lbnUoKTtcbiAgICAgICAgdGhpcy5oZWFkbGluZSA9ICdPcHRpb25zJztcbiAgICAgICAgdGhpcy5zZWxlY3RlZElkeCA9IDA7XG4gICAgICAgIGNvbnN0IHNvdW5kT3B0aW9uID0gbmV3IE1lbnVPcHRpb24oJ1NvdW5kJywgW3RoaXMuZGltZW5zaW9ucy53aWR0aC8yLCB0aGlzLmRpbWVuc2lvbnMuaGVpZ2h0LzEuODVdLCB0aGlzLmNyZWF0ZVNvdW5kTWVudU9wdGlvbnMuYmluZCh0aGlzKSwgdHJ1ZSlcbiAgICAgICAgY29uc3QgZGlmZmljdWx0eU9wdGlvbiA9IG5ldyBNZW51T3B0aW9uKCdEaWZmaWN1bHR5JywgW3RoaXMuZGltZW5zaW9ucy53aWR0aC8yLCB0aGlzLmRpbWVuc2lvbnMuaGVpZ2h0LzEuNl0sIHRoaXMuY3JlYXRlRGlmZmljdWx0eU1lbnVPcHRpb25zLmJpbmQodGhpcykpXG4gICAgICAgIGNvbnN0IGNvbnRyb2xzT3B0aW9uID0gbmV3IE1lbnVPcHRpb24oJ0NoYW5nZSBDb250cm9scycsIFt0aGlzLmRpbWVuc2lvbnMud2lkdGgvMiwgdGhpcy5kaW1lbnNpb25zLmhlaWdodC8xLjRdLCB0aGlzLmNyZWF0ZUNvbnRyb2xzTWVudU9wdGlvbnMuYmluZCh0aGlzKSlcbiAgICAgICAgY29uc3QgYmFja09wdGlvbiA9IG5ldyBNZW51T3B0aW9uKCdCYWNrJywgW3RoaXMuZGltZW5zaW9ucy53aWR0aC8yLCB0aGlzLmRpbWVuc2lvbnMuaGVpZ2h0LzEuMl0sIHRoaXMuY3JlYXRlTWFpbk1lbnVPcHRpb25zLmJpbmQodGhpcykpXG4gICAgICAgIHRoaXMubWVudU9wdGlvbnMgPSBbc291bmRPcHRpb24sIGRpZmZpY3VsdHlPcHRpb24sIGNvbnRyb2xzT3B0aW9uLCBiYWNrT3B0aW9uXTtcbiAgICB9XG5cbiAgICBjcmVhdGVDb250cm9sc01lbnVPcHRpb25zKCkge1xuICAgICAgICAvLyBUT0RPOiAgTWFrZSBBQ1RJT04gdG8gY2hhbmdlIHN0b3JlIGFkanVzdGVkIGNvbnRyb2xzIHNvbWVob3csIHRoZW4gYWN0aW9uIHRvIGFjdHVhbGx5IGNoYW5nZSBjb250cm9sc1xuICAgICAgICB0aGlzLmxvY2tvdXRNZW51KCk7XG4gICAgICAgIHRoaXMuaGVhZGxpbmUgPSAnQ29udHJvbHMnO1xuICAgICAgICB0aGlzLnNlbGVjdGVkSWR4ID0gMDtcbiAgICAgICAgdGhpcy5tZW51T3B0aW9ucyA9ICBbICAgIFxuICAgICAgICAgbmV3IE1lbnVPcHRpb24oYFJlc2V0IERlZmF1bHRgLFt0aGlzLmRpbWVuc2lvbnMud2lkdGgvMiwgdGhpcy5kaW1lbnNpb25zLmhlaWdodC8zXSwgdGhpcy51cGRhdGVDb250cm9scywgdHJ1ZSksXG4gICAgICAgICBuZXcgTWVudU9wdGlvbihgVXA6ICR7dGhpcy5nYW1lLm9wdGlvbnMuY29udHJvbHNbJ3VwJ119YCxbdGhpcy5kaW1lbnNpb25zLndpZHRoLzIsIHRoaXMuZGltZW5zaW9ucy5oZWlnaHQvMi41XSwgdGhpcy51cGRhdGVDb250cm9scyksICAgXG4gICAgICAgICBuZXcgTWVudU9wdGlvbihgRG93bjogJHt0aGlzLmdhbWUub3B0aW9ucy5jb250cm9sc1snZG93biddfWAsW3RoaXMuZGltZW5zaW9ucy53aWR0aC8yLCB0aGlzLmRpbWVuc2lvbnMuaGVpZ2h0LzIuMl0sIHRoaXMudXBkYXRlQ29udHJvbHMpLCAgIFxuICAgICAgICAgbmV3IE1lbnVPcHRpb24oYExlZnQ6ICR7dGhpcy5nYW1lLm9wdGlvbnMuY29udHJvbHNbJ2xlZnQnXX1gLFt0aGlzLmRpbWVuc2lvbnMud2lkdGgvMiwgdGhpcy5kaW1lbnNpb25zLmhlaWdodC8xLjk1XSwgdGhpcy51cGRhdGVDb250cm9scyksXG4gICAgICAgICBuZXcgTWVudU9wdGlvbihgUmlnaHQ6ICR7dGhpcy5nYW1lLm9wdGlvbnMuY29udHJvbHNbJ3JpZ2h0J119YCxbdGhpcy5kaW1lbnNpb25zLndpZHRoLzIsIHRoaXMuZGltZW5zaW9ucy5oZWlnaHQvMS43NV0sIHRoaXMudXBkYXRlQ29udHJvbHMpLFxuICAgICAgICAgbmV3IE1lbnVPcHRpb24oYExpZ2h0IEF0dGFjazogJHt0aGlzLmdhbWUub3B0aW9ucy5jb250cm9sc1snbEF0dGFjayddfWAsW3RoaXMuZGltZW5zaW9ucy53aWR0aC8yLCB0aGlzLmRpbWVuc2lvbnMuaGVpZ2h0LzEuNTldLCB0aGlzLnVwZGF0ZUNvbnRyb2xzKSxcbiAgICAgICAgIG5ldyBNZW51T3B0aW9uKGBIZWF2eSBBdHRhY2s6ICR7dGhpcy5nYW1lLm9wdGlvbnMuY29udHJvbHNbJ2hBdHRhY2snXX1gLFt0aGlzLmRpbWVuc2lvbnMud2lkdGgvMiwgdGhpcy5kaW1lbnNpb25zLmhlaWdodC8xLjQ2XSwgdGhpcy51cGRhdGVDb250cm9scyksICAgICAgICBcbiAgICAgICAgIG5ldyBNZW51T3B0aW9uKGBCbG9jazogJHt0aGlzLmdhbWUub3B0aW9ucy5jb250cm9sc1snYmxvY2snXX1gLFt0aGlzLmRpbWVuc2lvbnMud2lkdGgvMiwgdGhpcy5kaW1lbnNpb25zLmhlaWdodC8xLjM1XSwgdGhpcy51cGRhdGVDb250cm9scyksXG4gICAgICAgICBuZXcgTWVudU9wdGlvbihgVGhyb3cvUGljayBVcCBJdGVtOiAke3RoaXMuZ2FtZS5vcHRpb25zLmNvbnRyb2xzWyd0aHJvdyddfWAsW3RoaXMuZGltZW5zaW9ucy53aWR0aC8yLCB0aGlzLmRpbWVuc2lvbnMuaGVpZ2h0LzEuMjZdLCB0aGlzLnVwZGF0ZUNvbnRyb2xzKSwgXG4gICAgICAgICBuZXcgTWVudU9wdGlvbihgQ29uZmlybSBDaGFuZ2VzYCxbdGhpcy5kaW1lbnNpb25zLndpZHRoLzIsIHRoaXMuZGltZW5zaW9ucy5oZWlnaHQvMS4xMF0sIHRoaXMudXBkYXRlQ29udHJvbHMpLFxuICAgICAgICAgbmV3IE1lbnVPcHRpb24oYEJhY2tgLFt0aGlzLmRpbWVuc2lvbnMud2lkdGgvMiwgdGhpcy5kaW1lbnNpb25zLmhlaWdodC8xLjA0XSwgdGhpcy5jcmVhdGVPcHRpb25zTWVudU9wdGlvbnMuYmluZCh0aGlzKSkgXVxuICAgICAgICAgIFxuICAgIH0gICBcblxuICAgIGNyZWF0ZURpZmZpY3VsdHlNZW51T3B0aW9ucygpIHtcbiAgICAgICAgdGhpcy5sb2Nrb3V0TWVudSgpO1xuICAgICAgICB0aGlzLmhlYWRsaW5lID0gJ0RpZmZpY3VsdHknO1xuICAgICAgICB0aGlzLm1lbnVPcHRpb25zID0gW1xuICAgICAgICAgICAgbmV3IE1lbnVPcHRpb24oJ0Vhc3knLCBbdGhpcy5kaW1lbnNpb25zLndpZHRoLzIsIHRoaXMuZGltZW5zaW9ucy5oZWlnaHQvMS44NV0sICgpID0+IHRoaXMuYWRqdXN0RGlmZmljdWx0eSgnZWFzeScpLCB0aGlzLmdhbWUub3B0aW9ucy5kaWZmaWN1bHR5ID09PSAnZWFzeScgPyB0cnVlIDogZmFsc2UpLFxuICAgICAgICAgICAgbmV3IE1lbnVPcHRpb24oJ01lZGl1bScsIFt0aGlzLmRpbWVuc2lvbnMud2lkdGgvMiwgdGhpcy5kaW1lbnNpb25zLmhlaWdodC8xLjZdLCAoKSA9PiB0aGlzLmFkanVzdERpZmZpY3VsdHkoJ21lZGl1bScpLCB0aGlzLmdhbWUub3B0aW9ucy5kaWZmaWN1bHR5ID09PSAnbWVkaXVtJyA/IHRydWUgOiBmYWxzZSksXG4gICAgICAgICAgICBuZXcgTWVudU9wdGlvbignSGFyZCcsIFt0aGlzLmRpbWVuc2lvbnMud2lkdGgvMiwgdGhpcy5kaW1lbnNpb25zLmhlaWdodC8xLjRdLCAoKSA9PiB0aGlzLmFkanVzdERpZmZpY3VsdHkoJ2hhcmQnKSwgdGhpcy5nYW1lLm9wdGlvbnMuZGlmZmljdWx0eSA9PT0gJ2hhcmQnID8gdHJ1ZSA6IGZhbHNlKVxuICAgICAgICBdXG4gICAgICAgIHRoaXMubWVudU9wdGlvbnMuZm9yRWFjaCggKG9wdGlvbiwgaSkgPT4ge1xuICAgICAgICAgICAgaWYob3B0aW9uLnNlbGVjdGVkU3RhdHVzKSB0aGlzLnNlbGVjdGVkSWR4ID0gaTtcbiAgICAgICAgfSlcbiAgICB9XG5cbiAgICBjcmVhdGVTb3VuZE1lbnVPcHRpb25zKCkge1xuICAgICAgICB0aGlzLmxvY2tvdXRNZW51KCk7XG4gICAgICAgIHRoaXMuaGVhZGxpbmUgPSAnU291bmQnO1xuICAgICAgICB0aGlzLm1lbnVPcHRpb25zID0gW1xuICAgICAgICAgICAgbmV3IE1lbnVPcHRpb24oJ09uJywgW3RoaXMuZGltZW5zaW9ucy53aWR0aC8yLCB0aGlzLmRpbWVuc2lvbnMuaGVpZ2h0LzEuODVdLCAoKSA9PiB0aGlzLmFkanVzdFNvdW5kKCdvbicpLCB0aGlzLmdhbWUub3B0aW9ucy5zb3VuZCA9PT0gJ29uJyA/IHRydWUgOiBmYWxzZSksXG4gICAgICAgICAgICBuZXcgTWVudU9wdGlvbignT2ZmJywgW3RoaXMuZGltZW5zaW9ucy53aWR0aC8yLCB0aGlzLmRpbWVuc2lvbnMuaGVpZ2h0LzEuNl0sICgpID0+IHRoaXMuYWRqdXN0U291bmQoJ29mZicpLCB0aGlzLmdhbWUub3B0aW9ucy5zb3VuZCA9PT0gJ29mZicgPyB0cnVlIDogZmFsc2UpLFxuICAgICAgICBdXG4gICAgICAgIHRoaXMubWVudU9wdGlvbnMuZm9yRWFjaCggKG9wdGlvbiwgaSkgPT4ge1xuICAgICAgICAgICAgaWYob3B0aW9uLnNlbGVjdGVkU3RhdHVzKSB0aGlzLnNlbGVjdGVkSWR4ID0gaTtcbiAgICAgICAgfSlcbiAgICAgICAgLy8gdGhpcy5kcmF3KHRoaXMuY3R4KVxuICAgIH1cblxuICAgIGRyYXcoY3R4KSB7XG4gICAgICAgIHZhciBpbWcgPSBuZXcgSW1hZ2UoKTtcbiAgICAgICAgaW1nLm9ubG9hZCA9ICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuY3R4LmRyYXdJbWFnZShpbWcsIDAsIDAsIHRoaXMuZGltZW5zaW9ucy53aWR0aCwgdGhpcy5kaW1lbnNpb25zLmhlaWdodCk7XG4gICAgICAgIH07XG4gICAgICAgIGltZy5zcmMgPSAnLi9pbWFnZXMvZ2FtZUJhY2tncm91bmRzL3RpdGxlTWVudWJhY2tncm91bmQuanBnJzsgXG4gICAgICAgIC8vZHJhdyBsaWdodG5pbmdcbiAgICAgICAgaWYodGhpcy5saWdodG5pbmdSZWFkeSkge1xuICAgICAgICAgICAgY29uc3QgZGF0YSA9IEJhY2tncm91bmRNb2RlbHMubGlnaHRuaW5nW3RoaXMuZ2V0UmFuZG9tVHlwZSgpXVxuICAgICAgICAgICAgY29uc3Qgc3ByaXRlU2hlZXQgPSBuZXcgSW1hZ2UoKTtcbiAgICAgICAgICAgIHNwcml0ZVNoZWV0Lm9ubG9hZCA9ICgpID0+IHtcbiAgICAgICAgICAgICAgICBsZXQgc3ByaXRlSGVpZ2h0ID0gc3ByaXRlU2hlZXQuaGVpZ2h0IC8gZGF0YS5udW1fcm93cztcbiAgICAgICAgICAgICAgICBsZXQgc3ByaXRlV2lkdGggPSBzcHJpdGVTaGVldC53aWR0aCAvIGRhdGEubWF4X2ZyYW1lcztcbiAgICAgICAgICAgICAgICBsZXQgc3JjWCA9IHNwcml0ZVdpZHRoICogdGhpcy5jdXJyZW50RnJhbWU7XG4gICAgICAgICAgICAgICAgbGV0IHNyY1kgPSBzcHJpdGVIZWlnaHQgKiBkYXRhLnJvd1xuICAgICAgICAgICAgICAgIGxldCBzY2FsZUZhY3RvciA9IDNcblxuICAgICAgICAgICAgICAgIGlmKCF0aGlzLmN1cnJlbnRMaWdodG5pbmdQb3MpIHRoaXMuY3VycmVudExpZ2h0bmluZ1BvcyA9IHRoaXMuZ2V0cmFuZG9tTGlnaHRuaW5nUG9zKClcbiAgICAgICAgICAgICAgICB0aGlzLmN0eC5kcmF3SW1hZ2Uoc3ByaXRlU2hlZXQsIHNyY1gsIHNyY1ksIHNwcml0ZVdpZHRoLCBzcHJpdGVIZWlnaHQsIHRoaXMuY3VycmVudExpZ2h0bmluZ1BvcywgMCwgc3ByaXRlV2lkdGggKiBzY2FsZUZhY3Rvciwgc3ByaXRlSGVpZ2h0ICogc2NhbGVGYWN0b3IpXG4gICAgICAgICAgICAgICAgdGhpcy5mcmFtZXNEcmF3bisrXG4gICAgICAgICAgICAgICAgaWYoIHRoaXMuZnJhbWVzRHJhd24gPT09IDQpe1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRGcmFtZSsrXG4gICAgICAgICAgICAgICAgICAgIGlmKHRoaXMuY3VycmVudEZyYW1lID4gZGF0YS5tYXhfZnJhbWVzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmxpZ2h0bmluZ1JlYWR5ID0gZmFsc2VcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudExpZ2h0bmluZ1BvcyA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXJ0TGlnaHRuaW5nVGltZW91dCgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZnJhbWVzRHJhd24gPSAwO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHNwcml0ZVNoZWV0LnNyYyA9ICcuL2ltYWdlcy9saWdodG5pbmcvbGlnaHRuaW5nLnBuZyc7IFxuICAgICAgICB9XG5cbiAgICAgICAgY3R4LmZvbnQgPSAnNTBweCBDb21pYyBTYW5zIE1TJztcbiAgICAgICAgY3R4LmZpbGxTdHlsZSA9IFwicmVkXCI7XG4gICAgICAgIGN0eC50ZXh0QWxpZ24gPSBcImNlbnRlclwiO1xuICAgICAgICBjdHguZmlsbFRleHQoYCR7dGhpcy5oZWFkbGluZX1gLCB0aGlzLmRpbWVuc2lvbnMud2lkdGgvMiwgdGhpcy5kaW1lbnNpb25zLmhlaWdodC81KTtcbiAgICAgICAgLy8gY29uc29sZS5sb2codGhpcylcbiAgICAgICAgdGhpcy5tZW51T3B0aW9ucy5mb3JFYWNoKCBvcHRpb24gPT4gb3B0aW9uLmRyYXcoY3R4KSlcbiAgICB9XG5cbiAgICBzdGFydEdhbWUoKSB7XG4gICAgICAgIHRoaXMuc3RvcE11c2ljKClcbiAgICAgICAgdGhpcy5nYW1lLnN0YXJ0SW5zdHJ1Y3Rpb25zKCk7XG4gICAgfVxuXG4gICAgYWRqdXN0Q29udHJvbHMoKSB7XG5cbiAgICB9XG5cbiAgICBhZGp1c3REaWZmaWN1bHR5KGRpZmZpY3VsdHkpIHtcbiAgICAgICAgdGhpcy5nYW1lLm9wdGlvbnMuZGlmZmljdWx0eSA9IGRpZmZpY3VsdHlcbiAgICAgICAgdGhpcy5jcmVhdGVPcHRpb25zTWVudU9wdGlvbnMoKTtcbiAgICB9XG5cbiAgICBhZGp1c3RTb3VuZChzb3VuZFN0YXR1cykge1xuICAgICAgICB0aGlzLmdhbWUub3B0aW9ucy5zb3VuZCA9IHNvdW5kU3RhdHVzO1xuICAgICAgICB0aGlzLmNyZWF0ZU9wdGlvbnNNZW51T3B0aW9ucygpXG4gICAgfVxuXG4gICAgc3RhcnRMaWdodG5pbmdUaW1lb3V0KCkge1xuICAgICAgICAvL2dldCB0aW1lIGJldHdlZW4gMSBhbmQgNVxuICAgICAgICBzZXRUaW1lb3V0KCAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmxpZ2h0bmluZ1JlYWR5ID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMuY3VycmVudEZyYW1lID0gMDtcbiAgICAgICAgfSwgTWF0aC5yYW5kb20oKSAqIDMwMDApO1xuICAgIH1cblxuICAgIGdldFJhbmRvbVR5cGUoKSB7XG4gICAgICAgIHJldHVybiBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAyKSA9PT0gMCA/ICd0eXBlQScgOiAndHlwZUInXG4gICAgfVxuXG4gICAgZ2V0cmFuZG9tTGlnaHRuaW5nUG9zKCkge1xuICAgICAgICByZXR1cm4gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogdGhpcy5kaW1lbnNpb25zLndpZHRoKVxuICAgIH1cblxuXG4gICAgc3RhcnRNdXNpYygpIHtcbiAgICAgICAgaWYodGhpcy5nYW1lLm9wdGlvbnMuc291bmQgPT09ICdvbicpIHtcbiAgICAgICAgICAgIHRoaXMuc291bmQgPSBuZXcgSG93bCh7XG4gICAgICAgICAgICAgICAgc3JjOiBbJy4vc291bmRzL1NlYXJjaGluZy5vZ2cnXVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLnNvdW5kLnZvbHVtZSh0aGlzLmdhbWUub3B0aW9ucy52b2x1bWUuQkdNICogLjEpICBcbiAgICAgICAgICAgIHRoaXMuc291bmQucGxheSgpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgc3RvcE11c2ljKCkge1xuICAgICAgICB0aGlzLnNvdW5kLnN0b3AoKTtcbiAgICB9XG59Il0sIm5hbWVzIjpbIkhvd2wiLCJCYWNrZ3JvdW5kTW9kZWxzIiwiTWVudU9wdGlvbiIsIlN0YXJ0TWVudSIsImNvbnN0cnVjdG9yIiwiZ2FtZSIsImRpbWVuc2lvbnMiLCJjdHgiLCJjcmVhdGVNYWluTWVudU9wdGlvbnMiLCJtZW51UmVhZHkiLCJzZXRUaW1lb3V0IiwibGlnaHRuaW5nUmVhZHkiLCJmcmFtZXNEcmF3biIsImN1cnJlbnRGcmFtZSIsInN0YXJ0TXVzaWMiLCJtb3ZlIiwiaW5wdXRzIiwidXAiLCJtZW51T3B0aW9ucyIsInNlbGVjdGVkSWR4IiwidG9nZ2xlSGlnaGxpZ2h0IiwibGVuZ3RoIiwibG9ja291dE1lbnUiLCJkb3duIiwibGVmdCIsInJpZ2h0IiwicGVyZm9ybUFjdGlvbiIsImxBdHRhY2siLCJzZWxlY3RlZEFjdGlvbiIsInBsYXlNZW51TW92ZVNvdW5kIiwib3B0aW9ucyIsInNvdW5kIiwic3JjIiwidm9sdW1lIiwiU0ZYIiwicGxheSIsImhlYWRsaW5lIiwic3RhcnRPcHRpb24iLCJ3aWR0aCIsImhlaWdodCIsInN0YXJ0R2FtZSIsImJpbmQiLCJvcHRpb25zT3B0aW9uIiwiY3JlYXRlT3B0aW9uc01lbnVPcHRpb25zIiwic291bmRPcHRpb24iLCJjcmVhdGVTb3VuZE1lbnVPcHRpb25zIiwiZGlmZmljdWx0eU9wdGlvbiIsImNyZWF0ZURpZmZpY3VsdHlNZW51T3B0aW9ucyIsImNvbnRyb2xzT3B0aW9uIiwiY3JlYXRlQ29udHJvbHNNZW51T3B0aW9ucyIsImJhY2tPcHRpb24iLCJ1cGRhdGVDb250cm9scyIsImNvbnRyb2xzIiwiYWRqdXN0RGlmZmljdWx0eSIsImRpZmZpY3VsdHkiLCJmb3JFYWNoIiwib3B0aW9uIiwiaSIsInNlbGVjdGVkU3RhdHVzIiwiYWRqdXN0U291bmQiLCJkcmF3IiwiaW1nIiwiSW1hZ2UiLCJvbmxvYWQiLCJkcmF3SW1hZ2UiLCJkYXRhIiwibGlnaHRuaW5nIiwiZ2V0UmFuZG9tVHlwZSIsInNwcml0ZVNoZWV0Iiwic3ByaXRlSGVpZ2h0IiwibnVtX3Jvd3MiLCJzcHJpdGVXaWR0aCIsIm1heF9mcmFtZXMiLCJzcmNYIiwic3JjWSIsInJvdyIsInNjYWxlRmFjdG9yIiwiY3VycmVudExpZ2h0bmluZ1BvcyIsImdldHJhbmRvbUxpZ2h0bmluZ1BvcyIsInN0YXJ0TGlnaHRuaW5nVGltZW91dCIsImZvbnQiLCJmaWxsU3R5bGUiLCJ0ZXh0QWxpZ24iLCJmaWxsVGV4dCIsInN0b3BNdXNpYyIsInN0YXJ0SW5zdHJ1Y3Rpb25zIiwiYWRqdXN0Q29udHJvbHMiLCJzb3VuZFN0YXR1cyIsIk1hdGgiLCJyYW5kb20iLCJmbG9vciIsIkJHTSIsInN0b3AiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/start_menu.js\n");

/***/ }),

/***/ "./src/timer.js":
/*!**********************!*\
  !*** ./src/timer.js ***!
  \**********************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"Timer\": function() { return /* binding */ Timer; }\n/* harmony export */ });\nclass Timer {\n  constructor(ctx, dimensions) {\n    this.ctx = ctx;\n    this.dimensions = dimensions;\n    this.time = 0;\n    this.counter = this.startTimer();\n  }\n\n  startTimer() {\n    return setInterval(() => this.time += 1, 1000);\n  }\n\n  stopTimer() {\n    clearInterval(this.counter);\n  }\n\n  draw() {\n    this.ctx.font = '40px Sans-serif';\n    this.ctx.strokeStyle = 'black';\n    this.ctx.lineWidth = 8;\n    this.ctx.fillStyle = 'yellow';\n    this.ctx.strokeText('TIME', this.dimensions.width / 2 - 10, 40);\n    this.ctx.fillText('TIME', this.dimensions.width / 2 - 10, 40);\n    this.ctx.font = '60px Sans-serif';\n    this.ctx.strokeText(this.time, this.dimensions.width / 2 - 10, 100);\n    this.ctx.fillText(this.time, this.dimensions.width / 2 - 10, 100);\n  }\n\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvdGltZXIuanMuanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFPLE1BQU1BLEtBQU4sQ0FBWTtBQUNmQyxFQUFBQSxXQUFXLENBQUNDLEdBQUQsRUFBTUMsVUFBTixFQUFrQjtBQUN6QixTQUFLRCxHQUFMLEdBQVdBLEdBQVg7QUFDQSxTQUFLQyxVQUFMLEdBQWtCQSxVQUFsQjtBQUNBLFNBQUtDLElBQUwsR0FBWSxDQUFaO0FBQ0EsU0FBS0MsT0FBTCxHQUFlLEtBQUtDLFVBQUwsRUFBZjtBQUNIOztBQUVEQSxFQUFBQSxVQUFVLEdBQUc7QUFDVCxXQUFPQyxXQUFXLENBQUUsTUFBTSxLQUFLSCxJQUFMLElBQWEsQ0FBckIsRUFBeUIsSUFBekIsQ0FBbEI7QUFDSDs7QUFFREksRUFBQUEsU0FBUyxHQUFHO0FBQ1RDLElBQUFBLGFBQWEsQ0FBQyxLQUFLSixPQUFOLENBQWI7QUFDRjs7QUFFREssRUFBQUEsSUFBSSxHQUFHO0FBQ0gsU0FBS1IsR0FBTCxDQUFTUyxJQUFULEdBQWdCLGlCQUFoQjtBQUNBLFNBQUtULEdBQUwsQ0FBU1UsV0FBVCxHQUF1QixPQUF2QjtBQUNBLFNBQUtWLEdBQUwsQ0FBU1csU0FBVCxHQUFxQixDQUFyQjtBQUNBLFNBQUtYLEdBQUwsQ0FBU1ksU0FBVCxHQUFxQixRQUFyQjtBQUNBLFNBQUtaLEdBQUwsQ0FBU2EsVUFBVCxDQUFvQixNQUFwQixFQUE0QixLQUFLWixVQUFMLENBQWdCYSxLQUFoQixHQUFzQixDQUF0QixHQUEwQixFQUF0RCxFQUEwRCxFQUExRDtBQUNBLFNBQUtkLEdBQUwsQ0FBU2UsUUFBVCxDQUFrQixNQUFsQixFQUEwQixLQUFLZCxVQUFMLENBQWdCYSxLQUFoQixHQUF3QixDQUF4QixHQUE0QixFQUF0RCxFQUEwRCxFQUExRDtBQUNBLFNBQUtkLEdBQUwsQ0FBU1MsSUFBVCxHQUFnQixpQkFBaEI7QUFDQSxTQUFLVCxHQUFMLENBQVNhLFVBQVQsQ0FBb0IsS0FBS1gsSUFBekIsRUFBOEIsS0FBS0QsVUFBTCxDQUFnQmEsS0FBaEIsR0FBd0IsQ0FBeEIsR0FBNEIsRUFBMUQsRUFBK0QsR0FBL0Q7QUFDQSxTQUFLZCxHQUFMLENBQVNlLFFBQVQsQ0FBa0IsS0FBS2IsSUFBdkIsRUFBNkIsS0FBS0QsVUFBTCxDQUFnQmEsS0FBaEIsR0FBd0IsQ0FBeEIsR0FBNEIsRUFBekQsRUFBNkQsR0FBN0Q7QUFDSDs7QUExQmMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9hQV9KU19Qcm9qZWN0Ly4vc3JjL3RpbWVyLmpzP2FiNGIiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNsYXNzIFRpbWVyIHtcbiAgICBjb25zdHJ1Y3RvcihjdHgsIGRpbWVuc2lvbnMpIHtcbiAgICAgICAgdGhpcy5jdHggPSBjdHg7XG4gICAgICAgIHRoaXMuZGltZW5zaW9ucyA9IGRpbWVuc2lvbnM7XG4gICAgICAgIHRoaXMudGltZSA9IDA7XG4gICAgICAgIHRoaXMuY291bnRlciA9IHRoaXMuc3RhcnRUaW1lcigpO1xuICAgIH1cblxuICAgIHN0YXJ0VGltZXIoKSB7XG4gICAgICAgIHJldHVybiBzZXRJbnRlcnZhbCggKCkgPT4gdGhpcy50aW1lICs9IDEgLCAxMDAwKVxuICAgIH1cblxuICAgIHN0b3BUaW1lcigpIHtcbiAgICAgICBjbGVhckludGVydmFsKHRoaXMuY291bnRlcilcbiAgICB9XG5cbiAgICBkcmF3KCkge1xuICAgICAgICB0aGlzLmN0eC5mb250ID0gJzQwcHggU2Fucy1zZXJpZic7XG4gICAgICAgIHRoaXMuY3R4LnN0cm9rZVN0eWxlID0gJ2JsYWNrJztcbiAgICAgICAgdGhpcy5jdHgubGluZVdpZHRoID0gODtcbiAgICAgICAgdGhpcy5jdHguZmlsbFN0eWxlID0gJ3llbGxvdyc7XG4gICAgICAgIHRoaXMuY3R4LnN0cm9rZVRleHQoJ1RJTUUnLCB0aGlzLmRpbWVuc2lvbnMud2lkdGgvMiAtIDEwLCA0MClcbiAgICAgICAgdGhpcy5jdHguZmlsbFRleHQoJ1RJTUUnLCB0aGlzLmRpbWVuc2lvbnMud2lkdGggLyAyIC0gMTAsIDQwKTtcbiAgICAgICAgdGhpcy5jdHguZm9udCA9ICc2MHB4IFNhbnMtc2VyaWYnO1xuICAgICAgICB0aGlzLmN0eC5zdHJva2VUZXh0KHRoaXMudGltZSx0aGlzLmRpbWVuc2lvbnMud2lkdGggLyAyIC0gMTAgLCAxMDApO1xuICAgICAgICB0aGlzLmN0eC5maWxsVGV4dCh0aGlzLnRpbWUsIHRoaXMuZGltZW5zaW9ucy53aWR0aCAvIDIgLSAxMCwgMTAwKTtcbiAgICB9XG5cbn0iXSwibmFtZXMiOlsiVGltZXIiLCJjb25zdHJ1Y3RvciIsImN0eCIsImRpbWVuc2lvbnMiLCJ0aW1lIiwiY291bnRlciIsInN0YXJ0VGltZXIiLCJzZXRJbnRlcnZhbCIsInN0b3BUaW1lciIsImNsZWFySW50ZXJ2YWwiLCJkcmF3IiwiZm9udCIsInN0cm9rZVN0eWxlIiwibGluZVdpZHRoIiwiZmlsbFN0eWxlIiwic3Ryb2tlVGV4dCIsIndpZHRoIiwiZmlsbFRleHQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/timer.js\n");

/***/ }),

/***/ "./node_modules/howler/dist/howler.js":
/*!********************************************!*\
  !*** ./node_modules/howler/dist/howler.js ***!
  \********************************************/
/***/ (function(module, exports, __webpack_require__) {

eval("var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/*!\n *  howler.js v2.2.3\n *  howlerjs.com\n *\n *  (c) 2013-2020, James Simpson of GoldFire Studios\n *  goldfirestudios.com\n *\n *  MIT License\n */\n\n(function() {\n\n  'use strict';\n\n  /** Global Methods **/\n  /***************************************************************************/\n\n  /**\n   * Create the global controller. All contained methods and properties apply\n   * to all sounds that are currently playing or will be in the future.\n   */\n  var HowlerGlobal = function() {\n    this.init();\n  };\n  HowlerGlobal.prototype = {\n    /**\n     * Initialize the global Howler object.\n     * @return {Howler}\n     */\n    init: function() {\n      var self = this || Howler;\n\n      // Create a global ID counter.\n      self._counter = 1000;\n\n      // Pool of unlocked HTML5 Audio objects.\n      self._html5AudioPool = [];\n      self.html5PoolSize = 10;\n\n      // Internal properties.\n      self._codecs = {};\n      self._howls = [];\n      self._muted = false;\n      self._volume = 1;\n      self._canPlayEvent = 'canplaythrough';\n      self._navigator = (typeof window !== 'undefined' && window.navigator) ? window.navigator : null;\n\n      // Public properties.\n      self.masterGain = null;\n      self.noAudio = false;\n      self.usingWebAudio = true;\n      self.autoSuspend = true;\n      self.ctx = null;\n\n      // Set to false to disable the auto audio unlocker.\n      self.autoUnlock = true;\n\n      // Setup the various state values for global tracking.\n      self._setup();\n\n      return self;\n    },\n\n    /**\n     * Get/set the global volume for all sounds.\n     * @param  {Float} vol Volume from 0.0 to 1.0.\n     * @return {Howler/Float}     Returns self or current volume.\n     */\n    volume: function(vol) {\n      var self = this || Howler;\n      vol = parseFloat(vol);\n\n      // If we don't have an AudioContext created yet, run the setup.\n      if (!self.ctx) {\n        setupAudioContext();\n      }\n\n      if (typeof vol !== 'undefined' && vol >= 0 && vol <= 1) {\n        self._volume = vol;\n\n        // Don't update any of the nodes if we are muted.\n        if (self._muted) {\n          return self;\n        }\n\n        // When using Web Audio, we just need to adjust the master gain.\n        if (self.usingWebAudio) {\n          self.masterGain.gain.setValueAtTime(vol, Howler.ctx.currentTime);\n        }\n\n        // Loop through and change volume for all HTML5 audio nodes.\n        for (var i=0; i<self._howls.length; i++) {\n          if (!self._howls[i]._webAudio) {\n            // Get all of the sounds in this Howl group.\n            var ids = self._howls[i]._getSoundIds();\n\n            // Loop through all sounds and change the volumes.\n            for (var j=0; j<ids.length; j++) {\n              var sound = self._howls[i]._soundById(ids[j]);\n\n              if (sound && sound._node) {\n                sound._node.volume = sound._volume * vol;\n              }\n            }\n          }\n        }\n\n        return self;\n      }\n\n      return self._volume;\n    },\n\n    /**\n     * Handle muting and unmuting globally.\n     * @param  {Boolean} muted Is muted or not.\n     */\n    mute: function(muted) {\n      var self = this || Howler;\n\n      // If we don't have an AudioContext created yet, run the setup.\n      if (!self.ctx) {\n        setupAudioContext();\n      }\n\n      self._muted = muted;\n\n      // With Web Audio, we just need to mute the master gain.\n      if (self.usingWebAudio) {\n        self.masterGain.gain.setValueAtTime(muted ? 0 : self._volume, Howler.ctx.currentTime);\n      }\n\n      // Loop through and mute all HTML5 Audio nodes.\n      for (var i=0; i<self._howls.length; i++) {\n        if (!self._howls[i]._webAudio) {\n          // Get all of the sounds in this Howl group.\n          var ids = self._howls[i]._getSoundIds();\n\n          // Loop through all sounds and mark the audio node as muted.\n          for (var j=0; j<ids.length; j++) {\n            var sound = self._howls[i]._soundById(ids[j]);\n\n            if (sound && sound._node) {\n              sound._node.muted = (muted) ? true : sound._muted;\n            }\n          }\n        }\n      }\n\n      return self;\n    },\n\n    /**\n     * Handle stopping all sounds globally.\n     */\n    stop: function() {\n      var self = this || Howler;\n\n      // Loop through all Howls and stop them.\n      for (var i=0; i<self._howls.length; i++) {\n        self._howls[i].stop();\n      }\n\n      return self;\n    },\n\n    /**\n     * Unload and destroy all currently loaded Howl objects.\n     * @return {Howler}\n     */\n    unload: function() {\n      var self = this || Howler;\n\n      for (var i=self._howls.length-1; i>=0; i--) {\n        self._howls[i].unload();\n      }\n\n      // Create a new AudioContext to make sure it is fully reset.\n      if (self.usingWebAudio && self.ctx && typeof self.ctx.close !== 'undefined') {\n        self.ctx.close();\n        self.ctx = null;\n        setupAudioContext();\n      }\n\n      return self;\n    },\n\n    /**\n     * Check for codec support of specific extension.\n     * @param  {String} ext Audio file extention.\n     * @return {Boolean}\n     */\n    codecs: function(ext) {\n      return (this || Howler)._codecs[ext.replace(/^x-/, '')];\n    },\n\n    /**\n     * Setup various state values for global tracking.\n     * @return {Howler}\n     */\n    _setup: function() {\n      var self = this || Howler;\n\n      // Keeps track of the suspend/resume state of the AudioContext.\n      self.state = self.ctx ? self.ctx.state || 'suspended' : 'suspended';\n\n      // Automatically begin the 30-second suspend process\n      self._autoSuspend();\n\n      // Check if audio is available.\n      if (!self.usingWebAudio) {\n        // No audio is available on this system if noAudio is set to true.\n        if (typeof Audio !== 'undefined') {\n          try {\n            var test = new Audio();\n\n            // Check if the canplaythrough event is available.\n            if (typeof test.oncanplaythrough === 'undefined') {\n              self._canPlayEvent = 'canplay';\n            }\n          } catch(e) {\n            self.noAudio = true;\n          }\n        } else {\n          self.noAudio = true;\n        }\n      }\n\n      // Test to make sure audio isn't disabled in Internet Explorer.\n      try {\n        var test = new Audio();\n        if (test.muted) {\n          self.noAudio = true;\n        }\n      } catch (e) {}\n\n      // Check for supported codecs.\n      if (!self.noAudio) {\n        self._setupCodecs();\n      }\n\n      return self;\n    },\n\n    /**\n     * Check for browser support for various codecs and cache the results.\n     * @return {Howler}\n     */\n    _setupCodecs: function() {\n      var self = this || Howler;\n      var audioTest = null;\n\n      // Must wrap in a try/catch because IE11 in server mode throws an error.\n      try {\n        audioTest = (typeof Audio !== 'undefined') ? new Audio() : null;\n      } catch (err) {\n        return self;\n      }\n\n      if (!audioTest || typeof audioTest.canPlayType !== 'function') {\n        return self;\n      }\n\n      var mpegTest = audioTest.canPlayType('audio/mpeg;').replace(/^no$/, '');\n\n      // Opera version <33 has mixed MP3 support, so we need to check for and block it.\n      var ua = self._navigator ? self._navigator.userAgent : '';\n      var checkOpera = ua.match(/OPR\\/([0-6].)/g);\n      var isOldOpera = (checkOpera && parseInt(checkOpera[0].split('/')[1], 10) < 33);\n      var checkSafari = ua.indexOf('Safari') !== -1 && ua.indexOf('Chrome') === -1;\n      var safariVersion = ua.match(/Version\\/(.*?) /);\n      var isOldSafari = (checkSafari && safariVersion && parseInt(safariVersion[1], 10) < 15);\n\n      self._codecs = {\n        mp3: !!(!isOldOpera && (mpegTest || audioTest.canPlayType('audio/mp3;').replace(/^no$/, ''))),\n        mpeg: !!mpegTest,\n        opus: !!audioTest.canPlayType('audio/ogg; codecs=\"opus\"').replace(/^no$/, ''),\n        ogg: !!audioTest.canPlayType('audio/ogg; codecs=\"vorbis\"').replace(/^no$/, ''),\n        oga: !!audioTest.canPlayType('audio/ogg; codecs=\"vorbis\"').replace(/^no$/, ''),\n        wav: !!(audioTest.canPlayType('audio/wav; codecs=\"1\"') || audioTest.canPlayType('audio/wav')).replace(/^no$/, ''),\n        aac: !!audioTest.canPlayType('audio/aac;').replace(/^no$/, ''),\n        caf: !!audioTest.canPlayType('audio/x-caf;').replace(/^no$/, ''),\n        m4a: !!(audioTest.canPlayType('audio/x-m4a;') || audioTest.canPlayType('audio/m4a;') || audioTest.canPlayType('audio/aac;')).replace(/^no$/, ''),\n        m4b: !!(audioTest.canPlayType('audio/x-m4b;') || audioTest.canPlayType('audio/m4b;') || audioTest.canPlayType('audio/aac;')).replace(/^no$/, ''),\n        mp4: !!(audioTest.canPlayType('audio/x-mp4;') || audioTest.canPlayType('audio/mp4;') || audioTest.canPlayType('audio/aac;')).replace(/^no$/, ''),\n        weba: !!(!isOldSafari && audioTest.canPlayType('audio/webm; codecs=\"vorbis\"').replace(/^no$/, '')),\n        webm: !!(!isOldSafari && audioTest.canPlayType('audio/webm; codecs=\"vorbis\"').replace(/^no$/, '')),\n        dolby: !!audioTest.canPlayType('audio/mp4; codecs=\"ec-3\"').replace(/^no$/, ''),\n        flac: !!(audioTest.canPlayType('audio/x-flac;') || audioTest.canPlayType('audio/flac;')).replace(/^no$/, '')\n      };\n\n      return self;\n    },\n\n    /**\n     * Some browsers/devices will only allow audio to be played after a user interaction.\n     * Attempt to automatically unlock audio on the first user interaction.\n     * Concept from: http://paulbakaus.com/tutorials/html5/web-audio-on-ios/\n     * @return {Howler}\n     */\n    _unlockAudio: function() {\n      var self = this || Howler;\n\n      // Only run this if Web Audio is supported and it hasn't already been unlocked.\n      if (self._audioUnlocked || !self.ctx) {\n        return;\n      }\n\n      self._audioUnlocked = false;\n      self.autoUnlock = false;\n\n      // Some mobile devices/platforms have distortion issues when opening/closing tabs and/or web views.\n      // Bugs in the browser (especially Mobile Safari) can cause the sampleRate to change from 44100 to 48000.\n      // By calling Howler.unload(), we create a new AudioContext with the correct sampleRate.\n      if (!self._mobileUnloaded && self.ctx.sampleRate !== 44100) {\n        self._mobileUnloaded = true;\n        self.unload();\n      }\n\n      // Scratch buffer for enabling iOS to dispose of web audio buffers correctly, as per:\n      // http://stackoverflow.com/questions/24119684\n      self._scratchBuffer = self.ctx.createBuffer(1, 1, 22050);\n\n      // Call this method on touch start to create and play a buffer,\n      // then check if the audio actually played to determine if\n      // audio has now been unlocked on iOS, Android, etc.\n      var unlock = function(e) {\n        // Create a pool of unlocked HTML5 Audio objects that can\n        // be used for playing sounds without user interaction. HTML5\n        // Audio objects must be individually unlocked, as opposed\n        // to the WebAudio API which only needs a single activation.\n        // This must occur before WebAudio setup or the source.onended\n        // event will not fire.\n        while (self._html5AudioPool.length < self.html5PoolSize) {\n          try {\n            var audioNode = new Audio();\n\n            // Mark this Audio object as unlocked to ensure it can get returned\n            // to the unlocked pool when released.\n            audioNode._unlocked = true;\n\n            // Add the audio node to the pool.\n            self._releaseHtml5Audio(audioNode);\n          } catch (e) {\n            self.noAudio = true;\n            break;\n          }\n        }\n\n        // Loop through any assigned audio nodes and unlock them.\n        for (var i=0; i<self._howls.length; i++) {\n          if (!self._howls[i]._webAudio) {\n            // Get all of the sounds in this Howl group.\n            var ids = self._howls[i]._getSoundIds();\n\n            // Loop through all sounds and unlock the audio nodes.\n            for (var j=0; j<ids.length; j++) {\n              var sound = self._howls[i]._soundById(ids[j]);\n\n              if (sound && sound._node && !sound._node._unlocked) {\n                sound._node._unlocked = true;\n                sound._node.load();\n              }\n            }\n          }\n        }\n\n        // Fix Android can not play in suspend state.\n        self._autoResume();\n\n        // Create an empty buffer.\n        var source = self.ctx.createBufferSource();\n        source.buffer = self._scratchBuffer;\n        source.connect(self.ctx.destination);\n\n        // Play the empty buffer.\n        if (typeof source.start === 'undefined') {\n          source.noteOn(0);\n        } else {\n          source.start(0);\n        }\n\n        // Calling resume() on a stack initiated by user gesture is what actually unlocks the audio on Android Chrome >= 55.\n        if (typeof self.ctx.resume === 'function') {\n          self.ctx.resume();\n        }\n\n        // Setup a timeout to check that we are unlocked on the next event loop.\n        source.onended = function() {\n          source.disconnect(0);\n\n          // Update the unlocked state and prevent this check from happening again.\n          self._audioUnlocked = true;\n\n          // Remove the touch start listener.\n          document.removeEventListener('touchstart', unlock, true);\n          document.removeEventListener('touchend', unlock, true);\n          document.removeEventListener('click', unlock, true);\n          document.removeEventListener('keydown', unlock, true);\n\n          // Let all sounds know that audio has been unlocked.\n          for (var i=0; i<self._howls.length; i++) {\n            self._howls[i]._emit('unlock');\n          }\n        };\n      };\n\n      // Setup a touch start listener to attempt an unlock in.\n      document.addEventListener('touchstart', unlock, true);\n      document.addEventListener('touchend', unlock, true);\n      document.addEventListener('click', unlock, true);\n      document.addEventListener('keydown', unlock, true);\n\n      return self;\n    },\n\n    /**\n     * Get an unlocked HTML5 Audio object from the pool. If none are left,\n     * return a new Audio object and throw a warning.\n     * @return {Audio} HTML5 Audio object.\n     */\n    _obtainHtml5Audio: function() {\n      var self = this || Howler;\n\n      // Return the next object from the pool if one exists.\n      if (self._html5AudioPool.length) {\n        return self._html5AudioPool.pop();\n      }\n\n      //.Check if the audio is locked and throw a warning.\n      var testPlay = new Audio().play();\n      if (testPlay && typeof Promise !== 'undefined' && (testPlay instanceof Promise || typeof testPlay.then === 'function')) {\n        testPlay.catch(function() {\n          console.warn('HTML5 Audio pool exhausted, returning potentially locked audio object.');\n        });\n      }\n\n      return new Audio();\n    },\n\n    /**\n     * Return an activated HTML5 Audio object to the pool.\n     * @return {Howler}\n     */\n    _releaseHtml5Audio: function(audio) {\n      var self = this || Howler;\n\n      // Don't add audio to the pool if we don't know if it has been unlocked.\n      if (audio._unlocked) {\n        self._html5AudioPool.push(audio);\n      }\n\n      return self;\n    },\n\n    /**\n     * Automatically suspend the Web Audio AudioContext after no sound has played for 30 seconds.\n     * This saves processing/energy and fixes various browser-specific bugs with audio getting stuck.\n     * @return {Howler}\n     */\n    _autoSuspend: function() {\n      var self = this;\n\n      if (!self.autoSuspend || !self.ctx || typeof self.ctx.suspend === 'undefined' || !Howler.usingWebAudio) {\n        return;\n      }\n\n      // Check if any sounds are playing.\n      for (var i=0; i<self._howls.length; i++) {\n        if (self._howls[i]._webAudio) {\n          for (var j=0; j<self._howls[i]._sounds.length; j++) {\n            if (!self._howls[i]._sounds[j]._paused) {\n              return self;\n            }\n          }\n        }\n      }\n\n      if (self._suspendTimer) {\n        clearTimeout(self._suspendTimer);\n      }\n\n      // If no sound has played after 30 seconds, suspend the context.\n      self._suspendTimer = setTimeout(function() {\n        if (!self.autoSuspend) {\n          return;\n        }\n\n        self._suspendTimer = null;\n        self.state = 'suspending';\n\n        // Handle updating the state of the audio context after suspending.\n        var handleSuspension = function() {\n          self.state = 'suspended';\n\n          if (self._resumeAfterSuspend) {\n            delete self._resumeAfterSuspend;\n            self._autoResume();\n          }\n        };\n\n        // Either the state gets suspended or it is interrupted.\n        // Either way, we need to update the state to suspended.\n        self.ctx.suspend().then(handleSuspension, handleSuspension);\n      }, 30000);\n\n      return self;\n    },\n\n    /**\n     * Automatically resume the Web Audio AudioContext when a new sound is played.\n     * @return {Howler}\n     */\n    _autoResume: function() {\n      var self = this;\n\n      if (!self.ctx || typeof self.ctx.resume === 'undefined' || !Howler.usingWebAudio) {\n        return;\n      }\n\n      if (self.state === 'running' && self.ctx.state !== 'interrupted' && self._suspendTimer) {\n        clearTimeout(self._suspendTimer);\n        self._suspendTimer = null;\n      } else if (self.state === 'suspended' || self.state === 'running' && self.ctx.state === 'interrupted') {\n        self.ctx.resume().then(function() {\n          self.state = 'running';\n\n          // Emit to all Howls that the audio has resumed.\n          for (var i=0; i<self._howls.length; i++) {\n            self._howls[i]._emit('resume');\n          }\n        });\n\n        if (self._suspendTimer) {\n          clearTimeout(self._suspendTimer);\n          self._suspendTimer = null;\n        }\n      } else if (self.state === 'suspending') {\n        self._resumeAfterSuspend = true;\n      }\n\n      return self;\n    }\n  };\n\n  // Setup the global audio controller.\n  var Howler = new HowlerGlobal();\n\n  /** Group Methods **/\n  /***************************************************************************/\n\n  /**\n   * Create an audio group controller.\n   * @param {Object} o Passed in properties for this group.\n   */\n  var Howl = function(o) {\n    var self = this;\n\n    // Throw an error if no source is provided.\n    if (!o.src || o.src.length === 0) {\n      console.error('An array of source files must be passed with any new Howl.');\n      return;\n    }\n\n    self.init(o);\n  };\n  Howl.prototype = {\n    /**\n     * Initialize a new Howl group object.\n     * @param  {Object} o Passed in properties for this group.\n     * @return {Howl}\n     */\n    init: function(o) {\n      var self = this;\n\n      // If we don't have an AudioContext created yet, run the setup.\n      if (!Howler.ctx) {\n        setupAudioContext();\n      }\n\n      // Setup user-defined default properties.\n      self._autoplay = o.autoplay || false;\n      self._format = (typeof o.format !== 'string') ? o.format : [o.format];\n      self._html5 = o.html5 || false;\n      self._muted = o.mute || false;\n      self._loop = o.loop || false;\n      self._pool = o.pool || 5;\n      self._preload = (typeof o.preload === 'boolean' || o.preload === 'metadata') ? o.preload : true;\n      self._rate = o.rate || 1;\n      self._sprite = o.sprite || {};\n      self._src = (typeof o.src !== 'string') ? o.src : [o.src];\n      self._volume = o.volume !== undefined ? o.volume : 1;\n      self._xhr = {\n        method: o.xhr && o.xhr.method ? o.xhr.method : 'GET',\n        headers: o.xhr && o.xhr.headers ? o.xhr.headers : null,\n        withCredentials: o.xhr && o.xhr.withCredentials ? o.xhr.withCredentials : false,\n      };\n\n      // Setup all other default properties.\n      self._duration = 0;\n      self._state = 'unloaded';\n      self._sounds = [];\n      self._endTimers = {};\n      self._queue = [];\n      self._playLock = false;\n\n      // Setup event listeners.\n      self._onend = o.onend ? [{fn: o.onend}] : [];\n      self._onfade = o.onfade ? [{fn: o.onfade}] : [];\n      self._onload = o.onload ? [{fn: o.onload}] : [];\n      self._onloaderror = o.onloaderror ? [{fn: o.onloaderror}] : [];\n      self._onplayerror = o.onplayerror ? [{fn: o.onplayerror}] : [];\n      self._onpause = o.onpause ? [{fn: o.onpause}] : [];\n      self._onplay = o.onplay ? [{fn: o.onplay}] : [];\n      self._onstop = o.onstop ? [{fn: o.onstop}] : [];\n      self._onmute = o.onmute ? [{fn: o.onmute}] : [];\n      self._onvolume = o.onvolume ? [{fn: o.onvolume}] : [];\n      self._onrate = o.onrate ? [{fn: o.onrate}] : [];\n      self._onseek = o.onseek ? [{fn: o.onseek}] : [];\n      self._onunlock = o.onunlock ? [{fn: o.onunlock}] : [];\n      self._onresume = [];\n\n      // Web Audio or HTML5 Audio?\n      self._webAudio = Howler.usingWebAudio && !self._html5;\n\n      // Automatically try to enable audio.\n      if (typeof Howler.ctx !== 'undefined' && Howler.ctx && Howler.autoUnlock) {\n        Howler._unlockAudio();\n      }\n\n      // Keep track of this Howl group in the global controller.\n      Howler._howls.push(self);\n\n      // If they selected autoplay, add a play event to the load queue.\n      if (self._autoplay) {\n        self._queue.push({\n          event: 'play',\n          action: function() {\n            self.play();\n          }\n        });\n      }\n\n      // Load the source file unless otherwise specified.\n      if (self._preload && self._preload !== 'none') {\n        self.load();\n      }\n\n      return self;\n    },\n\n    /**\n     * Load the audio file.\n     * @return {Howler}\n     */\n    load: function() {\n      var self = this;\n      var url = null;\n\n      // If no audio is available, quit immediately.\n      if (Howler.noAudio) {\n        self._emit('loaderror', null, 'No audio support.');\n        return;\n      }\n\n      // Make sure our source is in an array.\n      if (typeof self._src === 'string') {\n        self._src = [self._src];\n      }\n\n      // Loop through the sources and pick the first one that is compatible.\n      for (var i=0; i<self._src.length; i++) {\n        var ext, str;\n\n        if (self._format && self._format[i]) {\n          // If an extension was specified, use that instead.\n          ext = self._format[i];\n        } else {\n          // Make sure the source is a string.\n          str = self._src[i];\n          if (typeof str !== 'string') {\n            self._emit('loaderror', null, 'Non-string found in selected audio sources - ignoring.');\n            continue;\n          }\n\n          // Extract the file extension from the URL or base64 data URI.\n          ext = /^data:audio\\/([^;,]+);/i.exec(str);\n          if (!ext) {\n            ext = /\\.([^.]+)$/.exec(str.split('?', 1)[0]);\n          }\n\n          if (ext) {\n            ext = ext[1].toLowerCase();\n          }\n        }\n\n        // Log a warning if no extension was found.\n        if (!ext) {\n          console.warn('No file extension was found. Consider using the \"format\" property or specify an extension.');\n        }\n\n        // Check if this extension is available.\n        if (ext && Howler.codecs(ext)) {\n          url = self._src[i];\n          break;\n        }\n      }\n\n      if (!url) {\n        self._emit('loaderror', null, 'No codec support for selected audio sources.');\n        return;\n      }\n\n      self._src = url;\n      self._state = 'loading';\n\n      // If the hosting page is HTTPS and the source isn't,\n      // drop down to HTML5 Audio to avoid Mixed Content errors.\n      if (window.location.protocol === 'https:' && url.slice(0, 5) === 'http:') {\n        self._html5 = true;\n        self._webAudio = false;\n      }\n\n      // Create a new sound object and add it to the pool.\n      new Sound(self);\n\n      // Load and decode the audio data for playback.\n      if (self._webAudio) {\n        loadBuffer(self);\n      }\n\n      return self;\n    },\n\n    /**\n     * Play a sound or resume previous playback.\n     * @param  {String/Number} sprite   Sprite name for sprite playback or sound id to continue previous.\n     * @param  {Boolean} internal Internal Use: true prevents event firing.\n     * @return {Number}          Sound ID.\n     */\n    play: function(sprite, internal) {\n      var self = this;\n      var id = null;\n\n      // Determine if a sprite, sound id or nothing was passed\n      if (typeof sprite === 'number') {\n        id = sprite;\n        sprite = null;\n      } else if (typeof sprite === 'string' && self._state === 'loaded' && !self._sprite[sprite]) {\n        // If the passed sprite doesn't exist, do nothing.\n        return null;\n      } else if (typeof sprite === 'undefined') {\n        // Use the default sound sprite (plays the full audio length).\n        sprite = '__default';\n\n        // Check if there is a single paused sound that isn't ended.\n        // If there is, play that sound. If not, continue as usual.\n        if (!self._playLock) {\n          var num = 0;\n          for (var i=0; i<self._sounds.length; i++) {\n            if (self._sounds[i]._paused && !self._sounds[i]._ended) {\n              num++;\n              id = self._sounds[i]._id;\n            }\n          }\n\n          if (num === 1) {\n            sprite = null;\n          } else {\n            id = null;\n          }\n        }\n      }\n\n      // Get the selected node, or get one from the pool.\n      var sound = id ? self._soundById(id) : self._inactiveSound();\n\n      // If the sound doesn't exist, do nothing.\n      if (!sound) {\n        return null;\n      }\n\n      // Select the sprite definition.\n      if (id && !sprite) {\n        sprite = sound._sprite || '__default';\n      }\n\n      // If the sound hasn't loaded, we must wait to get the audio's duration.\n      // We also need to wait to make sure we don't run into race conditions with\n      // the order of function calls.\n      if (self._state !== 'loaded') {\n        // Set the sprite value on this sound.\n        sound._sprite = sprite;\n\n        // Mark this sound as not ended in case another sound is played before this one loads.\n        sound._ended = false;\n\n        // Add the sound to the queue to be played on load.\n        var soundId = sound._id;\n        self._queue.push({\n          event: 'play',\n          action: function() {\n            self.play(soundId);\n          }\n        });\n\n        return soundId;\n      }\n\n      // Don't play the sound if an id was passed and it is already playing.\n      if (id && !sound._paused) {\n        // Trigger the play event, in order to keep iterating through queue.\n        if (!internal) {\n          self._loadQueue('play');\n        }\n\n        return sound._id;\n      }\n\n      // Make sure the AudioContext isn't suspended, and resume it if it is.\n      if (self._webAudio) {\n        Howler._autoResume();\n      }\n\n      // Determine how long to play for and where to start playing.\n      var seek = Math.max(0, sound._seek > 0 ? sound._seek : self._sprite[sprite][0] / 1000);\n      var duration = Math.max(0, ((self._sprite[sprite][0] + self._sprite[sprite][1]) / 1000) - seek);\n      var timeout = (duration * 1000) / Math.abs(sound._rate);\n      var start = self._sprite[sprite][0] / 1000;\n      var stop = (self._sprite[sprite][0] + self._sprite[sprite][1]) / 1000;\n      sound._sprite = sprite;\n\n      // Mark the sound as ended instantly so that this async playback\n      // doesn't get grabbed by another call to play while this one waits to start.\n      sound._ended = false;\n\n      // Update the parameters of the sound.\n      var setParams = function() {\n        sound._paused = false;\n        sound._seek = seek;\n        sound._start = start;\n        sound._stop = stop;\n        sound._loop = !!(sound._loop || self._sprite[sprite][2]);\n      };\n\n      // End the sound instantly if seek is at the end.\n      if (seek >= stop) {\n        self._ended(sound);\n        return;\n      }\n\n      // Begin the actual playback.\n      var node = sound._node;\n      if (self._webAudio) {\n        // Fire this when the sound is ready to play to begin Web Audio playback.\n        var playWebAudio = function() {\n          self._playLock = false;\n          setParams();\n          self._refreshBuffer(sound);\n\n          // Setup the playback params.\n          var vol = (sound._muted || self._muted) ? 0 : sound._volume;\n          node.gain.setValueAtTime(vol, Howler.ctx.currentTime);\n          sound._playStart = Howler.ctx.currentTime;\n\n          // Play the sound using the supported method.\n          if (typeof node.bufferSource.start === 'undefined') {\n            sound._loop ? node.bufferSource.noteGrainOn(0, seek, 86400) : node.bufferSource.noteGrainOn(0, seek, duration);\n          } else {\n            sound._loop ? node.bufferSource.start(0, seek, 86400) : node.bufferSource.start(0, seek, duration);\n          }\n\n          // Start a new timer if none is present.\n          if (timeout !== Infinity) {\n            self._endTimers[sound._id] = setTimeout(self._ended.bind(self, sound), timeout);\n          }\n\n          if (!internal) {\n            setTimeout(function() {\n              self._emit('play', sound._id);\n              self._loadQueue();\n            }, 0);\n          }\n        };\n\n        if (Howler.state === 'running' && Howler.ctx.state !== 'interrupted') {\n          playWebAudio();\n        } else {\n          self._playLock = true;\n\n          // Wait for the audio context to resume before playing.\n          self.once('resume', playWebAudio);\n\n          // Cancel the end timer.\n          self._clearTimer(sound._id);\n        }\n      } else {\n        // Fire this when the sound is ready to play to begin HTML5 Audio playback.\n        var playHtml5 = function() {\n          node.currentTime = seek;\n          node.muted = sound._muted || self._muted || Howler._muted || node.muted;\n          node.volume = sound._volume * Howler.volume();\n          node.playbackRate = sound._rate;\n\n          // Some browsers will throw an error if this is called without user interaction.\n          try {\n            var play = node.play();\n\n            // Support older browsers that don't support promises, and thus don't have this issue.\n            if (play && typeof Promise !== 'undefined' && (play instanceof Promise || typeof play.then === 'function')) {\n              // Implements a lock to prevent DOMException: The play() request was interrupted by a call to pause().\n              self._playLock = true;\n\n              // Set param values immediately.\n              setParams();\n\n              // Releases the lock and executes queued actions.\n              play\n                .then(function() {\n                  self._playLock = false;\n                  node._unlocked = true;\n                  if (!internal) {\n                    self._emit('play', sound._id);\n                  } else {\n                    self._loadQueue();\n                  }\n                })\n                .catch(function() {\n                  self._playLock = false;\n                  self._emit('playerror', sound._id, 'Playback was unable to start. This is most commonly an issue ' +\n                    'on mobile devices and Chrome where playback was not within a user interaction.');\n\n                  // Reset the ended and paused values.\n                  sound._ended = true;\n                  sound._paused = true;\n                });\n            } else if (!internal) {\n              self._playLock = false;\n              setParams();\n              self._emit('play', sound._id);\n            }\n\n            // Setting rate before playing won't work in IE, so we set it again here.\n            node.playbackRate = sound._rate;\n\n            // If the node is still paused, then we can assume there was a playback issue.\n            if (node.paused) {\n              self._emit('playerror', sound._id, 'Playback was unable to start. This is most commonly an issue ' +\n                'on mobile devices and Chrome where playback was not within a user interaction.');\n              return;\n            }\n\n            // Setup the end timer on sprites or listen for the ended event.\n            if (sprite !== '__default' || sound._loop) {\n              self._endTimers[sound._id] = setTimeout(self._ended.bind(self, sound), timeout);\n            } else {\n              self._endTimers[sound._id] = function() {\n                // Fire ended on this audio node.\n                self._ended(sound);\n\n                // Clear this listener.\n                node.removeEventListener('ended', self._endTimers[sound._id], false);\n              };\n              node.addEventListener('ended', self._endTimers[sound._id], false);\n            }\n          } catch (err) {\n            self._emit('playerror', sound._id, err);\n          }\n        };\n\n        // If this is streaming audio, make sure the src is set and load again.\n        if (node.src === 'data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA') {\n          node.src = self._src;\n          node.load();\n        }\n\n        // Play immediately if ready, or wait for the 'canplaythrough'e vent.\n        var loadedNoReadyState = (window && window.ejecta) || (!node.readyState && Howler._navigator.isCocoonJS);\n        if (node.readyState >= 3 || loadedNoReadyState) {\n          playHtml5();\n        } else {\n          self._playLock = true;\n          self._state = 'loading';\n\n          var listener = function() {\n            self._state = 'loaded';\n            \n            // Begin playback.\n            playHtml5();\n\n            // Clear this listener.\n            node.removeEventListener(Howler._canPlayEvent, listener, false);\n          };\n          node.addEventListener(Howler._canPlayEvent, listener, false);\n\n          // Cancel the end timer.\n          self._clearTimer(sound._id);\n        }\n      }\n\n      return sound._id;\n    },\n\n    /**\n     * Pause playback and save current position.\n     * @param  {Number} id The sound ID (empty to pause all in group).\n     * @return {Howl}\n     */\n    pause: function(id) {\n      var self = this;\n\n      // If the sound hasn't loaded or a play() promise is pending, add it to the load queue to pause when capable.\n      if (self._state !== 'loaded' || self._playLock) {\n        self._queue.push({\n          event: 'pause',\n          action: function() {\n            self.pause(id);\n          }\n        });\n\n        return self;\n      }\n\n      // If no id is passed, get all ID's to be paused.\n      var ids = self._getSoundIds(id);\n\n      for (var i=0; i<ids.length; i++) {\n        // Clear the end timer.\n        self._clearTimer(ids[i]);\n\n        // Get the sound.\n        var sound = self._soundById(ids[i]);\n\n        if (sound && !sound._paused) {\n          // Reset the seek position.\n          sound._seek = self.seek(ids[i]);\n          sound._rateSeek = 0;\n          sound._paused = true;\n\n          // Stop currently running fades.\n          self._stopFade(ids[i]);\n\n          if (sound._node) {\n            if (self._webAudio) {\n              // Make sure the sound has been created.\n              if (!sound._node.bufferSource) {\n                continue;\n              }\n\n              if (typeof sound._node.bufferSource.stop === 'undefined') {\n                sound._node.bufferSource.noteOff(0);\n              } else {\n                sound._node.bufferSource.stop(0);\n              }\n\n              // Clean up the buffer source.\n              self._cleanBuffer(sound._node);\n            } else if (!isNaN(sound._node.duration) || sound._node.duration === Infinity) {\n              sound._node.pause();\n            }\n          }\n        }\n\n        // Fire the pause event, unless `true` is passed as the 2nd argument.\n        if (!arguments[1]) {\n          self._emit('pause', sound ? sound._id : null);\n        }\n      }\n\n      return self;\n    },\n\n    /**\n     * Stop playback and reset to start.\n     * @param  {Number} id The sound ID (empty to stop all in group).\n     * @param  {Boolean} internal Internal Use: true prevents event firing.\n     * @return {Howl}\n     */\n    stop: function(id, internal) {\n      var self = this;\n\n      // If the sound hasn't loaded, add it to the load queue to stop when capable.\n      if (self._state !== 'loaded' || self._playLock) {\n        self._queue.push({\n          event: 'stop',\n          action: function() {\n            self.stop(id);\n          }\n        });\n\n        return self;\n      }\n\n      // If no id is passed, get all ID's to be stopped.\n      var ids = self._getSoundIds(id);\n\n      for (var i=0; i<ids.length; i++) {\n        // Clear the end timer.\n        self._clearTimer(ids[i]);\n\n        // Get the sound.\n        var sound = self._soundById(ids[i]);\n\n        if (sound) {\n          // Reset the seek position.\n          sound._seek = sound._start || 0;\n          sound._rateSeek = 0;\n          sound._paused = true;\n          sound._ended = true;\n\n          // Stop currently running fades.\n          self._stopFade(ids[i]);\n\n          if (sound._node) {\n            if (self._webAudio) {\n              // Make sure the sound's AudioBufferSourceNode has been created.\n              if (sound._node.bufferSource) {\n                if (typeof sound._node.bufferSource.stop === 'undefined') {\n                  sound._node.bufferSource.noteOff(0);\n                } else {\n                  sound._node.bufferSource.stop(0);\n                }\n\n                // Clean up the buffer source.\n                self._cleanBuffer(sound._node);\n              }\n            } else if (!isNaN(sound._node.duration) || sound._node.duration === Infinity) {\n              sound._node.currentTime = sound._start || 0;\n              sound._node.pause();\n\n              // If this is a live stream, stop download once the audio is stopped.\n              if (sound._node.duration === Infinity) {\n                self._clearSound(sound._node);\n              }\n            }\n          }\n\n          if (!internal) {\n            self._emit('stop', sound._id);\n          }\n        }\n      }\n\n      return self;\n    },\n\n    /**\n     * Mute/unmute a single sound or all sounds in this Howl group.\n     * @param  {Boolean} muted Set to true to mute and false to unmute.\n     * @param  {Number} id    The sound ID to update (omit to mute/unmute all).\n     * @return {Howl}\n     */\n    mute: function(muted, id) {\n      var self = this;\n\n      // If the sound hasn't loaded, add it to the load queue to mute when capable.\n      if (self._state !== 'loaded'|| self._playLock) {\n        self._queue.push({\n          event: 'mute',\n          action: function() {\n            self.mute(muted, id);\n          }\n        });\n\n        return self;\n      }\n\n      // If applying mute/unmute to all sounds, update the group's value.\n      if (typeof id === 'undefined') {\n        if (typeof muted === 'boolean') {\n          self._muted = muted;\n        } else {\n          return self._muted;\n        }\n      }\n\n      // If no id is passed, get all ID's to be muted.\n      var ids = self._getSoundIds(id);\n\n      for (var i=0; i<ids.length; i++) {\n        // Get the sound.\n        var sound = self._soundById(ids[i]);\n\n        if (sound) {\n          sound._muted = muted;\n\n          // Cancel active fade and set the volume to the end value.\n          if (sound._interval) {\n            self._stopFade(sound._id);\n          }\n\n          if (self._webAudio && sound._node) {\n            sound._node.gain.setValueAtTime(muted ? 0 : sound._volume, Howler.ctx.currentTime);\n          } else if (sound._node) {\n            sound._node.muted = Howler._muted ? true : muted;\n          }\n\n          self._emit('mute', sound._id);\n        }\n      }\n\n      return self;\n    },\n\n    /**\n     * Get/set the volume of this sound or of the Howl group. This method can optionally take 0, 1 or 2 arguments.\n     *   volume() -> Returns the group's volume value.\n     *   volume(id) -> Returns the sound id's current volume.\n     *   volume(vol) -> Sets the volume of all sounds in this Howl group.\n     *   volume(vol, id) -> Sets the volume of passed sound id.\n     * @return {Howl/Number} Returns self or current volume.\n     */\n    volume: function() {\n      var self = this;\n      var args = arguments;\n      var vol, id;\n\n      // Determine the values based on arguments.\n      if (args.length === 0) {\n        // Return the value of the groups' volume.\n        return self._volume;\n      } else if (args.length === 1 || args.length === 2 && typeof args[1] === 'undefined') {\n        // First check if this is an ID, and if not, assume it is a new volume.\n        var ids = self._getSoundIds();\n        var index = ids.indexOf(args[0]);\n        if (index >= 0) {\n          id = parseInt(args[0], 10);\n        } else {\n          vol = parseFloat(args[0]);\n        }\n      } else if (args.length >= 2) {\n        vol = parseFloat(args[0]);\n        id = parseInt(args[1], 10);\n      }\n\n      // Update the volume or return the current volume.\n      var sound;\n      if (typeof vol !== 'undefined' && vol >= 0 && vol <= 1) {\n        // If the sound hasn't loaded, add it to the load queue to change volume when capable.\n        if (self._state !== 'loaded'|| self._playLock) {\n          self._queue.push({\n            event: 'volume',\n            action: function() {\n              self.volume.apply(self, args);\n            }\n          });\n\n          return self;\n        }\n\n        // Set the group volume.\n        if (typeof id === 'undefined') {\n          self._volume = vol;\n        }\n\n        // Update one or all volumes.\n        id = self._getSoundIds(id);\n        for (var i=0; i<id.length; i++) {\n          // Get the sound.\n          sound = self._soundById(id[i]);\n\n          if (sound) {\n            sound._volume = vol;\n\n            // Stop currently running fades.\n            if (!args[2]) {\n              self._stopFade(id[i]);\n            }\n\n            if (self._webAudio && sound._node && !sound._muted) {\n              sound._node.gain.setValueAtTime(vol, Howler.ctx.currentTime);\n            } else if (sound._node && !sound._muted) {\n              sound._node.volume = vol * Howler.volume();\n            }\n\n            self._emit('volume', sound._id);\n          }\n        }\n      } else {\n        sound = id ? self._soundById(id) : self._sounds[0];\n        return sound ? sound._volume : 0;\n      }\n\n      return self;\n    },\n\n    /**\n     * Fade a currently playing sound between two volumes (if no id is passed, all sounds will fade).\n     * @param  {Number} from The value to fade from (0.0 to 1.0).\n     * @param  {Number} to   The volume to fade to (0.0 to 1.0).\n     * @param  {Number} len  Time in milliseconds to fade.\n     * @param  {Number} id   The sound id (omit to fade all sounds).\n     * @return {Howl}\n     */\n    fade: function(from, to, len, id) {\n      var self = this;\n\n      // If the sound hasn't loaded, add it to the load queue to fade when capable.\n      if (self._state !== 'loaded' || self._playLock) {\n        self._queue.push({\n          event: 'fade',\n          action: function() {\n            self.fade(from, to, len, id);\n          }\n        });\n\n        return self;\n      }\n\n      // Make sure the to/from/len values are numbers.\n      from = Math.min(Math.max(0, parseFloat(from)), 1);\n      to = Math.min(Math.max(0, parseFloat(to)), 1);\n      len = parseFloat(len);\n\n      // Set the volume to the start position.\n      self.volume(from, id);\n\n      // Fade the volume of one or all sounds.\n      var ids = self._getSoundIds(id);\n      for (var i=0; i<ids.length; i++) {\n        // Get the sound.\n        var sound = self._soundById(ids[i]);\n\n        // Create a linear fade or fall back to timeouts with HTML5 Audio.\n        if (sound) {\n          // Stop the previous fade if no sprite is being used (otherwise, volume handles this).\n          if (!id) {\n            self._stopFade(ids[i]);\n          }\n\n          // If we are using Web Audio, let the native methods do the actual fade.\n          if (self._webAudio && !sound._muted) {\n            var currentTime = Howler.ctx.currentTime;\n            var end = currentTime + (len / 1000);\n            sound._volume = from;\n            sound._node.gain.setValueAtTime(from, currentTime);\n            sound._node.gain.linearRampToValueAtTime(to, end);\n          }\n\n          self._startFadeInterval(sound, from, to, len, ids[i], typeof id === 'undefined');\n        }\n      }\n\n      return self;\n    },\n\n    /**\n     * Starts the internal interval to fade a sound.\n     * @param  {Object} sound Reference to sound to fade.\n     * @param  {Number} from The value to fade from (0.0 to 1.0).\n     * @param  {Number} to   The volume to fade to (0.0 to 1.0).\n     * @param  {Number} len  Time in milliseconds to fade.\n     * @param  {Number} id   The sound id to fade.\n     * @param  {Boolean} isGroup   If true, set the volume on the group.\n     */\n    _startFadeInterval: function(sound, from, to, len, id, isGroup) {\n      var self = this;\n      var vol = from;\n      var diff = to - from;\n      var steps = Math.abs(diff / 0.01);\n      var stepLen = Math.max(4, (steps > 0) ? len / steps : len);\n      var lastTick = Date.now();\n\n      // Store the value being faded to.\n      sound._fadeTo = to;\n\n      // Update the volume value on each interval tick.\n      sound._interval = setInterval(function() {\n        // Update the volume based on the time since the last tick.\n        var tick = (Date.now() - lastTick) / len;\n        lastTick = Date.now();\n        vol += diff * tick;\n\n        // Round to within 2 decimal points.\n        vol = Math.round(vol * 100) / 100;\n\n        // Make sure the volume is in the right bounds.\n        if (diff < 0) {\n          vol = Math.max(to, vol);\n        } else {\n          vol = Math.min(to, vol);\n        }\n\n        // Change the volume.\n        if (self._webAudio) {\n          sound._volume = vol;\n        } else {\n          self.volume(vol, sound._id, true);\n        }\n\n        // Set the group's volume.\n        if (isGroup) {\n          self._volume = vol;\n        }\n\n        // When the fade is complete, stop it and fire event.\n        if ((to < from && vol <= to) || (to > from && vol >= to)) {\n          clearInterval(sound._interval);\n          sound._interval = null;\n          sound._fadeTo = null;\n          self.volume(to, sound._id);\n          self._emit('fade', sound._id);\n        }\n      }, stepLen);\n    },\n\n    /**\n     * Internal method that stops the currently playing fade when\n     * a new fade starts, volume is changed or the sound is stopped.\n     * @param  {Number} id The sound id.\n     * @return {Howl}\n     */\n    _stopFade: function(id) {\n      var self = this;\n      var sound = self._soundById(id);\n\n      if (sound && sound._interval) {\n        if (self._webAudio) {\n          sound._node.gain.cancelScheduledValues(Howler.ctx.currentTime);\n        }\n\n        clearInterval(sound._interval);\n        sound._interval = null;\n        self.volume(sound._fadeTo, id);\n        sound._fadeTo = null;\n        self._emit('fade', id);\n      }\n\n      return self;\n    },\n\n    /**\n     * Get/set the loop parameter on a sound. This method can optionally take 0, 1 or 2 arguments.\n     *   loop() -> Returns the group's loop value.\n     *   loop(id) -> Returns the sound id's loop value.\n     *   loop(loop) -> Sets the loop value for all sounds in this Howl group.\n     *   loop(loop, id) -> Sets the loop value of passed sound id.\n     * @return {Howl/Boolean} Returns self or current loop value.\n     */\n    loop: function() {\n      var self = this;\n      var args = arguments;\n      var loop, id, sound;\n\n      // Determine the values for loop and id.\n      if (args.length === 0) {\n        // Return the grou's loop value.\n        return self._loop;\n      } else if (args.length === 1) {\n        if (typeof args[0] === 'boolean') {\n          loop = args[0];\n          self._loop = loop;\n        } else {\n          // Return this sound's loop value.\n          sound = self._soundById(parseInt(args[0], 10));\n          return sound ? sound._loop : false;\n        }\n      } else if (args.length === 2) {\n        loop = args[0];\n        id = parseInt(args[1], 10);\n      }\n\n      // If no id is passed, get all ID's to be looped.\n      var ids = self._getSoundIds(id);\n      for (var i=0; i<ids.length; i++) {\n        sound = self._soundById(ids[i]);\n\n        if (sound) {\n          sound._loop = loop;\n          if (self._webAudio && sound._node && sound._node.bufferSource) {\n            sound._node.bufferSource.loop = loop;\n            if (loop) {\n              sound._node.bufferSource.loopStart = sound._start || 0;\n              sound._node.bufferSource.loopEnd = sound._stop;\n\n              // If playing, restart playback to ensure looping updates.\n              if (self.playing(ids[i])) {\n                self.pause(ids[i], true);\n                self.play(ids[i], true);\n              }\n            }\n          }\n        }\n      }\n\n      return self;\n    },\n\n    /**\n     * Get/set the playback rate of a sound. This method can optionally take 0, 1 or 2 arguments.\n     *   rate() -> Returns the first sound node's current playback rate.\n     *   rate(id) -> Returns the sound id's current playback rate.\n     *   rate(rate) -> Sets the playback rate of all sounds in this Howl group.\n     *   rate(rate, id) -> Sets the playback rate of passed sound id.\n     * @return {Howl/Number} Returns self or the current playback rate.\n     */\n    rate: function() {\n      var self = this;\n      var args = arguments;\n      var rate, id;\n\n      // Determine the values based on arguments.\n      if (args.length === 0) {\n        // We will simply return the current rate of the first node.\n        id = self._sounds[0]._id;\n      } else if (args.length === 1) {\n        // First check if this is an ID, and if not, assume it is a new rate value.\n        var ids = self._getSoundIds();\n        var index = ids.indexOf(args[0]);\n        if (index >= 0) {\n          id = parseInt(args[0], 10);\n        } else {\n          rate = parseFloat(args[0]);\n        }\n      } else if (args.length === 2) {\n        rate = parseFloat(args[0]);\n        id = parseInt(args[1], 10);\n      }\n\n      // Update the playback rate or return the current value.\n      var sound;\n      if (typeof rate === 'number') {\n        // If the sound hasn't loaded, add it to the load queue to change playback rate when capable.\n        if (self._state !== 'loaded' || self._playLock) {\n          self._queue.push({\n            event: 'rate',\n            action: function() {\n              self.rate.apply(self, args);\n            }\n          });\n\n          return self;\n        }\n\n        // Set the group rate.\n        if (typeof id === 'undefined') {\n          self._rate = rate;\n        }\n\n        // Update one or all volumes.\n        id = self._getSoundIds(id);\n        for (var i=0; i<id.length; i++) {\n          // Get the sound.\n          sound = self._soundById(id[i]);\n\n          if (sound) {\n            // Keep track of our position when the rate changed and update the playback\n            // start position so we can properly adjust the seek position for time elapsed.\n            if (self.playing(id[i])) {\n              sound._rateSeek = self.seek(id[i]);\n              sound._playStart = self._webAudio ? Howler.ctx.currentTime : sound._playStart;\n            }\n            sound._rate = rate;\n\n            // Change the playback rate.\n            if (self._webAudio && sound._node && sound._node.bufferSource) {\n              sound._node.bufferSource.playbackRate.setValueAtTime(rate, Howler.ctx.currentTime);\n            } else if (sound._node) {\n              sound._node.playbackRate = rate;\n            }\n\n            // Reset the timers.\n            var seek = self.seek(id[i]);\n            var duration = ((self._sprite[sound._sprite][0] + self._sprite[sound._sprite][1]) / 1000) - seek;\n            var timeout = (duration * 1000) / Math.abs(sound._rate);\n\n            // Start a new end timer if sound is already playing.\n            if (self._endTimers[id[i]] || !sound._paused) {\n              self._clearTimer(id[i]);\n              self._endTimers[id[i]] = setTimeout(self._ended.bind(self, sound), timeout);\n            }\n\n            self._emit('rate', sound._id);\n          }\n        }\n      } else {\n        sound = self._soundById(id);\n        return sound ? sound._rate : self._rate;\n      }\n\n      return self;\n    },\n\n    /**\n     * Get/set the seek position of a sound. This method can optionally take 0, 1 or 2 arguments.\n     *   seek() -> Returns the first sound node's current seek position.\n     *   seek(id) -> Returns the sound id's current seek position.\n     *   seek(seek) -> Sets the seek position of the first sound node.\n     *   seek(seek, id) -> Sets the seek position of passed sound id.\n     * @return {Howl/Number} Returns self or the current seek position.\n     */\n    seek: function() {\n      var self = this;\n      var args = arguments;\n      var seek, id;\n\n      // Determine the values based on arguments.\n      if (args.length === 0) {\n        // We will simply return the current position of the first node.\n        if (self._sounds.length) {\n          id = self._sounds[0]._id;\n        }\n      } else if (args.length === 1) {\n        // First check if this is an ID, and if not, assume it is a new seek position.\n        var ids = self._getSoundIds();\n        var index = ids.indexOf(args[0]);\n        if (index >= 0) {\n          id = parseInt(args[0], 10);\n        } else if (self._sounds.length) {\n          id = self._sounds[0]._id;\n          seek = parseFloat(args[0]);\n        }\n      } else if (args.length === 2) {\n        seek = parseFloat(args[0]);\n        id = parseInt(args[1], 10);\n      }\n\n      // If there is no ID, bail out.\n      if (typeof id === 'undefined') {\n        return 0;\n      }\n\n      // If the sound hasn't loaded, add it to the load queue to seek when capable.\n      if (typeof seek === 'number' && (self._state !== 'loaded' || self._playLock)) {\n        self._queue.push({\n          event: 'seek',\n          action: function() {\n            self.seek.apply(self, args);\n          }\n        });\n\n        return self;\n      }\n\n      // Get the sound.\n      var sound = self._soundById(id);\n\n      if (sound) {\n        if (typeof seek === 'number' && seek >= 0) {\n          // Pause the sound and update position for restarting playback.\n          var playing = self.playing(id);\n          if (playing) {\n            self.pause(id, true);\n          }\n\n          // Move the position of the track and cancel timer.\n          sound._seek = seek;\n          sound._ended = false;\n          self._clearTimer(id);\n\n          // Update the seek position for HTML5 Audio.\n          if (!self._webAudio && sound._node && !isNaN(sound._node.duration)) {\n            sound._node.currentTime = seek;\n          }\n\n          // Seek and emit when ready.\n          var seekAndEmit = function() {\n            // Restart the playback if the sound was playing.\n            if (playing) {\n              self.play(id, true);\n            }\n\n            self._emit('seek', id);\n          };\n\n          // Wait for the play lock to be unset before emitting (HTML5 Audio).\n          if (playing && !self._webAudio) {\n            var emitSeek = function() {\n              if (!self._playLock) {\n                seekAndEmit();\n              } else {\n                setTimeout(emitSeek, 0);\n              }\n            };\n            setTimeout(emitSeek, 0);\n          } else {\n            seekAndEmit();\n          }\n        } else {\n          if (self._webAudio) {\n            var realTime = self.playing(id) ? Howler.ctx.currentTime - sound._playStart : 0;\n            var rateSeek = sound._rateSeek ? sound._rateSeek - sound._seek : 0;\n            return sound._seek + (rateSeek + realTime * Math.abs(sound._rate));\n          } else {\n            return sound._node.currentTime;\n          }\n        }\n      }\n\n      return self;\n    },\n\n    /**\n     * Check if a specific sound is currently playing or not (if id is provided), or check if at least one of the sounds in the group is playing or not.\n     * @param  {Number}  id The sound id to check. If none is passed, the whole sound group is checked.\n     * @return {Boolean} True if playing and false if not.\n     */\n    playing: function(id) {\n      var self = this;\n\n      // Check the passed sound ID (if any).\n      if (typeof id === 'number') {\n        var sound = self._soundById(id);\n        return sound ? !sound._paused : false;\n      }\n\n      // Otherwise, loop through all sounds and check if any are playing.\n      for (var i=0; i<self._sounds.length; i++) {\n        if (!self._sounds[i]._paused) {\n          return true;\n        }\n      }\n\n      return false;\n    },\n\n    /**\n     * Get the duration of this sound. Passing a sound id will return the sprite duration.\n     * @param  {Number} id The sound id to check. If none is passed, return full source duration.\n     * @return {Number} Audio duration in seconds.\n     */\n    duration: function(id) {\n      var self = this;\n      var duration = self._duration;\n\n      // If we pass an ID, get the sound and return the sprite length.\n      var sound = self._soundById(id);\n      if (sound) {\n        duration = self._sprite[sound._sprite][1] / 1000;\n      }\n\n      return duration;\n    },\n\n    /**\n     * Returns the current loaded state of this Howl.\n     * @return {String} 'unloaded', 'loading', 'loaded'\n     */\n    state: function() {\n      return this._state;\n    },\n\n    /**\n     * Unload and destroy the current Howl object.\n     * This will immediately stop all sound instances attached to this group.\n     */\n    unload: function() {\n      var self = this;\n\n      // Stop playing any active sounds.\n      var sounds = self._sounds;\n      for (var i=0; i<sounds.length; i++) {\n        // Stop the sound if it is currently playing.\n        if (!sounds[i]._paused) {\n          self.stop(sounds[i]._id);\n        }\n\n        // Remove the source or disconnect.\n        if (!self._webAudio) {\n          // Set the source to 0-second silence to stop any downloading (except in IE).\n          self._clearSound(sounds[i]._node);\n\n          // Remove any event listeners.\n          sounds[i]._node.removeEventListener('error', sounds[i]._errorFn, false);\n          sounds[i]._node.removeEventListener(Howler._canPlayEvent, sounds[i]._loadFn, false);\n          sounds[i]._node.removeEventListener('ended', sounds[i]._endFn, false);\n\n          // Release the Audio object back to the pool.\n          Howler._releaseHtml5Audio(sounds[i]._node);\n        }\n\n        // Empty out all of the nodes.\n        delete sounds[i]._node;\n\n        // Make sure all timers are cleared out.\n        self._clearTimer(sounds[i]._id);\n      }\n\n      // Remove the references in the global Howler object.\n      var index = Howler._howls.indexOf(self);\n      if (index >= 0) {\n        Howler._howls.splice(index, 1);\n      }\n\n      // Delete this sound from the cache (if no other Howl is using it).\n      var remCache = true;\n      for (i=0; i<Howler._howls.length; i++) {\n        if (Howler._howls[i]._src === self._src || self._src.indexOf(Howler._howls[i]._src) >= 0) {\n          remCache = false;\n          break;\n        }\n      }\n\n      if (cache && remCache) {\n        delete cache[self._src];\n      }\n\n      // Clear global errors.\n      Howler.noAudio = false;\n\n      // Clear out `self`.\n      self._state = 'unloaded';\n      self._sounds = [];\n      self = null;\n\n      return null;\n    },\n\n    /**\n     * Listen to a custom event.\n     * @param  {String}   event Event name.\n     * @param  {Function} fn    Listener to call.\n     * @param  {Number}   id    (optional) Only listen to events for this sound.\n     * @param  {Number}   once  (INTERNAL) Marks event to fire only once.\n     * @return {Howl}\n     */\n    on: function(event, fn, id, once) {\n      var self = this;\n      var events = self['_on' + event];\n\n      if (typeof fn === 'function') {\n        events.push(once ? {id: id, fn: fn, once: once} : {id: id, fn: fn});\n      }\n\n      return self;\n    },\n\n    /**\n     * Remove a custom event. Call without parameters to remove all events.\n     * @param  {String}   event Event name.\n     * @param  {Function} fn    Listener to remove. Leave empty to remove all.\n     * @param  {Number}   id    (optional) Only remove events for this sound.\n     * @return {Howl}\n     */\n    off: function(event, fn, id) {\n      var self = this;\n      var events = self['_on' + event];\n      var i = 0;\n\n      // Allow passing just an event and ID.\n      if (typeof fn === 'number') {\n        id = fn;\n        fn = null;\n      }\n\n      if (fn || id) {\n        // Loop through event store and remove the passed function.\n        for (i=0; i<events.length; i++) {\n          var isId = (id === events[i].id);\n          if (fn === events[i].fn && isId || !fn && isId) {\n            events.splice(i, 1);\n            break;\n          }\n        }\n      } else if (event) {\n        // Clear out all events of this type.\n        self['_on' + event] = [];\n      } else {\n        // Clear out all events of every type.\n        var keys = Object.keys(self);\n        for (i=0; i<keys.length; i++) {\n          if ((keys[i].indexOf('_on') === 0) && Array.isArray(self[keys[i]])) {\n            self[keys[i]] = [];\n          }\n        }\n      }\n\n      return self;\n    },\n\n    /**\n     * Listen to a custom event and remove it once fired.\n     * @param  {String}   event Event name.\n     * @param  {Function} fn    Listener to call.\n     * @param  {Number}   id    (optional) Only listen to events for this sound.\n     * @return {Howl}\n     */\n    once: function(event, fn, id) {\n      var self = this;\n\n      // Setup the event listener.\n      self.on(event, fn, id, 1);\n\n      return self;\n    },\n\n    /**\n     * Emit all events of a specific type and pass the sound id.\n     * @param  {String} event Event name.\n     * @param  {Number} id    Sound ID.\n     * @param  {Number} msg   Message to go with event.\n     * @return {Howl}\n     */\n    _emit: function(event, id, msg) {\n      var self = this;\n      var events = self['_on' + event];\n\n      // Loop through event store and fire all functions.\n      for (var i=events.length-1; i>=0; i--) {\n        // Only fire the listener if the correct ID is used.\n        if (!events[i].id || events[i].id === id || event === 'load') {\n          setTimeout(function(fn) {\n            fn.call(this, id, msg);\n          }.bind(self, events[i].fn), 0);\n\n          // If this event was setup with `once`, remove it.\n          if (events[i].once) {\n            self.off(event, events[i].fn, events[i].id);\n          }\n        }\n      }\n\n      // Pass the event type into load queue so that it can continue stepping.\n      self._loadQueue(event);\n\n      return self;\n    },\n\n    /**\n     * Queue of actions initiated before the sound has loaded.\n     * These will be called in sequence, with the next only firing\n     * after the previous has finished executing (even if async like play).\n     * @return {Howl}\n     */\n    _loadQueue: function(event) {\n      var self = this;\n\n      if (self._queue.length > 0) {\n        var task = self._queue[0];\n\n        // Remove this task if a matching event was passed.\n        if (task.event === event) {\n          self._queue.shift();\n          self._loadQueue();\n        }\n\n        // Run the task if no event type is passed.\n        if (!event) {\n          task.action();\n        }\n      }\n\n      return self;\n    },\n\n    /**\n     * Fired when playback ends at the end of the duration.\n     * @param  {Sound} sound The sound object to work with.\n     * @return {Howl}\n     */\n    _ended: function(sound) {\n      var self = this;\n      var sprite = sound._sprite;\n\n      // If we are using IE and there was network latency we may be clipping\n      // audio before it completes playing. Lets check the node to make sure it\n      // believes it has completed, before ending the playback.\n      if (!self._webAudio && sound._node && !sound._node.paused && !sound._node.ended && sound._node.currentTime < sound._stop) {\n        setTimeout(self._ended.bind(self, sound), 100);\n        return self;\n      }\n\n      // Should this sound loop?\n      var loop = !!(sound._loop || self._sprite[sprite][2]);\n\n      // Fire the ended event.\n      self._emit('end', sound._id);\n\n      // Restart the playback for HTML5 Audio loop.\n      if (!self._webAudio && loop) {\n        self.stop(sound._id, true).play(sound._id);\n      }\n\n      // Restart this timer if on a Web Audio loop.\n      if (self._webAudio && loop) {\n        self._emit('play', sound._id);\n        sound._seek = sound._start || 0;\n        sound._rateSeek = 0;\n        sound._playStart = Howler.ctx.currentTime;\n\n        var timeout = ((sound._stop - sound._start) * 1000) / Math.abs(sound._rate);\n        self._endTimers[sound._id] = setTimeout(self._ended.bind(self, sound), timeout);\n      }\n\n      // Mark the node as paused.\n      if (self._webAudio && !loop) {\n        sound._paused = true;\n        sound._ended = true;\n        sound._seek = sound._start || 0;\n        sound._rateSeek = 0;\n        self._clearTimer(sound._id);\n\n        // Clean up the buffer source.\n        self._cleanBuffer(sound._node);\n\n        // Attempt to auto-suspend AudioContext if no sounds are still playing.\n        Howler._autoSuspend();\n      }\n\n      // When using a sprite, end the track.\n      if (!self._webAudio && !loop) {\n        self.stop(sound._id, true);\n      }\n\n      return self;\n    },\n\n    /**\n     * Clear the end timer for a sound playback.\n     * @param  {Number} id The sound ID.\n     * @return {Howl}\n     */\n    _clearTimer: function(id) {\n      var self = this;\n\n      if (self._endTimers[id]) {\n        // Clear the timeout or remove the ended listener.\n        if (typeof self._endTimers[id] !== 'function') {\n          clearTimeout(self._endTimers[id]);\n        } else {\n          var sound = self._soundById(id);\n          if (sound && sound._node) {\n            sound._node.removeEventListener('ended', self._endTimers[id], false);\n          }\n        }\n\n        delete self._endTimers[id];\n      }\n\n      return self;\n    },\n\n    /**\n     * Return the sound identified by this ID, or return null.\n     * @param  {Number} id Sound ID\n     * @return {Object}    Sound object or null.\n     */\n    _soundById: function(id) {\n      var self = this;\n\n      // Loop through all sounds and find the one with this ID.\n      for (var i=0; i<self._sounds.length; i++) {\n        if (id === self._sounds[i]._id) {\n          return self._sounds[i];\n        }\n      }\n\n      return null;\n    },\n\n    /**\n     * Return an inactive sound from the pool or create a new one.\n     * @return {Sound} Sound playback object.\n     */\n    _inactiveSound: function() {\n      var self = this;\n\n      self._drain();\n\n      // Find the first inactive node to recycle.\n      for (var i=0; i<self._sounds.length; i++) {\n        if (self._sounds[i]._ended) {\n          return self._sounds[i].reset();\n        }\n      }\n\n      // If no inactive node was found, create a new one.\n      return new Sound(self);\n    },\n\n    /**\n     * Drain excess inactive sounds from the pool.\n     */\n    _drain: function() {\n      var self = this;\n      var limit = self._pool;\n      var cnt = 0;\n      var i = 0;\n\n      // If there are less sounds than the max pool size, we are done.\n      if (self._sounds.length < limit) {\n        return;\n      }\n\n      // Count the number of inactive sounds.\n      for (i=0; i<self._sounds.length; i++) {\n        if (self._sounds[i]._ended) {\n          cnt++;\n        }\n      }\n\n      // Remove excess inactive sounds, going in reverse order.\n      for (i=self._sounds.length - 1; i>=0; i--) {\n        if (cnt <= limit) {\n          return;\n        }\n\n        if (self._sounds[i]._ended) {\n          // Disconnect the audio source when using Web Audio.\n          if (self._webAudio && self._sounds[i]._node) {\n            self._sounds[i]._node.disconnect(0);\n          }\n\n          // Remove sounds until we have the pool size.\n          self._sounds.splice(i, 1);\n          cnt--;\n        }\n      }\n    },\n\n    /**\n     * Get all ID's from the sounds pool.\n     * @param  {Number} id Only return one ID if one is passed.\n     * @return {Array}    Array of IDs.\n     */\n    _getSoundIds: function(id) {\n      var self = this;\n\n      if (typeof id === 'undefined') {\n        var ids = [];\n        for (var i=0; i<self._sounds.length; i++) {\n          ids.push(self._sounds[i]._id);\n        }\n\n        return ids;\n      } else {\n        return [id];\n      }\n    },\n\n    /**\n     * Load the sound back into the buffer source.\n     * @param  {Sound} sound The sound object to work with.\n     * @return {Howl}\n     */\n    _refreshBuffer: function(sound) {\n      var self = this;\n\n      // Setup the buffer source for playback.\n      sound._node.bufferSource = Howler.ctx.createBufferSource();\n      sound._node.bufferSource.buffer = cache[self._src];\n\n      // Connect to the correct node.\n      if (sound._panner) {\n        sound._node.bufferSource.connect(sound._panner);\n      } else {\n        sound._node.bufferSource.connect(sound._node);\n      }\n\n      // Setup looping and playback rate.\n      sound._node.bufferSource.loop = sound._loop;\n      if (sound._loop) {\n        sound._node.bufferSource.loopStart = sound._start || 0;\n        sound._node.bufferSource.loopEnd = sound._stop || 0;\n      }\n      sound._node.bufferSource.playbackRate.setValueAtTime(sound._rate, Howler.ctx.currentTime);\n\n      return self;\n    },\n\n    /**\n     * Prevent memory leaks by cleaning up the buffer source after playback.\n     * @param  {Object} node Sound's audio node containing the buffer source.\n     * @return {Howl}\n     */\n    _cleanBuffer: function(node) {\n      var self = this;\n      var isIOS = Howler._navigator && Howler._navigator.vendor.indexOf('Apple') >= 0;\n\n      if (Howler._scratchBuffer && node.bufferSource) {\n        node.bufferSource.onended = null;\n        node.bufferSource.disconnect(0);\n        if (isIOS) {\n          try { node.bufferSource.buffer = Howler._scratchBuffer; } catch(e) {}\n        }\n      }\n      node.bufferSource = null;\n\n      return self;\n    },\n\n    /**\n     * Set the source to a 0-second silence to stop any downloading (except in IE).\n     * @param  {Object} node Audio node to clear.\n     */\n    _clearSound: function(node) {\n      var checkIE = /MSIE |Trident\\//.test(Howler._navigator && Howler._navigator.userAgent);\n      if (!checkIE) {\n        node.src = 'data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA';\n      }\n    }\n  };\n\n  /** Single Sound Methods **/\n  /***************************************************************************/\n\n  /**\n   * Setup the sound object, which each node attached to a Howl group is contained in.\n   * @param {Object} howl The Howl parent group.\n   */\n  var Sound = function(howl) {\n    this._parent = howl;\n    this.init();\n  };\n  Sound.prototype = {\n    /**\n     * Initialize a new Sound object.\n     * @return {Sound}\n     */\n    init: function() {\n      var self = this;\n      var parent = self._parent;\n\n      // Setup the default parameters.\n      self._muted = parent._muted;\n      self._loop = parent._loop;\n      self._volume = parent._volume;\n      self._rate = parent._rate;\n      self._seek = 0;\n      self._paused = true;\n      self._ended = true;\n      self._sprite = '__default';\n\n      // Generate a unique ID for this sound.\n      self._id = ++Howler._counter;\n\n      // Add itself to the parent's pool.\n      parent._sounds.push(self);\n\n      // Create the new node.\n      self.create();\n\n      return self;\n    },\n\n    /**\n     * Create and setup a new sound object, whether HTML5 Audio or Web Audio.\n     * @return {Sound}\n     */\n    create: function() {\n      var self = this;\n      var parent = self._parent;\n      var volume = (Howler._muted || self._muted || self._parent._muted) ? 0 : self._volume;\n\n      if (parent._webAudio) {\n        // Create the gain node for controlling volume (the source will connect to this).\n        self._node = (typeof Howler.ctx.createGain === 'undefined') ? Howler.ctx.createGainNode() : Howler.ctx.createGain();\n        self._node.gain.setValueAtTime(volume, Howler.ctx.currentTime);\n        self._node.paused = true;\n        self._node.connect(Howler.masterGain);\n      } else if (!Howler.noAudio) {\n        // Get an unlocked Audio object from the pool.\n        self._node = Howler._obtainHtml5Audio();\n\n        // Listen for errors (http://dev.w3.org/html5/spec-author-view/spec.html#mediaerror).\n        self._errorFn = self._errorListener.bind(self);\n        self._node.addEventListener('error', self._errorFn, false);\n\n        // Listen for 'canplaythrough' event to let us know the sound is ready.\n        self._loadFn = self._loadListener.bind(self);\n        self._node.addEventListener(Howler._canPlayEvent, self._loadFn, false);\n\n        // Listen for the 'ended' event on the sound to account for edge-case where\n        // a finite sound has a duration of Infinity.\n        self._endFn = self._endListener.bind(self);\n        self._node.addEventListener('ended', self._endFn, false);\n\n        // Setup the new audio node.\n        self._node.src = parent._src;\n        self._node.preload = parent._preload === true ? 'auto' : parent._preload;\n        self._node.volume = volume * Howler.volume();\n\n        // Begin loading the source.\n        self._node.load();\n      }\n\n      return self;\n    },\n\n    /**\n     * Reset the parameters of this sound to the original state (for recycle).\n     * @return {Sound}\n     */\n    reset: function() {\n      var self = this;\n      var parent = self._parent;\n\n      // Reset all of the parameters of this sound.\n      self._muted = parent._muted;\n      self._loop = parent._loop;\n      self._volume = parent._volume;\n      self._rate = parent._rate;\n      self._seek = 0;\n      self._rateSeek = 0;\n      self._paused = true;\n      self._ended = true;\n      self._sprite = '__default';\n\n      // Generate a new ID so that it isn't confused with the previous sound.\n      self._id = ++Howler._counter;\n\n      return self;\n    },\n\n    /**\n     * HTML5 Audio error listener callback.\n     */\n    _errorListener: function() {\n      var self = this;\n\n      // Fire an error event and pass back the code.\n      self._parent._emit('loaderror', self._id, self._node.error ? self._node.error.code : 0);\n\n      // Clear the event listener.\n      self._node.removeEventListener('error', self._errorFn, false);\n    },\n\n    /**\n     * HTML5 Audio canplaythrough listener callback.\n     */\n    _loadListener: function() {\n      var self = this;\n      var parent = self._parent;\n\n      // Round up the duration to account for the lower precision in HTML5 Audio.\n      parent._duration = Math.ceil(self._node.duration * 10) / 10;\n\n      // Setup a sprite if none is defined.\n      if (Object.keys(parent._sprite).length === 0) {\n        parent._sprite = {__default: [0, parent._duration * 1000]};\n      }\n\n      if (parent._state !== 'loaded') {\n        parent._state = 'loaded';\n        parent._emit('load');\n        parent._loadQueue();\n      }\n\n      // Clear the event listener.\n      self._node.removeEventListener(Howler._canPlayEvent, self._loadFn, false);\n    },\n\n    /**\n     * HTML5 Audio ended listener callback.\n     */\n    _endListener: function() {\n      var self = this;\n      var parent = self._parent;\n\n      // Only handle the `ended`` event if the duration is Infinity.\n      if (parent._duration === Infinity) {\n        // Update the parent duration to match the real audio duration.\n        // Round up the duration to account for the lower precision in HTML5 Audio.\n        parent._duration = Math.ceil(self._node.duration * 10) / 10;\n\n        // Update the sprite that corresponds to the real duration.\n        if (parent._sprite.__default[1] === Infinity) {\n          parent._sprite.__default[1] = parent._duration * 1000;\n        }\n\n        // Run the regular ended method.\n        parent._ended(self);\n      }\n\n      // Clear the event listener since the duration is now correct.\n      self._node.removeEventListener('ended', self._endFn, false);\n    }\n  };\n\n  /** Helper Methods **/\n  /***************************************************************************/\n\n  var cache = {};\n\n  /**\n   * Buffer a sound from URL, Data URI or cache and decode to audio source (Web Audio API).\n   * @param  {Howl} self\n   */\n  var loadBuffer = function(self) {\n    var url = self._src;\n\n    // Check if the buffer has already been cached and use it instead.\n    if (cache[url]) {\n      // Set the duration from the cache.\n      self._duration = cache[url].duration;\n\n      // Load the sound into this Howl.\n      loadSound(self);\n\n      return;\n    }\n\n    if (/^data:[^;]+;base64,/.test(url)) {\n      // Decode the base64 data URI without XHR, since some browsers don't support it.\n      var data = atob(url.split(',')[1]);\n      var dataView = new Uint8Array(data.length);\n      for (var i=0; i<data.length; ++i) {\n        dataView[i] = data.charCodeAt(i);\n      }\n\n      decodeAudioData(dataView.buffer, self);\n    } else {\n      // Load the buffer from the URL.\n      var xhr = new XMLHttpRequest();\n      xhr.open(self._xhr.method, url, true);\n      xhr.withCredentials = self._xhr.withCredentials;\n      xhr.responseType = 'arraybuffer';\n\n      // Apply any custom headers to the request.\n      if (self._xhr.headers) {\n        Object.keys(self._xhr.headers).forEach(function(key) {\n          xhr.setRequestHeader(key, self._xhr.headers[key]);\n        });\n      }\n\n      xhr.onload = function() {\n        // Make sure we get a successful response back.\n        var code = (xhr.status + '')[0];\n        if (code !== '0' && code !== '2' && code !== '3') {\n          self._emit('loaderror', null, 'Failed loading audio file with status: ' + xhr.status + '.');\n          return;\n        }\n\n        decodeAudioData(xhr.response, self);\n      };\n      xhr.onerror = function() {\n        // If there is an error, switch to HTML5 Audio.\n        if (self._webAudio) {\n          self._html5 = true;\n          self._webAudio = false;\n          self._sounds = [];\n          delete cache[url];\n          self.load();\n        }\n      };\n      safeXhrSend(xhr);\n    }\n  };\n\n  /**\n   * Send the XHR request wrapped in a try/catch.\n   * @param  {Object} xhr XHR to send.\n   */\n  var safeXhrSend = function(xhr) {\n    try {\n      xhr.send();\n    } catch (e) {\n      xhr.onerror();\n    }\n  };\n\n  /**\n   * Decode audio data from an array buffer.\n   * @param  {ArrayBuffer} arraybuffer The audio data.\n   * @param  {Howl}        self\n   */\n  var decodeAudioData = function(arraybuffer, self) {\n    // Fire a load error if something broke.\n    var error = function() {\n      self._emit('loaderror', null, 'Decoding audio data failed.');\n    };\n\n    // Load the sound on success.\n    var success = function(buffer) {\n      if (buffer && self._sounds.length > 0) {\n        cache[self._src] = buffer;\n        loadSound(self, buffer);\n      } else {\n        error();\n      }\n    };\n\n    // Decode the buffer into an audio source.\n    if (typeof Promise !== 'undefined' && Howler.ctx.decodeAudioData.length === 1) {\n      Howler.ctx.decodeAudioData(arraybuffer).then(success).catch(error);\n    } else {\n      Howler.ctx.decodeAudioData(arraybuffer, success, error);\n    }\n  }\n\n  /**\n   * Sound is now loaded, so finish setting everything up and fire the loaded event.\n   * @param  {Howl} self\n   * @param  {Object} buffer The decoded buffer sound source.\n   */\n  var loadSound = function(self, buffer) {\n    // Set the duration.\n    if (buffer && !self._duration) {\n      self._duration = buffer.duration;\n    }\n\n    // Setup a sprite if none is defined.\n    if (Object.keys(self._sprite).length === 0) {\n      self._sprite = {__default: [0, self._duration * 1000]};\n    }\n\n    // Fire the loaded event.\n    if (self._state !== 'loaded') {\n      self._state = 'loaded';\n      self._emit('load');\n      self._loadQueue();\n    }\n  };\n\n  /**\n   * Setup the audio context when available, or switch to HTML5 Audio mode.\n   */\n  var setupAudioContext = function() {\n    // If we have already detected that Web Audio isn't supported, don't run this step again.\n    if (!Howler.usingWebAudio) {\n      return;\n    }\n\n    // Check if we are using Web Audio and setup the AudioContext if we are.\n    try {\n      if (typeof AudioContext !== 'undefined') {\n        Howler.ctx = new AudioContext();\n      } else if (typeof webkitAudioContext !== 'undefined') {\n        Howler.ctx = new webkitAudioContext();\n      } else {\n        Howler.usingWebAudio = false;\n      }\n    } catch(e) {\n      Howler.usingWebAudio = false;\n    }\n\n    // If the audio context creation still failed, set using web audio to false.\n    if (!Howler.ctx) {\n      Howler.usingWebAudio = false;\n    }\n\n    // Check if a webview is being used on iOS8 or earlier (rather than the browser).\n    // If it is, disable Web Audio as it causes crashing.\n    var iOS = (/iP(hone|od|ad)/.test(Howler._navigator && Howler._navigator.platform));\n    var appVersion = Howler._navigator && Howler._navigator.appVersion.match(/OS (\\d+)_(\\d+)_?(\\d+)?/);\n    var version = appVersion ? parseInt(appVersion[1], 10) : null;\n    if (iOS && version && version < 9) {\n      var safari = /safari/.test(Howler._navigator && Howler._navigator.userAgent.toLowerCase());\n      if (Howler._navigator && !safari) {\n        Howler.usingWebAudio = false;\n      }\n    }\n\n    // Create and expose the master GainNode when using Web Audio (useful for plugins or advanced usage).\n    if (Howler.usingWebAudio) {\n      Howler.masterGain = (typeof Howler.ctx.createGain === 'undefined') ? Howler.ctx.createGainNode() : Howler.ctx.createGain();\n      Howler.masterGain.gain.setValueAtTime(Howler._muted ? 0 : Howler._volume, Howler.ctx.currentTime);\n      Howler.masterGain.connect(Howler.ctx.destination);\n    }\n\n    // Re-run the setup on Howler.\n    Howler._setup();\n  };\n\n  // Add support for AMD (Asynchronous Module Definition) libraries such as require.js.\n  if (true) {\n    !(__WEBPACK_AMD_DEFINE_ARRAY__ = [], __WEBPACK_AMD_DEFINE_RESULT__ = (function() {\n      return {\n        Howler: Howler,\n        Howl: Howl\n      };\n    }).apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),\n\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n  }\n\n  // Add support for CommonJS libraries such as browserify.\n  if (true) {\n    exports.Howler = Howler;\n    exports.Howl = Howl;\n  }\n\n  // Add to global in Node.js (for testing, etc).\n  if (typeof __webpack_require__.g !== 'undefined') {\n    __webpack_require__.g.HowlerGlobal = HowlerGlobal;\n    __webpack_require__.g.Howler = Howler;\n    __webpack_require__.g.Howl = Howl;\n    __webpack_require__.g.Sound = Sound;\n  } else if (typeof window !== 'undefined') {  // Define globally in case AMD is not available or unused.\n    window.HowlerGlobal = HowlerGlobal;\n    window.Howler = Howler;\n    window.Howl = Howl;\n    window.Sound = Sound;\n  }\n})();\n\n\n/*!\n *  Spatial Plugin - Adds support for stereo and 3D audio where Web Audio is supported.\n *  \n *  howler.js v2.2.3\n *  howlerjs.com\n *\n *  (c) 2013-2020, James Simpson of GoldFire Studios\n *  goldfirestudios.com\n *\n *  MIT License\n */\n\n(function() {\n\n  'use strict';\n\n  // Setup default properties.\n  HowlerGlobal.prototype._pos = [0, 0, 0];\n  HowlerGlobal.prototype._orientation = [0, 0, -1, 0, 1, 0];\n\n  /** Global Methods **/\n  /***************************************************************************/\n\n  /**\n   * Helper method to update the stereo panning position of all current Howls.\n   * Future Howls will not use this value unless explicitly set.\n   * @param  {Number} pan A value of -1.0 is all the way left and 1.0 is all the way right.\n   * @return {Howler/Number}     Self or current stereo panning value.\n   */\n  HowlerGlobal.prototype.stereo = function(pan) {\n    var self = this;\n\n    // Stop right here if not using Web Audio.\n    if (!self.ctx || !self.ctx.listener) {\n      return self;\n    }\n\n    // Loop through all Howls and update their stereo panning.\n    for (var i=self._howls.length-1; i>=0; i--) {\n      self._howls[i].stereo(pan);\n    }\n\n    return self;\n  };\n\n  /**\n   * Get/set the position of the listener in 3D cartesian space. Sounds using\n   * 3D position will be relative to the listener's position.\n   * @param  {Number} x The x-position of the listener.\n   * @param  {Number} y The y-position of the listener.\n   * @param  {Number} z The z-position of the listener.\n   * @return {Howler/Array}   Self or current listener position.\n   */\n  HowlerGlobal.prototype.pos = function(x, y, z) {\n    var self = this;\n\n    // Stop right here if not using Web Audio.\n    if (!self.ctx || !self.ctx.listener) {\n      return self;\n    }\n\n    // Set the defaults for optional 'y' & 'z'.\n    y = (typeof y !== 'number') ? self._pos[1] : y;\n    z = (typeof z !== 'number') ? self._pos[2] : z;\n\n    if (typeof x === 'number') {\n      self._pos = [x, y, z];\n\n      if (typeof self.ctx.listener.positionX !== 'undefined') {\n        self.ctx.listener.positionX.setTargetAtTime(self._pos[0], Howler.ctx.currentTime, 0.1);\n        self.ctx.listener.positionY.setTargetAtTime(self._pos[1], Howler.ctx.currentTime, 0.1);\n        self.ctx.listener.positionZ.setTargetAtTime(self._pos[2], Howler.ctx.currentTime, 0.1);\n      } else {\n        self.ctx.listener.setPosition(self._pos[0], self._pos[1], self._pos[2]);\n      }\n    } else {\n      return self._pos;\n    }\n\n    return self;\n  };\n\n  /**\n   * Get/set the direction the listener is pointing in the 3D cartesian space.\n   * A front and up vector must be provided. The front is the direction the\n   * face of the listener is pointing, and up is the direction the top of the\n   * listener is pointing. Thus, these values are expected to be at right angles\n   * from each other.\n   * @param  {Number} x   The x-orientation of the listener.\n   * @param  {Number} y   The y-orientation of the listener.\n   * @param  {Number} z   The z-orientation of the listener.\n   * @param  {Number} xUp The x-orientation of the top of the listener.\n   * @param  {Number} yUp The y-orientation of the top of the listener.\n   * @param  {Number} zUp The z-orientation of the top of the listener.\n   * @return {Howler/Array}     Returns self or the current orientation vectors.\n   */\n  HowlerGlobal.prototype.orientation = function(x, y, z, xUp, yUp, zUp) {\n    var self = this;\n\n    // Stop right here if not using Web Audio.\n    if (!self.ctx || !self.ctx.listener) {\n      return self;\n    }\n\n    // Set the defaults for optional 'y' & 'z'.\n    var or = self._orientation;\n    y = (typeof y !== 'number') ? or[1] : y;\n    z = (typeof z !== 'number') ? or[2] : z;\n    xUp = (typeof xUp !== 'number') ? or[3] : xUp;\n    yUp = (typeof yUp !== 'number') ? or[4] : yUp;\n    zUp = (typeof zUp !== 'number') ? or[5] : zUp;\n\n    if (typeof x === 'number') {\n      self._orientation = [x, y, z, xUp, yUp, zUp];\n\n      if (typeof self.ctx.listener.forwardX !== 'undefined') {\n        self.ctx.listener.forwardX.setTargetAtTime(x, Howler.ctx.currentTime, 0.1);\n        self.ctx.listener.forwardY.setTargetAtTime(y, Howler.ctx.currentTime, 0.1);\n        self.ctx.listener.forwardZ.setTargetAtTime(z, Howler.ctx.currentTime, 0.1);\n        self.ctx.listener.upX.setTargetAtTime(xUp, Howler.ctx.currentTime, 0.1);\n        self.ctx.listener.upY.setTargetAtTime(yUp, Howler.ctx.currentTime, 0.1);\n        self.ctx.listener.upZ.setTargetAtTime(zUp, Howler.ctx.currentTime, 0.1);\n      } else {\n        self.ctx.listener.setOrientation(x, y, z, xUp, yUp, zUp);\n      }\n    } else {\n      return or;\n    }\n\n    return self;\n  };\n\n  /** Group Methods **/\n  /***************************************************************************/\n\n  /**\n   * Add new properties to the core init.\n   * @param  {Function} _super Core init method.\n   * @return {Howl}\n   */\n  Howl.prototype.init = (function(_super) {\n    return function(o) {\n      var self = this;\n\n      // Setup user-defined default properties.\n      self._orientation = o.orientation || [1, 0, 0];\n      self._stereo = o.stereo || null;\n      self._pos = o.pos || null;\n      self._pannerAttr = {\n        coneInnerAngle: typeof o.coneInnerAngle !== 'undefined' ? o.coneInnerAngle : 360,\n        coneOuterAngle: typeof o.coneOuterAngle !== 'undefined' ? o.coneOuterAngle : 360,\n        coneOuterGain: typeof o.coneOuterGain !== 'undefined' ? o.coneOuterGain : 0,\n        distanceModel: typeof o.distanceModel !== 'undefined' ? o.distanceModel : 'inverse',\n        maxDistance: typeof o.maxDistance !== 'undefined' ? o.maxDistance : 10000,\n        panningModel: typeof o.panningModel !== 'undefined' ? o.panningModel : 'HRTF',\n        refDistance: typeof o.refDistance !== 'undefined' ? o.refDistance : 1,\n        rolloffFactor: typeof o.rolloffFactor !== 'undefined' ? o.rolloffFactor : 1\n      };\n\n      // Setup event listeners.\n      self._onstereo = o.onstereo ? [{fn: o.onstereo}] : [];\n      self._onpos = o.onpos ? [{fn: o.onpos}] : [];\n      self._onorientation = o.onorientation ? [{fn: o.onorientation}] : [];\n\n      // Complete initilization with howler.js core's init function.\n      return _super.call(this, o);\n    };\n  })(Howl.prototype.init);\n\n  /**\n   * Get/set the stereo panning of the audio source for this sound or all in the group.\n   * @param  {Number} pan  A value of -1.0 is all the way left and 1.0 is all the way right.\n   * @param  {Number} id (optional) The sound ID. If none is passed, all in group will be updated.\n   * @return {Howl/Number}    Returns self or the current stereo panning value.\n   */\n  Howl.prototype.stereo = function(pan, id) {\n    var self = this;\n\n    // Stop right here if not using Web Audio.\n    if (!self._webAudio) {\n      return self;\n    }\n\n    // If the sound hasn't loaded, add it to the load queue to change stereo pan when capable.\n    if (self._state !== 'loaded') {\n      self._queue.push({\n        event: 'stereo',\n        action: function() {\n          self.stereo(pan, id);\n        }\n      });\n\n      return self;\n    }\n\n    // Check for PannerStereoNode support and fallback to PannerNode if it doesn't exist.\n    var pannerType = (typeof Howler.ctx.createStereoPanner === 'undefined') ? 'spatial' : 'stereo';\n\n    // Setup the group's stereo panning if no ID is passed.\n    if (typeof id === 'undefined') {\n      // Return the group's stereo panning if no parameters are passed.\n      if (typeof pan === 'number') {\n        self._stereo = pan;\n        self._pos = [pan, 0, 0];\n      } else {\n        return self._stereo;\n      }\n    }\n\n    // Change the streo panning of one or all sounds in group.\n    var ids = self._getSoundIds(id);\n    for (var i=0; i<ids.length; i++) {\n      // Get the sound.\n      var sound = self._soundById(ids[i]);\n\n      if (sound) {\n        if (typeof pan === 'number') {\n          sound._stereo = pan;\n          sound._pos = [pan, 0, 0];\n\n          if (sound._node) {\n            // If we are falling back, make sure the panningModel is equalpower.\n            sound._pannerAttr.panningModel = 'equalpower';\n\n            // Check if there is a panner setup and create a new one if not.\n            if (!sound._panner || !sound._panner.pan) {\n              setupPanner(sound, pannerType);\n            }\n\n            if (pannerType === 'spatial') {\n              if (typeof sound._panner.positionX !== 'undefined') {\n                sound._panner.positionX.setValueAtTime(pan, Howler.ctx.currentTime);\n                sound._panner.positionY.setValueAtTime(0, Howler.ctx.currentTime);\n                sound._panner.positionZ.setValueAtTime(0, Howler.ctx.currentTime);\n              } else {\n                sound._panner.setPosition(pan, 0, 0);\n              }\n            } else {\n              sound._panner.pan.setValueAtTime(pan, Howler.ctx.currentTime);\n            }\n          }\n\n          self._emit('stereo', sound._id);\n        } else {\n          return sound._stereo;\n        }\n      }\n    }\n\n    return self;\n  };\n\n  /**\n   * Get/set the 3D spatial position of the audio source for this sound or group relative to the global listener.\n   * @param  {Number} x  The x-position of the audio source.\n   * @param  {Number} y  The y-position of the audio source.\n   * @param  {Number} z  The z-position of the audio source.\n   * @param  {Number} id (optional) The sound ID. If none is passed, all in group will be updated.\n   * @return {Howl/Array}    Returns self or the current 3D spatial position: [x, y, z].\n   */\n  Howl.prototype.pos = function(x, y, z, id) {\n    var self = this;\n\n    // Stop right here if not using Web Audio.\n    if (!self._webAudio) {\n      return self;\n    }\n\n    // If the sound hasn't loaded, add it to the load queue to change position when capable.\n    if (self._state !== 'loaded') {\n      self._queue.push({\n        event: 'pos',\n        action: function() {\n          self.pos(x, y, z, id);\n        }\n      });\n\n      return self;\n    }\n\n    // Set the defaults for optional 'y' & 'z'.\n    y = (typeof y !== 'number') ? 0 : y;\n    z = (typeof z !== 'number') ? -0.5 : z;\n\n    // Setup the group's spatial position if no ID is passed.\n    if (typeof id === 'undefined') {\n      // Return the group's spatial position if no parameters are passed.\n      if (typeof x === 'number') {\n        self._pos = [x, y, z];\n      } else {\n        return self._pos;\n      }\n    }\n\n    // Change the spatial position of one or all sounds in group.\n    var ids = self._getSoundIds(id);\n    for (var i=0; i<ids.length; i++) {\n      // Get the sound.\n      var sound = self._soundById(ids[i]);\n\n      if (sound) {\n        if (typeof x === 'number') {\n          sound._pos = [x, y, z];\n\n          if (sound._node) {\n            // Check if there is a panner setup and create a new one if not.\n            if (!sound._panner || sound._panner.pan) {\n              setupPanner(sound, 'spatial');\n            }\n\n            if (typeof sound._panner.positionX !== 'undefined') {\n              sound._panner.positionX.setValueAtTime(x, Howler.ctx.currentTime);\n              sound._panner.positionY.setValueAtTime(y, Howler.ctx.currentTime);\n              sound._panner.positionZ.setValueAtTime(z, Howler.ctx.currentTime);\n            } else {\n              sound._panner.setPosition(x, y, z);\n            }\n          }\n\n          self._emit('pos', sound._id);\n        } else {\n          return sound._pos;\n        }\n      }\n    }\n\n    return self;\n  };\n\n  /**\n   * Get/set the direction the audio source is pointing in the 3D cartesian coordinate\n   * space. Depending on how direction the sound is, based on the `cone` attributes,\n   * a sound pointing away from the listener can be quiet or silent.\n   * @param  {Number} x  The x-orientation of the source.\n   * @param  {Number} y  The y-orientation of the source.\n   * @param  {Number} z  The z-orientation of the source.\n   * @param  {Number} id (optional) The sound ID. If none is passed, all in group will be updated.\n   * @return {Howl/Array}    Returns self or the current 3D spatial orientation: [x, y, z].\n   */\n  Howl.prototype.orientation = function(x, y, z, id) {\n    var self = this;\n\n    // Stop right here if not using Web Audio.\n    if (!self._webAudio) {\n      return self;\n    }\n\n    // If the sound hasn't loaded, add it to the load queue to change orientation when capable.\n    if (self._state !== 'loaded') {\n      self._queue.push({\n        event: 'orientation',\n        action: function() {\n          self.orientation(x, y, z, id);\n        }\n      });\n\n      return self;\n    }\n\n    // Set the defaults for optional 'y' & 'z'.\n    y = (typeof y !== 'number') ? self._orientation[1] : y;\n    z = (typeof z !== 'number') ? self._orientation[2] : z;\n\n    // Setup the group's spatial orientation if no ID is passed.\n    if (typeof id === 'undefined') {\n      // Return the group's spatial orientation if no parameters are passed.\n      if (typeof x === 'number') {\n        self._orientation = [x, y, z];\n      } else {\n        return self._orientation;\n      }\n    }\n\n    // Change the spatial orientation of one or all sounds in group.\n    var ids = self._getSoundIds(id);\n    for (var i=0; i<ids.length; i++) {\n      // Get the sound.\n      var sound = self._soundById(ids[i]);\n\n      if (sound) {\n        if (typeof x === 'number') {\n          sound._orientation = [x, y, z];\n\n          if (sound._node) {\n            // Check if there is a panner setup and create a new one if not.\n            if (!sound._panner) {\n              // Make sure we have a position to setup the node with.\n              if (!sound._pos) {\n                sound._pos = self._pos || [0, 0, -0.5];\n              }\n\n              setupPanner(sound, 'spatial');\n            }\n\n            if (typeof sound._panner.orientationX !== 'undefined') {\n              sound._panner.orientationX.setValueAtTime(x, Howler.ctx.currentTime);\n              sound._panner.orientationY.setValueAtTime(y, Howler.ctx.currentTime);\n              sound._panner.orientationZ.setValueAtTime(z, Howler.ctx.currentTime);\n            } else {\n              sound._panner.setOrientation(x, y, z);\n            }\n          }\n\n          self._emit('orientation', sound._id);\n        } else {\n          return sound._orientation;\n        }\n      }\n    }\n\n    return self;\n  };\n\n  /**\n   * Get/set the panner node's attributes for a sound or group of sounds.\n   * This method can optionall take 0, 1 or 2 arguments.\n   *   pannerAttr() -> Returns the group's values.\n   *   pannerAttr(id) -> Returns the sound id's values.\n   *   pannerAttr(o) -> Set's the values of all sounds in this Howl group.\n   *   pannerAttr(o, id) -> Set's the values of passed sound id.\n   *\n   *   Attributes:\n   *     coneInnerAngle - (360 by default) A parameter for directional audio sources, this is an angle, in degrees,\n   *                      inside of which there will be no volume reduction.\n   *     coneOuterAngle - (360 by default) A parameter for directional audio sources, this is an angle, in degrees,\n   *                      outside of which the volume will be reduced to a constant value of `coneOuterGain`.\n   *     coneOuterGain - (0 by default) A parameter for directional audio sources, this is the gain outside of the\n   *                     `coneOuterAngle`. It is a linear value in the range `[0, 1]`.\n   *     distanceModel - ('inverse' by default) Determines algorithm used to reduce volume as audio moves away from\n   *                     listener. Can be `linear`, `inverse` or `exponential.\n   *     maxDistance - (10000 by default) The maximum distance between source and listener, after which the volume\n   *                   will not be reduced any further.\n   *     refDistance - (1 by default) A reference distance for reducing volume as source moves further from the listener.\n   *                   This is simply a variable of the distance model and has a different effect depending on which model\n   *                   is used and the scale of your coordinates. Generally, volume will be equal to 1 at this distance.\n   *     rolloffFactor - (1 by default) How quickly the volume reduces as source moves from listener. This is simply a\n   *                     variable of the distance model and can be in the range of `[0, 1]` with `linear` and `[0, ∞]`\n   *                     with `inverse` and `exponential`.\n   *     panningModel - ('HRTF' by default) Determines which spatialization algorithm is used to position audio.\n   *                     Can be `HRTF` or `equalpower`.\n   *\n   * @return {Howl/Object} Returns self or current panner attributes.\n   */\n  Howl.prototype.pannerAttr = function() {\n    var self = this;\n    var args = arguments;\n    var o, id, sound;\n\n    // Stop right here if not using Web Audio.\n    if (!self._webAudio) {\n      return self;\n    }\n\n    // Determine the values based on arguments.\n    if (args.length === 0) {\n      // Return the group's panner attribute values.\n      return self._pannerAttr;\n    } else if (args.length === 1) {\n      if (typeof args[0] === 'object') {\n        o = args[0];\n\n        // Set the grou's panner attribute values.\n        if (typeof id === 'undefined') {\n          if (!o.pannerAttr) {\n            o.pannerAttr = {\n              coneInnerAngle: o.coneInnerAngle,\n              coneOuterAngle: o.coneOuterAngle,\n              coneOuterGain: o.coneOuterGain,\n              distanceModel: o.distanceModel,\n              maxDistance: o.maxDistance,\n              refDistance: o.refDistance,\n              rolloffFactor: o.rolloffFactor,\n              panningModel: o.panningModel\n            };\n          }\n\n          self._pannerAttr = {\n            coneInnerAngle: typeof o.pannerAttr.coneInnerAngle !== 'undefined' ? o.pannerAttr.coneInnerAngle : self._coneInnerAngle,\n            coneOuterAngle: typeof o.pannerAttr.coneOuterAngle !== 'undefined' ? o.pannerAttr.coneOuterAngle : self._coneOuterAngle,\n            coneOuterGain: typeof o.pannerAttr.coneOuterGain !== 'undefined' ? o.pannerAttr.coneOuterGain : self._coneOuterGain,\n            distanceModel: typeof o.pannerAttr.distanceModel !== 'undefined' ? o.pannerAttr.distanceModel : self._distanceModel,\n            maxDistance: typeof o.pannerAttr.maxDistance !== 'undefined' ? o.pannerAttr.maxDistance : self._maxDistance,\n            refDistance: typeof o.pannerAttr.refDistance !== 'undefined' ? o.pannerAttr.refDistance : self._refDistance,\n            rolloffFactor: typeof o.pannerAttr.rolloffFactor !== 'undefined' ? o.pannerAttr.rolloffFactor : self._rolloffFactor,\n            panningModel: typeof o.pannerAttr.panningModel !== 'undefined' ? o.pannerAttr.panningModel : self._panningModel\n          };\n        }\n      } else {\n        // Return this sound's panner attribute values.\n        sound = self._soundById(parseInt(args[0], 10));\n        return sound ? sound._pannerAttr : self._pannerAttr;\n      }\n    } else if (args.length === 2) {\n      o = args[0];\n      id = parseInt(args[1], 10);\n    }\n\n    // Update the values of the specified sounds.\n    var ids = self._getSoundIds(id);\n    for (var i=0; i<ids.length; i++) {\n      sound = self._soundById(ids[i]);\n\n      if (sound) {\n        // Merge the new values into the sound.\n        var pa = sound._pannerAttr;\n        pa = {\n          coneInnerAngle: typeof o.coneInnerAngle !== 'undefined' ? o.coneInnerAngle : pa.coneInnerAngle,\n          coneOuterAngle: typeof o.coneOuterAngle !== 'undefined' ? o.coneOuterAngle : pa.coneOuterAngle,\n          coneOuterGain: typeof o.coneOuterGain !== 'undefined' ? o.coneOuterGain : pa.coneOuterGain,\n          distanceModel: typeof o.distanceModel !== 'undefined' ? o.distanceModel : pa.distanceModel,\n          maxDistance: typeof o.maxDistance !== 'undefined' ? o.maxDistance : pa.maxDistance,\n          refDistance: typeof o.refDistance !== 'undefined' ? o.refDistance : pa.refDistance,\n          rolloffFactor: typeof o.rolloffFactor !== 'undefined' ? o.rolloffFactor : pa.rolloffFactor,\n          panningModel: typeof o.panningModel !== 'undefined' ? o.panningModel : pa.panningModel\n        };\n\n        // Update the panner values or create a new panner if none exists.\n        var panner = sound._panner;\n        if (panner) {\n          panner.coneInnerAngle = pa.coneInnerAngle;\n          panner.coneOuterAngle = pa.coneOuterAngle;\n          panner.coneOuterGain = pa.coneOuterGain;\n          panner.distanceModel = pa.distanceModel;\n          panner.maxDistance = pa.maxDistance;\n          panner.refDistance = pa.refDistance;\n          panner.rolloffFactor = pa.rolloffFactor;\n          panner.panningModel = pa.panningModel;\n        } else {\n          // Make sure we have a position to setup the node with.\n          if (!sound._pos) {\n            sound._pos = self._pos || [0, 0, -0.5];\n          }\n\n          // Create a new panner node.\n          setupPanner(sound, 'spatial');\n        }\n      }\n    }\n\n    return self;\n  };\n\n  /** Single Sound Methods **/\n  /***************************************************************************/\n\n  /**\n   * Add new properties to the core Sound init.\n   * @param  {Function} _super Core Sound init method.\n   * @return {Sound}\n   */\n  Sound.prototype.init = (function(_super) {\n    return function() {\n      var self = this;\n      var parent = self._parent;\n\n      // Setup user-defined default properties.\n      self._orientation = parent._orientation;\n      self._stereo = parent._stereo;\n      self._pos = parent._pos;\n      self._pannerAttr = parent._pannerAttr;\n\n      // Complete initilization with howler.js core Sound's init function.\n      _super.call(this);\n\n      // If a stereo or position was specified, set it up.\n      if (self._stereo) {\n        parent.stereo(self._stereo);\n      } else if (self._pos) {\n        parent.pos(self._pos[0], self._pos[1], self._pos[2], self._id);\n      }\n    };\n  })(Sound.prototype.init);\n\n  /**\n   * Override the Sound.reset method to clean up properties from the spatial plugin.\n   * @param  {Function} _super Sound reset method.\n   * @return {Sound}\n   */\n  Sound.prototype.reset = (function(_super) {\n    return function() {\n      var self = this;\n      var parent = self._parent;\n\n      // Reset all spatial plugin properties on this sound.\n      self._orientation = parent._orientation;\n      self._stereo = parent._stereo;\n      self._pos = parent._pos;\n      self._pannerAttr = parent._pannerAttr;\n\n      // If a stereo or position was specified, set it up.\n      if (self._stereo) {\n        parent.stereo(self._stereo);\n      } else if (self._pos) {\n        parent.pos(self._pos[0], self._pos[1], self._pos[2], self._id);\n      } else if (self._panner) {\n        // Disconnect the panner.\n        self._panner.disconnect(0);\n        self._panner = undefined;\n        parent._refreshBuffer(self);\n      }\n\n      // Complete resetting of the sound.\n      return _super.call(this);\n    };\n  })(Sound.prototype.reset);\n\n  /** Helper Methods **/\n  /***************************************************************************/\n\n  /**\n   * Create a new panner node and save it on the sound.\n   * @param  {Sound} sound Specific sound to setup panning on.\n   * @param {String} type Type of panner to create: 'stereo' or 'spatial'.\n   */\n  var setupPanner = function(sound, type) {\n    type = type || 'spatial';\n\n    // Create the new panner node.\n    if (type === 'spatial') {\n      sound._panner = Howler.ctx.createPanner();\n      sound._panner.coneInnerAngle = sound._pannerAttr.coneInnerAngle;\n      sound._panner.coneOuterAngle = sound._pannerAttr.coneOuterAngle;\n      sound._panner.coneOuterGain = sound._pannerAttr.coneOuterGain;\n      sound._panner.distanceModel = sound._pannerAttr.distanceModel;\n      sound._panner.maxDistance = sound._pannerAttr.maxDistance;\n      sound._panner.refDistance = sound._pannerAttr.refDistance;\n      sound._panner.rolloffFactor = sound._pannerAttr.rolloffFactor;\n      sound._panner.panningModel = sound._pannerAttr.panningModel;\n\n      if (typeof sound._panner.positionX !== 'undefined') {\n        sound._panner.positionX.setValueAtTime(sound._pos[0], Howler.ctx.currentTime);\n        sound._panner.positionY.setValueAtTime(sound._pos[1], Howler.ctx.currentTime);\n        sound._panner.positionZ.setValueAtTime(sound._pos[2], Howler.ctx.currentTime);\n      } else {\n        sound._panner.setPosition(sound._pos[0], sound._pos[1], sound._pos[2]);\n      }\n\n      if (typeof sound._panner.orientationX !== 'undefined') {\n        sound._panner.orientationX.setValueAtTime(sound._orientation[0], Howler.ctx.currentTime);\n        sound._panner.orientationY.setValueAtTime(sound._orientation[1], Howler.ctx.currentTime);\n        sound._panner.orientationZ.setValueAtTime(sound._orientation[2], Howler.ctx.currentTime);\n      } else {\n        sound._panner.setOrientation(sound._orientation[0], sound._orientation[1], sound._orientation[2]);\n      }\n    } else {\n      sound._panner = Howler.ctx.createStereoPanner();\n      sound._panner.pan.setValueAtTime(sound._stereo, Howler.ctx.currentTime);\n    }\n\n    sound._panner.connect(sound._node);\n\n    // Update the connections.\n    if (!sound._paused) {\n      sound._parent.pause(sound._id, true).play(sound._id, true);\n    }\n  };\n})();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvaG93bGVyL2Rpc3QvaG93bGVyLmpzLmpzIiwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCO0FBQ2hCO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBO0FBQ0EsZ0JBQWdCLE9BQU87QUFDdkIsZ0JBQWdCLGtCQUFrQjtBQUNsQztBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0Esc0JBQXNCLHNCQUFzQjtBQUM1QztBQUNBO0FBQ0E7O0FBRUE7QUFDQSwwQkFBMEIsY0FBYztBQUN4Qzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBLEtBQUs7O0FBRUw7QUFDQTtBQUNBLGdCQUFnQixTQUFTO0FBQ3pCO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLG9CQUFvQixzQkFBc0I7QUFDMUM7QUFDQTtBQUNBOztBQUVBO0FBQ0Esd0JBQXdCLGNBQWM7QUFDdEM7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0Esb0JBQW9CLHNCQUFzQjtBQUMxQztBQUNBOztBQUVB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YTtBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXOztBQUVYO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLHNCQUFzQixhQUFhO0FBQ25DO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxjQUFjO0FBQ2Q7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxLQUFLOztBQUVMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQixhQUFhO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7O0FBRVQ7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0I7QUFDaEI7QUFDQTtBQUNBO0FBQ0E7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Q0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxrQkFBa0IsY0FBYztBQUNoQztBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCO0FBQ2hCO0FBQ0E7QUFDQSxjQUFjO0FBQ2Q7QUFDQTtBQUNBOztBQUVBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGNBQWMsUUFBUTtBQUN0QixjQUFjLFFBQVE7QUFDdEIsY0FBYyxRQUFRO0FBQ3RCLGNBQWMsUUFBUTtBQUN0QixjQUFjLGVBQWU7QUFDN0I7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTzs7QUFFUDtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0Esa0JBQWtCLGNBQWM7QUFDaEM7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWM7QUFDZDtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWMsUUFBUTtBQUN0QixjQUFjLFFBQVE7QUFDdEIsY0FBYyxRQUFRO0FBQ3RCLGNBQWMsUUFBUTtBQUN0QixjQUFjLGVBQWU7QUFDN0I7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTzs7QUFFUDtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0Esa0JBQWtCLGNBQWM7QUFDaEM7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWM7QUFDZDtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWMsYUFBYTtBQUMzQjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0Esa0JBQWtCLGNBQWM7QUFDaEM7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsY0FBYyxVQUFVO0FBQ3hCLGNBQWM7QUFDZDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0EsY0FBYyxVQUFVO0FBQ3hCLGNBQWM7QUFDZDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBOztBQUVBO0FBQ0E7QUFDQSxjQUFjLE9BQU87QUFDckIsYUFBYSxRQUFRO0FBQ3JCO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9hQV9KU19Qcm9qZWN0Ly4vbm9kZV9tb2R1bGVzL2hvd2xlci9kaXN0L2hvd2xlci5qcz8xZTVjIl0sInNvdXJjZXNDb250ZW50IjpbIi8qIVxuICogIGhvd2xlci5qcyB2Mi4yLjNcbiAqICBob3dsZXJqcy5jb21cbiAqXG4gKiAgKGMpIDIwMTMtMjAyMCwgSmFtZXMgU2ltcHNvbiBvZiBHb2xkRmlyZSBTdHVkaW9zXG4gKiAgZ29sZGZpcmVzdHVkaW9zLmNvbVxuICpcbiAqICBNSVQgTGljZW5zZVxuICovXG5cbihmdW5jdGlvbigpIHtcblxuICAndXNlIHN0cmljdCc7XG5cbiAgLyoqIEdsb2JhbCBNZXRob2RzICoqL1xuICAvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuXG4gIC8qKlxuICAgKiBDcmVhdGUgdGhlIGdsb2JhbCBjb250cm9sbGVyLiBBbGwgY29udGFpbmVkIG1ldGhvZHMgYW5kIHByb3BlcnRpZXMgYXBwbHlcbiAgICogdG8gYWxsIHNvdW5kcyB0aGF0IGFyZSBjdXJyZW50bHkgcGxheWluZyBvciB3aWxsIGJlIGluIHRoZSBmdXR1cmUuXG4gICAqL1xuICB2YXIgSG93bGVyR2xvYmFsID0gZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5pbml0KCk7XG4gIH07XG4gIEhvd2xlckdsb2JhbC5wcm90b3R5cGUgPSB7XG4gICAgLyoqXG4gICAgICogSW5pdGlhbGl6ZSB0aGUgZ2xvYmFsIEhvd2xlciBvYmplY3QuXG4gICAgICogQHJldHVybiB7SG93bGVyfVxuICAgICAqL1xuICAgIGluaXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzIHx8IEhvd2xlcjtcblxuICAgICAgLy8gQ3JlYXRlIGEgZ2xvYmFsIElEIGNvdW50ZXIuXG4gICAgICBzZWxmLl9jb3VudGVyID0gMTAwMDtcblxuICAgICAgLy8gUG9vbCBvZiB1bmxvY2tlZCBIVE1MNSBBdWRpbyBvYmplY3RzLlxuICAgICAgc2VsZi5faHRtbDVBdWRpb1Bvb2wgPSBbXTtcbiAgICAgIHNlbGYuaHRtbDVQb29sU2l6ZSA9IDEwO1xuXG4gICAgICAvLyBJbnRlcm5hbCBwcm9wZXJ0aWVzLlxuICAgICAgc2VsZi5fY29kZWNzID0ge307XG4gICAgICBzZWxmLl9ob3dscyA9IFtdO1xuICAgICAgc2VsZi5fbXV0ZWQgPSBmYWxzZTtcbiAgICAgIHNlbGYuX3ZvbHVtZSA9IDE7XG4gICAgICBzZWxmLl9jYW5QbGF5RXZlbnQgPSAnY2FucGxheXRocm91Z2gnO1xuICAgICAgc2VsZi5fbmF2aWdhdG9yID0gKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmIHdpbmRvdy5uYXZpZ2F0b3IpID8gd2luZG93Lm5hdmlnYXRvciA6IG51bGw7XG5cbiAgICAgIC8vIFB1YmxpYyBwcm9wZXJ0aWVzLlxuICAgICAgc2VsZi5tYXN0ZXJHYWluID0gbnVsbDtcbiAgICAgIHNlbGYubm9BdWRpbyA9IGZhbHNlO1xuICAgICAgc2VsZi51c2luZ1dlYkF1ZGlvID0gdHJ1ZTtcbiAgICAgIHNlbGYuYXV0b1N1c3BlbmQgPSB0cnVlO1xuICAgICAgc2VsZi5jdHggPSBudWxsO1xuXG4gICAgICAvLyBTZXQgdG8gZmFsc2UgdG8gZGlzYWJsZSB0aGUgYXV0byBhdWRpbyB1bmxvY2tlci5cbiAgICAgIHNlbGYuYXV0b1VubG9jayA9IHRydWU7XG5cbiAgICAgIC8vIFNldHVwIHRoZSB2YXJpb3VzIHN0YXRlIHZhbHVlcyBmb3IgZ2xvYmFsIHRyYWNraW5nLlxuICAgICAgc2VsZi5fc2V0dXAoKTtcblxuICAgICAgcmV0dXJuIHNlbGY7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEdldC9zZXQgdGhlIGdsb2JhbCB2b2x1bWUgZm9yIGFsbCBzb3VuZHMuXG4gICAgICogQHBhcmFtICB7RmxvYXR9IHZvbCBWb2x1bWUgZnJvbSAwLjAgdG8gMS4wLlxuICAgICAqIEByZXR1cm4ge0hvd2xlci9GbG9hdH0gICAgIFJldHVybnMgc2VsZiBvciBjdXJyZW50IHZvbHVtZS5cbiAgICAgKi9cbiAgICB2b2x1bWU6IGZ1bmN0aW9uKHZvbCkge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzIHx8IEhvd2xlcjtcbiAgICAgIHZvbCA9IHBhcnNlRmxvYXQodm9sKTtcblxuICAgICAgLy8gSWYgd2UgZG9uJ3QgaGF2ZSBhbiBBdWRpb0NvbnRleHQgY3JlYXRlZCB5ZXQsIHJ1biB0aGUgc2V0dXAuXG4gICAgICBpZiAoIXNlbGYuY3R4KSB7XG4gICAgICAgIHNldHVwQXVkaW9Db250ZXh0KCk7XG4gICAgICB9XG5cbiAgICAgIGlmICh0eXBlb2Ygdm9sICE9PSAndW5kZWZpbmVkJyAmJiB2b2wgPj0gMCAmJiB2b2wgPD0gMSkge1xuICAgICAgICBzZWxmLl92b2x1bWUgPSB2b2w7XG5cbiAgICAgICAgLy8gRG9uJ3QgdXBkYXRlIGFueSBvZiB0aGUgbm9kZXMgaWYgd2UgYXJlIG11dGVkLlxuICAgICAgICBpZiAoc2VsZi5fbXV0ZWQpIHtcbiAgICAgICAgICByZXR1cm4gc2VsZjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFdoZW4gdXNpbmcgV2ViIEF1ZGlvLCB3ZSBqdXN0IG5lZWQgdG8gYWRqdXN0IHRoZSBtYXN0ZXIgZ2Fpbi5cbiAgICAgICAgaWYgKHNlbGYudXNpbmdXZWJBdWRpbykge1xuICAgICAgICAgIHNlbGYubWFzdGVyR2Fpbi5nYWluLnNldFZhbHVlQXRUaW1lKHZvbCwgSG93bGVyLmN0eC5jdXJyZW50VGltZSk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBMb29wIHRocm91Z2ggYW5kIGNoYW5nZSB2b2x1bWUgZm9yIGFsbCBIVE1MNSBhdWRpbyBub2Rlcy5cbiAgICAgICAgZm9yICh2YXIgaT0wOyBpPHNlbGYuX2hvd2xzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgaWYgKCFzZWxmLl9ob3dsc1tpXS5fd2ViQXVkaW8pIHtcbiAgICAgICAgICAgIC8vIEdldCBhbGwgb2YgdGhlIHNvdW5kcyBpbiB0aGlzIEhvd2wgZ3JvdXAuXG4gICAgICAgICAgICB2YXIgaWRzID0gc2VsZi5faG93bHNbaV0uX2dldFNvdW5kSWRzKCk7XG5cbiAgICAgICAgICAgIC8vIExvb3AgdGhyb3VnaCBhbGwgc291bmRzIGFuZCBjaGFuZ2UgdGhlIHZvbHVtZXMuXG4gICAgICAgICAgICBmb3IgKHZhciBqPTA7IGo8aWRzLmxlbmd0aDsgaisrKSB7XG4gICAgICAgICAgICAgIHZhciBzb3VuZCA9IHNlbGYuX2hvd2xzW2ldLl9zb3VuZEJ5SWQoaWRzW2pdKTtcblxuICAgICAgICAgICAgICBpZiAoc291bmQgJiYgc291bmQuX25vZGUpIHtcbiAgICAgICAgICAgICAgICBzb3VuZC5fbm9kZS52b2x1bWUgPSBzb3VuZC5fdm9sdW1lICogdm9sO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHNlbGY7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBzZWxmLl92b2x1bWU7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEhhbmRsZSBtdXRpbmcgYW5kIHVubXV0aW5nIGdsb2JhbGx5LlxuICAgICAqIEBwYXJhbSAge0Jvb2xlYW59IG11dGVkIElzIG11dGVkIG9yIG5vdC5cbiAgICAgKi9cbiAgICBtdXRlOiBmdW5jdGlvbihtdXRlZCkge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzIHx8IEhvd2xlcjtcblxuICAgICAgLy8gSWYgd2UgZG9uJ3QgaGF2ZSBhbiBBdWRpb0NvbnRleHQgY3JlYXRlZCB5ZXQsIHJ1biB0aGUgc2V0dXAuXG4gICAgICBpZiAoIXNlbGYuY3R4KSB7XG4gICAgICAgIHNldHVwQXVkaW9Db250ZXh0KCk7XG4gICAgICB9XG5cbiAgICAgIHNlbGYuX211dGVkID0gbXV0ZWQ7XG5cbiAgICAgIC8vIFdpdGggV2ViIEF1ZGlvLCB3ZSBqdXN0IG5lZWQgdG8gbXV0ZSB0aGUgbWFzdGVyIGdhaW4uXG4gICAgICBpZiAoc2VsZi51c2luZ1dlYkF1ZGlvKSB7XG4gICAgICAgIHNlbGYubWFzdGVyR2Fpbi5nYWluLnNldFZhbHVlQXRUaW1lKG11dGVkID8gMCA6IHNlbGYuX3ZvbHVtZSwgSG93bGVyLmN0eC5jdXJyZW50VGltZSk7XG4gICAgICB9XG5cbiAgICAgIC8vIExvb3AgdGhyb3VnaCBhbmQgbXV0ZSBhbGwgSFRNTDUgQXVkaW8gbm9kZXMuXG4gICAgICBmb3IgKHZhciBpPTA7IGk8c2VsZi5faG93bHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgaWYgKCFzZWxmLl9ob3dsc1tpXS5fd2ViQXVkaW8pIHtcbiAgICAgICAgICAvLyBHZXQgYWxsIG9mIHRoZSBzb3VuZHMgaW4gdGhpcyBIb3dsIGdyb3VwLlxuICAgICAgICAgIHZhciBpZHMgPSBzZWxmLl9ob3dsc1tpXS5fZ2V0U291bmRJZHMoKTtcblxuICAgICAgICAgIC8vIExvb3AgdGhyb3VnaCBhbGwgc291bmRzIGFuZCBtYXJrIHRoZSBhdWRpbyBub2RlIGFzIG11dGVkLlxuICAgICAgICAgIGZvciAodmFyIGo9MDsgajxpZHMubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICAgIHZhciBzb3VuZCA9IHNlbGYuX2hvd2xzW2ldLl9zb3VuZEJ5SWQoaWRzW2pdKTtcblxuICAgICAgICAgICAgaWYgKHNvdW5kICYmIHNvdW5kLl9ub2RlKSB7XG4gICAgICAgICAgICAgIHNvdW5kLl9ub2RlLm11dGVkID0gKG11dGVkKSA/IHRydWUgOiBzb3VuZC5fbXV0ZWQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBzZWxmO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBIYW5kbGUgc3RvcHBpbmcgYWxsIHNvdW5kcyBnbG9iYWxseS5cbiAgICAgKi9cbiAgICBzdG9wOiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcyB8fCBIb3dsZXI7XG5cbiAgICAgIC8vIExvb3AgdGhyb3VnaCBhbGwgSG93bHMgYW5kIHN0b3AgdGhlbS5cbiAgICAgIGZvciAodmFyIGk9MDsgaTxzZWxmLl9ob3dscy5sZW5ndGg7IGkrKykge1xuICAgICAgICBzZWxmLl9ob3dsc1tpXS5zdG9wKCk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBzZWxmO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBVbmxvYWQgYW5kIGRlc3Ryb3kgYWxsIGN1cnJlbnRseSBsb2FkZWQgSG93bCBvYmplY3RzLlxuICAgICAqIEByZXR1cm4ge0hvd2xlcn1cbiAgICAgKi9cbiAgICB1bmxvYWQ6IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzIHx8IEhvd2xlcjtcblxuICAgICAgZm9yICh2YXIgaT1zZWxmLl9ob3dscy5sZW5ndGgtMTsgaT49MDsgaS0tKSB7XG4gICAgICAgIHNlbGYuX2hvd2xzW2ldLnVubG9hZCgpO1xuICAgICAgfVxuXG4gICAgICAvLyBDcmVhdGUgYSBuZXcgQXVkaW9Db250ZXh0IHRvIG1ha2Ugc3VyZSBpdCBpcyBmdWxseSByZXNldC5cbiAgICAgIGlmIChzZWxmLnVzaW5nV2ViQXVkaW8gJiYgc2VsZi5jdHggJiYgdHlwZW9mIHNlbGYuY3R4LmNsb3NlICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICBzZWxmLmN0eC5jbG9zZSgpO1xuICAgICAgICBzZWxmLmN0eCA9IG51bGw7XG4gICAgICAgIHNldHVwQXVkaW9Db250ZXh0KCk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBzZWxmO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBDaGVjayBmb3IgY29kZWMgc3VwcG9ydCBvZiBzcGVjaWZpYyBleHRlbnNpb24uXG4gICAgICogQHBhcmFtICB7U3RyaW5nfSBleHQgQXVkaW8gZmlsZSBleHRlbnRpb24uXG4gICAgICogQHJldHVybiB7Qm9vbGVhbn1cbiAgICAgKi9cbiAgICBjb2RlY3M6IGZ1bmN0aW9uKGV4dCkge1xuICAgICAgcmV0dXJuICh0aGlzIHx8IEhvd2xlcikuX2NvZGVjc1tleHQucmVwbGFjZSgvXngtLywgJycpXTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogU2V0dXAgdmFyaW91cyBzdGF0ZSB2YWx1ZXMgZm9yIGdsb2JhbCB0cmFja2luZy5cbiAgICAgKiBAcmV0dXJuIHtIb3dsZXJ9XG4gICAgICovXG4gICAgX3NldHVwOiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcyB8fCBIb3dsZXI7XG5cbiAgICAgIC8vIEtlZXBzIHRyYWNrIG9mIHRoZSBzdXNwZW5kL3Jlc3VtZSBzdGF0ZSBvZiB0aGUgQXVkaW9Db250ZXh0LlxuICAgICAgc2VsZi5zdGF0ZSA9IHNlbGYuY3R4ID8gc2VsZi5jdHguc3RhdGUgfHwgJ3N1c3BlbmRlZCcgOiAnc3VzcGVuZGVkJztcblxuICAgICAgLy8gQXV0b21hdGljYWxseSBiZWdpbiB0aGUgMzAtc2Vjb25kIHN1c3BlbmQgcHJvY2Vzc1xuICAgICAgc2VsZi5fYXV0b1N1c3BlbmQoKTtcblxuICAgICAgLy8gQ2hlY2sgaWYgYXVkaW8gaXMgYXZhaWxhYmxlLlxuICAgICAgaWYgKCFzZWxmLnVzaW5nV2ViQXVkaW8pIHtcbiAgICAgICAgLy8gTm8gYXVkaW8gaXMgYXZhaWxhYmxlIG9uIHRoaXMgc3lzdGVtIGlmIG5vQXVkaW8gaXMgc2V0IHRvIHRydWUuXG4gICAgICAgIGlmICh0eXBlb2YgQXVkaW8gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHZhciB0ZXN0ID0gbmV3IEF1ZGlvKCk7XG5cbiAgICAgICAgICAgIC8vIENoZWNrIGlmIHRoZSBjYW5wbGF5dGhyb3VnaCBldmVudCBpcyBhdmFpbGFibGUuXG4gICAgICAgICAgICBpZiAodHlwZW9mIHRlc3Qub25jYW5wbGF5dGhyb3VnaCA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgc2VsZi5fY2FuUGxheUV2ZW50ID0gJ2NhbnBsYXknO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gY2F0Y2goZSkge1xuICAgICAgICAgICAgc2VsZi5ub0F1ZGlvID0gdHJ1ZTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgc2VsZi5ub0F1ZGlvID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBUZXN0IHRvIG1ha2Ugc3VyZSBhdWRpbyBpc24ndCBkaXNhYmxlZCBpbiBJbnRlcm5ldCBFeHBsb3Jlci5cbiAgICAgIHRyeSB7XG4gICAgICAgIHZhciB0ZXN0ID0gbmV3IEF1ZGlvKCk7XG4gICAgICAgIGlmICh0ZXN0Lm11dGVkKSB7XG4gICAgICAgICAgc2VsZi5ub0F1ZGlvID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAoZSkge31cblxuICAgICAgLy8gQ2hlY2sgZm9yIHN1cHBvcnRlZCBjb2RlY3MuXG4gICAgICBpZiAoIXNlbGYubm9BdWRpbykge1xuICAgICAgICBzZWxmLl9zZXR1cENvZGVjcygpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gc2VsZjtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogQ2hlY2sgZm9yIGJyb3dzZXIgc3VwcG9ydCBmb3IgdmFyaW91cyBjb2RlY3MgYW5kIGNhY2hlIHRoZSByZXN1bHRzLlxuICAgICAqIEByZXR1cm4ge0hvd2xlcn1cbiAgICAgKi9cbiAgICBfc2V0dXBDb2RlY3M6IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzIHx8IEhvd2xlcjtcbiAgICAgIHZhciBhdWRpb1Rlc3QgPSBudWxsO1xuXG4gICAgICAvLyBNdXN0IHdyYXAgaW4gYSB0cnkvY2F0Y2ggYmVjYXVzZSBJRTExIGluIHNlcnZlciBtb2RlIHRocm93cyBhbiBlcnJvci5cbiAgICAgIHRyeSB7XG4gICAgICAgIGF1ZGlvVGVzdCA9ICh0eXBlb2YgQXVkaW8gIT09ICd1bmRlZmluZWQnKSA/IG5ldyBBdWRpbygpIDogbnVsbDtcbiAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICByZXR1cm4gc2VsZjtcbiAgICAgIH1cblxuICAgICAgaWYgKCFhdWRpb1Rlc3QgfHwgdHlwZW9mIGF1ZGlvVGVzdC5jYW5QbGF5VHlwZSAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICByZXR1cm4gc2VsZjtcbiAgICAgIH1cblxuICAgICAgdmFyIG1wZWdUZXN0ID0gYXVkaW9UZXN0LmNhblBsYXlUeXBlKCdhdWRpby9tcGVnOycpLnJlcGxhY2UoL15ubyQvLCAnJyk7XG5cbiAgICAgIC8vIE9wZXJhIHZlcnNpb24gPDMzIGhhcyBtaXhlZCBNUDMgc3VwcG9ydCwgc28gd2UgbmVlZCB0byBjaGVjayBmb3IgYW5kIGJsb2NrIGl0LlxuICAgICAgdmFyIHVhID0gc2VsZi5fbmF2aWdhdG9yID8gc2VsZi5fbmF2aWdhdG9yLnVzZXJBZ2VudCA6ICcnO1xuICAgICAgdmFyIGNoZWNrT3BlcmEgPSB1YS5tYXRjaCgvT1BSXFwvKFswLTZdLikvZyk7XG4gICAgICB2YXIgaXNPbGRPcGVyYSA9IChjaGVja09wZXJhICYmIHBhcnNlSW50KGNoZWNrT3BlcmFbMF0uc3BsaXQoJy8nKVsxXSwgMTApIDwgMzMpO1xuICAgICAgdmFyIGNoZWNrU2FmYXJpID0gdWEuaW5kZXhPZignU2FmYXJpJykgIT09IC0xICYmIHVhLmluZGV4T2YoJ0Nocm9tZScpID09PSAtMTtcbiAgICAgIHZhciBzYWZhcmlWZXJzaW9uID0gdWEubWF0Y2goL1ZlcnNpb25cXC8oLio/KSAvKTtcbiAgICAgIHZhciBpc09sZFNhZmFyaSA9IChjaGVja1NhZmFyaSAmJiBzYWZhcmlWZXJzaW9uICYmIHBhcnNlSW50KHNhZmFyaVZlcnNpb25bMV0sIDEwKSA8IDE1KTtcblxuICAgICAgc2VsZi5fY29kZWNzID0ge1xuICAgICAgICBtcDM6ICEhKCFpc09sZE9wZXJhICYmIChtcGVnVGVzdCB8fCBhdWRpb1Rlc3QuY2FuUGxheVR5cGUoJ2F1ZGlvL21wMzsnKS5yZXBsYWNlKC9ebm8kLywgJycpKSksXG4gICAgICAgIG1wZWc6ICEhbXBlZ1Rlc3QsXG4gICAgICAgIG9wdXM6ICEhYXVkaW9UZXN0LmNhblBsYXlUeXBlKCdhdWRpby9vZ2c7IGNvZGVjcz1cIm9wdXNcIicpLnJlcGxhY2UoL15ubyQvLCAnJyksXG4gICAgICAgIG9nZzogISFhdWRpb1Rlc3QuY2FuUGxheVR5cGUoJ2F1ZGlvL29nZzsgY29kZWNzPVwidm9yYmlzXCInKS5yZXBsYWNlKC9ebm8kLywgJycpLFxuICAgICAgICBvZ2E6ICEhYXVkaW9UZXN0LmNhblBsYXlUeXBlKCdhdWRpby9vZ2c7IGNvZGVjcz1cInZvcmJpc1wiJykucmVwbGFjZSgvXm5vJC8sICcnKSxcbiAgICAgICAgd2F2OiAhIShhdWRpb1Rlc3QuY2FuUGxheVR5cGUoJ2F1ZGlvL3dhdjsgY29kZWNzPVwiMVwiJykgfHwgYXVkaW9UZXN0LmNhblBsYXlUeXBlKCdhdWRpby93YXYnKSkucmVwbGFjZSgvXm5vJC8sICcnKSxcbiAgICAgICAgYWFjOiAhIWF1ZGlvVGVzdC5jYW5QbGF5VHlwZSgnYXVkaW8vYWFjOycpLnJlcGxhY2UoL15ubyQvLCAnJyksXG4gICAgICAgIGNhZjogISFhdWRpb1Rlc3QuY2FuUGxheVR5cGUoJ2F1ZGlvL3gtY2FmOycpLnJlcGxhY2UoL15ubyQvLCAnJyksXG4gICAgICAgIG00YTogISEoYXVkaW9UZXN0LmNhblBsYXlUeXBlKCdhdWRpby94LW00YTsnKSB8fCBhdWRpb1Rlc3QuY2FuUGxheVR5cGUoJ2F1ZGlvL200YTsnKSB8fCBhdWRpb1Rlc3QuY2FuUGxheVR5cGUoJ2F1ZGlvL2FhYzsnKSkucmVwbGFjZSgvXm5vJC8sICcnKSxcbiAgICAgICAgbTRiOiAhIShhdWRpb1Rlc3QuY2FuUGxheVR5cGUoJ2F1ZGlvL3gtbTRiOycpIHx8IGF1ZGlvVGVzdC5jYW5QbGF5VHlwZSgnYXVkaW8vbTRiOycpIHx8IGF1ZGlvVGVzdC5jYW5QbGF5VHlwZSgnYXVkaW8vYWFjOycpKS5yZXBsYWNlKC9ebm8kLywgJycpLFxuICAgICAgICBtcDQ6ICEhKGF1ZGlvVGVzdC5jYW5QbGF5VHlwZSgnYXVkaW8veC1tcDQ7JykgfHwgYXVkaW9UZXN0LmNhblBsYXlUeXBlKCdhdWRpby9tcDQ7JykgfHwgYXVkaW9UZXN0LmNhblBsYXlUeXBlKCdhdWRpby9hYWM7JykpLnJlcGxhY2UoL15ubyQvLCAnJyksXG4gICAgICAgIHdlYmE6ICEhKCFpc09sZFNhZmFyaSAmJiBhdWRpb1Rlc3QuY2FuUGxheVR5cGUoJ2F1ZGlvL3dlYm07IGNvZGVjcz1cInZvcmJpc1wiJykucmVwbGFjZSgvXm5vJC8sICcnKSksXG4gICAgICAgIHdlYm06ICEhKCFpc09sZFNhZmFyaSAmJiBhdWRpb1Rlc3QuY2FuUGxheVR5cGUoJ2F1ZGlvL3dlYm07IGNvZGVjcz1cInZvcmJpc1wiJykucmVwbGFjZSgvXm5vJC8sICcnKSksXG4gICAgICAgIGRvbGJ5OiAhIWF1ZGlvVGVzdC5jYW5QbGF5VHlwZSgnYXVkaW8vbXA0OyBjb2RlY3M9XCJlYy0zXCInKS5yZXBsYWNlKC9ebm8kLywgJycpLFxuICAgICAgICBmbGFjOiAhIShhdWRpb1Rlc3QuY2FuUGxheVR5cGUoJ2F1ZGlvL3gtZmxhYzsnKSB8fCBhdWRpb1Rlc3QuY2FuUGxheVR5cGUoJ2F1ZGlvL2ZsYWM7JykpLnJlcGxhY2UoL15ubyQvLCAnJylcbiAgICAgIH07XG5cbiAgICAgIHJldHVybiBzZWxmO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBTb21lIGJyb3dzZXJzL2RldmljZXMgd2lsbCBvbmx5IGFsbG93IGF1ZGlvIHRvIGJlIHBsYXllZCBhZnRlciBhIHVzZXIgaW50ZXJhY3Rpb24uXG4gICAgICogQXR0ZW1wdCB0byBhdXRvbWF0aWNhbGx5IHVubG9jayBhdWRpbyBvbiB0aGUgZmlyc3QgdXNlciBpbnRlcmFjdGlvbi5cbiAgICAgKiBDb25jZXB0IGZyb206IGh0dHA6Ly9wYXVsYmFrYXVzLmNvbS90dXRvcmlhbHMvaHRtbDUvd2ViLWF1ZGlvLW9uLWlvcy9cbiAgICAgKiBAcmV0dXJuIHtIb3dsZXJ9XG4gICAgICovXG4gICAgX3VubG9ja0F1ZGlvOiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcyB8fCBIb3dsZXI7XG5cbiAgICAgIC8vIE9ubHkgcnVuIHRoaXMgaWYgV2ViIEF1ZGlvIGlzIHN1cHBvcnRlZCBhbmQgaXQgaGFzbid0IGFscmVhZHkgYmVlbiB1bmxvY2tlZC5cbiAgICAgIGlmIChzZWxmLl9hdWRpb1VubG9ja2VkIHx8ICFzZWxmLmN0eCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHNlbGYuX2F1ZGlvVW5sb2NrZWQgPSBmYWxzZTtcbiAgICAgIHNlbGYuYXV0b1VubG9jayA9IGZhbHNlO1xuXG4gICAgICAvLyBTb21lIG1vYmlsZSBkZXZpY2VzL3BsYXRmb3JtcyBoYXZlIGRpc3RvcnRpb24gaXNzdWVzIHdoZW4gb3BlbmluZy9jbG9zaW5nIHRhYnMgYW5kL29yIHdlYiB2aWV3cy5cbiAgICAgIC8vIEJ1Z3MgaW4gdGhlIGJyb3dzZXIgKGVzcGVjaWFsbHkgTW9iaWxlIFNhZmFyaSkgY2FuIGNhdXNlIHRoZSBzYW1wbGVSYXRlIHRvIGNoYW5nZSBmcm9tIDQ0MTAwIHRvIDQ4MDAwLlxuICAgICAgLy8gQnkgY2FsbGluZyBIb3dsZXIudW5sb2FkKCksIHdlIGNyZWF0ZSBhIG5ldyBBdWRpb0NvbnRleHQgd2l0aCB0aGUgY29ycmVjdCBzYW1wbGVSYXRlLlxuICAgICAgaWYgKCFzZWxmLl9tb2JpbGVVbmxvYWRlZCAmJiBzZWxmLmN0eC5zYW1wbGVSYXRlICE9PSA0NDEwMCkge1xuICAgICAgICBzZWxmLl9tb2JpbGVVbmxvYWRlZCA9IHRydWU7XG4gICAgICAgIHNlbGYudW5sb2FkKCk7XG4gICAgICB9XG5cbiAgICAgIC8vIFNjcmF0Y2ggYnVmZmVyIGZvciBlbmFibGluZyBpT1MgdG8gZGlzcG9zZSBvZiB3ZWIgYXVkaW8gYnVmZmVycyBjb3JyZWN0bHksIGFzIHBlcjpcbiAgICAgIC8vIGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvMjQxMTk2ODRcbiAgICAgIHNlbGYuX3NjcmF0Y2hCdWZmZXIgPSBzZWxmLmN0eC5jcmVhdGVCdWZmZXIoMSwgMSwgMjIwNTApO1xuXG4gICAgICAvLyBDYWxsIHRoaXMgbWV0aG9kIG9uIHRvdWNoIHN0YXJ0IHRvIGNyZWF0ZSBhbmQgcGxheSBhIGJ1ZmZlcixcbiAgICAgIC8vIHRoZW4gY2hlY2sgaWYgdGhlIGF1ZGlvIGFjdHVhbGx5IHBsYXllZCB0byBkZXRlcm1pbmUgaWZcbiAgICAgIC8vIGF1ZGlvIGhhcyBub3cgYmVlbiB1bmxvY2tlZCBvbiBpT1MsIEFuZHJvaWQsIGV0Yy5cbiAgICAgIHZhciB1bmxvY2sgPSBmdW5jdGlvbihlKSB7XG4gICAgICAgIC8vIENyZWF0ZSBhIHBvb2wgb2YgdW5sb2NrZWQgSFRNTDUgQXVkaW8gb2JqZWN0cyB0aGF0IGNhblxuICAgICAgICAvLyBiZSB1c2VkIGZvciBwbGF5aW5nIHNvdW5kcyB3aXRob3V0IHVzZXIgaW50ZXJhY3Rpb24uIEhUTUw1XG4gICAgICAgIC8vIEF1ZGlvIG9iamVjdHMgbXVzdCBiZSBpbmRpdmlkdWFsbHkgdW5sb2NrZWQsIGFzIG9wcG9zZWRcbiAgICAgICAgLy8gdG8gdGhlIFdlYkF1ZGlvIEFQSSB3aGljaCBvbmx5IG5lZWRzIGEgc2luZ2xlIGFjdGl2YXRpb24uXG4gICAgICAgIC8vIFRoaXMgbXVzdCBvY2N1ciBiZWZvcmUgV2ViQXVkaW8gc2V0dXAgb3IgdGhlIHNvdXJjZS5vbmVuZGVkXG4gICAgICAgIC8vIGV2ZW50IHdpbGwgbm90IGZpcmUuXG4gICAgICAgIHdoaWxlIChzZWxmLl9odG1sNUF1ZGlvUG9vbC5sZW5ndGggPCBzZWxmLmh0bWw1UG9vbFNpemUpIHtcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgdmFyIGF1ZGlvTm9kZSA9IG5ldyBBdWRpbygpO1xuXG4gICAgICAgICAgICAvLyBNYXJrIHRoaXMgQXVkaW8gb2JqZWN0IGFzIHVubG9ja2VkIHRvIGVuc3VyZSBpdCBjYW4gZ2V0IHJldHVybmVkXG4gICAgICAgICAgICAvLyB0byB0aGUgdW5sb2NrZWQgcG9vbCB3aGVuIHJlbGVhc2VkLlxuICAgICAgICAgICAgYXVkaW9Ob2RlLl91bmxvY2tlZCA9IHRydWU7XG5cbiAgICAgICAgICAgIC8vIEFkZCB0aGUgYXVkaW8gbm9kZSB0byB0aGUgcG9vbC5cbiAgICAgICAgICAgIHNlbGYuX3JlbGVhc2VIdG1sNUF1ZGlvKGF1ZGlvTm9kZSk7XG4gICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgc2VsZi5ub0F1ZGlvID0gdHJ1ZTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIExvb3AgdGhyb3VnaCBhbnkgYXNzaWduZWQgYXVkaW8gbm9kZXMgYW5kIHVubG9jayB0aGVtLlxuICAgICAgICBmb3IgKHZhciBpPTA7IGk8c2VsZi5faG93bHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICBpZiAoIXNlbGYuX2hvd2xzW2ldLl93ZWJBdWRpbykge1xuICAgICAgICAgICAgLy8gR2V0IGFsbCBvZiB0aGUgc291bmRzIGluIHRoaXMgSG93bCBncm91cC5cbiAgICAgICAgICAgIHZhciBpZHMgPSBzZWxmLl9ob3dsc1tpXS5fZ2V0U291bmRJZHMoKTtcblxuICAgICAgICAgICAgLy8gTG9vcCB0aHJvdWdoIGFsbCBzb3VuZHMgYW5kIHVubG9jayB0aGUgYXVkaW8gbm9kZXMuXG4gICAgICAgICAgICBmb3IgKHZhciBqPTA7IGo8aWRzLmxlbmd0aDsgaisrKSB7XG4gICAgICAgICAgICAgIHZhciBzb3VuZCA9IHNlbGYuX2hvd2xzW2ldLl9zb3VuZEJ5SWQoaWRzW2pdKTtcblxuICAgICAgICAgICAgICBpZiAoc291bmQgJiYgc291bmQuX25vZGUgJiYgIXNvdW5kLl9ub2RlLl91bmxvY2tlZCkge1xuICAgICAgICAgICAgICAgIHNvdW5kLl9ub2RlLl91bmxvY2tlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgc291bmQuX25vZGUubG9hZCgpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gRml4IEFuZHJvaWQgY2FuIG5vdCBwbGF5IGluIHN1c3BlbmQgc3RhdGUuXG4gICAgICAgIHNlbGYuX2F1dG9SZXN1bWUoKTtcblxuICAgICAgICAvLyBDcmVhdGUgYW4gZW1wdHkgYnVmZmVyLlxuICAgICAgICB2YXIgc291cmNlID0gc2VsZi5jdHguY3JlYXRlQnVmZmVyU291cmNlKCk7XG4gICAgICAgIHNvdXJjZS5idWZmZXIgPSBzZWxmLl9zY3JhdGNoQnVmZmVyO1xuICAgICAgICBzb3VyY2UuY29ubmVjdChzZWxmLmN0eC5kZXN0aW5hdGlvbik7XG5cbiAgICAgICAgLy8gUGxheSB0aGUgZW1wdHkgYnVmZmVyLlxuICAgICAgICBpZiAodHlwZW9mIHNvdXJjZS5zdGFydCA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICBzb3VyY2Uubm90ZU9uKDApO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHNvdXJjZS5zdGFydCgwKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIENhbGxpbmcgcmVzdW1lKCkgb24gYSBzdGFjayBpbml0aWF0ZWQgYnkgdXNlciBnZXN0dXJlIGlzIHdoYXQgYWN0dWFsbHkgdW5sb2NrcyB0aGUgYXVkaW8gb24gQW5kcm9pZCBDaHJvbWUgPj0gNTUuXG4gICAgICAgIGlmICh0eXBlb2Ygc2VsZi5jdHgucmVzdW1lID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgc2VsZi5jdHgucmVzdW1lKCk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBTZXR1cCBhIHRpbWVvdXQgdG8gY2hlY2sgdGhhdCB3ZSBhcmUgdW5sb2NrZWQgb24gdGhlIG5leHQgZXZlbnQgbG9vcC5cbiAgICAgICAgc291cmNlLm9uZW5kZWQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICBzb3VyY2UuZGlzY29ubmVjdCgwKTtcblxuICAgICAgICAgIC8vIFVwZGF0ZSB0aGUgdW5sb2NrZWQgc3RhdGUgYW5kIHByZXZlbnQgdGhpcyBjaGVjayBmcm9tIGhhcHBlbmluZyBhZ2Fpbi5cbiAgICAgICAgICBzZWxmLl9hdWRpb1VubG9ja2VkID0gdHJ1ZTtcblxuICAgICAgICAgIC8vIFJlbW92ZSB0aGUgdG91Y2ggc3RhcnQgbGlzdGVuZXIuXG4gICAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigndG91Y2hzdGFydCcsIHVubG9jaywgdHJ1ZSk7XG4gICAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigndG91Y2hlbmQnLCB1bmxvY2ssIHRydWUpO1xuICAgICAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdW5sb2NrLCB0cnVlKTtcbiAgICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdW5sb2NrLCB0cnVlKTtcblxuICAgICAgICAgIC8vIExldCBhbGwgc291bmRzIGtub3cgdGhhdCBhdWRpbyBoYXMgYmVlbiB1bmxvY2tlZC5cbiAgICAgICAgICBmb3IgKHZhciBpPTA7IGk8c2VsZi5faG93bHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHNlbGYuX2hvd2xzW2ldLl9lbWl0KCd1bmxvY2snKTtcbiAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICB9O1xuXG4gICAgICAvLyBTZXR1cCBhIHRvdWNoIHN0YXJ0IGxpc3RlbmVyIHRvIGF0dGVtcHQgYW4gdW5sb2NrIGluLlxuICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hzdGFydCcsIHVubG9jaywgdHJ1ZSk7XG4gICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCd0b3VjaGVuZCcsIHVubG9jaywgdHJ1ZSk7XG4gICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHVubG9jaywgdHJ1ZSk7XG4gICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdW5sb2NrLCB0cnVlKTtcblxuICAgICAgcmV0dXJuIHNlbGY7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEdldCBhbiB1bmxvY2tlZCBIVE1MNSBBdWRpbyBvYmplY3QgZnJvbSB0aGUgcG9vbC4gSWYgbm9uZSBhcmUgbGVmdCxcbiAgICAgKiByZXR1cm4gYSBuZXcgQXVkaW8gb2JqZWN0IGFuZCB0aHJvdyBhIHdhcm5pbmcuXG4gICAgICogQHJldHVybiB7QXVkaW99IEhUTUw1IEF1ZGlvIG9iamVjdC5cbiAgICAgKi9cbiAgICBfb2J0YWluSHRtbDVBdWRpbzogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXMgfHwgSG93bGVyO1xuXG4gICAgICAvLyBSZXR1cm4gdGhlIG5leHQgb2JqZWN0IGZyb20gdGhlIHBvb2wgaWYgb25lIGV4aXN0cy5cbiAgICAgIGlmIChzZWxmLl9odG1sNUF1ZGlvUG9vbC5sZW5ndGgpIHtcbiAgICAgICAgcmV0dXJuIHNlbGYuX2h0bWw1QXVkaW9Qb29sLnBvcCgpO1xuICAgICAgfVxuXG4gICAgICAvLy5DaGVjayBpZiB0aGUgYXVkaW8gaXMgbG9ja2VkIGFuZCB0aHJvdyBhIHdhcm5pbmcuXG4gICAgICB2YXIgdGVzdFBsYXkgPSBuZXcgQXVkaW8oKS5wbGF5KCk7XG4gICAgICBpZiAodGVzdFBsYXkgJiYgdHlwZW9mIFByb21pc2UgIT09ICd1bmRlZmluZWQnICYmICh0ZXN0UGxheSBpbnN0YW5jZW9mIFByb21pc2UgfHwgdHlwZW9mIHRlc3RQbGF5LnRoZW4gPT09ICdmdW5jdGlvbicpKSB7XG4gICAgICAgIHRlc3RQbGF5LmNhdGNoKGZ1bmN0aW9uKCkge1xuICAgICAgICAgIGNvbnNvbGUud2FybignSFRNTDUgQXVkaW8gcG9vbCBleGhhdXN0ZWQsIHJldHVybmluZyBwb3RlbnRpYWxseSBsb2NrZWQgYXVkaW8gb2JqZWN0LicpO1xuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIG5ldyBBdWRpbygpO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm4gYW4gYWN0aXZhdGVkIEhUTUw1IEF1ZGlvIG9iamVjdCB0byB0aGUgcG9vbC5cbiAgICAgKiBAcmV0dXJuIHtIb3dsZXJ9XG4gICAgICovXG4gICAgX3JlbGVhc2VIdG1sNUF1ZGlvOiBmdW5jdGlvbihhdWRpbykge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzIHx8IEhvd2xlcjtcblxuICAgICAgLy8gRG9uJ3QgYWRkIGF1ZGlvIHRvIHRoZSBwb29sIGlmIHdlIGRvbid0IGtub3cgaWYgaXQgaGFzIGJlZW4gdW5sb2NrZWQuXG4gICAgICBpZiAoYXVkaW8uX3VubG9ja2VkKSB7XG4gICAgICAgIHNlbGYuX2h0bWw1QXVkaW9Qb29sLnB1c2goYXVkaW8pO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gc2VsZjtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogQXV0b21hdGljYWxseSBzdXNwZW5kIHRoZSBXZWIgQXVkaW8gQXVkaW9Db250ZXh0IGFmdGVyIG5vIHNvdW5kIGhhcyBwbGF5ZWQgZm9yIDMwIHNlY29uZHMuXG4gICAgICogVGhpcyBzYXZlcyBwcm9jZXNzaW5nL2VuZXJneSBhbmQgZml4ZXMgdmFyaW91cyBicm93c2VyLXNwZWNpZmljIGJ1Z3Mgd2l0aCBhdWRpbyBnZXR0aW5nIHN0dWNrLlxuICAgICAqIEByZXR1cm4ge0hvd2xlcn1cbiAgICAgKi9cbiAgICBfYXV0b1N1c3BlbmQ6IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgICBpZiAoIXNlbGYuYXV0b1N1c3BlbmQgfHwgIXNlbGYuY3R4IHx8IHR5cGVvZiBzZWxmLmN0eC5zdXNwZW5kID09PSAndW5kZWZpbmVkJyB8fCAhSG93bGVyLnVzaW5nV2ViQXVkaW8pIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICAvLyBDaGVjayBpZiBhbnkgc291bmRzIGFyZSBwbGF5aW5nLlxuICAgICAgZm9yICh2YXIgaT0wOyBpPHNlbGYuX2hvd2xzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGlmIChzZWxmLl9ob3dsc1tpXS5fd2ViQXVkaW8pIHtcbiAgICAgICAgICBmb3IgKHZhciBqPTA7IGo8c2VsZi5faG93bHNbaV0uX3NvdW5kcy5sZW5ndGg7IGorKykge1xuICAgICAgICAgICAgaWYgKCFzZWxmLl9ob3dsc1tpXS5fc291bmRzW2pdLl9wYXVzZWQpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIHNlbGY7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmIChzZWxmLl9zdXNwZW5kVGltZXIpIHtcbiAgICAgICAgY2xlYXJUaW1lb3V0KHNlbGYuX3N1c3BlbmRUaW1lcik7XG4gICAgICB9XG5cbiAgICAgIC8vIElmIG5vIHNvdW5kIGhhcyBwbGF5ZWQgYWZ0ZXIgMzAgc2Vjb25kcywgc3VzcGVuZCB0aGUgY29udGV4dC5cbiAgICAgIHNlbGYuX3N1c3BlbmRUaW1lciA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgIGlmICghc2VsZi5hdXRvU3VzcGVuZCkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHNlbGYuX3N1c3BlbmRUaW1lciA9IG51bGw7XG4gICAgICAgIHNlbGYuc3RhdGUgPSAnc3VzcGVuZGluZyc7XG5cbiAgICAgICAgLy8gSGFuZGxlIHVwZGF0aW5nIHRoZSBzdGF0ZSBvZiB0aGUgYXVkaW8gY29udGV4dCBhZnRlciBzdXNwZW5kaW5nLlxuICAgICAgICB2YXIgaGFuZGxlU3VzcGVuc2lvbiA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHNlbGYuc3RhdGUgPSAnc3VzcGVuZGVkJztcblxuICAgICAgICAgIGlmIChzZWxmLl9yZXN1bWVBZnRlclN1c3BlbmQpIHtcbiAgICAgICAgICAgIGRlbGV0ZSBzZWxmLl9yZXN1bWVBZnRlclN1c3BlbmQ7XG4gICAgICAgICAgICBzZWxmLl9hdXRvUmVzdW1lKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIC8vIEVpdGhlciB0aGUgc3RhdGUgZ2V0cyBzdXNwZW5kZWQgb3IgaXQgaXMgaW50ZXJydXB0ZWQuXG4gICAgICAgIC8vIEVpdGhlciB3YXksIHdlIG5lZWQgdG8gdXBkYXRlIHRoZSBzdGF0ZSB0byBzdXNwZW5kZWQuXG4gICAgICAgIHNlbGYuY3R4LnN1c3BlbmQoKS50aGVuKGhhbmRsZVN1c3BlbnNpb24sIGhhbmRsZVN1c3BlbnNpb24pO1xuICAgICAgfSwgMzAwMDApO1xuXG4gICAgICByZXR1cm4gc2VsZjtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogQXV0b21hdGljYWxseSByZXN1bWUgdGhlIFdlYiBBdWRpbyBBdWRpb0NvbnRleHQgd2hlbiBhIG5ldyBzb3VuZCBpcyBwbGF5ZWQuXG4gICAgICogQHJldHVybiB7SG93bGVyfVxuICAgICAqL1xuICAgIF9hdXRvUmVzdW1lOiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgICAgaWYgKCFzZWxmLmN0eCB8fCB0eXBlb2Ygc2VsZi5jdHgucmVzdW1lID09PSAndW5kZWZpbmVkJyB8fCAhSG93bGVyLnVzaW5nV2ViQXVkaW8pIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBpZiAoc2VsZi5zdGF0ZSA9PT0gJ3J1bm5pbmcnICYmIHNlbGYuY3R4LnN0YXRlICE9PSAnaW50ZXJydXB0ZWQnICYmIHNlbGYuX3N1c3BlbmRUaW1lcikge1xuICAgICAgICBjbGVhclRpbWVvdXQoc2VsZi5fc3VzcGVuZFRpbWVyKTtcbiAgICAgICAgc2VsZi5fc3VzcGVuZFRpbWVyID0gbnVsbDtcbiAgICAgIH0gZWxzZSBpZiAoc2VsZi5zdGF0ZSA9PT0gJ3N1c3BlbmRlZCcgfHwgc2VsZi5zdGF0ZSA9PT0gJ3J1bm5pbmcnICYmIHNlbGYuY3R4LnN0YXRlID09PSAnaW50ZXJydXB0ZWQnKSB7XG4gICAgICAgIHNlbGYuY3R4LnJlc3VtZSgpLnRoZW4oZnVuY3Rpb24oKSB7XG4gICAgICAgICAgc2VsZi5zdGF0ZSA9ICdydW5uaW5nJztcblxuICAgICAgICAgIC8vIEVtaXQgdG8gYWxsIEhvd2xzIHRoYXQgdGhlIGF1ZGlvIGhhcyByZXN1bWVkLlxuICAgICAgICAgIGZvciAodmFyIGk9MDsgaTxzZWxmLl9ob3dscy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgc2VsZi5faG93bHNbaV0uX2VtaXQoJ3Jlc3VtZScpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgaWYgKHNlbGYuX3N1c3BlbmRUaW1lcikge1xuICAgICAgICAgIGNsZWFyVGltZW91dChzZWxmLl9zdXNwZW5kVGltZXIpO1xuICAgICAgICAgIHNlbGYuX3N1c3BlbmRUaW1lciA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoc2VsZi5zdGF0ZSA9PT0gJ3N1c3BlbmRpbmcnKSB7XG4gICAgICAgIHNlbGYuX3Jlc3VtZUFmdGVyU3VzcGVuZCA9IHRydWU7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBzZWxmO1xuICAgIH1cbiAgfTtcblxuICAvLyBTZXR1cCB0aGUgZ2xvYmFsIGF1ZGlvIGNvbnRyb2xsZXIuXG4gIHZhciBIb3dsZXIgPSBuZXcgSG93bGVyR2xvYmFsKCk7XG5cbiAgLyoqIEdyb3VwIE1ldGhvZHMgKiovXG4gIC8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG5cbiAgLyoqXG4gICAqIENyZWF0ZSBhbiBhdWRpbyBncm91cCBjb250cm9sbGVyLlxuICAgKiBAcGFyYW0ge09iamVjdH0gbyBQYXNzZWQgaW4gcHJvcGVydGllcyBmb3IgdGhpcyBncm91cC5cbiAgICovXG4gIHZhciBIb3dsID0gZnVuY3Rpb24obykge1xuICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgIC8vIFRocm93IGFuIGVycm9yIGlmIG5vIHNvdXJjZSBpcyBwcm92aWRlZC5cbiAgICBpZiAoIW8uc3JjIHx8IG8uc3JjLmxlbmd0aCA9PT0gMCkge1xuICAgICAgY29uc29sZS5lcnJvcignQW4gYXJyYXkgb2Ygc291cmNlIGZpbGVzIG11c3QgYmUgcGFzc2VkIHdpdGggYW55IG5ldyBIb3dsLicpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHNlbGYuaW5pdChvKTtcbiAgfTtcbiAgSG93bC5wcm90b3R5cGUgPSB7XG4gICAgLyoqXG4gICAgICogSW5pdGlhbGl6ZSBhIG5ldyBIb3dsIGdyb3VwIG9iamVjdC5cbiAgICAgKiBAcGFyYW0gIHtPYmplY3R9IG8gUGFzc2VkIGluIHByb3BlcnRpZXMgZm9yIHRoaXMgZ3JvdXAuXG4gICAgICogQHJldHVybiB7SG93bH1cbiAgICAgKi9cbiAgICBpbml0OiBmdW5jdGlvbihvKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICAgIC8vIElmIHdlIGRvbid0IGhhdmUgYW4gQXVkaW9Db250ZXh0IGNyZWF0ZWQgeWV0LCBydW4gdGhlIHNldHVwLlxuICAgICAgaWYgKCFIb3dsZXIuY3R4KSB7XG4gICAgICAgIHNldHVwQXVkaW9Db250ZXh0KCk7XG4gICAgICB9XG5cbiAgICAgIC8vIFNldHVwIHVzZXItZGVmaW5lZCBkZWZhdWx0IHByb3BlcnRpZXMuXG4gICAgICBzZWxmLl9hdXRvcGxheSA9IG8uYXV0b3BsYXkgfHwgZmFsc2U7XG4gICAgICBzZWxmLl9mb3JtYXQgPSAodHlwZW9mIG8uZm9ybWF0ICE9PSAnc3RyaW5nJykgPyBvLmZvcm1hdCA6IFtvLmZvcm1hdF07XG4gICAgICBzZWxmLl9odG1sNSA9IG8uaHRtbDUgfHwgZmFsc2U7XG4gICAgICBzZWxmLl9tdXRlZCA9IG8ubXV0ZSB8fCBmYWxzZTtcbiAgICAgIHNlbGYuX2xvb3AgPSBvLmxvb3AgfHwgZmFsc2U7XG4gICAgICBzZWxmLl9wb29sID0gby5wb29sIHx8IDU7XG4gICAgICBzZWxmLl9wcmVsb2FkID0gKHR5cGVvZiBvLnByZWxvYWQgPT09ICdib29sZWFuJyB8fCBvLnByZWxvYWQgPT09ICdtZXRhZGF0YScpID8gby5wcmVsb2FkIDogdHJ1ZTtcbiAgICAgIHNlbGYuX3JhdGUgPSBvLnJhdGUgfHwgMTtcbiAgICAgIHNlbGYuX3Nwcml0ZSA9IG8uc3ByaXRlIHx8IHt9O1xuICAgICAgc2VsZi5fc3JjID0gKHR5cGVvZiBvLnNyYyAhPT0gJ3N0cmluZycpID8gby5zcmMgOiBbby5zcmNdO1xuICAgICAgc2VsZi5fdm9sdW1lID0gby52b2x1bWUgIT09IHVuZGVmaW5lZCA/IG8udm9sdW1lIDogMTtcbiAgICAgIHNlbGYuX3hociA9IHtcbiAgICAgICAgbWV0aG9kOiBvLnhociAmJiBvLnhoci5tZXRob2QgPyBvLnhoci5tZXRob2QgOiAnR0VUJyxcbiAgICAgICAgaGVhZGVyczogby54aHIgJiYgby54aHIuaGVhZGVycyA/IG8ueGhyLmhlYWRlcnMgOiBudWxsLFxuICAgICAgICB3aXRoQ3JlZGVudGlhbHM6IG8ueGhyICYmIG8ueGhyLndpdGhDcmVkZW50aWFscyA/IG8ueGhyLndpdGhDcmVkZW50aWFscyA6IGZhbHNlLFxuICAgICAgfTtcblxuICAgICAgLy8gU2V0dXAgYWxsIG90aGVyIGRlZmF1bHQgcHJvcGVydGllcy5cbiAgICAgIHNlbGYuX2R1cmF0aW9uID0gMDtcbiAgICAgIHNlbGYuX3N0YXRlID0gJ3VubG9hZGVkJztcbiAgICAgIHNlbGYuX3NvdW5kcyA9IFtdO1xuICAgICAgc2VsZi5fZW5kVGltZXJzID0ge307XG4gICAgICBzZWxmLl9xdWV1ZSA9IFtdO1xuICAgICAgc2VsZi5fcGxheUxvY2sgPSBmYWxzZTtcblxuICAgICAgLy8gU2V0dXAgZXZlbnQgbGlzdGVuZXJzLlxuICAgICAgc2VsZi5fb25lbmQgPSBvLm9uZW5kID8gW3tmbjogby5vbmVuZH1dIDogW107XG4gICAgICBzZWxmLl9vbmZhZGUgPSBvLm9uZmFkZSA/IFt7Zm46IG8ub25mYWRlfV0gOiBbXTtcbiAgICAgIHNlbGYuX29ubG9hZCA9IG8ub25sb2FkID8gW3tmbjogby5vbmxvYWR9XSA6IFtdO1xuICAgICAgc2VsZi5fb25sb2FkZXJyb3IgPSBvLm9ubG9hZGVycm9yID8gW3tmbjogby5vbmxvYWRlcnJvcn1dIDogW107XG4gICAgICBzZWxmLl9vbnBsYXllcnJvciA9IG8ub25wbGF5ZXJyb3IgPyBbe2ZuOiBvLm9ucGxheWVycm9yfV0gOiBbXTtcbiAgICAgIHNlbGYuX29ucGF1c2UgPSBvLm9ucGF1c2UgPyBbe2ZuOiBvLm9ucGF1c2V9XSA6IFtdO1xuICAgICAgc2VsZi5fb25wbGF5ID0gby5vbnBsYXkgPyBbe2ZuOiBvLm9ucGxheX1dIDogW107XG4gICAgICBzZWxmLl9vbnN0b3AgPSBvLm9uc3RvcCA/IFt7Zm46IG8ub25zdG9wfV0gOiBbXTtcbiAgICAgIHNlbGYuX29ubXV0ZSA9IG8ub25tdXRlID8gW3tmbjogby5vbm11dGV9XSA6IFtdO1xuICAgICAgc2VsZi5fb252b2x1bWUgPSBvLm9udm9sdW1lID8gW3tmbjogby5vbnZvbHVtZX1dIDogW107XG4gICAgICBzZWxmLl9vbnJhdGUgPSBvLm9ucmF0ZSA/IFt7Zm46IG8ub25yYXRlfV0gOiBbXTtcbiAgICAgIHNlbGYuX29uc2VlayA9IG8ub25zZWVrID8gW3tmbjogby5vbnNlZWt9XSA6IFtdO1xuICAgICAgc2VsZi5fb251bmxvY2sgPSBvLm9udW5sb2NrID8gW3tmbjogby5vbnVubG9ja31dIDogW107XG4gICAgICBzZWxmLl9vbnJlc3VtZSA9IFtdO1xuXG4gICAgICAvLyBXZWIgQXVkaW8gb3IgSFRNTDUgQXVkaW8/XG4gICAgICBzZWxmLl93ZWJBdWRpbyA9IEhvd2xlci51c2luZ1dlYkF1ZGlvICYmICFzZWxmLl9odG1sNTtcblxuICAgICAgLy8gQXV0b21hdGljYWxseSB0cnkgdG8gZW5hYmxlIGF1ZGlvLlxuICAgICAgaWYgKHR5cGVvZiBIb3dsZXIuY3R4ICE9PSAndW5kZWZpbmVkJyAmJiBIb3dsZXIuY3R4ICYmIEhvd2xlci5hdXRvVW5sb2NrKSB7XG4gICAgICAgIEhvd2xlci5fdW5sb2NrQXVkaW8oKTtcbiAgICAgIH1cblxuICAgICAgLy8gS2VlcCB0cmFjayBvZiB0aGlzIEhvd2wgZ3JvdXAgaW4gdGhlIGdsb2JhbCBjb250cm9sbGVyLlxuICAgICAgSG93bGVyLl9ob3dscy5wdXNoKHNlbGYpO1xuXG4gICAgICAvLyBJZiB0aGV5IHNlbGVjdGVkIGF1dG9wbGF5LCBhZGQgYSBwbGF5IGV2ZW50IHRvIHRoZSBsb2FkIHF1ZXVlLlxuICAgICAgaWYgKHNlbGYuX2F1dG9wbGF5KSB7XG4gICAgICAgIHNlbGYuX3F1ZXVlLnB1c2goe1xuICAgICAgICAgIGV2ZW50OiAncGxheScsXG4gICAgICAgICAgYWN0aW9uOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHNlbGYucGxheSgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIC8vIExvYWQgdGhlIHNvdXJjZSBmaWxlIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuICAgICAgaWYgKHNlbGYuX3ByZWxvYWQgJiYgc2VsZi5fcHJlbG9hZCAhPT0gJ25vbmUnKSB7XG4gICAgICAgIHNlbGYubG9hZCgpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gc2VsZjtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogTG9hZCB0aGUgYXVkaW8gZmlsZS5cbiAgICAgKiBAcmV0dXJuIHtIb3dsZXJ9XG4gICAgICovXG4gICAgbG9hZDogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICB2YXIgdXJsID0gbnVsbDtcblxuICAgICAgLy8gSWYgbm8gYXVkaW8gaXMgYXZhaWxhYmxlLCBxdWl0IGltbWVkaWF0ZWx5LlxuICAgICAgaWYgKEhvd2xlci5ub0F1ZGlvKSB7XG4gICAgICAgIHNlbGYuX2VtaXQoJ2xvYWRlcnJvcicsIG51bGwsICdObyBhdWRpbyBzdXBwb3J0LicpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIC8vIE1ha2Ugc3VyZSBvdXIgc291cmNlIGlzIGluIGFuIGFycmF5LlxuICAgICAgaWYgKHR5cGVvZiBzZWxmLl9zcmMgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgIHNlbGYuX3NyYyA9IFtzZWxmLl9zcmNdO1xuICAgICAgfVxuXG4gICAgICAvLyBMb29wIHRocm91Z2ggdGhlIHNvdXJjZXMgYW5kIHBpY2sgdGhlIGZpcnN0IG9uZSB0aGF0IGlzIGNvbXBhdGlibGUuXG4gICAgICBmb3IgKHZhciBpPTA7IGk8c2VsZi5fc3JjLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHZhciBleHQsIHN0cjtcblxuICAgICAgICBpZiAoc2VsZi5fZm9ybWF0ICYmIHNlbGYuX2Zvcm1hdFtpXSkge1xuICAgICAgICAgIC8vIElmIGFuIGV4dGVuc2lvbiB3YXMgc3BlY2lmaWVkLCB1c2UgdGhhdCBpbnN0ZWFkLlxuICAgICAgICAgIGV4dCA9IHNlbGYuX2Zvcm1hdFtpXTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBNYWtlIHN1cmUgdGhlIHNvdXJjZSBpcyBhIHN0cmluZy5cbiAgICAgICAgICBzdHIgPSBzZWxmLl9zcmNbaV07XG4gICAgICAgICAgaWYgKHR5cGVvZiBzdHIgIT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICBzZWxmLl9lbWl0KCdsb2FkZXJyb3InLCBudWxsLCAnTm9uLXN0cmluZyBmb3VuZCBpbiBzZWxlY3RlZCBhdWRpbyBzb3VyY2VzIC0gaWdub3JpbmcuJyk7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvLyBFeHRyYWN0IHRoZSBmaWxlIGV4dGVuc2lvbiBmcm9tIHRoZSBVUkwgb3IgYmFzZTY0IGRhdGEgVVJJLlxuICAgICAgICAgIGV4dCA9IC9eZGF0YTphdWRpb1xcLyhbXjssXSspOy9pLmV4ZWMoc3RyKTtcbiAgICAgICAgICBpZiAoIWV4dCkge1xuICAgICAgICAgICAgZXh0ID0gL1xcLihbXi5dKykkLy5leGVjKHN0ci5zcGxpdCgnPycsIDEpWzBdKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAoZXh0KSB7XG4gICAgICAgICAgICBleHQgPSBleHRbMV0udG9Mb3dlckNhc2UoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyBMb2cgYSB3YXJuaW5nIGlmIG5vIGV4dGVuc2lvbiB3YXMgZm91bmQuXG4gICAgICAgIGlmICghZXh0KSB7XG4gICAgICAgICAgY29uc29sZS53YXJuKCdObyBmaWxlIGV4dGVuc2lvbiB3YXMgZm91bmQuIENvbnNpZGVyIHVzaW5nIHRoZSBcImZvcm1hdFwiIHByb3BlcnR5IG9yIHNwZWNpZnkgYW4gZXh0ZW5zaW9uLicpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gQ2hlY2sgaWYgdGhpcyBleHRlbnNpb24gaXMgYXZhaWxhYmxlLlxuICAgICAgICBpZiAoZXh0ICYmIEhvd2xlci5jb2RlY3MoZXh0KSkge1xuICAgICAgICAgIHVybCA9IHNlbGYuX3NyY1tpXTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAoIXVybCkge1xuICAgICAgICBzZWxmLl9lbWl0KCdsb2FkZXJyb3InLCBudWxsLCAnTm8gY29kZWMgc3VwcG9ydCBmb3Igc2VsZWN0ZWQgYXVkaW8gc291cmNlcy4nKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBzZWxmLl9zcmMgPSB1cmw7XG4gICAgICBzZWxmLl9zdGF0ZSA9ICdsb2FkaW5nJztcblxuICAgICAgLy8gSWYgdGhlIGhvc3RpbmcgcGFnZSBpcyBIVFRQUyBhbmQgdGhlIHNvdXJjZSBpc24ndCxcbiAgICAgIC8vIGRyb3AgZG93biB0byBIVE1MNSBBdWRpbyB0byBhdm9pZCBNaXhlZCBDb250ZW50IGVycm9ycy5cbiAgICAgIGlmICh3aW5kb3cubG9jYXRpb24ucHJvdG9jb2wgPT09ICdodHRwczonICYmIHVybC5zbGljZSgwLCA1KSA9PT0gJ2h0dHA6Jykge1xuICAgICAgICBzZWxmLl9odG1sNSA9IHRydWU7XG4gICAgICAgIHNlbGYuX3dlYkF1ZGlvID0gZmFsc2U7XG4gICAgICB9XG5cbiAgICAgIC8vIENyZWF0ZSBhIG5ldyBzb3VuZCBvYmplY3QgYW5kIGFkZCBpdCB0byB0aGUgcG9vbC5cbiAgICAgIG5ldyBTb3VuZChzZWxmKTtcblxuICAgICAgLy8gTG9hZCBhbmQgZGVjb2RlIHRoZSBhdWRpbyBkYXRhIGZvciBwbGF5YmFjay5cbiAgICAgIGlmIChzZWxmLl93ZWJBdWRpbykge1xuICAgICAgICBsb2FkQnVmZmVyKHNlbGYpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gc2VsZjtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogUGxheSBhIHNvdW5kIG9yIHJlc3VtZSBwcmV2aW91cyBwbGF5YmFjay5cbiAgICAgKiBAcGFyYW0gIHtTdHJpbmcvTnVtYmVyfSBzcHJpdGUgICBTcHJpdGUgbmFtZSBmb3Igc3ByaXRlIHBsYXliYWNrIG9yIHNvdW5kIGlkIHRvIGNvbnRpbnVlIHByZXZpb3VzLlxuICAgICAqIEBwYXJhbSAge0Jvb2xlYW59IGludGVybmFsIEludGVybmFsIFVzZTogdHJ1ZSBwcmV2ZW50cyBldmVudCBmaXJpbmcuXG4gICAgICogQHJldHVybiB7TnVtYmVyfSAgICAgICAgICBTb3VuZCBJRC5cbiAgICAgKi9cbiAgICBwbGF5OiBmdW5jdGlvbihzcHJpdGUsIGludGVybmFsKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICB2YXIgaWQgPSBudWxsO1xuXG4gICAgICAvLyBEZXRlcm1pbmUgaWYgYSBzcHJpdGUsIHNvdW5kIGlkIG9yIG5vdGhpbmcgd2FzIHBhc3NlZFxuICAgICAgaWYgKHR5cGVvZiBzcHJpdGUgPT09ICdudW1iZXInKSB7XG4gICAgICAgIGlkID0gc3ByaXRlO1xuICAgICAgICBzcHJpdGUgPSBudWxsO1xuICAgICAgfSBlbHNlIGlmICh0eXBlb2Ygc3ByaXRlID09PSAnc3RyaW5nJyAmJiBzZWxmLl9zdGF0ZSA9PT0gJ2xvYWRlZCcgJiYgIXNlbGYuX3Nwcml0ZVtzcHJpdGVdKSB7XG4gICAgICAgIC8vIElmIHRoZSBwYXNzZWQgc3ByaXRlIGRvZXNuJ3QgZXhpc3QsIGRvIG5vdGhpbmcuXG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfSBlbHNlIGlmICh0eXBlb2Ygc3ByaXRlID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAvLyBVc2UgdGhlIGRlZmF1bHQgc291bmQgc3ByaXRlIChwbGF5cyB0aGUgZnVsbCBhdWRpbyBsZW5ndGgpLlxuICAgICAgICBzcHJpdGUgPSAnX19kZWZhdWx0JztcblxuICAgICAgICAvLyBDaGVjayBpZiB0aGVyZSBpcyBhIHNpbmdsZSBwYXVzZWQgc291bmQgdGhhdCBpc24ndCBlbmRlZC5cbiAgICAgICAgLy8gSWYgdGhlcmUgaXMsIHBsYXkgdGhhdCBzb3VuZC4gSWYgbm90LCBjb250aW51ZSBhcyB1c3VhbC5cbiAgICAgICAgaWYgKCFzZWxmLl9wbGF5TG9jaykge1xuICAgICAgICAgIHZhciBudW0gPSAwO1xuICAgICAgICAgIGZvciAodmFyIGk9MDsgaTxzZWxmLl9zb3VuZHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGlmIChzZWxmLl9zb3VuZHNbaV0uX3BhdXNlZCAmJiAhc2VsZi5fc291bmRzW2ldLl9lbmRlZCkge1xuICAgICAgICAgICAgICBudW0rKztcbiAgICAgICAgICAgICAgaWQgPSBzZWxmLl9zb3VuZHNbaV0uX2lkO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmIChudW0gPT09IDEpIHtcbiAgICAgICAgICAgIHNwcml0ZSA9IG51bGw7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGlkID0gbnVsbDtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gR2V0IHRoZSBzZWxlY3RlZCBub2RlLCBvciBnZXQgb25lIGZyb20gdGhlIHBvb2wuXG4gICAgICB2YXIgc291bmQgPSBpZCA/IHNlbGYuX3NvdW5kQnlJZChpZCkgOiBzZWxmLl9pbmFjdGl2ZVNvdW5kKCk7XG5cbiAgICAgIC8vIElmIHRoZSBzb3VuZCBkb2Vzbid0IGV4aXN0LCBkbyBub3RoaW5nLlxuICAgICAgaWYgKCFzb3VuZCkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH1cblxuICAgICAgLy8gU2VsZWN0IHRoZSBzcHJpdGUgZGVmaW5pdGlvbi5cbiAgICAgIGlmIChpZCAmJiAhc3ByaXRlKSB7XG4gICAgICAgIHNwcml0ZSA9IHNvdW5kLl9zcHJpdGUgfHwgJ19fZGVmYXVsdCc7XG4gICAgICB9XG5cbiAgICAgIC8vIElmIHRoZSBzb3VuZCBoYXNuJ3QgbG9hZGVkLCB3ZSBtdXN0IHdhaXQgdG8gZ2V0IHRoZSBhdWRpbydzIGR1cmF0aW9uLlxuICAgICAgLy8gV2UgYWxzbyBuZWVkIHRvIHdhaXQgdG8gbWFrZSBzdXJlIHdlIGRvbid0IHJ1biBpbnRvIHJhY2UgY29uZGl0aW9ucyB3aXRoXG4gICAgICAvLyB0aGUgb3JkZXIgb2YgZnVuY3Rpb24gY2FsbHMuXG4gICAgICBpZiAoc2VsZi5fc3RhdGUgIT09ICdsb2FkZWQnKSB7XG4gICAgICAgIC8vIFNldCB0aGUgc3ByaXRlIHZhbHVlIG9uIHRoaXMgc291bmQuXG4gICAgICAgIHNvdW5kLl9zcHJpdGUgPSBzcHJpdGU7XG5cbiAgICAgICAgLy8gTWFyayB0aGlzIHNvdW5kIGFzIG5vdCBlbmRlZCBpbiBjYXNlIGFub3RoZXIgc291bmQgaXMgcGxheWVkIGJlZm9yZSB0aGlzIG9uZSBsb2Fkcy5cbiAgICAgICAgc291bmQuX2VuZGVkID0gZmFsc2U7XG5cbiAgICAgICAgLy8gQWRkIHRoZSBzb3VuZCB0byB0aGUgcXVldWUgdG8gYmUgcGxheWVkIG9uIGxvYWQuXG4gICAgICAgIHZhciBzb3VuZElkID0gc291bmQuX2lkO1xuICAgICAgICBzZWxmLl9xdWV1ZS5wdXNoKHtcbiAgICAgICAgICBldmVudDogJ3BsYXknLFxuICAgICAgICAgIGFjdGlvbjogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBzZWxmLnBsYXkoc291bmRJZCk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4gc291bmRJZDtcbiAgICAgIH1cblxuICAgICAgLy8gRG9uJ3QgcGxheSB0aGUgc291bmQgaWYgYW4gaWQgd2FzIHBhc3NlZCBhbmQgaXQgaXMgYWxyZWFkeSBwbGF5aW5nLlxuICAgICAgaWYgKGlkICYmICFzb3VuZC5fcGF1c2VkKSB7XG4gICAgICAgIC8vIFRyaWdnZXIgdGhlIHBsYXkgZXZlbnQsIGluIG9yZGVyIHRvIGtlZXAgaXRlcmF0aW5nIHRocm91Z2ggcXVldWUuXG4gICAgICAgIGlmICghaW50ZXJuYWwpIHtcbiAgICAgICAgICBzZWxmLl9sb2FkUXVldWUoJ3BsYXknKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBzb3VuZC5faWQ7XG4gICAgICB9XG5cbiAgICAgIC8vIE1ha2Ugc3VyZSB0aGUgQXVkaW9Db250ZXh0IGlzbid0IHN1c3BlbmRlZCwgYW5kIHJlc3VtZSBpdCBpZiBpdCBpcy5cbiAgICAgIGlmIChzZWxmLl93ZWJBdWRpbykge1xuICAgICAgICBIb3dsZXIuX2F1dG9SZXN1bWUoKTtcbiAgICAgIH1cblxuICAgICAgLy8gRGV0ZXJtaW5lIGhvdyBsb25nIHRvIHBsYXkgZm9yIGFuZCB3aGVyZSB0byBzdGFydCBwbGF5aW5nLlxuICAgICAgdmFyIHNlZWsgPSBNYXRoLm1heCgwLCBzb3VuZC5fc2VlayA+IDAgPyBzb3VuZC5fc2VlayA6IHNlbGYuX3Nwcml0ZVtzcHJpdGVdWzBdIC8gMTAwMCk7XG4gICAgICB2YXIgZHVyYXRpb24gPSBNYXRoLm1heCgwLCAoKHNlbGYuX3Nwcml0ZVtzcHJpdGVdWzBdICsgc2VsZi5fc3ByaXRlW3Nwcml0ZV1bMV0pIC8gMTAwMCkgLSBzZWVrKTtcbiAgICAgIHZhciB0aW1lb3V0ID0gKGR1cmF0aW9uICogMTAwMCkgLyBNYXRoLmFicyhzb3VuZC5fcmF0ZSk7XG4gICAgICB2YXIgc3RhcnQgPSBzZWxmLl9zcHJpdGVbc3ByaXRlXVswXSAvIDEwMDA7XG4gICAgICB2YXIgc3RvcCA9IChzZWxmLl9zcHJpdGVbc3ByaXRlXVswXSArIHNlbGYuX3Nwcml0ZVtzcHJpdGVdWzFdKSAvIDEwMDA7XG4gICAgICBzb3VuZC5fc3ByaXRlID0gc3ByaXRlO1xuXG4gICAgICAvLyBNYXJrIHRoZSBzb3VuZCBhcyBlbmRlZCBpbnN0YW50bHkgc28gdGhhdCB0aGlzIGFzeW5jIHBsYXliYWNrXG4gICAgICAvLyBkb2Vzbid0IGdldCBncmFiYmVkIGJ5IGFub3RoZXIgY2FsbCB0byBwbGF5IHdoaWxlIHRoaXMgb25lIHdhaXRzIHRvIHN0YXJ0LlxuICAgICAgc291bmQuX2VuZGVkID0gZmFsc2U7XG5cbiAgICAgIC8vIFVwZGF0ZSB0aGUgcGFyYW1ldGVycyBvZiB0aGUgc291bmQuXG4gICAgICB2YXIgc2V0UGFyYW1zID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHNvdW5kLl9wYXVzZWQgPSBmYWxzZTtcbiAgICAgICAgc291bmQuX3NlZWsgPSBzZWVrO1xuICAgICAgICBzb3VuZC5fc3RhcnQgPSBzdGFydDtcbiAgICAgICAgc291bmQuX3N0b3AgPSBzdG9wO1xuICAgICAgICBzb3VuZC5fbG9vcCA9ICEhKHNvdW5kLl9sb29wIHx8IHNlbGYuX3Nwcml0ZVtzcHJpdGVdWzJdKTtcbiAgICAgIH07XG5cbiAgICAgIC8vIEVuZCB0aGUgc291bmQgaW5zdGFudGx5IGlmIHNlZWsgaXMgYXQgdGhlIGVuZC5cbiAgICAgIGlmIChzZWVrID49IHN0b3ApIHtcbiAgICAgICAgc2VsZi5fZW5kZWQoc291bmQpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIC8vIEJlZ2luIHRoZSBhY3R1YWwgcGxheWJhY2suXG4gICAgICB2YXIgbm9kZSA9IHNvdW5kLl9ub2RlO1xuICAgICAgaWYgKHNlbGYuX3dlYkF1ZGlvKSB7XG4gICAgICAgIC8vIEZpcmUgdGhpcyB3aGVuIHRoZSBzb3VuZCBpcyByZWFkeSB0byBwbGF5IHRvIGJlZ2luIFdlYiBBdWRpbyBwbGF5YmFjay5cbiAgICAgICAgdmFyIHBsYXlXZWJBdWRpbyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHNlbGYuX3BsYXlMb2NrID0gZmFsc2U7XG4gICAgICAgICAgc2V0UGFyYW1zKCk7XG4gICAgICAgICAgc2VsZi5fcmVmcmVzaEJ1ZmZlcihzb3VuZCk7XG5cbiAgICAgICAgICAvLyBTZXR1cCB0aGUgcGxheWJhY2sgcGFyYW1zLlxuICAgICAgICAgIHZhciB2b2wgPSAoc291bmQuX211dGVkIHx8IHNlbGYuX211dGVkKSA/IDAgOiBzb3VuZC5fdm9sdW1lO1xuICAgICAgICAgIG5vZGUuZ2Fpbi5zZXRWYWx1ZUF0VGltZSh2b2wsIEhvd2xlci5jdHguY3VycmVudFRpbWUpO1xuICAgICAgICAgIHNvdW5kLl9wbGF5U3RhcnQgPSBIb3dsZXIuY3R4LmN1cnJlbnRUaW1lO1xuXG4gICAgICAgICAgLy8gUGxheSB0aGUgc291bmQgdXNpbmcgdGhlIHN1cHBvcnRlZCBtZXRob2QuXG4gICAgICAgICAgaWYgKHR5cGVvZiBub2RlLmJ1ZmZlclNvdXJjZS5zdGFydCA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIHNvdW5kLl9sb29wID8gbm9kZS5idWZmZXJTb3VyY2Uubm90ZUdyYWluT24oMCwgc2VlaywgODY0MDApIDogbm9kZS5idWZmZXJTb3VyY2Uubm90ZUdyYWluT24oMCwgc2VlaywgZHVyYXRpb24pO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBzb3VuZC5fbG9vcCA/IG5vZGUuYnVmZmVyU291cmNlLnN0YXJ0KDAsIHNlZWssIDg2NDAwKSA6IG5vZGUuYnVmZmVyU291cmNlLnN0YXJ0KDAsIHNlZWssIGR1cmF0aW9uKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvLyBTdGFydCBhIG5ldyB0aW1lciBpZiBub25lIGlzIHByZXNlbnQuXG4gICAgICAgICAgaWYgKHRpbWVvdXQgIT09IEluZmluaXR5KSB7XG4gICAgICAgICAgICBzZWxmLl9lbmRUaW1lcnNbc291bmQuX2lkXSA9IHNldFRpbWVvdXQoc2VsZi5fZW5kZWQuYmluZChzZWxmLCBzb3VuZCksIHRpbWVvdXQpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmICghaW50ZXJuYWwpIHtcbiAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgIHNlbGYuX2VtaXQoJ3BsYXknLCBzb3VuZC5faWQpO1xuICAgICAgICAgICAgICBzZWxmLl9sb2FkUXVldWUoKTtcbiAgICAgICAgICAgIH0sIDApO1xuICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICBpZiAoSG93bGVyLnN0YXRlID09PSAncnVubmluZycgJiYgSG93bGVyLmN0eC5zdGF0ZSAhPT0gJ2ludGVycnVwdGVkJykge1xuICAgICAgICAgIHBsYXlXZWJBdWRpbygpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHNlbGYuX3BsYXlMb2NrID0gdHJ1ZTtcblxuICAgICAgICAgIC8vIFdhaXQgZm9yIHRoZSBhdWRpbyBjb250ZXh0IHRvIHJlc3VtZSBiZWZvcmUgcGxheWluZy5cbiAgICAgICAgICBzZWxmLm9uY2UoJ3Jlc3VtZScsIHBsYXlXZWJBdWRpbyk7XG5cbiAgICAgICAgICAvLyBDYW5jZWwgdGhlIGVuZCB0aW1lci5cbiAgICAgICAgICBzZWxmLl9jbGVhclRpbWVyKHNvdW5kLl9pZCk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIEZpcmUgdGhpcyB3aGVuIHRoZSBzb3VuZCBpcyByZWFkeSB0byBwbGF5IHRvIGJlZ2luIEhUTUw1IEF1ZGlvIHBsYXliYWNrLlxuICAgICAgICB2YXIgcGxheUh0bWw1ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgbm9kZS5jdXJyZW50VGltZSA9IHNlZWs7XG4gICAgICAgICAgbm9kZS5tdXRlZCA9IHNvdW5kLl9tdXRlZCB8fCBzZWxmLl9tdXRlZCB8fCBIb3dsZXIuX211dGVkIHx8IG5vZGUubXV0ZWQ7XG4gICAgICAgICAgbm9kZS52b2x1bWUgPSBzb3VuZC5fdm9sdW1lICogSG93bGVyLnZvbHVtZSgpO1xuICAgICAgICAgIG5vZGUucGxheWJhY2tSYXRlID0gc291bmQuX3JhdGU7XG5cbiAgICAgICAgICAvLyBTb21lIGJyb3dzZXJzIHdpbGwgdGhyb3cgYW4gZXJyb3IgaWYgdGhpcyBpcyBjYWxsZWQgd2l0aG91dCB1c2VyIGludGVyYWN0aW9uLlxuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICB2YXIgcGxheSA9IG5vZGUucGxheSgpO1xuXG4gICAgICAgICAgICAvLyBTdXBwb3J0IG9sZGVyIGJyb3dzZXJzIHRoYXQgZG9uJ3Qgc3VwcG9ydCBwcm9taXNlcywgYW5kIHRodXMgZG9uJ3QgaGF2ZSB0aGlzIGlzc3VlLlxuICAgICAgICAgICAgaWYgKHBsYXkgJiYgdHlwZW9mIFByb21pc2UgIT09ICd1bmRlZmluZWQnICYmIChwbGF5IGluc3RhbmNlb2YgUHJvbWlzZSB8fCB0eXBlb2YgcGxheS50aGVuID09PSAnZnVuY3Rpb24nKSkge1xuICAgICAgICAgICAgICAvLyBJbXBsZW1lbnRzIGEgbG9jayB0byBwcmV2ZW50IERPTUV4Y2VwdGlvbjogVGhlIHBsYXkoKSByZXF1ZXN0IHdhcyBpbnRlcnJ1cHRlZCBieSBhIGNhbGwgdG8gcGF1c2UoKS5cbiAgICAgICAgICAgICAgc2VsZi5fcGxheUxvY2sgPSB0cnVlO1xuXG4gICAgICAgICAgICAgIC8vIFNldCBwYXJhbSB2YWx1ZXMgaW1tZWRpYXRlbHkuXG4gICAgICAgICAgICAgIHNldFBhcmFtcygpO1xuXG4gICAgICAgICAgICAgIC8vIFJlbGVhc2VzIHRoZSBsb2NrIGFuZCBleGVjdXRlcyBxdWV1ZWQgYWN0aW9ucy5cbiAgICAgICAgICAgICAgcGxheVxuICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgc2VsZi5fcGxheUxvY2sgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgIG5vZGUuX3VubG9ja2VkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgIGlmICghaW50ZXJuYWwpIHtcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5fZW1pdCgncGxheScsIHNvdW5kLl9pZCk7XG4gICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBzZWxmLl9sb2FkUXVldWUoKTtcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIC5jYXRjaChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgIHNlbGYuX3BsYXlMb2NrID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICBzZWxmLl9lbWl0KCdwbGF5ZXJyb3InLCBzb3VuZC5faWQsICdQbGF5YmFjayB3YXMgdW5hYmxlIHRvIHN0YXJ0LiBUaGlzIGlzIG1vc3QgY29tbW9ubHkgYW4gaXNzdWUgJyArXG4gICAgICAgICAgICAgICAgICAgICdvbiBtb2JpbGUgZGV2aWNlcyBhbmQgQ2hyb21lIHdoZXJlIHBsYXliYWNrIHdhcyBub3Qgd2l0aGluIGEgdXNlciBpbnRlcmFjdGlvbi4nKTtcblxuICAgICAgICAgICAgICAgICAgLy8gUmVzZXQgdGhlIGVuZGVkIGFuZCBwYXVzZWQgdmFsdWVzLlxuICAgICAgICAgICAgICAgICAgc291bmQuX2VuZGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgIHNvdW5kLl9wYXVzZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSBlbHNlIGlmICghaW50ZXJuYWwpIHtcbiAgICAgICAgICAgICAgc2VsZi5fcGxheUxvY2sgPSBmYWxzZTtcbiAgICAgICAgICAgICAgc2V0UGFyYW1zKCk7XG4gICAgICAgICAgICAgIHNlbGYuX2VtaXQoJ3BsYXknLCBzb3VuZC5faWQpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBTZXR0aW5nIHJhdGUgYmVmb3JlIHBsYXlpbmcgd29uJ3Qgd29yayBpbiBJRSwgc28gd2Ugc2V0IGl0IGFnYWluIGhlcmUuXG4gICAgICAgICAgICBub2RlLnBsYXliYWNrUmF0ZSA9IHNvdW5kLl9yYXRlO1xuXG4gICAgICAgICAgICAvLyBJZiB0aGUgbm9kZSBpcyBzdGlsbCBwYXVzZWQsIHRoZW4gd2UgY2FuIGFzc3VtZSB0aGVyZSB3YXMgYSBwbGF5YmFjayBpc3N1ZS5cbiAgICAgICAgICAgIGlmIChub2RlLnBhdXNlZCkge1xuICAgICAgICAgICAgICBzZWxmLl9lbWl0KCdwbGF5ZXJyb3InLCBzb3VuZC5faWQsICdQbGF5YmFjayB3YXMgdW5hYmxlIHRvIHN0YXJ0LiBUaGlzIGlzIG1vc3QgY29tbW9ubHkgYW4gaXNzdWUgJyArXG4gICAgICAgICAgICAgICAgJ29uIG1vYmlsZSBkZXZpY2VzIGFuZCBDaHJvbWUgd2hlcmUgcGxheWJhY2sgd2FzIG5vdCB3aXRoaW4gYSB1c2VyIGludGVyYWN0aW9uLicpO1xuICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIFNldHVwIHRoZSBlbmQgdGltZXIgb24gc3ByaXRlcyBvciBsaXN0ZW4gZm9yIHRoZSBlbmRlZCBldmVudC5cbiAgICAgICAgICAgIGlmIChzcHJpdGUgIT09ICdfX2RlZmF1bHQnIHx8IHNvdW5kLl9sb29wKSB7XG4gICAgICAgICAgICAgIHNlbGYuX2VuZFRpbWVyc1tzb3VuZC5faWRdID0gc2V0VGltZW91dChzZWxmLl9lbmRlZC5iaW5kKHNlbGYsIHNvdW5kKSwgdGltZW91dCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBzZWxmLl9lbmRUaW1lcnNbc291bmQuX2lkXSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIC8vIEZpcmUgZW5kZWQgb24gdGhpcyBhdWRpbyBub2RlLlxuICAgICAgICAgICAgICAgIHNlbGYuX2VuZGVkKHNvdW5kKTtcblxuICAgICAgICAgICAgICAgIC8vIENsZWFyIHRoaXMgbGlzdGVuZXIuXG4gICAgICAgICAgICAgICAgbm9kZS5yZW1vdmVFdmVudExpc3RlbmVyKCdlbmRlZCcsIHNlbGYuX2VuZFRpbWVyc1tzb3VuZC5faWRdLCBmYWxzZSk7XG4gICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgIG5vZGUuYWRkRXZlbnRMaXN0ZW5lcignZW5kZWQnLCBzZWxmLl9lbmRUaW1lcnNbc291bmQuX2lkXSwgZmFsc2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgc2VsZi5fZW1pdCgncGxheWVycm9yJywgc291bmQuX2lkLCBlcnIpO1xuICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICAvLyBJZiB0aGlzIGlzIHN0cmVhbWluZyBhdWRpbywgbWFrZSBzdXJlIHRoZSBzcmMgaXMgc2V0IGFuZCBsb2FkIGFnYWluLlxuICAgICAgICBpZiAobm9kZS5zcmMgPT09ICdkYXRhOmF1ZGlvL3dhdjtiYXNlNjQsVWtsR1JpZ0FBQUJYUVZaRlptMTBJQklBQUFBQkFBRUFSS3dBQUloWUFRQUNBQkFBQUFCa1lYUmhBZ0FBQUFFQScpIHtcbiAgICAgICAgICBub2RlLnNyYyA9IHNlbGYuX3NyYztcbiAgICAgICAgICBub2RlLmxvYWQoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFBsYXkgaW1tZWRpYXRlbHkgaWYgcmVhZHksIG9yIHdhaXQgZm9yIHRoZSAnY2FucGxheXRocm91Z2gnZSB2ZW50LlxuICAgICAgICB2YXIgbG9hZGVkTm9SZWFkeVN0YXRlID0gKHdpbmRvdyAmJiB3aW5kb3cuZWplY3RhKSB8fCAoIW5vZGUucmVhZHlTdGF0ZSAmJiBIb3dsZXIuX25hdmlnYXRvci5pc0NvY29vbkpTKTtcbiAgICAgICAgaWYgKG5vZGUucmVhZHlTdGF0ZSA+PSAzIHx8IGxvYWRlZE5vUmVhZHlTdGF0ZSkge1xuICAgICAgICAgIHBsYXlIdG1sNSgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHNlbGYuX3BsYXlMb2NrID0gdHJ1ZTtcbiAgICAgICAgICBzZWxmLl9zdGF0ZSA9ICdsb2FkaW5nJztcblxuICAgICAgICAgIHZhciBsaXN0ZW5lciA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgc2VsZi5fc3RhdGUgPSAnbG9hZGVkJztcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gQmVnaW4gcGxheWJhY2suXG4gICAgICAgICAgICBwbGF5SHRtbDUoKTtcblxuICAgICAgICAgICAgLy8gQ2xlYXIgdGhpcyBsaXN0ZW5lci5cbiAgICAgICAgICAgIG5vZGUucmVtb3ZlRXZlbnRMaXN0ZW5lcihIb3dsZXIuX2NhblBsYXlFdmVudCwgbGlzdGVuZXIsIGZhbHNlKTtcbiAgICAgICAgICB9O1xuICAgICAgICAgIG5vZGUuYWRkRXZlbnRMaXN0ZW5lcihIb3dsZXIuX2NhblBsYXlFdmVudCwgbGlzdGVuZXIsIGZhbHNlKTtcblxuICAgICAgICAgIC8vIENhbmNlbCB0aGUgZW5kIHRpbWVyLlxuICAgICAgICAgIHNlbGYuX2NsZWFyVGltZXIoc291bmQuX2lkKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gc291bmQuX2lkO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBQYXVzZSBwbGF5YmFjayBhbmQgc2F2ZSBjdXJyZW50IHBvc2l0aW9uLlxuICAgICAqIEBwYXJhbSAge051bWJlcn0gaWQgVGhlIHNvdW5kIElEIChlbXB0eSB0byBwYXVzZSBhbGwgaW4gZ3JvdXApLlxuICAgICAqIEByZXR1cm4ge0hvd2x9XG4gICAgICovXG4gICAgcGF1c2U6IGZ1bmN0aW9uKGlkKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICAgIC8vIElmIHRoZSBzb3VuZCBoYXNuJ3QgbG9hZGVkIG9yIGEgcGxheSgpIHByb21pc2UgaXMgcGVuZGluZywgYWRkIGl0IHRvIHRoZSBsb2FkIHF1ZXVlIHRvIHBhdXNlIHdoZW4gY2FwYWJsZS5cbiAgICAgIGlmIChzZWxmLl9zdGF0ZSAhPT0gJ2xvYWRlZCcgfHwgc2VsZi5fcGxheUxvY2spIHtcbiAgICAgICAgc2VsZi5fcXVldWUucHVzaCh7XG4gICAgICAgICAgZXZlbnQ6ICdwYXVzZScsXG4gICAgICAgICAgYWN0aW9uOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHNlbGYucGF1c2UoaWQpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIHNlbGY7XG4gICAgICB9XG5cbiAgICAgIC8vIElmIG5vIGlkIGlzIHBhc3NlZCwgZ2V0IGFsbCBJRCdzIHRvIGJlIHBhdXNlZC5cbiAgICAgIHZhciBpZHMgPSBzZWxmLl9nZXRTb3VuZElkcyhpZCk7XG5cbiAgICAgIGZvciAodmFyIGk9MDsgaTxpZHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgLy8gQ2xlYXIgdGhlIGVuZCB0aW1lci5cbiAgICAgICAgc2VsZi5fY2xlYXJUaW1lcihpZHNbaV0pO1xuXG4gICAgICAgIC8vIEdldCB0aGUgc291bmQuXG4gICAgICAgIHZhciBzb3VuZCA9IHNlbGYuX3NvdW5kQnlJZChpZHNbaV0pO1xuXG4gICAgICAgIGlmIChzb3VuZCAmJiAhc291bmQuX3BhdXNlZCkge1xuICAgICAgICAgIC8vIFJlc2V0IHRoZSBzZWVrIHBvc2l0aW9uLlxuICAgICAgICAgIHNvdW5kLl9zZWVrID0gc2VsZi5zZWVrKGlkc1tpXSk7XG4gICAgICAgICAgc291bmQuX3JhdGVTZWVrID0gMDtcbiAgICAgICAgICBzb3VuZC5fcGF1c2VkID0gdHJ1ZTtcblxuICAgICAgICAgIC8vIFN0b3AgY3VycmVudGx5IHJ1bm5pbmcgZmFkZXMuXG4gICAgICAgICAgc2VsZi5fc3RvcEZhZGUoaWRzW2ldKTtcblxuICAgICAgICAgIGlmIChzb3VuZC5fbm9kZSkge1xuICAgICAgICAgICAgaWYgKHNlbGYuX3dlYkF1ZGlvKSB7XG4gICAgICAgICAgICAgIC8vIE1ha2Ugc3VyZSB0aGUgc291bmQgaGFzIGJlZW4gY3JlYXRlZC5cbiAgICAgICAgICAgICAgaWYgKCFzb3VuZC5fbm9kZS5idWZmZXJTb3VyY2UpIHtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIGlmICh0eXBlb2Ygc291bmQuX25vZGUuYnVmZmVyU291cmNlLnN0b3AgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICAgICAgc291bmQuX25vZGUuYnVmZmVyU291cmNlLm5vdGVPZmYoMCk7XG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgc291bmQuX25vZGUuYnVmZmVyU291cmNlLnN0b3AoMCk7XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAvLyBDbGVhbiB1cCB0aGUgYnVmZmVyIHNvdXJjZS5cbiAgICAgICAgICAgICAgc2VsZi5fY2xlYW5CdWZmZXIoc291bmQuX25vZGUpO1xuICAgICAgICAgICAgfSBlbHNlIGlmICghaXNOYU4oc291bmQuX25vZGUuZHVyYXRpb24pIHx8IHNvdW5kLl9ub2RlLmR1cmF0aW9uID09PSBJbmZpbml0eSkge1xuICAgICAgICAgICAgICBzb3VuZC5fbm9kZS5wYXVzZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEZpcmUgdGhlIHBhdXNlIGV2ZW50LCB1bmxlc3MgYHRydWVgIGlzIHBhc3NlZCBhcyB0aGUgMm5kIGFyZ3VtZW50LlxuICAgICAgICBpZiAoIWFyZ3VtZW50c1sxXSkge1xuICAgICAgICAgIHNlbGYuX2VtaXQoJ3BhdXNlJywgc291bmQgPyBzb3VuZC5faWQgOiBudWxsKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gc2VsZjtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogU3RvcCBwbGF5YmFjayBhbmQgcmVzZXQgdG8gc3RhcnQuXG4gICAgICogQHBhcmFtICB7TnVtYmVyfSBpZCBUaGUgc291bmQgSUQgKGVtcHR5IHRvIHN0b3AgYWxsIGluIGdyb3VwKS5cbiAgICAgKiBAcGFyYW0gIHtCb29sZWFufSBpbnRlcm5hbCBJbnRlcm5hbCBVc2U6IHRydWUgcHJldmVudHMgZXZlbnQgZmlyaW5nLlxuICAgICAqIEByZXR1cm4ge0hvd2x9XG4gICAgICovXG4gICAgc3RvcDogZnVuY3Rpb24oaWQsIGludGVybmFsKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICAgIC8vIElmIHRoZSBzb3VuZCBoYXNuJ3QgbG9hZGVkLCBhZGQgaXQgdG8gdGhlIGxvYWQgcXVldWUgdG8gc3RvcCB3aGVuIGNhcGFibGUuXG4gICAgICBpZiAoc2VsZi5fc3RhdGUgIT09ICdsb2FkZWQnIHx8IHNlbGYuX3BsYXlMb2NrKSB7XG4gICAgICAgIHNlbGYuX3F1ZXVlLnB1c2goe1xuICAgICAgICAgIGV2ZW50OiAnc3RvcCcsXG4gICAgICAgICAgYWN0aW9uOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHNlbGYuc3RvcChpZCk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4gc2VsZjtcbiAgICAgIH1cblxuICAgICAgLy8gSWYgbm8gaWQgaXMgcGFzc2VkLCBnZXQgYWxsIElEJ3MgdG8gYmUgc3RvcHBlZC5cbiAgICAgIHZhciBpZHMgPSBzZWxmLl9nZXRTb3VuZElkcyhpZCk7XG5cbiAgICAgIGZvciAodmFyIGk9MDsgaTxpZHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgLy8gQ2xlYXIgdGhlIGVuZCB0aW1lci5cbiAgICAgICAgc2VsZi5fY2xlYXJUaW1lcihpZHNbaV0pO1xuXG4gICAgICAgIC8vIEdldCB0aGUgc291bmQuXG4gICAgICAgIHZhciBzb3VuZCA9IHNlbGYuX3NvdW5kQnlJZChpZHNbaV0pO1xuXG4gICAgICAgIGlmIChzb3VuZCkge1xuICAgICAgICAgIC8vIFJlc2V0IHRoZSBzZWVrIHBvc2l0aW9uLlxuICAgICAgICAgIHNvdW5kLl9zZWVrID0gc291bmQuX3N0YXJ0IHx8IDA7XG4gICAgICAgICAgc291bmQuX3JhdGVTZWVrID0gMDtcbiAgICAgICAgICBzb3VuZC5fcGF1c2VkID0gdHJ1ZTtcbiAgICAgICAgICBzb3VuZC5fZW5kZWQgPSB0cnVlO1xuXG4gICAgICAgICAgLy8gU3RvcCBjdXJyZW50bHkgcnVubmluZyBmYWRlcy5cbiAgICAgICAgICBzZWxmLl9zdG9wRmFkZShpZHNbaV0pO1xuXG4gICAgICAgICAgaWYgKHNvdW5kLl9ub2RlKSB7XG4gICAgICAgICAgICBpZiAoc2VsZi5fd2ViQXVkaW8pIHtcbiAgICAgICAgICAgICAgLy8gTWFrZSBzdXJlIHRoZSBzb3VuZCdzIEF1ZGlvQnVmZmVyU291cmNlTm9kZSBoYXMgYmVlbiBjcmVhdGVkLlxuICAgICAgICAgICAgICBpZiAoc291bmQuX25vZGUuYnVmZmVyU291cmNlKSB7XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBzb3VuZC5fbm9kZS5idWZmZXJTb3VyY2Uuc3RvcCA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgICAgIHNvdW5kLl9ub2RlLmJ1ZmZlclNvdXJjZS5ub3RlT2ZmKDApO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICBzb3VuZC5fbm9kZS5idWZmZXJTb3VyY2Uuc3RvcCgwKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvLyBDbGVhbiB1cCB0aGUgYnVmZmVyIHNvdXJjZS5cbiAgICAgICAgICAgICAgICBzZWxmLl9jbGVhbkJ1ZmZlcihzb3VuZC5fbm9kZSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSBpZiAoIWlzTmFOKHNvdW5kLl9ub2RlLmR1cmF0aW9uKSB8fCBzb3VuZC5fbm9kZS5kdXJhdGlvbiA9PT0gSW5maW5pdHkpIHtcbiAgICAgICAgICAgICAgc291bmQuX25vZGUuY3VycmVudFRpbWUgPSBzb3VuZC5fc3RhcnQgfHwgMDtcbiAgICAgICAgICAgICAgc291bmQuX25vZGUucGF1c2UoKTtcblxuICAgICAgICAgICAgICAvLyBJZiB0aGlzIGlzIGEgbGl2ZSBzdHJlYW0sIHN0b3AgZG93bmxvYWQgb25jZSB0aGUgYXVkaW8gaXMgc3RvcHBlZC5cbiAgICAgICAgICAgICAgaWYgKHNvdW5kLl9ub2RlLmR1cmF0aW9uID09PSBJbmZpbml0eSkge1xuICAgICAgICAgICAgICAgIHNlbGYuX2NsZWFyU291bmQoc291bmQuX25vZGUpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKCFpbnRlcm5hbCkge1xuICAgICAgICAgICAgc2VsZi5fZW1pdCgnc3RvcCcsIHNvdW5kLl9pZCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBzZWxmO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBNdXRlL3VubXV0ZSBhIHNpbmdsZSBzb3VuZCBvciBhbGwgc291bmRzIGluIHRoaXMgSG93bCBncm91cC5cbiAgICAgKiBAcGFyYW0gIHtCb29sZWFufSBtdXRlZCBTZXQgdG8gdHJ1ZSB0byBtdXRlIGFuZCBmYWxzZSB0byB1bm11dGUuXG4gICAgICogQHBhcmFtICB7TnVtYmVyfSBpZCAgICBUaGUgc291bmQgSUQgdG8gdXBkYXRlIChvbWl0IHRvIG11dGUvdW5tdXRlIGFsbCkuXG4gICAgICogQHJldHVybiB7SG93bH1cbiAgICAgKi9cbiAgICBtdXRlOiBmdW5jdGlvbihtdXRlZCwgaWQpIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgICAgLy8gSWYgdGhlIHNvdW5kIGhhc24ndCBsb2FkZWQsIGFkZCBpdCB0byB0aGUgbG9hZCBxdWV1ZSB0byBtdXRlIHdoZW4gY2FwYWJsZS5cbiAgICAgIGlmIChzZWxmLl9zdGF0ZSAhPT0gJ2xvYWRlZCd8fCBzZWxmLl9wbGF5TG9jaykge1xuICAgICAgICBzZWxmLl9xdWV1ZS5wdXNoKHtcbiAgICAgICAgICBldmVudDogJ211dGUnLFxuICAgICAgICAgIGFjdGlvbjogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBzZWxmLm11dGUobXV0ZWQsIGlkKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiBzZWxmO1xuICAgICAgfVxuXG4gICAgICAvLyBJZiBhcHBseWluZyBtdXRlL3VubXV0ZSB0byBhbGwgc291bmRzLCB1cGRhdGUgdGhlIGdyb3VwJ3MgdmFsdWUuXG4gICAgICBpZiAodHlwZW9mIGlkID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICBpZiAodHlwZW9mIG11dGVkID09PSAnYm9vbGVhbicpIHtcbiAgICAgICAgICBzZWxmLl9tdXRlZCA9IG11dGVkO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJldHVybiBzZWxmLl9tdXRlZDtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBJZiBubyBpZCBpcyBwYXNzZWQsIGdldCBhbGwgSUQncyB0byBiZSBtdXRlZC5cbiAgICAgIHZhciBpZHMgPSBzZWxmLl9nZXRTb3VuZElkcyhpZCk7XG5cbiAgICAgIGZvciAodmFyIGk9MDsgaTxpZHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgLy8gR2V0IHRoZSBzb3VuZC5cbiAgICAgICAgdmFyIHNvdW5kID0gc2VsZi5fc291bmRCeUlkKGlkc1tpXSk7XG5cbiAgICAgICAgaWYgKHNvdW5kKSB7XG4gICAgICAgICAgc291bmQuX211dGVkID0gbXV0ZWQ7XG5cbiAgICAgICAgICAvLyBDYW5jZWwgYWN0aXZlIGZhZGUgYW5kIHNldCB0aGUgdm9sdW1lIHRvIHRoZSBlbmQgdmFsdWUuXG4gICAgICAgICAgaWYgKHNvdW5kLl9pbnRlcnZhbCkge1xuICAgICAgICAgICAgc2VsZi5fc3RvcEZhZGUoc291bmQuX2lkKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAoc2VsZi5fd2ViQXVkaW8gJiYgc291bmQuX25vZGUpIHtcbiAgICAgICAgICAgIHNvdW5kLl9ub2RlLmdhaW4uc2V0VmFsdWVBdFRpbWUobXV0ZWQgPyAwIDogc291bmQuX3ZvbHVtZSwgSG93bGVyLmN0eC5jdXJyZW50VGltZSk7XG4gICAgICAgICAgfSBlbHNlIGlmIChzb3VuZC5fbm9kZSkge1xuICAgICAgICAgICAgc291bmQuX25vZGUubXV0ZWQgPSBIb3dsZXIuX211dGVkID8gdHJ1ZSA6IG11dGVkO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHNlbGYuX2VtaXQoJ211dGUnLCBzb3VuZC5faWQpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBzZWxmO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBHZXQvc2V0IHRoZSB2b2x1bWUgb2YgdGhpcyBzb3VuZCBvciBvZiB0aGUgSG93bCBncm91cC4gVGhpcyBtZXRob2QgY2FuIG9wdGlvbmFsbHkgdGFrZSAwLCAxIG9yIDIgYXJndW1lbnRzLlxuICAgICAqICAgdm9sdW1lKCkgLT4gUmV0dXJucyB0aGUgZ3JvdXAncyB2b2x1bWUgdmFsdWUuXG4gICAgICogICB2b2x1bWUoaWQpIC0+IFJldHVybnMgdGhlIHNvdW5kIGlkJ3MgY3VycmVudCB2b2x1bWUuXG4gICAgICogICB2b2x1bWUodm9sKSAtPiBTZXRzIHRoZSB2b2x1bWUgb2YgYWxsIHNvdW5kcyBpbiB0aGlzIEhvd2wgZ3JvdXAuXG4gICAgICogICB2b2x1bWUodm9sLCBpZCkgLT4gU2V0cyB0aGUgdm9sdW1lIG9mIHBhc3NlZCBzb3VuZCBpZC5cbiAgICAgKiBAcmV0dXJuIHtIb3dsL051bWJlcn0gUmV0dXJucyBzZWxmIG9yIGN1cnJlbnQgdm9sdW1lLlxuICAgICAqL1xuICAgIHZvbHVtZTogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICB2YXIgYXJncyA9IGFyZ3VtZW50cztcbiAgICAgIHZhciB2b2wsIGlkO1xuXG4gICAgICAvLyBEZXRlcm1pbmUgdGhlIHZhbHVlcyBiYXNlZCBvbiBhcmd1bWVudHMuXG4gICAgICBpZiAoYXJncy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgLy8gUmV0dXJuIHRoZSB2YWx1ZSBvZiB0aGUgZ3JvdXBzJyB2b2x1bWUuXG4gICAgICAgIHJldHVybiBzZWxmLl92b2x1bWU7XG4gICAgICB9IGVsc2UgaWYgKGFyZ3MubGVuZ3RoID09PSAxIHx8IGFyZ3MubGVuZ3RoID09PSAyICYmIHR5cGVvZiBhcmdzWzFdID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAvLyBGaXJzdCBjaGVjayBpZiB0aGlzIGlzIGFuIElELCBhbmQgaWYgbm90LCBhc3N1bWUgaXQgaXMgYSBuZXcgdm9sdW1lLlxuICAgICAgICB2YXIgaWRzID0gc2VsZi5fZ2V0U291bmRJZHMoKTtcbiAgICAgICAgdmFyIGluZGV4ID0gaWRzLmluZGV4T2YoYXJnc1swXSk7XG4gICAgICAgIGlmIChpbmRleCA+PSAwKSB7XG4gICAgICAgICAgaWQgPSBwYXJzZUludChhcmdzWzBdLCAxMCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdm9sID0gcGFyc2VGbG9hdChhcmdzWzBdKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChhcmdzLmxlbmd0aCA+PSAyKSB7XG4gICAgICAgIHZvbCA9IHBhcnNlRmxvYXQoYXJnc1swXSk7XG4gICAgICAgIGlkID0gcGFyc2VJbnQoYXJnc1sxXSwgMTApO1xuICAgICAgfVxuXG4gICAgICAvLyBVcGRhdGUgdGhlIHZvbHVtZSBvciByZXR1cm4gdGhlIGN1cnJlbnQgdm9sdW1lLlxuICAgICAgdmFyIHNvdW5kO1xuICAgICAgaWYgKHR5cGVvZiB2b2wgIT09ICd1bmRlZmluZWQnICYmIHZvbCA+PSAwICYmIHZvbCA8PSAxKSB7XG4gICAgICAgIC8vIElmIHRoZSBzb3VuZCBoYXNuJ3QgbG9hZGVkLCBhZGQgaXQgdG8gdGhlIGxvYWQgcXVldWUgdG8gY2hhbmdlIHZvbHVtZSB3aGVuIGNhcGFibGUuXG4gICAgICAgIGlmIChzZWxmLl9zdGF0ZSAhPT0gJ2xvYWRlZCd8fCBzZWxmLl9wbGF5TG9jaykge1xuICAgICAgICAgIHNlbGYuX3F1ZXVlLnB1c2goe1xuICAgICAgICAgICAgZXZlbnQ6ICd2b2x1bWUnLFxuICAgICAgICAgICAgYWN0aW9uOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgc2VsZi52b2x1bWUuYXBwbHkoc2VsZiwgYXJncyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgICByZXR1cm4gc2VsZjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFNldCB0aGUgZ3JvdXAgdm9sdW1lLlxuICAgICAgICBpZiAodHlwZW9mIGlkID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgIHNlbGYuX3ZvbHVtZSA9IHZvbDtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFVwZGF0ZSBvbmUgb3IgYWxsIHZvbHVtZXMuXG4gICAgICAgIGlkID0gc2VsZi5fZ2V0U291bmRJZHMoaWQpO1xuICAgICAgICBmb3IgKHZhciBpPTA7IGk8aWQubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAvLyBHZXQgdGhlIHNvdW5kLlxuICAgICAgICAgIHNvdW5kID0gc2VsZi5fc291bmRCeUlkKGlkW2ldKTtcblxuICAgICAgICAgIGlmIChzb3VuZCkge1xuICAgICAgICAgICAgc291bmQuX3ZvbHVtZSA9IHZvbDtcblxuICAgICAgICAgICAgLy8gU3RvcCBjdXJyZW50bHkgcnVubmluZyBmYWRlcy5cbiAgICAgICAgICAgIGlmICghYXJnc1syXSkge1xuICAgICAgICAgICAgICBzZWxmLl9zdG9wRmFkZShpZFtpXSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChzZWxmLl93ZWJBdWRpbyAmJiBzb3VuZC5fbm9kZSAmJiAhc291bmQuX211dGVkKSB7XG4gICAgICAgICAgICAgIHNvdW5kLl9ub2RlLmdhaW4uc2V0VmFsdWVBdFRpbWUodm9sLCBIb3dsZXIuY3R4LmN1cnJlbnRUaW1lKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoc291bmQuX25vZGUgJiYgIXNvdW5kLl9tdXRlZCkge1xuICAgICAgICAgICAgICBzb3VuZC5fbm9kZS52b2x1bWUgPSB2b2wgKiBIb3dsZXIudm9sdW1lKCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHNlbGYuX2VtaXQoJ3ZvbHVtZScsIHNvdW5kLl9pZCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzb3VuZCA9IGlkID8gc2VsZi5fc291bmRCeUlkKGlkKSA6IHNlbGYuX3NvdW5kc1swXTtcbiAgICAgICAgcmV0dXJuIHNvdW5kID8gc291bmQuX3ZvbHVtZSA6IDA7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBzZWxmO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBGYWRlIGEgY3VycmVudGx5IHBsYXlpbmcgc291bmQgYmV0d2VlbiB0d28gdm9sdW1lcyAoaWYgbm8gaWQgaXMgcGFzc2VkLCBhbGwgc291bmRzIHdpbGwgZmFkZSkuXG4gICAgICogQHBhcmFtICB7TnVtYmVyfSBmcm9tIFRoZSB2YWx1ZSB0byBmYWRlIGZyb20gKDAuMCB0byAxLjApLlxuICAgICAqIEBwYXJhbSAge051bWJlcn0gdG8gICBUaGUgdm9sdW1lIHRvIGZhZGUgdG8gKDAuMCB0byAxLjApLlxuICAgICAqIEBwYXJhbSAge051bWJlcn0gbGVuICBUaW1lIGluIG1pbGxpc2Vjb25kcyB0byBmYWRlLlxuICAgICAqIEBwYXJhbSAge051bWJlcn0gaWQgICBUaGUgc291bmQgaWQgKG9taXQgdG8gZmFkZSBhbGwgc291bmRzKS5cbiAgICAgKiBAcmV0dXJuIHtIb3dsfVxuICAgICAqL1xuICAgIGZhZGU6IGZ1bmN0aW9uKGZyb20sIHRvLCBsZW4sIGlkKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICAgIC8vIElmIHRoZSBzb3VuZCBoYXNuJ3QgbG9hZGVkLCBhZGQgaXQgdG8gdGhlIGxvYWQgcXVldWUgdG8gZmFkZSB3aGVuIGNhcGFibGUuXG4gICAgICBpZiAoc2VsZi5fc3RhdGUgIT09ICdsb2FkZWQnIHx8IHNlbGYuX3BsYXlMb2NrKSB7XG4gICAgICAgIHNlbGYuX3F1ZXVlLnB1c2goe1xuICAgICAgICAgIGV2ZW50OiAnZmFkZScsXG4gICAgICAgICAgYWN0aW9uOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHNlbGYuZmFkZShmcm9tLCB0bywgbGVuLCBpZCk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4gc2VsZjtcbiAgICAgIH1cblxuICAgICAgLy8gTWFrZSBzdXJlIHRoZSB0by9mcm9tL2xlbiB2YWx1ZXMgYXJlIG51bWJlcnMuXG4gICAgICBmcm9tID0gTWF0aC5taW4oTWF0aC5tYXgoMCwgcGFyc2VGbG9hdChmcm9tKSksIDEpO1xuICAgICAgdG8gPSBNYXRoLm1pbihNYXRoLm1heCgwLCBwYXJzZUZsb2F0KHRvKSksIDEpO1xuICAgICAgbGVuID0gcGFyc2VGbG9hdChsZW4pO1xuXG4gICAgICAvLyBTZXQgdGhlIHZvbHVtZSB0byB0aGUgc3RhcnQgcG9zaXRpb24uXG4gICAgICBzZWxmLnZvbHVtZShmcm9tLCBpZCk7XG5cbiAgICAgIC8vIEZhZGUgdGhlIHZvbHVtZSBvZiBvbmUgb3IgYWxsIHNvdW5kcy5cbiAgICAgIHZhciBpZHMgPSBzZWxmLl9nZXRTb3VuZElkcyhpZCk7XG4gICAgICBmb3IgKHZhciBpPTA7IGk8aWRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIC8vIEdldCB0aGUgc291bmQuXG4gICAgICAgIHZhciBzb3VuZCA9IHNlbGYuX3NvdW5kQnlJZChpZHNbaV0pO1xuXG4gICAgICAgIC8vIENyZWF0ZSBhIGxpbmVhciBmYWRlIG9yIGZhbGwgYmFjayB0byB0aW1lb3V0cyB3aXRoIEhUTUw1IEF1ZGlvLlxuICAgICAgICBpZiAoc291bmQpIHtcbiAgICAgICAgICAvLyBTdG9wIHRoZSBwcmV2aW91cyBmYWRlIGlmIG5vIHNwcml0ZSBpcyBiZWluZyB1c2VkIChvdGhlcndpc2UsIHZvbHVtZSBoYW5kbGVzIHRoaXMpLlxuICAgICAgICAgIGlmICghaWQpIHtcbiAgICAgICAgICAgIHNlbGYuX3N0b3BGYWRlKGlkc1tpXSk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLy8gSWYgd2UgYXJlIHVzaW5nIFdlYiBBdWRpbywgbGV0IHRoZSBuYXRpdmUgbWV0aG9kcyBkbyB0aGUgYWN0dWFsIGZhZGUuXG4gICAgICAgICAgaWYgKHNlbGYuX3dlYkF1ZGlvICYmICFzb3VuZC5fbXV0ZWQpIHtcbiAgICAgICAgICAgIHZhciBjdXJyZW50VGltZSA9IEhvd2xlci5jdHguY3VycmVudFRpbWU7XG4gICAgICAgICAgICB2YXIgZW5kID0gY3VycmVudFRpbWUgKyAobGVuIC8gMTAwMCk7XG4gICAgICAgICAgICBzb3VuZC5fdm9sdW1lID0gZnJvbTtcbiAgICAgICAgICAgIHNvdW5kLl9ub2RlLmdhaW4uc2V0VmFsdWVBdFRpbWUoZnJvbSwgY3VycmVudFRpbWUpO1xuICAgICAgICAgICAgc291bmQuX25vZGUuZ2Fpbi5saW5lYXJSYW1wVG9WYWx1ZUF0VGltZSh0bywgZW5kKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBzZWxmLl9zdGFydEZhZGVJbnRlcnZhbChzb3VuZCwgZnJvbSwgdG8sIGxlbiwgaWRzW2ldLCB0eXBlb2YgaWQgPT09ICd1bmRlZmluZWQnKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gc2VsZjtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogU3RhcnRzIHRoZSBpbnRlcm5hbCBpbnRlcnZhbCB0byBmYWRlIGEgc291bmQuXG4gICAgICogQHBhcmFtICB7T2JqZWN0fSBzb3VuZCBSZWZlcmVuY2UgdG8gc291bmQgdG8gZmFkZS5cbiAgICAgKiBAcGFyYW0gIHtOdW1iZXJ9IGZyb20gVGhlIHZhbHVlIHRvIGZhZGUgZnJvbSAoMC4wIHRvIDEuMCkuXG4gICAgICogQHBhcmFtICB7TnVtYmVyfSB0byAgIFRoZSB2b2x1bWUgdG8gZmFkZSB0byAoMC4wIHRvIDEuMCkuXG4gICAgICogQHBhcmFtICB7TnVtYmVyfSBsZW4gIFRpbWUgaW4gbWlsbGlzZWNvbmRzIHRvIGZhZGUuXG4gICAgICogQHBhcmFtICB7TnVtYmVyfSBpZCAgIFRoZSBzb3VuZCBpZCB0byBmYWRlLlxuICAgICAqIEBwYXJhbSAge0Jvb2xlYW59IGlzR3JvdXAgICBJZiB0cnVlLCBzZXQgdGhlIHZvbHVtZSBvbiB0aGUgZ3JvdXAuXG4gICAgICovXG4gICAgX3N0YXJ0RmFkZUludGVydmFsOiBmdW5jdGlvbihzb3VuZCwgZnJvbSwgdG8sIGxlbiwgaWQsIGlzR3JvdXApIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgIHZhciB2b2wgPSBmcm9tO1xuICAgICAgdmFyIGRpZmYgPSB0byAtIGZyb207XG4gICAgICB2YXIgc3RlcHMgPSBNYXRoLmFicyhkaWZmIC8gMC4wMSk7XG4gICAgICB2YXIgc3RlcExlbiA9IE1hdGgubWF4KDQsIChzdGVwcyA+IDApID8gbGVuIC8gc3RlcHMgOiBsZW4pO1xuICAgICAgdmFyIGxhc3RUaWNrID0gRGF0ZS5ub3coKTtcblxuICAgICAgLy8gU3RvcmUgdGhlIHZhbHVlIGJlaW5nIGZhZGVkIHRvLlxuICAgICAgc291bmQuX2ZhZGVUbyA9IHRvO1xuXG4gICAgICAvLyBVcGRhdGUgdGhlIHZvbHVtZSB2YWx1ZSBvbiBlYWNoIGludGVydmFsIHRpY2suXG4gICAgICBzb3VuZC5faW50ZXJ2YWwgPSBzZXRJbnRlcnZhbChmdW5jdGlvbigpIHtcbiAgICAgICAgLy8gVXBkYXRlIHRoZSB2b2x1bWUgYmFzZWQgb24gdGhlIHRpbWUgc2luY2UgdGhlIGxhc3QgdGljay5cbiAgICAgICAgdmFyIHRpY2sgPSAoRGF0ZS5ub3coKSAtIGxhc3RUaWNrKSAvIGxlbjtcbiAgICAgICAgbGFzdFRpY2sgPSBEYXRlLm5vdygpO1xuICAgICAgICB2b2wgKz0gZGlmZiAqIHRpY2s7XG5cbiAgICAgICAgLy8gUm91bmQgdG8gd2l0aGluIDIgZGVjaW1hbCBwb2ludHMuXG4gICAgICAgIHZvbCA9IE1hdGgucm91bmQodm9sICogMTAwKSAvIDEwMDtcblxuICAgICAgICAvLyBNYWtlIHN1cmUgdGhlIHZvbHVtZSBpcyBpbiB0aGUgcmlnaHQgYm91bmRzLlxuICAgICAgICBpZiAoZGlmZiA8IDApIHtcbiAgICAgICAgICB2b2wgPSBNYXRoLm1heCh0bywgdm9sKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB2b2wgPSBNYXRoLm1pbih0bywgdm9sKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIENoYW5nZSB0aGUgdm9sdW1lLlxuICAgICAgICBpZiAoc2VsZi5fd2ViQXVkaW8pIHtcbiAgICAgICAgICBzb3VuZC5fdm9sdW1lID0gdm9sO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHNlbGYudm9sdW1lKHZvbCwgc291bmQuX2lkLCB0cnVlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFNldCB0aGUgZ3JvdXAncyB2b2x1bWUuXG4gICAgICAgIGlmIChpc0dyb3VwKSB7XG4gICAgICAgICAgc2VsZi5fdm9sdW1lID0gdm9sO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gV2hlbiB0aGUgZmFkZSBpcyBjb21wbGV0ZSwgc3RvcCBpdCBhbmQgZmlyZSBldmVudC5cbiAgICAgICAgaWYgKCh0byA8IGZyb20gJiYgdm9sIDw9IHRvKSB8fCAodG8gPiBmcm9tICYmIHZvbCA+PSB0bykpIHtcbiAgICAgICAgICBjbGVhckludGVydmFsKHNvdW5kLl9pbnRlcnZhbCk7XG4gICAgICAgICAgc291bmQuX2ludGVydmFsID0gbnVsbDtcbiAgICAgICAgICBzb3VuZC5fZmFkZVRvID0gbnVsbDtcbiAgICAgICAgICBzZWxmLnZvbHVtZSh0bywgc291bmQuX2lkKTtcbiAgICAgICAgICBzZWxmLl9lbWl0KCdmYWRlJywgc291bmQuX2lkKTtcbiAgICAgICAgfVxuICAgICAgfSwgc3RlcExlbik7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEludGVybmFsIG1ldGhvZCB0aGF0IHN0b3BzIHRoZSBjdXJyZW50bHkgcGxheWluZyBmYWRlIHdoZW5cbiAgICAgKiBhIG5ldyBmYWRlIHN0YXJ0cywgdm9sdW1lIGlzIGNoYW5nZWQgb3IgdGhlIHNvdW5kIGlzIHN0b3BwZWQuXG4gICAgICogQHBhcmFtICB7TnVtYmVyfSBpZCBUaGUgc291bmQgaWQuXG4gICAgICogQHJldHVybiB7SG93bH1cbiAgICAgKi9cbiAgICBfc3RvcEZhZGU6IGZ1bmN0aW9uKGlkKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICB2YXIgc291bmQgPSBzZWxmLl9zb3VuZEJ5SWQoaWQpO1xuXG4gICAgICBpZiAoc291bmQgJiYgc291bmQuX2ludGVydmFsKSB7XG4gICAgICAgIGlmIChzZWxmLl93ZWJBdWRpbykge1xuICAgICAgICAgIHNvdW5kLl9ub2RlLmdhaW4uY2FuY2VsU2NoZWR1bGVkVmFsdWVzKEhvd2xlci5jdHguY3VycmVudFRpbWUpO1xuICAgICAgICB9XG5cbiAgICAgICAgY2xlYXJJbnRlcnZhbChzb3VuZC5faW50ZXJ2YWwpO1xuICAgICAgICBzb3VuZC5faW50ZXJ2YWwgPSBudWxsO1xuICAgICAgICBzZWxmLnZvbHVtZShzb3VuZC5fZmFkZVRvLCBpZCk7XG4gICAgICAgIHNvdW5kLl9mYWRlVG8gPSBudWxsO1xuICAgICAgICBzZWxmLl9lbWl0KCdmYWRlJywgaWQpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gc2VsZjtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogR2V0L3NldCB0aGUgbG9vcCBwYXJhbWV0ZXIgb24gYSBzb3VuZC4gVGhpcyBtZXRob2QgY2FuIG9wdGlvbmFsbHkgdGFrZSAwLCAxIG9yIDIgYXJndW1lbnRzLlxuICAgICAqICAgbG9vcCgpIC0+IFJldHVybnMgdGhlIGdyb3VwJ3MgbG9vcCB2YWx1ZS5cbiAgICAgKiAgIGxvb3AoaWQpIC0+IFJldHVybnMgdGhlIHNvdW5kIGlkJ3MgbG9vcCB2YWx1ZS5cbiAgICAgKiAgIGxvb3AobG9vcCkgLT4gU2V0cyB0aGUgbG9vcCB2YWx1ZSBmb3IgYWxsIHNvdW5kcyBpbiB0aGlzIEhvd2wgZ3JvdXAuXG4gICAgICogICBsb29wKGxvb3AsIGlkKSAtPiBTZXRzIHRoZSBsb29wIHZhbHVlIG9mIHBhc3NlZCBzb3VuZCBpZC5cbiAgICAgKiBAcmV0dXJuIHtIb3dsL0Jvb2xlYW59IFJldHVybnMgc2VsZiBvciBjdXJyZW50IGxvb3AgdmFsdWUuXG4gICAgICovXG4gICAgbG9vcDogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICB2YXIgYXJncyA9IGFyZ3VtZW50cztcbiAgICAgIHZhciBsb29wLCBpZCwgc291bmQ7XG5cbiAgICAgIC8vIERldGVybWluZSB0aGUgdmFsdWVzIGZvciBsb29wIGFuZCBpZC5cbiAgICAgIGlmIChhcmdzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAvLyBSZXR1cm4gdGhlIGdyb3UncyBsb29wIHZhbHVlLlxuICAgICAgICByZXR1cm4gc2VsZi5fbG9vcDtcbiAgICAgIH0gZWxzZSBpZiAoYXJncy5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBhcmdzWzBdID09PSAnYm9vbGVhbicpIHtcbiAgICAgICAgICBsb29wID0gYXJnc1swXTtcbiAgICAgICAgICBzZWxmLl9sb29wID0gbG9vcDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBSZXR1cm4gdGhpcyBzb3VuZCdzIGxvb3AgdmFsdWUuXG4gICAgICAgICAgc291bmQgPSBzZWxmLl9zb3VuZEJ5SWQocGFyc2VJbnQoYXJnc1swXSwgMTApKTtcbiAgICAgICAgICByZXR1cm4gc291bmQgPyBzb3VuZC5fbG9vcCA6IGZhbHNlO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKGFyZ3MubGVuZ3RoID09PSAyKSB7XG4gICAgICAgIGxvb3AgPSBhcmdzWzBdO1xuICAgICAgICBpZCA9IHBhcnNlSW50KGFyZ3NbMV0sIDEwKTtcbiAgICAgIH1cblxuICAgICAgLy8gSWYgbm8gaWQgaXMgcGFzc2VkLCBnZXQgYWxsIElEJ3MgdG8gYmUgbG9vcGVkLlxuICAgICAgdmFyIGlkcyA9IHNlbGYuX2dldFNvdW5kSWRzKGlkKTtcbiAgICAgIGZvciAodmFyIGk9MDsgaTxpZHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgc291bmQgPSBzZWxmLl9zb3VuZEJ5SWQoaWRzW2ldKTtcblxuICAgICAgICBpZiAoc291bmQpIHtcbiAgICAgICAgICBzb3VuZC5fbG9vcCA9IGxvb3A7XG4gICAgICAgICAgaWYgKHNlbGYuX3dlYkF1ZGlvICYmIHNvdW5kLl9ub2RlICYmIHNvdW5kLl9ub2RlLmJ1ZmZlclNvdXJjZSkge1xuICAgICAgICAgICAgc291bmQuX25vZGUuYnVmZmVyU291cmNlLmxvb3AgPSBsb29wO1xuICAgICAgICAgICAgaWYgKGxvb3ApIHtcbiAgICAgICAgICAgICAgc291bmQuX25vZGUuYnVmZmVyU291cmNlLmxvb3BTdGFydCA9IHNvdW5kLl9zdGFydCB8fCAwO1xuICAgICAgICAgICAgICBzb3VuZC5fbm9kZS5idWZmZXJTb3VyY2UubG9vcEVuZCA9IHNvdW5kLl9zdG9wO1xuXG4gICAgICAgICAgICAgIC8vIElmIHBsYXlpbmcsIHJlc3RhcnQgcGxheWJhY2sgdG8gZW5zdXJlIGxvb3BpbmcgdXBkYXRlcy5cbiAgICAgICAgICAgICAgaWYgKHNlbGYucGxheWluZyhpZHNbaV0pKSB7XG4gICAgICAgICAgICAgICAgc2VsZi5wYXVzZShpZHNbaV0sIHRydWUpO1xuICAgICAgICAgICAgICAgIHNlbGYucGxheShpZHNbaV0sIHRydWUpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBzZWxmO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBHZXQvc2V0IHRoZSBwbGF5YmFjayByYXRlIG9mIGEgc291bmQuIFRoaXMgbWV0aG9kIGNhbiBvcHRpb25hbGx5IHRha2UgMCwgMSBvciAyIGFyZ3VtZW50cy5cbiAgICAgKiAgIHJhdGUoKSAtPiBSZXR1cm5zIHRoZSBmaXJzdCBzb3VuZCBub2RlJ3MgY3VycmVudCBwbGF5YmFjayByYXRlLlxuICAgICAqICAgcmF0ZShpZCkgLT4gUmV0dXJucyB0aGUgc291bmQgaWQncyBjdXJyZW50IHBsYXliYWNrIHJhdGUuXG4gICAgICogICByYXRlKHJhdGUpIC0+IFNldHMgdGhlIHBsYXliYWNrIHJhdGUgb2YgYWxsIHNvdW5kcyBpbiB0aGlzIEhvd2wgZ3JvdXAuXG4gICAgICogICByYXRlKHJhdGUsIGlkKSAtPiBTZXRzIHRoZSBwbGF5YmFjayByYXRlIG9mIHBhc3NlZCBzb3VuZCBpZC5cbiAgICAgKiBAcmV0dXJuIHtIb3dsL051bWJlcn0gUmV0dXJucyBzZWxmIG9yIHRoZSBjdXJyZW50IHBsYXliYWNrIHJhdGUuXG4gICAgICovXG4gICAgcmF0ZTogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICB2YXIgYXJncyA9IGFyZ3VtZW50cztcbiAgICAgIHZhciByYXRlLCBpZDtcblxuICAgICAgLy8gRGV0ZXJtaW5lIHRoZSB2YWx1ZXMgYmFzZWQgb24gYXJndW1lbnRzLlxuICAgICAgaWYgKGFyZ3MubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIC8vIFdlIHdpbGwgc2ltcGx5IHJldHVybiB0aGUgY3VycmVudCByYXRlIG9mIHRoZSBmaXJzdCBub2RlLlxuICAgICAgICBpZCA9IHNlbGYuX3NvdW5kc1swXS5faWQ7XG4gICAgICB9IGVsc2UgaWYgKGFyZ3MubGVuZ3RoID09PSAxKSB7XG4gICAgICAgIC8vIEZpcnN0IGNoZWNrIGlmIHRoaXMgaXMgYW4gSUQsIGFuZCBpZiBub3QsIGFzc3VtZSBpdCBpcyBhIG5ldyByYXRlIHZhbHVlLlxuICAgICAgICB2YXIgaWRzID0gc2VsZi5fZ2V0U291bmRJZHMoKTtcbiAgICAgICAgdmFyIGluZGV4ID0gaWRzLmluZGV4T2YoYXJnc1swXSk7XG4gICAgICAgIGlmIChpbmRleCA+PSAwKSB7XG4gICAgICAgICAgaWQgPSBwYXJzZUludChhcmdzWzBdLCAxMCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmF0ZSA9IHBhcnNlRmxvYXQoYXJnc1swXSk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoYXJncy5sZW5ndGggPT09IDIpIHtcbiAgICAgICAgcmF0ZSA9IHBhcnNlRmxvYXQoYXJnc1swXSk7XG4gICAgICAgIGlkID0gcGFyc2VJbnQoYXJnc1sxXSwgMTApO1xuICAgICAgfVxuXG4gICAgICAvLyBVcGRhdGUgdGhlIHBsYXliYWNrIHJhdGUgb3IgcmV0dXJuIHRoZSBjdXJyZW50IHZhbHVlLlxuICAgICAgdmFyIHNvdW5kO1xuICAgICAgaWYgKHR5cGVvZiByYXRlID09PSAnbnVtYmVyJykge1xuICAgICAgICAvLyBJZiB0aGUgc291bmQgaGFzbid0IGxvYWRlZCwgYWRkIGl0IHRvIHRoZSBsb2FkIHF1ZXVlIHRvIGNoYW5nZSBwbGF5YmFjayByYXRlIHdoZW4gY2FwYWJsZS5cbiAgICAgICAgaWYgKHNlbGYuX3N0YXRlICE9PSAnbG9hZGVkJyB8fCBzZWxmLl9wbGF5TG9jaykge1xuICAgICAgICAgIHNlbGYuX3F1ZXVlLnB1c2goe1xuICAgICAgICAgICAgZXZlbnQ6ICdyYXRlJyxcbiAgICAgICAgICAgIGFjdGlvbjogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgIHNlbGYucmF0ZS5hcHBseShzZWxmLCBhcmdzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIHJldHVybiBzZWxmO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gU2V0IHRoZSBncm91cCByYXRlLlxuICAgICAgICBpZiAodHlwZW9mIGlkID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgIHNlbGYuX3JhdGUgPSByYXRlO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gVXBkYXRlIG9uZSBvciBhbGwgdm9sdW1lcy5cbiAgICAgICAgaWQgPSBzZWxmLl9nZXRTb3VuZElkcyhpZCk7XG4gICAgICAgIGZvciAodmFyIGk9MDsgaTxpZC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIC8vIEdldCB0aGUgc291bmQuXG4gICAgICAgICAgc291bmQgPSBzZWxmLl9zb3VuZEJ5SWQoaWRbaV0pO1xuXG4gICAgICAgICAgaWYgKHNvdW5kKSB7XG4gICAgICAgICAgICAvLyBLZWVwIHRyYWNrIG9mIG91ciBwb3NpdGlvbiB3aGVuIHRoZSByYXRlIGNoYW5nZWQgYW5kIHVwZGF0ZSB0aGUgcGxheWJhY2tcbiAgICAgICAgICAgIC8vIHN0YXJ0IHBvc2l0aW9uIHNvIHdlIGNhbiBwcm9wZXJseSBhZGp1c3QgdGhlIHNlZWsgcG9zaXRpb24gZm9yIHRpbWUgZWxhcHNlZC5cbiAgICAgICAgICAgIGlmIChzZWxmLnBsYXlpbmcoaWRbaV0pKSB7XG4gICAgICAgICAgICAgIHNvdW5kLl9yYXRlU2VlayA9IHNlbGYuc2VlayhpZFtpXSk7XG4gICAgICAgICAgICAgIHNvdW5kLl9wbGF5U3RhcnQgPSBzZWxmLl93ZWJBdWRpbyA/IEhvd2xlci5jdHguY3VycmVudFRpbWUgOiBzb3VuZC5fcGxheVN0YXJ0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc291bmQuX3JhdGUgPSByYXRlO1xuXG4gICAgICAgICAgICAvLyBDaGFuZ2UgdGhlIHBsYXliYWNrIHJhdGUuXG4gICAgICAgICAgICBpZiAoc2VsZi5fd2ViQXVkaW8gJiYgc291bmQuX25vZGUgJiYgc291bmQuX25vZGUuYnVmZmVyU291cmNlKSB7XG4gICAgICAgICAgICAgIHNvdW5kLl9ub2RlLmJ1ZmZlclNvdXJjZS5wbGF5YmFja1JhdGUuc2V0VmFsdWVBdFRpbWUocmF0ZSwgSG93bGVyLmN0eC5jdXJyZW50VGltZSk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHNvdW5kLl9ub2RlKSB7XG4gICAgICAgICAgICAgIHNvdW5kLl9ub2RlLnBsYXliYWNrUmF0ZSA9IHJhdGU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIFJlc2V0IHRoZSB0aW1lcnMuXG4gICAgICAgICAgICB2YXIgc2VlayA9IHNlbGYuc2VlayhpZFtpXSk7XG4gICAgICAgICAgICB2YXIgZHVyYXRpb24gPSAoKHNlbGYuX3Nwcml0ZVtzb3VuZC5fc3ByaXRlXVswXSArIHNlbGYuX3Nwcml0ZVtzb3VuZC5fc3ByaXRlXVsxXSkgLyAxMDAwKSAtIHNlZWs7XG4gICAgICAgICAgICB2YXIgdGltZW91dCA9IChkdXJhdGlvbiAqIDEwMDApIC8gTWF0aC5hYnMoc291bmQuX3JhdGUpO1xuXG4gICAgICAgICAgICAvLyBTdGFydCBhIG5ldyBlbmQgdGltZXIgaWYgc291bmQgaXMgYWxyZWFkeSBwbGF5aW5nLlxuICAgICAgICAgICAgaWYgKHNlbGYuX2VuZFRpbWVyc1tpZFtpXV0gfHwgIXNvdW5kLl9wYXVzZWQpIHtcbiAgICAgICAgICAgICAgc2VsZi5fY2xlYXJUaW1lcihpZFtpXSk7XG4gICAgICAgICAgICAgIHNlbGYuX2VuZFRpbWVyc1tpZFtpXV0gPSBzZXRUaW1lb3V0KHNlbGYuX2VuZGVkLmJpbmQoc2VsZiwgc291bmQpLCB0aW1lb3V0KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgc2VsZi5fZW1pdCgncmF0ZScsIHNvdW5kLl9pZCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzb3VuZCA9IHNlbGYuX3NvdW5kQnlJZChpZCk7XG4gICAgICAgIHJldHVybiBzb3VuZCA/IHNvdW5kLl9yYXRlIDogc2VsZi5fcmF0ZTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHNlbGY7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEdldC9zZXQgdGhlIHNlZWsgcG9zaXRpb24gb2YgYSBzb3VuZC4gVGhpcyBtZXRob2QgY2FuIG9wdGlvbmFsbHkgdGFrZSAwLCAxIG9yIDIgYXJndW1lbnRzLlxuICAgICAqICAgc2VlaygpIC0+IFJldHVybnMgdGhlIGZpcnN0IHNvdW5kIG5vZGUncyBjdXJyZW50IHNlZWsgcG9zaXRpb24uXG4gICAgICogICBzZWVrKGlkKSAtPiBSZXR1cm5zIHRoZSBzb3VuZCBpZCdzIGN1cnJlbnQgc2VlayBwb3NpdGlvbi5cbiAgICAgKiAgIHNlZWsoc2VlaykgLT4gU2V0cyB0aGUgc2VlayBwb3NpdGlvbiBvZiB0aGUgZmlyc3Qgc291bmQgbm9kZS5cbiAgICAgKiAgIHNlZWsoc2VlaywgaWQpIC0+IFNldHMgdGhlIHNlZWsgcG9zaXRpb24gb2YgcGFzc2VkIHNvdW5kIGlkLlxuICAgICAqIEByZXR1cm4ge0hvd2wvTnVtYmVyfSBSZXR1cm5zIHNlbGYgb3IgdGhlIGN1cnJlbnQgc2VlayBwb3NpdGlvbi5cbiAgICAgKi9cbiAgICBzZWVrOiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgIHZhciBhcmdzID0gYXJndW1lbnRzO1xuICAgICAgdmFyIHNlZWssIGlkO1xuXG4gICAgICAvLyBEZXRlcm1pbmUgdGhlIHZhbHVlcyBiYXNlZCBvbiBhcmd1bWVudHMuXG4gICAgICBpZiAoYXJncy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgLy8gV2Ugd2lsbCBzaW1wbHkgcmV0dXJuIHRoZSBjdXJyZW50IHBvc2l0aW9uIG9mIHRoZSBmaXJzdCBub2RlLlxuICAgICAgICBpZiAoc2VsZi5fc291bmRzLmxlbmd0aCkge1xuICAgICAgICAgIGlkID0gc2VsZi5fc291bmRzWzBdLl9pZDtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChhcmdzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAvLyBGaXJzdCBjaGVjayBpZiB0aGlzIGlzIGFuIElELCBhbmQgaWYgbm90LCBhc3N1bWUgaXQgaXMgYSBuZXcgc2VlayBwb3NpdGlvbi5cbiAgICAgICAgdmFyIGlkcyA9IHNlbGYuX2dldFNvdW5kSWRzKCk7XG4gICAgICAgIHZhciBpbmRleCA9IGlkcy5pbmRleE9mKGFyZ3NbMF0pO1xuICAgICAgICBpZiAoaW5kZXggPj0gMCkge1xuICAgICAgICAgIGlkID0gcGFyc2VJbnQoYXJnc1swXSwgMTApO1xuICAgICAgICB9IGVsc2UgaWYgKHNlbGYuX3NvdW5kcy5sZW5ndGgpIHtcbiAgICAgICAgICBpZCA9IHNlbGYuX3NvdW5kc1swXS5faWQ7XG4gICAgICAgICAgc2VlayA9IHBhcnNlRmxvYXQoYXJnc1swXSk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoYXJncy5sZW5ndGggPT09IDIpIHtcbiAgICAgICAgc2VlayA9IHBhcnNlRmxvYXQoYXJnc1swXSk7XG4gICAgICAgIGlkID0gcGFyc2VJbnQoYXJnc1sxXSwgMTApO1xuICAgICAgfVxuXG4gICAgICAvLyBJZiB0aGVyZSBpcyBubyBJRCwgYmFpbCBvdXQuXG4gICAgICBpZiAodHlwZW9mIGlkID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICByZXR1cm4gMDtcbiAgICAgIH1cblxuICAgICAgLy8gSWYgdGhlIHNvdW5kIGhhc24ndCBsb2FkZWQsIGFkZCBpdCB0byB0aGUgbG9hZCBxdWV1ZSB0byBzZWVrIHdoZW4gY2FwYWJsZS5cbiAgICAgIGlmICh0eXBlb2Ygc2VlayA9PT0gJ251bWJlcicgJiYgKHNlbGYuX3N0YXRlICE9PSAnbG9hZGVkJyB8fCBzZWxmLl9wbGF5TG9jaykpIHtcbiAgICAgICAgc2VsZi5fcXVldWUucHVzaCh7XG4gICAgICAgICAgZXZlbnQ6ICdzZWVrJyxcbiAgICAgICAgICBhY3Rpb246IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgc2VsZi5zZWVrLmFwcGx5KHNlbGYsIGFyZ3MpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIHNlbGY7XG4gICAgICB9XG5cbiAgICAgIC8vIEdldCB0aGUgc291bmQuXG4gICAgICB2YXIgc291bmQgPSBzZWxmLl9zb3VuZEJ5SWQoaWQpO1xuXG4gICAgICBpZiAoc291bmQpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBzZWVrID09PSAnbnVtYmVyJyAmJiBzZWVrID49IDApIHtcbiAgICAgICAgICAvLyBQYXVzZSB0aGUgc291bmQgYW5kIHVwZGF0ZSBwb3NpdGlvbiBmb3IgcmVzdGFydGluZyBwbGF5YmFjay5cbiAgICAgICAgICB2YXIgcGxheWluZyA9IHNlbGYucGxheWluZyhpZCk7XG4gICAgICAgICAgaWYgKHBsYXlpbmcpIHtcbiAgICAgICAgICAgIHNlbGYucGF1c2UoaWQsIHRydWUpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIE1vdmUgdGhlIHBvc2l0aW9uIG9mIHRoZSB0cmFjayBhbmQgY2FuY2VsIHRpbWVyLlxuICAgICAgICAgIHNvdW5kLl9zZWVrID0gc2VlaztcbiAgICAgICAgICBzb3VuZC5fZW5kZWQgPSBmYWxzZTtcbiAgICAgICAgICBzZWxmLl9jbGVhclRpbWVyKGlkKTtcblxuICAgICAgICAgIC8vIFVwZGF0ZSB0aGUgc2VlayBwb3NpdGlvbiBmb3IgSFRNTDUgQXVkaW8uXG4gICAgICAgICAgaWYgKCFzZWxmLl93ZWJBdWRpbyAmJiBzb3VuZC5fbm9kZSAmJiAhaXNOYU4oc291bmQuX25vZGUuZHVyYXRpb24pKSB7XG4gICAgICAgICAgICBzb3VuZC5fbm9kZS5jdXJyZW50VGltZSA9IHNlZWs7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLy8gU2VlayBhbmQgZW1pdCB3aGVuIHJlYWR5LlxuICAgICAgICAgIHZhciBzZWVrQW5kRW1pdCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgLy8gUmVzdGFydCB0aGUgcGxheWJhY2sgaWYgdGhlIHNvdW5kIHdhcyBwbGF5aW5nLlxuICAgICAgICAgICAgaWYgKHBsYXlpbmcpIHtcbiAgICAgICAgICAgICAgc2VsZi5wbGF5KGlkLCB0cnVlKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgc2VsZi5fZW1pdCgnc2VlaycsIGlkKTtcbiAgICAgICAgICB9O1xuXG4gICAgICAgICAgLy8gV2FpdCBmb3IgdGhlIHBsYXkgbG9jayB0byBiZSB1bnNldCBiZWZvcmUgZW1pdHRpbmcgKEhUTUw1IEF1ZGlvKS5cbiAgICAgICAgICBpZiAocGxheWluZyAmJiAhc2VsZi5fd2ViQXVkaW8pIHtcbiAgICAgICAgICAgIHZhciBlbWl0U2VlayA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICBpZiAoIXNlbGYuX3BsYXlMb2NrKSB7XG4gICAgICAgICAgICAgICAgc2Vla0FuZEVtaXQoKTtcbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGVtaXRTZWVrLCAwKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHNldFRpbWVvdXQoZW1pdFNlZWssIDApO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBzZWVrQW5kRW1pdCgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpZiAoc2VsZi5fd2ViQXVkaW8pIHtcbiAgICAgICAgICAgIHZhciByZWFsVGltZSA9IHNlbGYucGxheWluZyhpZCkgPyBIb3dsZXIuY3R4LmN1cnJlbnRUaW1lIC0gc291bmQuX3BsYXlTdGFydCA6IDA7XG4gICAgICAgICAgICB2YXIgcmF0ZVNlZWsgPSBzb3VuZC5fcmF0ZVNlZWsgPyBzb3VuZC5fcmF0ZVNlZWsgLSBzb3VuZC5fc2VlayA6IDA7XG4gICAgICAgICAgICByZXR1cm4gc291bmQuX3NlZWsgKyAocmF0ZVNlZWsgKyByZWFsVGltZSAqIE1hdGguYWJzKHNvdW5kLl9yYXRlKSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBzb3VuZC5fbm9kZS5jdXJyZW50VGltZTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHNlbGY7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIENoZWNrIGlmIGEgc3BlY2lmaWMgc291bmQgaXMgY3VycmVudGx5IHBsYXlpbmcgb3Igbm90IChpZiBpZCBpcyBwcm92aWRlZCksIG9yIGNoZWNrIGlmIGF0IGxlYXN0IG9uZSBvZiB0aGUgc291bmRzIGluIHRoZSBncm91cCBpcyBwbGF5aW5nIG9yIG5vdC5cbiAgICAgKiBAcGFyYW0gIHtOdW1iZXJ9ICBpZCBUaGUgc291bmQgaWQgdG8gY2hlY2suIElmIG5vbmUgaXMgcGFzc2VkLCB0aGUgd2hvbGUgc291bmQgZ3JvdXAgaXMgY2hlY2tlZC5cbiAgICAgKiBAcmV0dXJuIHtCb29sZWFufSBUcnVlIGlmIHBsYXlpbmcgYW5kIGZhbHNlIGlmIG5vdC5cbiAgICAgKi9cbiAgICBwbGF5aW5nOiBmdW5jdGlvbihpZCkge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgICAvLyBDaGVjayB0aGUgcGFzc2VkIHNvdW5kIElEIChpZiBhbnkpLlxuICAgICAgaWYgKHR5cGVvZiBpZCA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgdmFyIHNvdW5kID0gc2VsZi5fc291bmRCeUlkKGlkKTtcbiAgICAgICAgcmV0dXJuIHNvdW5kID8gIXNvdW5kLl9wYXVzZWQgOiBmYWxzZTtcbiAgICAgIH1cblxuICAgICAgLy8gT3RoZXJ3aXNlLCBsb29wIHRocm91Z2ggYWxsIHNvdW5kcyBhbmQgY2hlY2sgaWYgYW55IGFyZSBwbGF5aW5nLlxuICAgICAgZm9yICh2YXIgaT0wOyBpPHNlbGYuX3NvdW5kcy5sZW5ndGg7IGkrKykge1xuICAgICAgICBpZiAoIXNlbGYuX3NvdW5kc1tpXS5fcGF1c2VkKSB7XG4gICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIGR1cmF0aW9uIG9mIHRoaXMgc291bmQuIFBhc3NpbmcgYSBzb3VuZCBpZCB3aWxsIHJldHVybiB0aGUgc3ByaXRlIGR1cmF0aW9uLlxuICAgICAqIEBwYXJhbSAge051bWJlcn0gaWQgVGhlIHNvdW5kIGlkIHRvIGNoZWNrLiBJZiBub25lIGlzIHBhc3NlZCwgcmV0dXJuIGZ1bGwgc291cmNlIGR1cmF0aW9uLlxuICAgICAqIEByZXR1cm4ge051bWJlcn0gQXVkaW8gZHVyYXRpb24gaW4gc2Vjb25kcy5cbiAgICAgKi9cbiAgICBkdXJhdGlvbjogZnVuY3Rpb24oaWQpIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgIHZhciBkdXJhdGlvbiA9IHNlbGYuX2R1cmF0aW9uO1xuXG4gICAgICAvLyBJZiB3ZSBwYXNzIGFuIElELCBnZXQgdGhlIHNvdW5kIGFuZCByZXR1cm4gdGhlIHNwcml0ZSBsZW5ndGguXG4gICAgICB2YXIgc291bmQgPSBzZWxmLl9zb3VuZEJ5SWQoaWQpO1xuICAgICAgaWYgKHNvdW5kKSB7XG4gICAgICAgIGR1cmF0aW9uID0gc2VsZi5fc3ByaXRlW3NvdW5kLl9zcHJpdGVdWzFdIC8gMTAwMDtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGR1cmF0aW9uO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBjdXJyZW50IGxvYWRlZCBzdGF0ZSBvZiB0aGlzIEhvd2wuXG4gICAgICogQHJldHVybiB7U3RyaW5nfSAndW5sb2FkZWQnLCAnbG9hZGluZycsICdsb2FkZWQnXG4gICAgICovXG4gICAgc3RhdGU6IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIHRoaXMuX3N0YXRlO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBVbmxvYWQgYW5kIGRlc3Ryb3kgdGhlIGN1cnJlbnQgSG93bCBvYmplY3QuXG4gICAgICogVGhpcyB3aWxsIGltbWVkaWF0ZWx5IHN0b3AgYWxsIHNvdW5kIGluc3RhbmNlcyBhdHRhY2hlZCB0byB0aGlzIGdyb3VwLlxuICAgICAqL1xuICAgIHVubG9hZDogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICAgIC8vIFN0b3AgcGxheWluZyBhbnkgYWN0aXZlIHNvdW5kcy5cbiAgICAgIHZhciBzb3VuZHMgPSBzZWxmLl9zb3VuZHM7XG4gICAgICBmb3IgKHZhciBpPTA7IGk8c291bmRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIC8vIFN0b3AgdGhlIHNvdW5kIGlmIGl0IGlzIGN1cnJlbnRseSBwbGF5aW5nLlxuICAgICAgICBpZiAoIXNvdW5kc1tpXS5fcGF1c2VkKSB7XG4gICAgICAgICAgc2VsZi5zdG9wKHNvdW5kc1tpXS5faWQpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gUmVtb3ZlIHRoZSBzb3VyY2Ugb3IgZGlzY29ubmVjdC5cbiAgICAgICAgaWYgKCFzZWxmLl93ZWJBdWRpbykge1xuICAgICAgICAgIC8vIFNldCB0aGUgc291cmNlIHRvIDAtc2Vjb25kIHNpbGVuY2UgdG8gc3RvcCBhbnkgZG93bmxvYWRpbmcgKGV4Y2VwdCBpbiBJRSkuXG4gICAgICAgICAgc2VsZi5fY2xlYXJTb3VuZChzb3VuZHNbaV0uX25vZGUpO1xuXG4gICAgICAgICAgLy8gUmVtb3ZlIGFueSBldmVudCBsaXN0ZW5lcnMuXG4gICAgICAgICAgc291bmRzW2ldLl9ub2RlLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2Vycm9yJywgc291bmRzW2ldLl9lcnJvckZuLCBmYWxzZSk7XG4gICAgICAgICAgc291bmRzW2ldLl9ub2RlLnJlbW92ZUV2ZW50TGlzdGVuZXIoSG93bGVyLl9jYW5QbGF5RXZlbnQsIHNvdW5kc1tpXS5fbG9hZEZuLCBmYWxzZSk7XG4gICAgICAgICAgc291bmRzW2ldLl9ub2RlLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2VuZGVkJywgc291bmRzW2ldLl9lbmRGbiwgZmFsc2UpO1xuXG4gICAgICAgICAgLy8gUmVsZWFzZSB0aGUgQXVkaW8gb2JqZWN0IGJhY2sgdG8gdGhlIHBvb2wuXG4gICAgICAgICAgSG93bGVyLl9yZWxlYXNlSHRtbDVBdWRpbyhzb3VuZHNbaV0uX25vZGUpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gRW1wdHkgb3V0IGFsbCBvZiB0aGUgbm9kZXMuXG4gICAgICAgIGRlbGV0ZSBzb3VuZHNbaV0uX25vZGU7XG5cbiAgICAgICAgLy8gTWFrZSBzdXJlIGFsbCB0aW1lcnMgYXJlIGNsZWFyZWQgb3V0LlxuICAgICAgICBzZWxmLl9jbGVhclRpbWVyKHNvdW5kc1tpXS5faWQpO1xuICAgICAgfVxuXG4gICAgICAvLyBSZW1vdmUgdGhlIHJlZmVyZW5jZXMgaW4gdGhlIGdsb2JhbCBIb3dsZXIgb2JqZWN0LlxuICAgICAgdmFyIGluZGV4ID0gSG93bGVyLl9ob3dscy5pbmRleE9mKHNlbGYpO1xuICAgICAgaWYgKGluZGV4ID49IDApIHtcbiAgICAgICAgSG93bGVyLl9ob3dscy5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgfVxuXG4gICAgICAvLyBEZWxldGUgdGhpcyBzb3VuZCBmcm9tIHRoZSBjYWNoZSAoaWYgbm8gb3RoZXIgSG93bCBpcyB1c2luZyBpdCkuXG4gICAgICB2YXIgcmVtQ2FjaGUgPSB0cnVlO1xuICAgICAgZm9yIChpPTA7IGk8SG93bGVyLl9ob3dscy5sZW5ndGg7IGkrKykge1xuICAgICAgICBpZiAoSG93bGVyLl9ob3dsc1tpXS5fc3JjID09PSBzZWxmLl9zcmMgfHwgc2VsZi5fc3JjLmluZGV4T2YoSG93bGVyLl9ob3dsc1tpXS5fc3JjKSA+PSAwKSB7XG4gICAgICAgICAgcmVtQ2FjaGUgPSBmYWxzZTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAoY2FjaGUgJiYgcmVtQ2FjaGUpIHtcbiAgICAgICAgZGVsZXRlIGNhY2hlW3NlbGYuX3NyY107XG4gICAgICB9XG5cbiAgICAgIC8vIENsZWFyIGdsb2JhbCBlcnJvcnMuXG4gICAgICBIb3dsZXIubm9BdWRpbyA9IGZhbHNlO1xuXG4gICAgICAvLyBDbGVhciBvdXQgYHNlbGZgLlxuICAgICAgc2VsZi5fc3RhdGUgPSAndW5sb2FkZWQnO1xuICAgICAgc2VsZi5fc291bmRzID0gW107XG4gICAgICBzZWxmID0gbnVsbDtcblxuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIExpc3RlbiB0byBhIGN1c3RvbSBldmVudC5cbiAgICAgKiBAcGFyYW0gIHtTdHJpbmd9ICAgZXZlbnQgRXZlbnQgbmFtZS5cbiAgICAgKiBAcGFyYW0gIHtGdW5jdGlvbn0gZm4gICAgTGlzdGVuZXIgdG8gY2FsbC5cbiAgICAgKiBAcGFyYW0gIHtOdW1iZXJ9ICAgaWQgICAgKG9wdGlvbmFsKSBPbmx5IGxpc3RlbiB0byBldmVudHMgZm9yIHRoaXMgc291bmQuXG4gICAgICogQHBhcmFtICB7TnVtYmVyfSAgIG9uY2UgIChJTlRFUk5BTCkgTWFya3MgZXZlbnQgdG8gZmlyZSBvbmx5IG9uY2UuXG4gICAgICogQHJldHVybiB7SG93bH1cbiAgICAgKi9cbiAgICBvbjogZnVuY3Rpb24oZXZlbnQsIGZuLCBpZCwgb25jZSkge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgdmFyIGV2ZW50cyA9IHNlbGZbJ19vbicgKyBldmVudF07XG5cbiAgICAgIGlmICh0eXBlb2YgZm4gPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgZXZlbnRzLnB1c2gob25jZSA/IHtpZDogaWQsIGZuOiBmbiwgb25jZTogb25jZX0gOiB7aWQ6IGlkLCBmbjogZm59KTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHNlbGY7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIFJlbW92ZSBhIGN1c3RvbSBldmVudC4gQ2FsbCB3aXRob3V0IHBhcmFtZXRlcnMgdG8gcmVtb3ZlIGFsbCBldmVudHMuXG4gICAgICogQHBhcmFtICB7U3RyaW5nfSAgIGV2ZW50IEV2ZW50IG5hbWUuXG4gICAgICogQHBhcmFtICB7RnVuY3Rpb259IGZuICAgIExpc3RlbmVyIHRvIHJlbW92ZS4gTGVhdmUgZW1wdHkgdG8gcmVtb3ZlIGFsbC5cbiAgICAgKiBAcGFyYW0gIHtOdW1iZXJ9ICAgaWQgICAgKG9wdGlvbmFsKSBPbmx5IHJlbW92ZSBldmVudHMgZm9yIHRoaXMgc291bmQuXG4gICAgICogQHJldHVybiB7SG93bH1cbiAgICAgKi9cbiAgICBvZmY6IGZ1bmN0aW9uKGV2ZW50LCBmbiwgaWQpIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgIHZhciBldmVudHMgPSBzZWxmWydfb24nICsgZXZlbnRdO1xuICAgICAgdmFyIGkgPSAwO1xuXG4gICAgICAvLyBBbGxvdyBwYXNzaW5nIGp1c3QgYW4gZXZlbnQgYW5kIElELlxuICAgICAgaWYgKHR5cGVvZiBmbiA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgaWQgPSBmbjtcbiAgICAgICAgZm4gPSBudWxsO1xuICAgICAgfVxuXG4gICAgICBpZiAoZm4gfHwgaWQpIHtcbiAgICAgICAgLy8gTG9vcCB0aHJvdWdoIGV2ZW50IHN0b3JlIGFuZCByZW1vdmUgdGhlIHBhc3NlZCBmdW5jdGlvbi5cbiAgICAgICAgZm9yIChpPTA7IGk8ZXZlbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgdmFyIGlzSWQgPSAoaWQgPT09IGV2ZW50c1tpXS5pZCk7XG4gICAgICAgICAgaWYgKGZuID09PSBldmVudHNbaV0uZm4gJiYgaXNJZCB8fCAhZm4gJiYgaXNJZCkge1xuICAgICAgICAgICAgZXZlbnRzLnNwbGljZShpLCAxKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChldmVudCkge1xuICAgICAgICAvLyBDbGVhciBvdXQgYWxsIGV2ZW50cyBvZiB0aGlzIHR5cGUuXG4gICAgICAgIHNlbGZbJ19vbicgKyBldmVudF0gPSBbXTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIENsZWFyIG91dCBhbGwgZXZlbnRzIG9mIGV2ZXJ5IHR5cGUuXG4gICAgICAgIHZhciBrZXlzID0gT2JqZWN0LmtleXMoc2VsZik7XG4gICAgICAgIGZvciAoaT0wOyBpPGtleXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICBpZiAoKGtleXNbaV0uaW5kZXhPZignX29uJykgPT09IDApICYmIEFycmF5LmlzQXJyYXkoc2VsZltrZXlzW2ldXSkpIHtcbiAgICAgICAgICAgIHNlbGZba2V5c1tpXV0gPSBbXTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHNlbGY7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIExpc3RlbiB0byBhIGN1c3RvbSBldmVudCBhbmQgcmVtb3ZlIGl0IG9uY2UgZmlyZWQuXG4gICAgICogQHBhcmFtICB7U3RyaW5nfSAgIGV2ZW50IEV2ZW50IG5hbWUuXG4gICAgICogQHBhcmFtICB7RnVuY3Rpb259IGZuICAgIExpc3RlbmVyIHRvIGNhbGwuXG4gICAgICogQHBhcmFtICB7TnVtYmVyfSAgIGlkICAgIChvcHRpb25hbCkgT25seSBsaXN0ZW4gdG8gZXZlbnRzIGZvciB0aGlzIHNvdW5kLlxuICAgICAqIEByZXR1cm4ge0hvd2x9XG4gICAgICovXG4gICAgb25jZTogZnVuY3Rpb24oZXZlbnQsIGZuLCBpZCkge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgICAvLyBTZXR1cCB0aGUgZXZlbnQgbGlzdGVuZXIuXG4gICAgICBzZWxmLm9uKGV2ZW50LCBmbiwgaWQsIDEpO1xuXG4gICAgICByZXR1cm4gc2VsZjtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogRW1pdCBhbGwgZXZlbnRzIG9mIGEgc3BlY2lmaWMgdHlwZSBhbmQgcGFzcyB0aGUgc291bmQgaWQuXG4gICAgICogQHBhcmFtICB7U3RyaW5nfSBldmVudCBFdmVudCBuYW1lLlxuICAgICAqIEBwYXJhbSAge051bWJlcn0gaWQgICAgU291bmQgSUQuXG4gICAgICogQHBhcmFtICB7TnVtYmVyfSBtc2cgICBNZXNzYWdlIHRvIGdvIHdpdGggZXZlbnQuXG4gICAgICogQHJldHVybiB7SG93bH1cbiAgICAgKi9cbiAgICBfZW1pdDogZnVuY3Rpb24oZXZlbnQsIGlkLCBtc2cpIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgIHZhciBldmVudHMgPSBzZWxmWydfb24nICsgZXZlbnRdO1xuXG4gICAgICAvLyBMb29wIHRocm91Z2ggZXZlbnQgc3RvcmUgYW5kIGZpcmUgYWxsIGZ1bmN0aW9ucy5cbiAgICAgIGZvciAodmFyIGk9ZXZlbnRzLmxlbmd0aC0xOyBpPj0wOyBpLS0pIHtcbiAgICAgICAgLy8gT25seSBmaXJlIHRoZSBsaXN0ZW5lciBpZiB0aGUgY29ycmVjdCBJRCBpcyB1c2VkLlxuICAgICAgICBpZiAoIWV2ZW50c1tpXS5pZCB8fCBldmVudHNbaV0uaWQgPT09IGlkIHx8IGV2ZW50ID09PSAnbG9hZCcpIHtcbiAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKGZuKSB7XG4gICAgICAgICAgICBmbi5jYWxsKHRoaXMsIGlkLCBtc2cpO1xuICAgICAgICAgIH0uYmluZChzZWxmLCBldmVudHNbaV0uZm4pLCAwKTtcblxuICAgICAgICAgIC8vIElmIHRoaXMgZXZlbnQgd2FzIHNldHVwIHdpdGggYG9uY2VgLCByZW1vdmUgaXQuXG4gICAgICAgICAgaWYgKGV2ZW50c1tpXS5vbmNlKSB7XG4gICAgICAgICAgICBzZWxmLm9mZihldmVudCwgZXZlbnRzW2ldLmZuLCBldmVudHNbaV0uaWQpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBQYXNzIHRoZSBldmVudCB0eXBlIGludG8gbG9hZCBxdWV1ZSBzbyB0aGF0IGl0IGNhbiBjb250aW51ZSBzdGVwcGluZy5cbiAgICAgIHNlbGYuX2xvYWRRdWV1ZShldmVudCk7XG5cbiAgICAgIHJldHVybiBzZWxmO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBRdWV1ZSBvZiBhY3Rpb25zIGluaXRpYXRlZCBiZWZvcmUgdGhlIHNvdW5kIGhhcyBsb2FkZWQuXG4gICAgICogVGhlc2Ugd2lsbCBiZSBjYWxsZWQgaW4gc2VxdWVuY2UsIHdpdGggdGhlIG5leHQgb25seSBmaXJpbmdcbiAgICAgKiBhZnRlciB0aGUgcHJldmlvdXMgaGFzIGZpbmlzaGVkIGV4ZWN1dGluZyAoZXZlbiBpZiBhc3luYyBsaWtlIHBsYXkpLlxuICAgICAqIEByZXR1cm4ge0hvd2x9XG4gICAgICovXG4gICAgX2xvYWRRdWV1ZTogZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgICAgaWYgKHNlbGYuX3F1ZXVlLmxlbmd0aCA+IDApIHtcbiAgICAgICAgdmFyIHRhc2sgPSBzZWxmLl9xdWV1ZVswXTtcblxuICAgICAgICAvLyBSZW1vdmUgdGhpcyB0YXNrIGlmIGEgbWF0Y2hpbmcgZXZlbnQgd2FzIHBhc3NlZC5cbiAgICAgICAgaWYgKHRhc2suZXZlbnQgPT09IGV2ZW50KSB7XG4gICAgICAgICAgc2VsZi5fcXVldWUuc2hpZnQoKTtcbiAgICAgICAgICBzZWxmLl9sb2FkUXVldWUoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFJ1biB0aGUgdGFzayBpZiBubyBldmVudCB0eXBlIGlzIHBhc3NlZC5cbiAgICAgICAgaWYgKCFldmVudCkge1xuICAgICAgICAgIHRhc2suYWN0aW9uKCk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHNlbGY7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEZpcmVkIHdoZW4gcGxheWJhY2sgZW5kcyBhdCB0aGUgZW5kIG9mIHRoZSBkdXJhdGlvbi5cbiAgICAgKiBAcGFyYW0gIHtTb3VuZH0gc291bmQgVGhlIHNvdW5kIG9iamVjdCB0byB3b3JrIHdpdGguXG4gICAgICogQHJldHVybiB7SG93bH1cbiAgICAgKi9cbiAgICBfZW5kZWQ6IGZ1bmN0aW9uKHNvdW5kKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICB2YXIgc3ByaXRlID0gc291bmQuX3Nwcml0ZTtcblxuICAgICAgLy8gSWYgd2UgYXJlIHVzaW5nIElFIGFuZCB0aGVyZSB3YXMgbmV0d29yayBsYXRlbmN5IHdlIG1heSBiZSBjbGlwcGluZ1xuICAgICAgLy8gYXVkaW8gYmVmb3JlIGl0IGNvbXBsZXRlcyBwbGF5aW5nLiBMZXRzIGNoZWNrIHRoZSBub2RlIHRvIG1ha2Ugc3VyZSBpdFxuICAgICAgLy8gYmVsaWV2ZXMgaXQgaGFzIGNvbXBsZXRlZCwgYmVmb3JlIGVuZGluZyB0aGUgcGxheWJhY2suXG4gICAgICBpZiAoIXNlbGYuX3dlYkF1ZGlvICYmIHNvdW5kLl9ub2RlICYmICFzb3VuZC5fbm9kZS5wYXVzZWQgJiYgIXNvdW5kLl9ub2RlLmVuZGVkICYmIHNvdW5kLl9ub2RlLmN1cnJlbnRUaW1lIDwgc291bmQuX3N0b3ApIHtcbiAgICAgICAgc2V0VGltZW91dChzZWxmLl9lbmRlZC5iaW5kKHNlbGYsIHNvdW5kKSwgMTAwKTtcbiAgICAgICAgcmV0dXJuIHNlbGY7XG4gICAgICB9XG5cbiAgICAgIC8vIFNob3VsZCB0aGlzIHNvdW5kIGxvb3A/XG4gICAgICB2YXIgbG9vcCA9ICEhKHNvdW5kLl9sb29wIHx8IHNlbGYuX3Nwcml0ZVtzcHJpdGVdWzJdKTtcblxuICAgICAgLy8gRmlyZSB0aGUgZW5kZWQgZXZlbnQuXG4gICAgICBzZWxmLl9lbWl0KCdlbmQnLCBzb3VuZC5faWQpO1xuXG4gICAgICAvLyBSZXN0YXJ0IHRoZSBwbGF5YmFjayBmb3IgSFRNTDUgQXVkaW8gbG9vcC5cbiAgICAgIGlmICghc2VsZi5fd2ViQXVkaW8gJiYgbG9vcCkge1xuICAgICAgICBzZWxmLnN0b3Aoc291bmQuX2lkLCB0cnVlKS5wbGF5KHNvdW5kLl9pZCk7XG4gICAgICB9XG5cbiAgICAgIC8vIFJlc3RhcnQgdGhpcyB0aW1lciBpZiBvbiBhIFdlYiBBdWRpbyBsb29wLlxuICAgICAgaWYgKHNlbGYuX3dlYkF1ZGlvICYmIGxvb3ApIHtcbiAgICAgICAgc2VsZi5fZW1pdCgncGxheScsIHNvdW5kLl9pZCk7XG4gICAgICAgIHNvdW5kLl9zZWVrID0gc291bmQuX3N0YXJ0IHx8IDA7XG4gICAgICAgIHNvdW5kLl9yYXRlU2VlayA9IDA7XG4gICAgICAgIHNvdW5kLl9wbGF5U3RhcnQgPSBIb3dsZXIuY3R4LmN1cnJlbnRUaW1lO1xuXG4gICAgICAgIHZhciB0aW1lb3V0ID0gKChzb3VuZC5fc3RvcCAtIHNvdW5kLl9zdGFydCkgKiAxMDAwKSAvIE1hdGguYWJzKHNvdW5kLl9yYXRlKTtcbiAgICAgICAgc2VsZi5fZW5kVGltZXJzW3NvdW5kLl9pZF0gPSBzZXRUaW1lb3V0KHNlbGYuX2VuZGVkLmJpbmQoc2VsZiwgc291bmQpLCB0aW1lb3V0KTtcbiAgICAgIH1cblxuICAgICAgLy8gTWFyayB0aGUgbm9kZSBhcyBwYXVzZWQuXG4gICAgICBpZiAoc2VsZi5fd2ViQXVkaW8gJiYgIWxvb3ApIHtcbiAgICAgICAgc291bmQuX3BhdXNlZCA9IHRydWU7XG4gICAgICAgIHNvdW5kLl9lbmRlZCA9IHRydWU7XG4gICAgICAgIHNvdW5kLl9zZWVrID0gc291bmQuX3N0YXJ0IHx8IDA7XG4gICAgICAgIHNvdW5kLl9yYXRlU2VlayA9IDA7XG4gICAgICAgIHNlbGYuX2NsZWFyVGltZXIoc291bmQuX2lkKTtcblxuICAgICAgICAvLyBDbGVhbiB1cCB0aGUgYnVmZmVyIHNvdXJjZS5cbiAgICAgICAgc2VsZi5fY2xlYW5CdWZmZXIoc291bmQuX25vZGUpO1xuXG4gICAgICAgIC8vIEF0dGVtcHQgdG8gYXV0by1zdXNwZW5kIEF1ZGlvQ29udGV4dCBpZiBubyBzb3VuZHMgYXJlIHN0aWxsIHBsYXlpbmcuXG4gICAgICAgIEhvd2xlci5fYXV0b1N1c3BlbmQoKTtcbiAgICAgIH1cblxuICAgICAgLy8gV2hlbiB1c2luZyBhIHNwcml0ZSwgZW5kIHRoZSB0cmFjay5cbiAgICAgIGlmICghc2VsZi5fd2ViQXVkaW8gJiYgIWxvb3ApIHtcbiAgICAgICAgc2VsZi5zdG9wKHNvdW5kLl9pZCwgdHJ1ZSk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBzZWxmO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBDbGVhciB0aGUgZW5kIHRpbWVyIGZvciBhIHNvdW5kIHBsYXliYWNrLlxuICAgICAqIEBwYXJhbSAge051bWJlcn0gaWQgVGhlIHNvdW5kIElELlxuICAgICAqIEByZXR1cm4ge0hvd2x9XG4gICAgICovXG4gICAgX2NsZWFyVGltZXI6IGZ1bmN0aW9uKGlkKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICAgIGlmIChzZWxmLl9lbmRUaW1lcnNbaWRdKSB7XG4gICAgICAgIC8vIENsZWFyIHRoZSB0aW1lb3V0IG9yIHJlbW92ZSB0aGUgZW5kZWQgbGlzdGVuZXIuXG4gICAgICAgIGlmICh0eXBlb2Ygc2VsZi5fZW5kVGltZXJzW2lkXSAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgIGNsZWFyVGltZW91dChzZWxmLl9lbmRUaW1lcnNbaWRdKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB2YXIgc291bmQgPSBzZWxmLl9zb3VuZEJ5SWQoaWQpO1xuICAgICAgICAgIGlmIChzb3VuZCAmJiBzb3VuZC5fbm9kZSkge1xuICAgICAgICAgICAgc291bmQuX25vZGUucmVtb3ZlRXZlbnRMaXN0ZW5lcignZW5kZWQnLCBzZWxmLl9lbmRUaW1lcnNbaWRdLCBmYWxzZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgZGVsZXRlIHNlbGYuX2VuZFRpbWVyc1tpZF07XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBzZWxmO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm4gdGhlIHNvdW5kIGlkZW50aWZpZWQgYnkgdGhpcyBJRCwgb3IgcmV0dXJuIG51bGwuXG4gICAgICogQHBhcmFtICB7TnVtYmVyfSBpZCBTb3VuZCBJRFxuICAgICAqIEByZXR1cm4ge09iamVjdH0gICAgU291bmQgb2JqZWN0IG9yIG51bGwuXG4gICAgICovXG4gICAgX3NvdW5kQnlJZDogZnVuY3Rpb24oaWQpIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgICAgLy8gTG9vcCB0aHJvdWdoIGFsbCBzb3VuZHMgYW5kIGZpbmQgdGhlIG9uZSB3aXRoIHRoaXMgSUQuXG4gICAgICBmb3IgKHZhciBpPTA7IGk8c2VsZi5fc291bmRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGlmIChpZCA9PT0gc2VsZi5fc291bmRzW2ldLl9pZCkge1xuICAgICAgICAgIHJldHVybiBzZWxmLl9zb3VuZHNbaV07XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIFJldHVybiBhbiBpbmFjdGl2ZSBzb3VuZCBmcm9tIHRoZSBwb29sIG9yIGNyZWF0ZSBhIG5ldyBvbmUuXG4gICAgICogQHJldHVybiB7U291bmR9IFNvdW5kIHBsYXliYWNrIG9iamVjdC5cbiAgICAgKi9cbiAgICBfaW5hY3RpdmVTb3VuZDogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICAgIHNlbGYuX2RyYWluKCk7XG5cbiAgICAgIC8vIEZpbmQgdGhlIGZpcnN0IGluYWN0aXZlIG5vZGUgdG8gcmVjeWNsZS5cbiAgICAgIGZvciAodmFyIGk9MDsgaTxzZWxmLl9zb3VuZHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgaWYgKHNlbGYuX3NvdW5kc1tpXS5fZW5kZWQpIHtcbiAgICAgICAgICByZXR1cm4gc2VsZi5fc291bmRzW2ldLnJlc2V0KCk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gSWYgbm8gaW5hY3RpdmUgbm9kZSB3YXMgZm91bmQsIGNyZWF0ZSBhIG5ldyBvbmUuXG4gICAgICByZXR1cm4gbmV3IFNvdW5kKHNlbGYpO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBEcmFpbiBleGNlc3MgaW5hY3RpdmUgc291bmRzIGZyb20gdGhlIHBvb2wuXG4gICAgICovXG4gICAgX2RyYWluOiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgIHZhciBsaW1pdCA9IHNlbGYuX3Bvb2w7XG4gICAgICB2YXIgY250ID0gMDtcbiAgICAgIHZhciBpID0gMDtcblxuICAgICAgLy8gSWYgdGhlcmUgYXJlIGxlc3Mgc291bmRzIHRoYW4gdGhlIG1heCBwb29sIHNpemUsIHdlIGFyZSBkb25lLlxuICAgICAgaWYgKHNlbGYuX3NvdW5kcy5sZW5ndGggPCBsaW1pdCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIC8vIENvdW50IHRoZSBudW1iZXIgb2YgaW5hY3RpdmUgc291bmRzLlxuICAgICAgZm9yIChpPTA7IGk8c2VsZi5fc291bmRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGlmIChzZWxmLl9zb3VuZHNbaV0uX2VuZGVkKSB7XG4gICAgICAgICAgY250Kys7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gUmVtb3ZlIGV4Y2VzcyBpbmFjdGl2ZSBzb3VuZHMsIGdvaW5nIGluIHJldmVyc2Ugb3JkZXIuXG4gICAgICBmb3IgKGk9c2VsZi5fc291bmRzLmxlbmd0aCAtIDE7IGk+PTA7IGktLSkge1xuICAgICAgICBpZiAoY250IDw9IGxpbWl0KSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHNlbGYuX3NvdW5kc1tpXS5fZW5kZWQpIHtcbiAgICAgICAgICAvLyBEaXNjb25uZWN0IHRoZSBhdWRpbyBzb3VyY2Ugd2hlbiB1c2luZyBXZWIgQXVkaW8uXG4gICAgICAgICAgaWYgKHNlbGYuX3dlYkF1ZGlvICYmIHNlbGYuX3NvdW5kc1tpXS5fbm9kZSkge1xuICAgICAgICAgICAgc2VsZi5fc291bmRzW2ldLl9ub2RlLmRpc2Nvbm5lY3QoMCk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLy8gUmVtb3ZlIHNvdW5kcyB1bnRpbCB3ZSBoYXZlIHRoZSBwb29sIHNpemUuXG4gICAgICAgICAgc2VsZi5fc291bmRzLnNwbGljZShpLCAxKTtcbiAgICAgICAgICBjbnQtLTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBHZXQgYWxsIElEJ3MgZnJvbSB0aGUgc291bmRzIHBvb2wuXG4gICAgICogQHBhcmFtICB7TnVtYmVyfSBpZCBPbmx5IHJldHVybiBvbmUgSUQgaWYgb25lIGlzIHBhc3NlZC5cbiAgICAgKiBAcmV0dXJuIHtBcnJheX0gICAgQXJyYXkgb2YgSURzLlxuICAgICAqL1xuICAgIF9nZXRTb3VuZElkczogZnVuY3Rpb24oaWQpIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgICAgaWYgKHR5cGVvZiBpZCA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgdmFyIGlkcyA9IFtdO1xuICAgICAgICBmb3IgKHZhciBpPTA7IGk8c2VsZi5fc291bmRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgaWRzLnB1c2goc2VsZi5fc291bmRzW2ldLl9pZCk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gaWRzO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIFtpZF07XG4gICAgICB9XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIExvYWQgdGhlIHNvdW5kIGJhY2sgaW50byB0aGUgYnVmZmVyIHNvdXJjZS5cbiAgICAgKiBAcGFyYW0gIHtTb3VuZH0gc291bmQgVGhlIHNvdW5kIG9iamVjdCB0byB3b3JrIHdpdGguXG4gICAgICogQHJldHVybiB7SG93bH1cbiAgICAgKi9cbiAgICBfcmVmcmVzaEJ1ZmZlcjogZnVuY3Rpb24oc291bmQpIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgICAgLy8gU2V0dXAgdGhlIGJ1ZmZlciBzb3VyY2UgZm9yIHBsYXliYWNrLlxuICAgICAgc291bmQuX25vZGUuYnVmZmVyU291cmNlID0gSG93bGVyLmN0eC5jcmVhdGVCdWZmZXJTb3VyY2UoKTtcbiAgICAgIHNvdW5kLl9ub2RlLmJ1ZmZlclNvdXJjZS5idWZmZXIgPSBjYWNoZVtzZWxmLl9zcmNdO1xuXG4gICAgICAvLyBDb25uZWN0IHRvIHRoZSBjb3JyZWN0IG5vZGUuXG4gICAgICBpZiAoc291bmQuX3Bhbm5lcikge1xuICAgICAgICBzb3VuZC5fbm9kZS5idWZmZXJTb3VyY2UuY29ubmVjdChzb3VuZC5fcGFubmVyKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHNvdW5kLl9ub2RlLmJ1ZmZlclNvdXJjZS5jb25uZWN0KHNvdW5kLl9ub2RlKTtcbiAgICAgIH1cblxuICAgICAgLy8gU2V0dXAgbG9vcGluZyBhbmQgcGxheWJhY2sgcmF0ZS5cbiAgICAgIHNvdW5kLl9ub2RlLmJ1ZmZlclNvdXJjZS5sb29wID0gc291bmQuX2xvb3A7XG4gICAgICBpZiAoc291bmQuX2xvb3ApIHtcbiAgICAgICAgc291bmQuX25vZGUuYnVmZmVyU291cmNlLmxvb3BTdGFydCA9IHNvdW5kLl9zdGFydCB8fCAwO1xuICAgICAgICBzb3VuZC5fbm9kZS5idWZmZXJTb3VyY2UubG9vcEVuZCA9IHNvdW5kLl9zdG9wIHx8IDA7XG4gICAgICB9XG4gICAgICBzb3VuZC5fbm9kZS5idWZmZXJTb3VyY2UucGxheWJhY2tSYXRlLnNldFZhbHVlQXRUaW1lKHNvdW5kLl9yYXRlLCBIb3dsZXIuY3R4LmN1cnJlbnRUaW1lKTtcblxuICAgICAgcmV0dXJuIHNlbGY7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIFByZXZlbnQgbWVtb3J5IGxlYWtzIGJ5IGNsZWFuaW5nIHVwIHRoZSBidWZmZXIgc291cmNlIGFmdGVyIHBsYXliYWNrLlxuICAgICAqIEBwYXJhbSAge09iamVjdH0gbm9kZSBTb3VuZCdzIGF1ZGlvIG5vZGUgY29udGFpbmluZyB0aGUgYnVmZmVyIHNvdXJjZS5cbiAgICAgKiBAcmV0dXJuIHtIb3dsfVxuICAgICAqL1xuICAgIF9jbGVhbkJ1ZmZlcjogZnVuY3Rpb24obm9kZSkge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgdmFyIGlzSU9TID0gSG93bGVyLl9uYXZpZ2F0b3IgJiYgSG93bGVyLl9uYXZpZ2F0b3IudmVuZG9yLmluZGV4T2YoJ0FwcGxlJykgPj0gMDtcblxuICAgICAgaWYgKEhvd2xlci5fc2NyYXRjaEJ1ZmZlciAmJiBub2RlLmJ1ZmZlclNvdXJjZSkge1xuICAgICAgICBub2RlLmJ1ZmZlclNvdXJjZS5vbmVuZGVkID0gbnVsbDtcbiAgICAgICAgbm9kZS5idWZmZXJTb3VyY2UuZGlzY29ubmVjdCgwKTtcbiAgICAgICAgaWYgKGlzSU9TKSB7XG4gICAgICAgICAgdHJ5IHsgbm9kZS5idWZmZXJTb3VyY2UuYnVmZmVyID0gSG93bGVyLl9zY3JhdGNoQnVmZmVyOyB9IGNhdGNoKGUpIHt9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIG5vZGUuYnVmZmVyU291cmNlID0gbnVsbDtcblxuICAgICAgcmV0dXJuIHNlbGY7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIFNldCB0aGUgc291cmNlIHRvIGEgMC1zZWNvbmQgc2lsZW5jZSB0byBzdG9wIGFueSBkb3dubG9hZGluZyAoZXhjZXB0IGluIElFKS5cbiAgICAgKiBAcGFyYW0gIHtPYmplY3R9IG5vZGUgQXVkaW8gbm9kZSB0byBjbGVhci5cbiAgICAgKi9cbiAgICBfY2xlYXJTb3VuZDogZnVuY3Rpb24obm9kZSkge1xuICAgICAgdmFyIGNoZWNrSUUgPSAvTVNJRSB8VHJpZGVudFxcLy8udGVzdChIb3dsZXIuX25hdmlnYXRvciAmJiBIb3dsZXIuX25hdmlnYXRvci51c2VyQWdlbnQpO1xuICAgICAgaWYgKCFjaGVja0lFKSB7XG4gICAgICAgIG5vZGUuc3JjID0gJ2RhdGE6YXVkaW8vd2F2O2Jhc2U2NCxVa2xHUmlnQUFBQlhRVlpGWm0xMElCSUFBQUFCQUFFQVJLd0FBSWhZQVFBQ0FCQUFBQUJrWVhSaEFnQUFBQUVBJztcbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgLyoqIFNpbmdsZSBTb3VuZCBNZXRob2RzICoqL1xuICAvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuXG4gIC8qKlxuICAgKiBTZXR1cCB0aGUgc291bmQgb2JqZWN0LCB3aGljaCBlYWNoIG5vZGUgYXR0YWNoZWQgdG8gYSBIb3dsIGdyb3VwIGlzIGNvbnRhaW5lZCBpbi5cbiAgICogQHBhcmFtIHtPYmplY3R9IGhvd2wgVGhlIEhvd2wgcGFyZW50IGdyb3VwLlxuICAgKi9cbiAgdmFyIFNvdW5kID0gZnVuY3Rpb24oaG93bCkge1xuICAgIHRoaXMuX3BhcmVudCA9IGhvd2w7XG4gICAgdGhpcy5pbml0KCk7XG4gIH07XG4gIFNvdW5kLnByb3RvdHlwZSA9IHtcbiAgICAvKipcbiAgICAgKiBJbml0aWFsaXplIGEgbmV3IFNvdW5kIG9iamVjdC5cbiAgICAgKiBAcmV0dXJuIHtTb3VuZH1cbiAgICAgKi9cbiAgICBpbml0OiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgIHZhciBwYXJlbnQgPSBzZWxmLl9wYXJlbnQ7XG5cbiAgICAgIC8vIFNldHVwIHRoZSBkZWZhdWx0IHBhcmFtZXRlcnMuXG4gICAgICBzZWxmLl9tdXRlZCA9IHBhcmVudC5fbXV0ZWQ7XG4gICAgICBzZWxmLl9sb29wID0gcGFyZW50Ll9sb29wO1xuICAgICAgc2VsZi5fdm9sdW1lID0gcGFyZW50Ll92b2x1bWU7XG4gICAgICBzZWxmLl9yYXRlID0gcGFyZW50Ll9yYXRlO1xuICAgICAgc2VsZi5fc2VlayA9IDA7XG4gICAgICBzZWxmLl9wYXVzZWQgPSB0cnVlO1xuICAgICAgc2VsZi5fZW5kZWQgPSB0cnVlO1xuICAgICAgc2VsZi5fc3ByaXRlID0gJ19fZGVmYXVsdCc7XG5cbiAgICAgIC8vIEdlbmVyYXRlIGEgdW5pcXVlIElEIGZvciB0aGlzIHNvdW5kLlxuICAgICAgc2VsZi5faWQgPSArK0hvd2xlci5fY291bnRlcjtcblxuICAgICAgLy8gQWRkIGl0c2VsZiB0byB0aGUgcGFyZW50J3MgcG9vbC5cbiAgICAgIHBhcmVudC5fc291bmRzLnB1c2goc2VsZik7XG5cbiAgICAgIC8vIENyZWF0ZSB0aGUgbmV3IG5vZGUuXG4gICAgICBzZWxmLmNyZWF0ZSgpO1xuXG4gICAgICByZXR1cm4gc2VsZjtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlIGFuZCBzZXR1cCBhIG5ldyBzb3VuZCBvYmplY3QsIHdoZXRoZXIgSFRNTDUgQXVkaW8gb3IgV2ViIEF1ZGlvLlxuICAgICAqIEByZXR1cm4ge1NvdW5kfVxuICAgICAqL1xuICAgIGNyZWF0ZTogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICB2YXIgcGFyZW50ID0gc2VsZi5fcGFyZW50O1xuICAgICAgdmFyIHZvbHVtZSA9IChIb3dsZXIuX211dGVkIHx8IHNlbGYuX211dGVkIHx8IHNlbGYuX3BhcmVudC5fbXV0ZWQpID8gMCA6IHNlbGYuX3ZvbHVtZTtcblxuICAgICAgaWYgKHBhcmVudC5fd2ViQXVkaW8pIHtcbiAgICAgICAgLy8gQ3JlYXRlIHRoZSBnYWluIG5vZGUgZm9yIGNvbnRyb2xsaW5nIHZvbHVtZSAodGhlIHNvdXJjZSB3aWxsIGNvbm5lY3QgdG8gdGhpcykuXG4gICAgICAgIHNlbGYuX25vZGUgPSAodHlwZW9mIEhvd2xlci5jdHguY3JlYXRlR2FpbiA9PT0gJ3VuZGVmaW5lZCcpID8gSG93bGVyLmN0eC5jcmVhdGVHYWluTm9kZSgpIDogSG93bGVyLmN0eC5jcmVhdGVHYWluKCk7XG4gICAgICAgIHNlbGYuX25vZGUuZ2Fpbi5zZXRWYWx1ZUF0VGltZSh2b2x1bWUsIEhvd2xlci5jdHguY3VycmVudFRpbWUpO1xuICAgICAgICBzZWxmLl9ub2RlLnBhdXNlZCA9IHRydWU7XG4gICAgICAgIHNlbGYuX25vZGUuY29ubmVjdChIb3dsZXIubWFzdGVyR2Fpbik7XG4gICAgICB9IGVsc2UgaWYgKCFIb3dsZXIubm9BdWRpbykge1xuICAgICAgICAvLyBHZXQgYW4gdW5sb2NrZWQgQXVkaW8gb2JqZWN0IGZyb20gdGhlIHBvb2wuXG4gICAgICAgIHNlbGYuX25vZGUgPSBIb3dsZXIuX29idGFpbkh0bWw1QXVkaW8oKTtcblxuICAgICAgICAvLyBMaXN0ZW4gZm9yIGVycm9ycyAoaHR0cDovL2Rldi53My5vcmcvaHRtbDUvc3BlYy1hdXRob3Itdmlldy9zcGVjLmh0bWwjbWVkaWFlcnJvcikuXG4gICAgICAgIHNlbGYuX2Vycm9yRm4gPSBzZWxmLl9lcnJvckxpc3RlbmVyLmJpbmQoc2VsZik7XG4gICAgICAgIHNlbGYuX25vZGUuYWRkRXZlbnRMaXN0ZW5lcignZXJyb3InLCBzZWxmLl9lcnJvckZuLCBmYWxzZSk7XG5cbiAgICAgICAgLy8gTGlzdGVuIGZvciAnY2FucGxheXRocm91Z2gnIGV2ZW50IHRvIGxldCB1cyBrbm93IHRoZSBzb3VuZCBpcyByZWFkeS5cbiAgICAgICAgc2VsZi5fbG9hZEZuID0gc2VsZi5fbG9hZExpc3RlbmVyLmJpbmQoc2VsZik7XG4gICAgICAgIHNlbGYuX25vZGUuYWRkRXZlbnRMaXN0ZW5lcihIb3dsZXIuX2NhblBsYXlFdmVudCwgc2VsZi5fbG9hZEZuLCBmYWxzZSk7XG5cbiAgICAgICAgLy8gTGlzdGVuIGZvciB0aGUgJ2VuZGVkJyBldmVudCBvbiB0aGUgc291bmQgdG8gYWNjb3VudCBmb3IgZWRnZS1jYXNlIHdoZXJlXG4gICAgICAgIC8vIGEgZmluaXRlIHNvdW5kIGhhcyBhIGR1cmF0aW9uIG9mIEluZmluaXR5LlxuICAgICAgICBzZWxmLl9lbmRGbiA9IHNlbGYuX2VuZExpc3RlbmVyLmJpbmQoc2VsZik7XG4gICAgICAgIHNlbGYuX25vZGUuYWRkRXZlbnRMaXN0ZW5lcignZW5kZWQnLCBzZWxmLl9lbmRGbiwgZmFsc2UpO1xuXG4gICAgICAgIC8vIFNldHVwIHRoZSBuZXcgYXVkaW8gbm9kZS5cbiAgICAgICAgc2VsZi5fbm9kZS5zcmMgPSBwYXJlbnQuX3NyYztcbiAgICAgICAgc2VsZi5fbm9kZS5wcmVsb2FkID0gcGFyZW50Ll9wcmVsb2FkID09PSB0cnVlID8gJ2F1dG8nIDogcGFyZW50Ll9wcmVsb2FkO1xuICAgICAgICBzZWxmLl9ub2RlLnZvbHVtZSA9IHZvbHVtZSAqIEhvd2xlci52b2x1bWUoKTtcblxuICAgICAgICAvLyBCZWdpbiBsb2FkaW5nIHRoZSBzb3VyY2UuXG4gICAgICAgIHNlbGYuX25vZGUubG9hZCgpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gc2VsZjtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogUmVzZXQgdGhlIHBhcmFtZXRlcnMgb2YgdGhpcyBzb3VuZCB0byB0aGUgb3JpZ2luYWwgc3RhdGUgKGZvciByZWN5Y2xlKS5cbiAgICAgKiBAcmV0dXJuIHtTb3VuZH1cbiAgICAgKi9cbiAgICByZXNldDogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICB2YXIgcGFyZW50ID0gc2VsZi5fcGFyZW50O1xuXG4gICAgICAvLyBSZXNldCBhbGwgb2YgdGhlIHBhcmFtZXRlcnMgb2YgdGhpcyBzb3VuZC5cbiAgICAgIHNlbGYuX211dGVkID0gcGFyZW50Ll9tdXRlZDtcbiAgICAgIHNlbGYuX2xvb3AgPSBwYXJlbnQuX2xvb3A7XG4gICAgICBzZWxmLl92b2x1bWUgPSBwYXJlbnQuX3ZvbHVtZTtcbiAgICAgIHNlbGYuX3JhdGUgPSBwYXJlbnQuX3JhdGU7XG4gICAgICBzZWxmLl9zZWVrID0gMDtcbiAgICAgIHNlbGYuX3JhdGVTZWVrID0gMDtcbiAgICAgIHNlbGYuX3BhdXNlZCA9IHRydWU7XG4gICAgICBzZWxmLl9lbmRlZCA9IHRydWU7XG4gICAgICBzZWxmLl9zcHJpdGUgPSAnX19kZWZhdWx0JztcblxuICAgICAgLy8gR2VuZXJhdGUgYSBuZXcgSUQgc28gdGhhdCBpdCBpc24ndCBjb25mdXNlZCB3aXRoIHRoZSBwcmV2aW91cyBzb3VuZC5cbiAgICAgIHNlbGYuX2lkID0gKytIb3dsZXIuX2NvdW50ZXI7XG5cbiAgICAgIHJldHVybiBzZWxmO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBIVE1MNSBBdWRpbyBlcnJvciBsaXN0ZW5lciBjYWxsYmFjay5cbiAgICAgKi9cbiAgICBfZXJyb3JMaXN0ZW5lcjogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICAgIC8vIEZpcmUgYW4gZXJyb3IgZXZlbnQgYW5kIHBhc3MgYmFjayB0aGUgY29kZS5cbiAgICAgIHNlbGYuX3BhcmVudC5fZW1pdCgnbG9hZGVycm9yJywgc2VsZi5faWQsIHNlbGYuX25vZGUuZXJyb3IgPyBzZWxmLl9ub2RlLmVycm9yLmNvZGUgOiAwKTtcblxuICAgICAgLy8gQ2xlYXIgdGhlIGV2ZW50IGxpc3RlbmVyLlxuICAgICAgc2VsZi5fbm9kZS5yZW1vdmVFdmVudExpc3RlbmVyKCdlcnJvcicsIHNlbGYuX2Vycm9yRm4sIGZhbHNlKTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogSFRNTDUgQXVkaW8gY2FucGxheXRocm91Z2ggbGlzdGVuZXIgY2FsbGJhY2suXG4gICAgICovXG4gICAgX2xvYWRMaXN0ZW5lcjogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICB2YXIgcGFyZW50ID0gc2VsZi5fcGFyZW50O1xuXG4gICAgICAvLyBSb3VuZCB1cCB0aGUgZHVyYXRpb24gdG8gYWNjb3VudCBmb3IgdGhlIGxvd2VyIHByZWNpc2lvbiBpbiBIVE1MNSBBdWRpby5cbiAgICAgIHBhcmVudC5fZHVyYXRpb24gPSBNYXRoLmNlaWwoc2VsZi5fbm9kZS5kdXJhdGlvbiAqIDEwKSAvIDEwO1xuXG4gICAgICAvLyBTZXR1cCBhIHNwcml0ZSBpZiBub25lIGlzIGRlZmluZWQuXG4gICAgICBpZiAoT2JqZWN0LmtleXMocGFyZW50Ll9zcHJpdGUpLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICBwYXJlbnQuX3Nwcml0ZSA9IHtfX2RlZmF1bHQ6IFswLCBwYXJlbnQuX2R1cmF0aW9uICogMTAwMF19O1xuICAgICAgfVxuXG4gICAgICBpZiAocGFyZW50Ll9zdGF0ZSAhPT0gJ2xvYWRlZCcpIHtcbiAgICAgICAgcGFyZW50Ll9zdGF0ZSA9ICdsb2FkZWQnO1xuICAgICAgICBwYXJlbnQuX2VtaXQoJ2xvYWQnKTtcbiAgICAgICAgcGFyZW50Ll9sb2FkUXVldWUoKTtcbiAgICAgIH1cblxuICAgICAgLy8gQ2xlYXIgdGhlIGV2ZW50IGxpc3RlbmVyLlxuICAgICAgc2VsZi5fbm9kZS5yZW1vdmVFdmVudExpc3RlbmVyKEhvd2xlci5fY2FuUGxheUV2ZW50LCBzZWxmLl9sb2FkRm4sIGZhbHNlKTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogSFRNTDUgQXVkaW8gZW5kZWQgbGlzdGVuZXIgY2FsbGJhY2suXG4gICAgICovXG4gICAgX2VuZExpc3RlbmVyOiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgIHZhciBwYXJlbnQgPSBzZWxmLl9wYXJlbnQ7XG5cbiAgICAgIC8vIE9ubHkgaGFuZGxlIHRoZSBgZW5kZWRgYCBldmVudCBpZiB0aGUgZHVyYXRpb24gaXMgSW5maW5pdHkuXG4gICAgICBpZiAocGFyZW50Ll9kdXJhdGlvbiA9PT0gSW5maW5pdHkpIHtcbiAgICAgICAgLy8gVXBkYXRlIHRoZSBwYXJlbnQgZHVyYXRpb24gdG8gbWF0Y2ggdGhlIHJlYWwgYXVkaW8gZHVyYXRpb24uXG4gICAgICAgIC8vIFJvdW5kIHVwIHRoZSBkdXJhdGlvbiB0byBhY2NvdW50IGZvciB0aGUgbG93ZXIgcHJlY2lzaW9uIGluIEhUTUw1IEF1ZGlvLlxuICAgICAgICBwYXJlbnQuX2R1cmF0aW9uID0gTWF0aC5jZWlsKHNlbGYuX25vZGUuZHVyYXRpb24gKiAxMCkgLyAxMDtcblxuICAgICAgICAvLyBVcGRhdGUgdGhlIHNwcml0ZSB0aGF0IGNvcnJlc3BvbmRzIHRvIHRoZSByZWFsIGR1cmF0aW9uLlxuICAgICAgICBpZiAocGFyZW50Ll9zcHJpdGUuX19kZWZhdWx0WzFdID09PSBJbmZpbml0eSkge1xuICAgICAgICAgIHBhcmVudC5fc3ByaXRlLl9fZGVmYXVsdFsxXSA9IHBhcmVudC5fZHVyYXRpb24gKiAxMDAwO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gUnVuIHRoZSByZWd1bGFyIGVuZGVkIG1ldGhvZC5cbiAgICAgICAgcGFyZW50Ll9lbmRlZChzZWxmKTtcbiAgICAgIH1cblxuICAgICAgLy8gQ2xlYXIgdGhlIGV2ZW50IGxpc3RlbmVyIHNpbmNlIHRoZSBkdXJhdGlvbiBpcyBub3cgY29ycmVjdC5cbiAgICAgIHNlbGYuX25vZGUucmVtb3ZlRXZlbnRMaXN0ZW5lcignZW5kZWQnLCBzZWxmLl9lbmRGbiwgZmFsc2UpO1xuICAgIH1cbiAgfTtcblxuICAvKiogSGVscGVyIE1ldGhvZHMgKiovXG4gIC8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG5cbiAgdmFyIGNhY2hlID0ge307XG5cbiAgLyoqXG4gICAqIEJ1ZmZlciBhIHNvdW5kIGZyb20gVVJMLCBEYXRhIFVSSSBvciBjYWNoZSBhbmQgZGVjb2RlIHRvIGF1ZGlvIHNvdXJjZSAoV2ViIEF1ZGlvIEFQSSkuXG4gICAqIEBwYXJhbSAge0hvd2x9IHNlbGZcbiAgICovXG4gIHZhciBsb2FkQnVmZmVyID0gZnVuY3Rpb24oc2VsZikge1xuICAgIHZhciB1cmwgPSBzZWxmLl9zcmM7XG5cbiAgICAvLyBDaGVjayBpZiB0aGUgYnVmZmVyIGhhcyBhbHJlYWR5IGJlZW4gY2FjaGVkIGFuZCB1c2UgaXQgaW5zdGVhZC5cbiAgICBpZiAoY2FjaGVbdXJsXSkge1xuICAgICAgLy8gU2V0IHRoZSBkdXJhdGlvbiBmcm9tIHRoZSBjYWNoZS5cbiAgICAgIHNlbGYuX2R1cmF0aW9uID0gY2FjaGVbdXJsXS5kdXJhdGlvbjtcblxuICAgICAgLy8gTG9hZCB0aGUgc291bmQgaW50byB0aGlzIEhvd2wuXG4gICAgICBsb2FkU291bmQoc2VsZik7XG5cbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAoL15kYXRhOlteO10rO2Jhc2U2NCwvLnRlc3QodXJsKSkge1xuICAgICAgLy8gRGVjb2RlIHRoZSBiYXNlNjQgZGF0YSBVUkkgd2l0aG91dCBYSFIsIHNpbmNlIHNvbWUgYnJvd3NlcnMgZG9uJ3Qgc3VwcG9ydCBpdC5cbiAgICAgIHZhciBkYXRhID0gYXRvYih1cmwuc3BsaXQoJywnKVsxXSk7XG4gICAgICB2YXIgZGF0YVZpZXcgPSBuZXcgVWludDhBcnJheShkYXRhLmxlbmd0aCk7XG4gICAgICBmb3IgKHZhciBpPTA7IGk8ZGF0YS5sZW5ndGg7ICsraSkge1xuICAgICAgICBkYXRhVmlld1tpXSA9IGRhdGEuY2hhckNvZGVBdChpKTtcbiAgICAgIH1cblxuICAgICAgZGVjb2RlQXVkaW9EYXRhKGRhdGFWaWV3LmJ1ZmZlciwgc2VsZik7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIExvYWQgdGhlIGJ1ZmZlciBmcm9tIHRoZSBVUkwuXG4gICAgICB2YXIgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG4gICAgICB4aHIub3BlbihzZWxmLl94aHIubWV0aG9kLCB1cmwsIHRydWUpO1xuICAgICAgeGhyLndpdGhDcmVkZW50aWFscyA9IHNlbGYuX3hoci53aXRoQ3JlZGVudGlhbHM7XG4gICAgICB4aHIucmVzcG9uc2VUeXBlID0gJ2FycmF5YnVmZmVyJztcblxuICAgICAgLy8gQXBwbHkgYW55IGN1c3RvbSBoZWFkZXJzIHRvIHRoZSByZXF1ZXN0LlxuICAgICAgaWYgKHNlbGYuX3hoci5oZWFkZXJzKSB7XG4gICAgICAgIE9iamVjdC5rZXlzKHNlbGYuX3hoci5oZWFkZXJzKS5mb3JFYWNoKGZ1bmN0aW9uKGtleSkge1xuICAgICAgICAgIHhoci5zZXRSZXF1ZXN0SGVhZGVyKGtleSwgc2VsZi5feGhyLmhlYWRlcnNba2V5XSk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICB4aHIub25sb2FkID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIC8vIE1ha2Ugc3VyZSB3ZSBnZXQgYSBzdWNjZXNzZnVsIHJlc3BvbnNlIGJhY2suXG4gICAgICAgIHZhciBjb2RlID0gKHhoci5zdGF0dXMgKyAnJylbMF07XG4gICAgICAgIGlmIChjb2RlICE9PSAnMCcgJiYgY29kZSAhPT0gJzInICYmIGNvZGUgIT09ICczJykge1xuICAgICAgICAgIHNlbGYuX2VtaXQoJ2xvYWRlcnJvcicsIG51bGwsICdGYWlsZWQgbG9hZGluZyBhdWRpbyBmaWxlIHdpdGggc3RhdHVzOiAnICsgeGhyLnN0YXR1cyArICcuJyk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgZGVjb2RlQXVkaW9EYXRhKHhoci5yZXNwb25zZSwgc2VsZik7XG4gICAgICB9O1xuICAgICAgeGhyLm9uZXJyb3IgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgLy8gSWYgdGhlcmUgaXMgYW4gZXJyb3IsIHN3aXRjaCB0byBIVE1MNSBBdWRpby5cbiAgICAgICAgaWYgKHNlbGYuX3dlYkF1ZGlvKSB7XG4gICAgICAgICAgc2VsZi5faHRtbDUgPSB0cnVlO1xuICAgICAgICAgIHNlbGYuX3dlYkF1ZGlvID0gZmFsc2U7XG4gICAgICAgICAgc2VsZi5fc291bmRzID0gW107XG4gICAgICAgICAgZGVsZXRlIGNhY2hlW3VybF07XG4gICAgICAgICAgc2VsZi5sb2FkKCk7XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgICBzYWZlWGhyU2VuZCh4aHIpO1xuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogU2VuZCB0aGUgWEhSIHJlcXVlc3Qgd3JhcHBlZCBpbiBhIHRyeS9jYXRjaC5cbiAgICogQHBhcmFtICB7T2JqZWN0fSB4aHIgWEhSIHRvIHNlbmQuXG4gICAqL1xuICB2YXIgc2FmZVhoclNlbmQgPSBmdW5jdGlvbih4aHIpIHtcbiAgICB0cnkge1xuICAgICAgeGhyLnNlbmQoKTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICB4aHIub25lcnJvcigpO1xuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogRGVjb2RlIGF1ZGlvIGRhdGEgZnJvbSBhbiBhcnJheSBidWZmZXIuXG4gICAqIEBwYXJhbSAge0FycmF5QnVmZmVyfSBhcnJheWJ1ZmZlciBUaGUgYXVkaW8gZGF0YS5cbiAgICogQHBhcmFtICB7SG93bH0gICAgICAgIHNlbGZcbiAgICovXG4gIHZhciBkZWNvZGVBdWRpb0RhdGEgPSBmdW5jdGlvbihhcnJheWJ1ZmZlciwgc2VsZikge1xuICAgIC8vIEZpcmUgYSBsb2FkIGVycm9yIGlmIHNvbWV0aGluZyBicm9rZS5cbiAgICB2YXIgZXJyb3IgPSBmdW5jdGlvbigpIHtcbiAgICAgIHNlbGYuX2VtaXQoJ2xvYWRlcnJvcicsIG51bGwsICdEZWNvZGluZyBhdWRpbyBkYXRhIGZhaWxlZC4nKTtcbiAgICB9O1xuXG4gICAgLy8gTG9hZCB0aGUgc291bmQgb24gc3VjY2Vzcy5cbiAgICB2YXIgc3VjY2VzcyA9IGZ1bmN0aW9uKGJ1ZmZlcikge1xuICAgICAgaWYgKGJ1ZmZlciAmJiBzZWxmLl9zb3VuZHMubGVuZ3RoID4gMCkge1xuICAgICAgICBjYWNoZVtzZWxmLl9zcmNdID0gYnVmZmVyO1xuICAgICAgICBsb2FkU291bmQoc2VsZiwgYnVmZmVyKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGVycm9yKCk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIC8vIERlY29kZSB0aGUgYnVmZmVyIGludG8gYW4gYXVkaW8gc291cmNlLlxuICAgIGlmICh0eXBlb2YgUHJvbWlzZSAhPT0gJ3VuZGVmaW5lZCcgJiYgSG93bGVyLmN0eC5kZWNvZGVBdWRpb0RhdGEubGVuZ3RoID09PSAxKSB7XG4gICAgICBIb3dsZXIuY3R4LmRlY29kZUF1ZGlvRGF0YShhcnJheWJ1ZmZlcikudGhlbihzdWNjZXNzKS5jYXRjaChlcnJvcik7XG4gICAgfSBlbHNlIHtcbiAgICAgIEhvd2xlci5jdHguZGVjb2RlQXVkaW9EYXRhKGFycmF5YnVmZmVyLCBzdWNjZXNzLCBlcnJvcik7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFNvdW5kIGlzIG5vdyBsb2FkZWQsIHNvIGZpbmlzaCBzZXR0aW5nIGV2ZXJ5dGhpbmcgdXAgYW5kIGZpcmUgdGhlIGxvYWRlZCBldmVudC5cbiAgICogQHBhcmFtICB7SG93bH0gc2VsZlxuICAgKiBAcGFyYW0gIHtPYmplY3R9IGJ1ZmZlciBUaGUgZGVjb2RlZCBidWZmZXIgc291bmQgc291cmNlLlxuICAgKi9cbiAgdmFyIGxvYWRTb3VuZCA9IGZ1bmN0aW9uKHNlbGYsIGJ1ZmZlcikge1xuICAgIC8vIFNldCB0aGUgZHVyYXRpb24uXG4gICAgaWYgKGJ1ZmZlciAmJiAhc2VsZi5fZHVyYXRpb24pIHtcbiAgICAgIHNlbGYuX2R1cmF0aW9uID0gYnVmZmVyLmR1cmF0aW9uO1xuICAgIH1cblxuICAgIC8vIFNldHVwIGEgc3ByaXRlIGlmIG5vbmUgaXMgZGVmaW5lZC5cbiAgICBpZiAoT2JqZWN0LmtleXMoc2VsZi5fc3ByaXRlKS5sZW5ndGggPT09IDApIHtcbiAgICAgIHNlbGYuX3Nwcml0ZSA9IHtfX2RlZmF1bHQ6IFswLCBzZWxmLl9kdXJhdGlvbiAqIDEwMDBdfTtcbiAgICB9XG5cbiAgICAvLyBGaXJlIHRoZSBsb2FkZWQgZXZlbnQuXG4gICAgaWYgKHNlbGYuX3N0YXRlICE9PSAnbG9hZGVkJykge1xuICAgICAgc2VsZi5fc3RhdGUgPSAnbG9hZGVkJztcbiAgICAgIHNlbGYuX2VtaXQoJ2xvYWQnKTtcbiAgICAgIHNlbGYuX2xvYWRRdWV1ZSgpO1xuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogU2V0dXAgdGhlIGF1ZGlvIGNvbnRleHQgd2hlbiBhdmFpbGFibGUsIG9yIHN3aXRjaCB0byBIVE1MNSBBdWRpbyBtb2RlLlxuICAgKi9cbiAgdmFyIHNldHVwQXVkaW9Db250ZXh0ID0gZnVuY3Rpb24oKSB7XG4gICAgLy8gSWYgd2UgaGF2ZSBhbHJlYWR5IGRldGVjdGVkIHRoYXQgV2ViIEF1ZGlvIGlzbid0IHN1cHBvcnRlZCwgZG9uJ3QgcnVuIHRoaXMgc3RlcCBhZ2Fpbi5cbiAgICBpZiAoIUhvd2xlci51c2luZ1dlYkF1ZGlvKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gQ2hlY2sgaWYgd2UgYXJlIHVzaW5nIFdlYiBBdWRpbyBhbmQgc2V0dXAgdGhlIEF1ZGlvQ29udGV4dCBpZiB3ZSBhcmUuXG4gICAgdHJ5IHtcbiAgICAgIGlmICh0eXBlb2YgQXVkaW9Db250ZXh0ICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICBIb3dsZXIuY3R4ID0gbmV3IEF1ZGlvQ29udGV4dCgpO1xuICAgICAgfSBlbHNlIGlmICh0eXBlb2Ygd2Via2l0QXVkaW9Db250ZXh0ICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICBIb3dsZXIuY3R4ID0gbmV3IHdlYmtpdEF1ZGlvQ29udGV4dCgpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgSG93bGVyLnVzaW5nV2ViQXVkaW8gPSBmYWxzZTtcbiAgICAgIH1cbiAgICB9IGNhdGNoKGUpIHtcbiAgICAgIEhvd2xlci51c2luZ1dlYkF1ZGlvID0gZmFsc2U7XG4gICAgfVxuXG4gICAgLy8gSWYgdGhlIGF1ZGlvIGNvbnRleHQgY3JlYXRpb24gc3RpbGwgZmFpbGVkLCBzZXQgdXNpbmcgd2ViIGF1ZGlvIHRvIGZhbHNlLlxuICAgIGlmICghSG93bGVyLmN0eCkge1xuICAgICAgSG93bGVyLnVzaW5nV2ViQXVkaW8gPSBmYWxzZTtcbiAgICB9XG5cbiAgICAvLyBDaGVjayBpZiBhIHdlYnZpZXcgaXMgYmVpbmcgdXNlZCBvbiBpT1M4IG9yIGVhcmxpZXIgKHJhdGhlciB0aGFuIHRoZSBicm93c2VyKS5cbiAgICAvLyBJZiBpdCBpcywgZGlzYWJsZSBXZWIgQXVkaW8gYXMgaXQgY2F1c2VzIGNyYXNoaW5nLlxuICAgIHZhciBpT1MgPSAoL2lQKGhvbmV8b2R8YWQpLy50ZXN0KEhvd2xlci5fbmF2aWdhdG9yICYmIEhvd2xlci5fbmF2aWdhdG9yLnBsYXRmb3JtKSk7XG4gICAgdmFyIGFwcFZlcnNpb24gPSBIb3dsZXIuX25hdmlnYXRvciAmJiBIb3dsZXIuX25hdmlnYXRvci5hcHBWZXJzaW9uLm1hdGNoKC9PUyAoXFxkKylfKFxcZCspXz8oXFxkKyk/Lyk7XG4gICAgdmFyIHZlcnNpb24gPSBhcHBWZXJzaW9uID8gcGFyc2VJbnQoYXBwVmVyc2lvblsxXSwgMTApIDogbnVsbDtcbiAgICBpZiAoaU9TICYmIHZlcnNpb24gJiYgdmVyc2lvbiA8IDkpIHtcbiAgICAgIHZhciBzYWZhcmkgPSAvc2FmYXJpLy50ZXN0KEhvd2xlci5fbmF2aWdhdG9yICYmIEhvd2xlci5fbmF2aWdhdG9yLnVzZXJBZ2VudC50b0xvd2VyQ2FzZSgpKTtcbiAgICAgIGlmIChIb3dsZXIuX25hdmlnYXRvciAmJiAhc2FmYXJpKSB7XG4gICAgICAgIEhvd2xlci51c2luZ1dlYkF1ZGlvID0gZmFsc2U7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gQ3JlYXRlIGFuZCBleHBvc2UgdGhlIG1hc3RlciBHYWluTm9kZSB3aGVuIHVzaW5nIFdlYiBBdWRpbyAodXNlZnVsIGZvciBwbHVnaW5zIG9yIGFkdmFuY2VkIHVzYWdlKS5cbiAgICBpZiAoSG93bGVyLnVzaW5nV2ViQXVkaW8pIHtcbiAgICAgIEhvd2xlci5tYXN0ZXJHYWluID0gKHR5cGVvZiBIb3dsZXIuY3R4LmNyZWF0ZUdhaW4gPT09ICd1bmRlZmluZWQnKSA/IEhvd2xlci5jdHguY3JlYXRlR2Fpbk5vZGUoKSA6IEhvd2xlci5jdHguY3JlYXRlR2FpbigpO1xuICAgICAgSG93bGVyLm1hc3RlckdhaW4uZ2Fpbi5zZXRWYWx1ZUF0VGltZShIb3dsZXIuX211dGVkID8gMCA6IEhvd2xlci5fdm9sdW1lLCBIb3dsZXIuY3R4LmN1cnJlbnRUaW1lKTtcbiAgICAgIEhvd2xlci5tYXN0ZXJHYWluLmNvbm5lY3QoSG93bGVyLmN0eC5kZXN0aW5hdGlvbik7XG4gICAgfVxuXG4gICAgLy8gUmUtcnVuIHRoZSBzZXR1cCBvbiBIb3dsZXIuXG4gICAgSG93bGVyLl9zZXR1cCgpO1xuICB9O1xuXG4gIC8vIEFkZCBzdXBwb3J0IGZvciBBTUQgKEFzeW5jaHJvbm91cyBNb2R1bGUgRGVmaW5pdGlvbikgbGlicmFyaWVzIHN1Y2ggYXMgcmVxdWlyZS5qcy5cbiAgaWYgKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZCkge1xuICAgIGRlZmluZShbXSwgZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBIb3dsZXI6IEhvd2xlcixcbiAgICAgICAgSG93bDogSG93bFxuICAgICAgfTtcbiAgICB9KTtcbiAgfVxuXG4gIC8vIEFkZCBzdXBwb3J0IGZvciBDb21tb25KUyBsaWJyYXJpZXMgc3VjaCBhcyBicm93c2VyaWZ5LlxuICBpZiAodHlwZW9mIGV4cG9ydHMgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgZXhwb3J0cy5Ib3dsZXIgPSBIb3dsZXI7XG4gICAgZXhwb3J0cy5Ib3dsID0gSG93bDtcbiAgfVxuXG4gIC8vIEFkZCB0byBnbG9iYWwgaW4gTm9kZS5qcyAoZm9yIHRlc3RpbmcsIGV0YykuXG4gIGlmICh0eXBlb2YgZ2xvYmFsICE9PSAndW5kZWZpbmVkJykge1xuICAgIGdsb2JhbC5Ib3dsZXJHbG9iYWwgPSBIb3dsZXJHbG9iYWw7XG4gICAgZ2xvYmFsLkhvd2xlciA9IEhvd2xlcjtcbiAgICBnbG9iYWwuSG93bCA9IEhvd2w7XG4gICAgZ2xvYmFsLlNvdW5kID0gU291bmQ7XG4gIH0gZWxzZSBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcpIHsgIC8vIERlZmluZSBnbG9iYWxseSBpbiBjYXNlIEFNRCBpcyBub3QgYXZhaWxhYmxlIG9yIHVudXNlZC5cbiAgICB3aW5kb3cuSG93bGVyR2xvYmFsID0gSG93bGVyR2xvYmFsO1xuICAgIHdpbmRvdy5Ib3dsZXIgPSBIb3dsZXI7XG4gICAgd2luZG93Lkhvd2wgPSBIb3dsO1xuICAgIHdpbmRvdy5Tb3VuZCA9IFNvdW5kO1xuICB9XG59KSgpO1xuXG5cbi8qIVxuICogIFNwYXRpYWwgUGx1Z2luIC0gQWRkcyBzdXBwb3J0IGZvciBzdGVyZW8gYW5kIDNEIGF1ZGlvIHdoZXJlIFdlYiBBdWRpbyBpcyBzdXBwb3J0ZWQuXG4gKiAgXG4gKiAgaG93bGVyLmpzIHYyLjIuM1xuICogIGhvd2xlcmpzLmNvbVxuICpcbiAqICAoYykgMjAxMy0yMDIwLCBKYW1lcyBTaW1wc29uIG9mIEdvbGRGaXJlIFN0dWRpb3NcbiAqICBnb2xkZmlyZXN0dWRpb3MuY29tXG4gKlxuICogIE1JVCBMaWNlbnNlXG4gKi9cblxuKGZ1bmN0aW9uKCkge1xuXG4gICd1c2Ugc3RyaWN0JztcblxuICAvLyBTZXR1cCBkZWZhdWx0IHByb3BlcnRpZXMuXG4gIEhvd2xlckdsb2JhbC5wcm90b3R5cGUuX3BvcyA9IFswLCAwLCAwXTtcbiAgSG93bGVyR2xvYmFsLnByb3RvdHlwZS5fb3JpZW50YXRpb24gPSBbMCwgMCwgLTEsIDAsIDEsIDBdO1xuXG4gIC8qKiBHbG9iYWwgTWV0aG9kcyAqKi9cbiAgLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cblxuICAvKipcbiAgICogSGVscGVyIG1ldGhvZCB0byB1cGRhdGUgdGhlIHN0ZXJlbyBwYW5uaW5nIHBvc2l0aW9uIG9mIGFsbCBjdXJyZW50IEhvd2xzLlxuICAgKiBGdXR1cmUgSG93bHMgd2lsbCBub3QgdXNlIHRoaXMgdmFsdWUgdW5sZXNzIGV4cGxpY2l0bHkgc2V0LlxuICAgKiBAcGFyYW0gIHtOdW1iZXJ9IHBhbiBBIHZhbHVlIG9mIC0xLjAgaXMgYWxsIHRoZSB3YXkgbGVmdCBhbmQgMS4wIGlzIGFsbCB0aGUgd2F5IHJpZ2h0LlxuICAgKiBAcmV0dXJuIHtIb3dsZXIvTnVtYmVyfSAgICAgU2VsZiBvciBjdXJyZW50IHN0ZXJlbyBwYW5uaW5nIHZhbHVlLlxuICAgKi9cbiAgSG93bGVyR2xvYmFsLnByb3RvdHlwZS5zdGVyZW8gPSBmdW5jdGlvbihwYW4pIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICAvLyBTdG9wIHJpZ2h0IGhlcmUgaWYgbm90IHVzaW5nIFdlYiBBdWRpby5cbiAgICBpZiAoIXNlbGYuY3R4IHx8ICFzZWxmLmN0eC5saXN0ZW5lcikge1xuICAgICAgcmV0dXJuIHNlbGY7XG4gICAgfVxuXG4gICAgLy8gTG9vcCB0aHJvdWdoIGFsbCBIb3dscyBhbmQgdXBkYXRlIHRoZWlyIHN0ZXJlbyBwYW5uaW5nLlxuICAgIGZvciAodmFyIGk9c2VsZi5faG93bHMubGVuZ3RoLTE7IGk+PTA7IGktLSkge1xuICAgICAgc2VsZi5faG93bHNbaV0uc3RlcmVvKHBhbik7XG4gICAgfVxuXG4gICAgcmV0dXJuIHNlbGY7XG4gIH07XG5cbiAgLyoqXG4gICAqIEdldC9zZXQgdGhlIHBvc2l0aW9uIG9mIHRoZSBsaXN0ZW5lciBpbiAzRCBjYXJ0ZXNpYW4gc3BhY2UuIFNvdW5kcyB1c2luZ1xuICAgKiAzRCBwb3NpdGlvbiB3aWxsIGJlIHJlbGF0aXZlIHRvIHRoZSBsaXN0ZW5lcidzIHBvc2l0aW9uLlxuICAgKiBAcGFyYW0gIHtOdW1iZXJ9IHggVGhlIHgtcG9zaXRpb24gb2YgdGhlIGxpc3RlbmVyLlxuICAgKiBAcGFyYW0gIHtOdW1iZXJ9IHkgVGhlIHktcG9zaXRpb24gb2YgdGhlIGxpc3RlbmVyLlxuICAgKiBAcGFyYW0gIHtOdW1iZXJ9IHogVGhlIHotcG9zaXRpb24gb2YgdGhlIGxpc3RlbmVyLlxuICAgKiBAcmV0dXJuIHtIb3dsZXIvQXJyYXl9ICAgU2VsZiBvciBjdXJyZW50IGxpc3RlbmVyIHBvc2l0aW9uLlxuICAgKi9cbiAgSG93bGVyR2xvYmFsLnByb3RvdHlwZS5wb3MgPSBmdW5jdGlvbih4LCB5LCB6KSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgLy8gU3RvcCByaWdodCBoZXJlIGlmIG5vdCB1c2luZyBXZWIgQXVkaW8uXG4gICAgaWYgKCFzZWxmLmN0eCB8fCAhc2VsZi5jdHgubGlzdGVuZXIpIHtcbiAgICAgIHJldHVybiBzZWxmO1xuICAgIH1cblxuICAgIC8vIFNldCB0aGUgZGVmYXVsdHMgZm9yIG9wdGlvbmFsICd5JyAmICd6Jy5cbiAgICB5ID0gKHR5cGVvZiB5ICE9PSAnbnVtYmVyJykgPyBzZWxmLl9wb3NbMV0gOiB5O1xuICAgIHogPSAodHlwZW9mIHogIT09ICdudW1iZXInKSA/IHNlbGYuX3Bvc1syXSA6IHo7XG5cbiAgICBpZiAodHlwZW9mIHggPT09ICdudW1iZXInKSB7XG4gICAgICBzZWxmLl9wb3MgPSBbeCwgeSwgel07XG5cbiAgICAgIGlmICh0eXBlb2Ygc2VsZi5jdHgubGlzdGVuZXIucG9zaXRpb25YICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICBzZWxmLmN0eC5saXN0ZW5lci5wb3NpdGlvblguc2V0VGFyZ2V0QXRUaW1lKHNlbGYuX3Bvc1swXSwgSG93bGVyLmN0eC5jdXJyZW50VGltZSwgMC4xKTtcbiAgICAgICAgc2VsZi5jdHgubGlzdGVuZXIucG9zaXRpb25ZLnNldFRhcmdldEF0VGltZShzZWxmLl9wb3NbMV0sIEhvd2xlci5jdHguY3VycmVudFRpbWUsIDAuMSk7XG4gICAgICAgIHNlbGYuY3R4Lmxpc3RlbmVyLnBvc2l0aW9uWi5zZXRUYXJnZXRBdFRpbWUoc2VsZi5fcG9zWzJdLCBIb3dsZXIuY3R4LmN1cnJlbnRUaW1lLCAwLjEpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc2VsZi5jdHgubGlzdGVuZXIuc2V0UG9zaXRpb24oc2VsZi5fcG9zWzBdLCBzZWxmLl9wb3NbMV0sIHNlbGYuX3Bvc1syXSk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBzZWxmLl9wb3M7XG4gICAgfVxuXG4gICAgcmV0dXJuIHNlbGY7XG4gIH07XG5cbiAgLyoqXG4gICAqIEdldC9zZXQgdGhlIGRpcmVjdGlvbiB0aGUgbGlzdGVuZXIgaXMgcG9pbnRpbmcgaW4gdGhlIDNEIGNhcnRlc2lhbiBzcGFjZS5cbiAgICogQSBmcm9udCBhbmQgdXAgdmVjdG9yIG11c3QgYmUgcHJvdmlkZWQuIFRoZSBmcm9udCBpcyB0aGUgZGlyZWN0aW9uIHRoZVxuICAgKiBmYWNlIG9mIHRoZSBsaXN0ZW5lciBpcyBwb2ludGluZywgYW5kIHVwIGlzIHRoZSBkaXJlY3Rpb24gdGhlIHRvcCBvZiB0aGVcbiAgICogbGlzdGVuZXIgaXMgcG9pbnRpbmcuIFRodXMsIHRoZXNlIHZhbHVlcyBhcmUgZXhwZWN0ZWQgdG8gYmUgYXQgcmlnaHQgYW5nbGVzXG4gICAqIGZyb20gZWFjaCBvdGhlci5cbiAgICogQHBhcmFtICB7TnVtYmVyfSB4ICAgVGhlIHgtb3JpZW50YXRpb24gb2YgdGhlIGxpc3RlbmVyLlxuICAgKiBAcGFyYW0gIHtOdW1iZXJ9IHkgICBUaGUgeS1vcmllbnRhdGlvbiBvZiB0aGUgbGlzdGVuZXIuXG4gICAqIEBwYXJhbSAge051bWJlcn0geiAgIFRoZSB6LW9yaWVudGF0aW9uIG9mIHRoZSBsaXN0ZW5lci5cbiAgICogQHBhcmFtICB7TnVtYmVyfSB4VXAgVGhlIHgtb3JpZW50YXRpb24gb2YgdGhlIHRvcCBvZiB0aGUgbGlzdGVuZXIuXG4gICAqIEBwYXJhbSAge051bWJlcn0geVVwIFRoZSB5LW9yaWVudGF0aW9uIG9mIHRoZSB0b3Agb2YgdGhlIGxpc3RlbmVyLlxuICAgKiBAcGFyYW0gIHtOdW1iZXJ9IHpVcCBUaGUgei1vcmllbnRhdGlvbiBvZiB0aGUgdG9wIG9mIHRoZSBsaXN0ZW5lci5cbiAgICogQHJldHVybiB7SG93bGVyL0FycmF5fSAgICAgUmV0dXJucyBzZWxmIG9yIHRoZSBjdXJyZW50IG9yaWVudGF0aW9uIHZlY3RvcnMuXG4gICAqL1xuICBIb3dsZXJHbG9iYWwucHJvdG90eXBlLm9yaWVudGF0aW9uID0gZnVuY3Rpb24oeCwgeSwgeiwgeFVwLCB5VXAsIHpVcCkge1xuICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgIC8vIFN0b3AgcmlnaHQgaGVyZSBpZiBub3QgdXNpbmcgV2ViIEF1ZGlvLlxuICAgIGlmICghc2VsZi5jdHggfHwgIXNlbGYuY3R4Lmxpc3RlbmVyKSB7XG4gICAgICByZXR1cm4gc2VsZjtcbiAgICB9XG5cbiAgICAvLyBTZXQgdGhlIGRlZmF1bHRzIGZvciBvcHRpb25hbCAneScgJiAneicuXG4gICAgdmFyIG9yID0gc2VsZi5fb3JpZW50YXRpb247XG4gICAgeSA9ICh0eXBlb2YgeSAhPT0gJ251bWJlcicpID8gb3JbMV0gOiB5O1xuICAgIHogPSAodHlwZW9mIHogIT09ICdudW1iZXInKSA/IG9yWzJdIDogejtcbiAgICB4VXAgPSAodHlwZW9mIHhVcCAhPT0gJ251bWJlcicpID8gb3JbM10gOiB4VXA7XG4gICAgeVVwID0gKHR5cGVvZiB5VXAgIT09ICdudW1iZXInKSA/IG9yWzRdIDogeVVwO1xuICAgIHpVcCA9ICh0eXBlb2YgelVwICE9PSAnbnVtYmVyJykgPyBvcls1XSA6IHpVcDtcblxuICAgIGlmICh0eXBlb2YgeCA9PT0gJ251bWJlcicpIHtcbiAgICAgIHNlbGYuX29yaWVudGF0aW9uID0gW3gsIHksIHosIHhVcCwgeVVwLCB6VXBdO1xuXG4gICAgICBpZiAodHlwZW9mIHNlbGYuY3R4Lmxpc3RlbmVyLmZvcndhcmRYICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICBzZWxmLmN0eC5saXN0ZW5lci5mb3J3YXJkWC5zZXRUYXJnZXRBdFRpbWUoeCwgSG93bGVyLmN0eC5jdXJyZW50VGltZSwgMC4xKTtcbiAgICAgICAgc2VsZi5jdHgubGlzdGVuZXIuZm9yd2FyZFkuc2V0VGFyZ2V0QXRUaW1lKHksIEhvd2xlci5jdHguY3VycmVudFRpbWUsIDAuMSk7XG4gICAgICAgIHNlbGYuY3R4Lmxpc3RlbmVyLmZvcndhcmRaLnNldFRhcmdldEF0VGltZSh6LCBIb3dsZXIuY3R4LmN1cnJlbnRUaW1lLCAwLjEpO1xuICAgICAgICBzZWxmLmN0eC5saXN0ZW5lci51cFguc2V0VGFyZ2V0QXRUaW1lKHhVcCwgSG93bGVyLmN0eC5jdXJyZW50VGltZSwgMC4xKTtcbiAgICAgICAgc2VsZi5jdHgubGlzdGVuZXIudXBZLnNldFRhcmdldEF0VGltZSh5VXAsIEhvd2xlci5jdHguY3VycmVudFRpbWUsIDAuMSk7XG4gICAgICAgIHNlbGYuY3R4Lmxpc3RlbmVyLnVwWi5zZXRUYXJnZXRBdFRpbWUoelVwLCBIb3dsZXIuY3R4LmN1cnJlbnRUaW1lLCAwLjEpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc2VsZi5jdHgubGlzdGVuZXIuc2V0T3JpZW50YXRpb24oeCwgeSwgeiwgeFVwLCB5VXAsIHpVcCk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBvcjtcbiAgICB9XG5cbiAgICByZXR1cm4gc2VsZjtcbiAgfTtcblxuICAvKiogR3JvdXAgTWV0aG9kcyAqKi9cbiAgLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cblxuICAvKipcbiAgICogQWRkIG5ldyBwcm9wZXJ0aWVzIHRvIHRoZSBjb3JlIGluaXQuXG4gICAqIEBwYXJhbSAge0Z1bmN0aW9ufSBfc3VwZXIgQ29yZSBpbml0IG1ldGhvZC5cbiAgICogQHJldHVybiB7SG93bH1cbiAgICovXG4gIEhvd2wucHJvdG90eXBlLmluaXQgPSAoZnVuY3Rpb24oX3N1cGVyKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKG8pIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgICAgLy8gU2V0dXAgdXNlci1kZWZpbmVkIGRlZmF1bHQgcHJvcGVydGllcy5cbiAgICAgIHNlbGYuX29yaWVudGF0aW9uID0gby5vcmllbnRhdGlvbiB8fCBbMSwgMCwgMF07XG4gICAgICBzZWxmLl9zdGVyZW8gPSBvLnN0ZXJlbyB8fCBudWxsO1xuICAgICAgc2VsZi5fcG9zID0gby5wb3MgfHwgbnVsbDtcbiAgICAgIHNlbGYuX3Bhbm5lckF0dHIgPSB7XG4gICAgICAgIGNvbmVJbm5lckFuZ2xlOiB0eXBlb2Ygby5jb25lSW5uZXJBbmdsZSAhPT0gJ3VuZGVmaW5lZCcgPyBvLmNvbmVJbm5lckFuZ2xlIDogMzYwLFxuICAgICAgICBjb25lT3V0ZXJBbmdsZTogdHlwZW9mIG8uY29uZU91dGVyQW5nbGUgIT09ICd1bmRlZmluZWQnID8gby5jb25lT3V0ZXJBbmdsZSA6IDM2MCxcbiAgICAgICAgY29uZU91dGVyR2FpbjogdHlwZW9mIG8uY29uZU91dGVyR2FpbiAhPT0gJ3VuZGVmaW5lZCcgPyBvLmNvbmVPdXRlckdhaW4gOiAwLFxuICAgICAgICBkaXN0YW5jZU1vZGVsOiB0eXBlb2Ygby5kaXN0YW5jZU1vZGVsICE9PSAndW5kZWZpbmVkJyA/IG8uZGlzdGFuY2VNb2RlbCA6ICdpbnZlcnNlJyxcbiAgICAgICAgbWF4RGlzdGFuY2U6IHR5cGVvZiBvLm1heERpc3RhbmNlICE9PSAndW5kZWZpbmVkJyA/IG8ubWF4RGlzdGFuY2UgOiAxMDAwMCxcbiAgICAgICAgcGFubmluZ01vZGVsOiB0eXBlb2Ygby5wYW5uaW5nTW9kZWwgIT09ICd1bmRlZmluZWQnID8gby5wYW5uaW5nTW9kZWwgOiAnSFJURicsXG4gICAgICAgIHJlZkRpc3RhbmNlOiB0eXBlb2Ygby5yZWZEaXN0YW5jZSAhPT0gJ3VuZGVmaW5lZCcgPyBvLnJlZkRpc3RhbmNlIDogMSxcbiAgICAgICAgcm9sbG9mZkZhY3RvcjogdHlwZW9mIG8ucm9sbG9mZkZhY3RvciAhPT0gJ3VuZGVmaW5lZCcgPyBvLnJvbGxvZmZGYWN0b3IgOiAxXG4gICAgICB9O1xuXG4gICAgICAvLyBTZXR1cCBldmVudCBsaXN0ZW5lcnMuXG4gICAgICBzZWxmLl9vbnN0ZXJlbyA9IG8ub25zdGVyZW8gPyBbe2ZuOiBvLm9uc3RlcmVvfV0gOiBbXTtcbiAgICAgIHNlbGYuX29ucG9zID0gby5vbnBvcyA/IFt7Zm46IG8ub25wb3N9XSA6IFtdO1xuICAgICAgc2VsZi5fb25vcmllbnRhdGlvbiA9IG8ub25vcmllbnRhdGlvbiA/IFt7Zm46IG8ub25vcmllbnRhdGlvbn1dIDogW107XG5cbiAgICAgIC8vIENvbXBsZXRlIGluaXRpbGl6YXRpb24gd2l0aCBob3dsZXIuanMgY29yZSdzIGluaXQgZnVuY3Rpb24uXG4gICAgICByZXR1cm4gX3N1cGVyLmNhbGwodGhpcywgbyk7XG4gICAgfTtcbiAgfSkoSG93bC5wcm90b3R5cGUuaW5pdCk7XG5cbiAgLyoqXG4gICAqIEdldC9zZXQgdGhlIHN0ZXJlbyBwYW5uaW5nIG9mIHRoZSBhdWRpbyBzb3VyY2UgZm9yIHRoaXMgc291bmQgb3IgYWxsIGluIHRoZSBncm91cC5cbiAgICogQHBhcmFtICB7TnVtYmVyfSBwYW4gIEEgdmFsdWUgb2YgLTEuMCBpcyBhbGwgdGhlIHdheSBsZWZ0IGFuZCAxLjAgaXMgYWxsIHRoZSB3YXkgcmlnaHQuXG4gICAqIEBwYXJhbSAge051bWJlcn0gaWQgKG9wdGlvbmFsKSBUaGUgc291bmQgSUQuIElmIG5vbmUgaXMgcGFzc2VkLCBhbGwgaW4gZ3JvdXAgd2lsbCBiZSB1cGRhdGVkLlxuICAgKiBAcmV0dXJuIHtIb3dsL051bWJlcn0gICAgUmV0dXJucyBzZWxmIG9yIHRoZSBjdXJyZW50IHN0ZXJlbyBwYW5uaW5nIHZhbHVlLlxuICAgKi9cbiAgSG93bC5wcm90b3R5cGUuc3RlcmVvID0gZnVuY3Rpb24ocGFuLCBpZCkge1xuICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgIC8vIFN0b3AgcmlnaHQgaGVyZSBpZiBub3QgdXNpbmcgV2ViIEF1ZGlvLlxuICAgIGlmICghc2VsZi5fd2ViQXVkaW8pIHtcbiAgICAgIHJldHVybiBzZWxmO1xuICAgIH1cblxuICAgIC8vIElmIHRoZSBzb3VuZCBoYXNuJ3QgbG9hZGVkLCBhZGQgaXQgdG8gdGhlIGxvYWQgcXVldWUgdG8gY2hhbmdlIHN0ZXJlbyBwYW4gd2hlbiBjYXBhYmxlLlxuICAgIGlmIChzZWxmLl9zdGF0ZSAhPT0gJ2xvYWRlZCcpIHtcbiAgICAgIHNlbGYuX3F1ZXVlLnB1c2goe1xuICAgICAgICBldmVudDogJ3N0ZXJlbycsXG4gICAgICAgIGFjdGlvbjogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgc2VsZi5zdGVyZW8ocGFuLCBpZCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICByZXR1cm4gc2VsZjtcbiAgICB9XG5cbiAgICAvLyBDaGVjayBmb3IgUGFubmVyU3RlcmVvTm9kZSBzdXBwb3J0IGFuZCBmYWxsYmFjayB0byBQYW5uZXJOb2RlIGlmIGl0IGRvZXNuJ3QgZXhpc3QuXG4gICAgdmFyIHBhbm5lclR5cGUgPSAodHlwZW9mIEhvd2xlci5jdHguY3JlYXRlU3RlcmVvUGFubmVyID09PSAndW5kZWZpbmVkJykgPyAnc3BhdGlhbCcgOiAnc3RlcmVvJztcblxuICAgIC8vIFNldHVwIHRoZSBncm91cCdzIHN0ZXJlbyBwYW5uaW5nIGlmIG5vIElEIGlzIHBhc3NlZC5cbiAgICBpZiAodHlwZW9mIGlkID09PSAndW5kZWZpbmVkJykge1xuICAgICAgLy8gUmV0dXJuIHRoZSBncm91cCdzIHN0ZXJlbyBwYW5uaW5nIGlmIG5vIHBhcmFtZXRlcnMgYXJlIHBhc3NlZC5cbiAgICAgIGlmICh0eXBlb2YgcGFuID09PSAnbnVtYmVyJykge1xuICAgICAgICBzZWxmLl9zdGVyZW8gPSBwYW47XG4gICAgICAgIHNlbGYuX3BvcyA9IFtwYW4sIDAsIDBdO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHNlbGYuX3N0ZXJlbztcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBDaGFuZ2UgdGhlIHN0cmVvIHBhbm5pbmcgb2Ygb25lIG9yIGFsbCBzb3VuZHMgaW4gZ3JvdXAuXG4gICAgdmFyIGlkcyA9IHNlbGYuX2dldFNvdW5kSWRzKGlkKTtcbiAgICBmb3IgKHZhciBpPTA7IGk8aWRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAvLyBHZXQgdGhlIHNvdW5kLlxuICAgICAgdmFyIHNvdW5kID0gc2VsZi5fc291bmRCeUlkKGlkc1tpXSk7XG5cbiAgICAgIGlmIChzb3VuZCkge1xuICAgICAgICBpZiAodHlwZW9mIHBhbiA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgICBzb3VuZC5fc3RlcmVvID0gcGFuO1xuICAgICAgICAgIHNvdW5kLl9wb3MgPSBbcGFuLCAwLCAwXTtcblxuICAgICAgICAgIGlmIChzb3VuZC5fbm9kZSkge1xuICAgICAgICAgICAgLy8gSWYgd2UgYXJlIGZhbGxpbmcgYmFjaywgbWFrZSBzdXJlIHRoZSBwYW5uaW5nTW9kZWwgaXMgZXF1YWxwb3dlci5cbiAgICAgICAgICAgIHNvdW5kLl9wYW5uZXJBdHRyLnBhbm5pbmdNb2RlbCA9ICdlcXVhbHBvd2VyJztcblxuICAgICAgICAgICAgLy8gQ2hlY2sgaWYgdGhlcmUgaXMgYSBwYW5uZXIgc2V0dXAgYW5kIGNyZWF0ZSBhIG5ldyBvbmUgaWYgbm90LlxuICAgICAgICAgICAgaWYgKCFzb3VuZC5fcGFubmVyIHx8ICFzb3VuZC5fcGFubmVyLnBhbikge1xuICAgICAgICAgICAgICBzZXR1cFBhbm5lcihzb3VuZCwgcGFubmVyVHlwZSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChwYW5uZXJUeXBlID09PSAnc3BhdGlhbCcpIHtcbiAgICAgICAgICAgICAgaWYgKHR5cGVvZiBzb3VuZC5fcGFubmVyLnBvc2l0aW9uWCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgICBzb3VuZC5fcGFubmVyLnBvc2l0aW9uWC5zZXRWYWx1ZUF0VGltZShwYW4sIEhvd2xlci5jdHguY3VycmVudFRpbWUpO1xuICAgICAgICAgICAgICAgIHNvdW5kLl9wYW5uZXIucG9zaXRpb25ZLnNldFZhbHVlQXRUaW1lKDAsIEhvd2xlci5jdHguY3VycmVudFRpbWUpO1xuICAgICAgICAgICAgICAgIHNvdW5kLl9wYW5uZXIucG9zaXRpb25aLnNldFZhbHVlQXRUaW1lKDAsIEhvd2xlci5jdHguY3VycmVudFRpbWUpO1xuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHNvdW5kLl9wYW5uZXIuc2V0UG9zaXRpb24ocGFuLCAwLCAwKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgc291bmQuX3Bhbm5lci5wYW4uc2V0VmFsdWVBdFRpbWUocGFuLCBIb3dsZXIuY3R4LmN1cnJlbnRUaW1lKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG5cbiAgICAgICAgICBzZWxmLl9lbWl0KCdzdGVyZW8nLCBzb3VuZC5faWQpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJldHVybiBzb3VuZC5fc3RlcmVvO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHNlbGY7XG4gIH07XG5cbiAgLyoqXG4gICAqIEdldC9zZXQgdGhlIDNEIHNwYXRpYWwgcG9zaXRpb24gb2YgdGhlIGF1ZGlvIHNvdXJjZSBmb3IgdGhpcyBzb3VuZCBvciBncm91cCByZWxhdGl2ZSB0byB0aGUgZ2xvYmFsIGxpc3RlbmVyLlxuICAgKiBAcGFyYW0gIHtOdW1iZXJ9IHggIFRoZSB4LXBvc2l0aW9uIG9mIHRoZSBhdWRpbyBzb3VyY2UuXG4gICAqIEBwYXJhbSAge051bWJlcn0geSAgVGhlIHktcG9zaXRpb24gb2YgdGhlIGF1ZGlvIHNvdXJjZS5cbiAgICogQHBhcmFtICB7TnVtYmVyfSB6ICBUaGUgei1wb3NpdGlvbiBvZiB0aGUgYXVkaW8gc291cmNlLlxuICAgKiBAcGFyYW0gIHtOdW1iZXJ9IGlkIChvcHRpb25hbCkgVGhlIHNvdW5kIElELiBJZiBub25lIGlzIHBhc3NlZCwgYWxsIGluIGdyb3VwIHdpbGwgYmUgdXBkYXRlZC5cbiAgICogQHJldHVybiB7SG93bC9BcnJheX0gICAgUmV0dXJucyBzZWxmIG9yIHRoZSBjdXJyZW50IDNEIHNwYXRpYWwgcG9zaXRpb246IFt4LCB5LCB6XS5cbiAgICovXG4gIEhvd2wucHJvdG90eXBlLnBvcyA9IGZ1bmN0aW9uKHgsIHksIHosIGlkKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgLy8gU3RvcCByaWdodCBoZXJlIGlmIG5vdCB1c2luZyBXZWIgQXVkaW8uXG4gICAgaWYgKCFzZWxmLl93ZWJBdWRpbykge1xuICAgICAgcmV0dXJuIHNlbGY7XG4gICAgfVxuXG4gICAgLy8gSWYgdGhlIHNvdW5kIGhhc24ndCBsb2FkZWQsIGFkZCBpdCB0byB0aGUgbG9hZCBxdWV1ZSB0byBjaGFuZ2UgcG9zaXRpb24gd2hlbiBjYXBhYmxlLlxuICAgIGlmIChzZWxmLl9zdGF0ZSAhPT0gJ2xvYWRlZCcpIHtcbiAgICAgIHNlbGYuX3F1ZXVlLnB1c2goe1xuICAgICAgICBldmVudDogJ3BvcycsXG4gICAgICAgIGFjdGlvbjogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgc2VsZi5wb3MoeCwgeSwgeiwgaWQpO1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgcmV0dXJuIHNlbGY7XG4gICAgfVxuXG4gICAgLy8gU2V0IHRoZSBkZWZhdWx0cyBmb3Igb3B0aW9uYWwgJ3knICYgJ3onLlxuICAgIHkgPSAodHlwZW9mIHkgIT09ICdudW1iZXInKSA/IDAgOiB5O1xuICAgIHogPSAodHlwZW9mIHogIT09ICdudW1iZXInKSA/IC0wLjUgOiB6O1xuXG4gICAgLy8gU2V0dXAgdGhlIGdyb3VwJ3Mgc3BhdGlhbCBwb3NpdGlvbiBpZiBubyBJRCBpcyBwYXNzZWQuXG4gICAgaWYgKHR5cGVvZiBpZCA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIC8vIFJldHVybiB0aGUgZ3JvdXAncyBzcGF0aWFsIHBvc2l0aW9uIGlmIG5vIHBhcmFtZXRlcnMgYXJlIHBhc3NlZC5cbiAgICAgIGlmICh0eXBlb2YgeCA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgc2VsZi5fcG9zID0gW3gsIHksIHpdO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHNlbGYuX3BvcztcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBDaGFuZ2UgdGhlIHNwYXRpYWwgcG9zaXRpb24gb2Ygb25lIG9yIGFsbCBzb3VuZHMgaW4gZ3JvdXAuXG4gICAgdmFyIGlkcyA9IHNlbGYuX2dldFNvdW5kSWRzKGlkKTtcbiAgICBmb3IgKHZhciBpPTA7IGk8aWRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAvLyBHZXQgdGhlIHNvdW5kLlxuICAgICAgdmFyIHNvdW5kID0gc2VsZi5fc291bmRCeUlkKGlkc1tpXSk7XG5cbiAgICAgIGlmIChzb3VuZCkge1xuICAgICAgICBpZiAodHlwZW9mIHggPT09ICdudW1iZXInKSB7XG4gICAgICAgICAgc291bmQuX3BvcyA9IFt4LCB5LCB6XTtcblxuICAgICAgICAgIGlmIChzb3VuZC5fbm9kZSkge1xuICAgICAgICAgICAgLy8gQ2hlY2sgaWYgdGhlcmUgaXMgYSBwYW5uZXIgc2V0dXAgYW5kIGNyZWF0ZSBhIG5ldyBvbmUgaWYgbm90LlxuICAgICAgICAgICAgaWYgKCFzb3VuZC5fcGFubmVyIHx8IHNvdW5kLl9wYW5uZXIucGFuKSB7XG4gICAgICAgICAgICAgIHNldHVwUGFubmVyKHNvdW5kLCAnc3BhdGlhbCcpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAodHlwZW9mIHNvdW5kLl9wYW5uZXIucG9zaXRpb25YICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgICBzb3VuZC5fcGFubmVyLnBvc2l0aW9uWC5zZXRWYWx1ZUF0VGltZSh4LCBIb3dsZXIuY3R4LmN1cnJlbnRUaW1lKTtcbiAgICAgICAgICAgICAgc291bmQuX3Bhbm5lci5wb3NpdGlvblkuc2V0VmFsdWVBdFRpbWUoeSwgSG93bGVyLmN0eC5jdXJyZW50VGltZSk7XG4gICAgICAgICAgICAgIHNvdW5kLl9wYW5uZXIucG9zaXRpb25aLnNldFZhbHVlQXRUaW1lKHosIEhvd2xlci5jdHguY3VycmVudFRpbWUpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgc291bmQuX3Bhbm5lci5zZXRQb3NpdGlvbih4LCB5LCB6KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG5cbiAgICAgICAgICBzZWxmLl9lbWl0KCdwb3MnLCBzb3VuZC5faWQpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJldHVybiBzb3VuZC5fcG9zO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHNlbGY7XG4gIH07XG5cbiAgLyoqXG4gICAqIEdldC9zZXQgdGhlIGRpcmVjdGlvbiB0aGUgYXVkaW8gc291cmNlIGlzIHBvaW50aW5nIGluIHRoZSAzRCBjYXJ0ZXNpYW4gY29vcmRpbmF0ZVxuICAgKiBzcGFjZS4gRGVwZW5kaW5nIG9uIGhvdyBkaXJlY3Rpb24gdGhlIHNvdW5kIGlzLCBiYXNlZCBvbiB0aGUgYGNvbmVgIGF0dHJpYnV0ZXMsXG4gICAqIGEgc291bmQgcG9pbnRpbmcgYXdheSBmcm9tIHRoZSBsaXN0ZW5lciBjYW4gYmUgcXVpZXQgb3Igc2lsZW50LlxuICAgKiBAcGFyYW0gIHtOdW1iZXJ9IHggIFRoZSB4LW9yaWVudGF0aW9uIG9mIHRoZSBzb3VyY2UuXG4gICAqIEBwYXJhbSAge051bWJlcn0geSAgVGhlIHktb3JpZW50YXRpb24gb2YgdGhlIHNvdXJjZS5cbiAgICogQHBhcmFtICB7TnVtYmVyfSB6ICBUaGUgei1vcmllbnRhdGlvbiBvZiB0aGUgc291cmNlLlxuICAgKiBAcGFyYW0gIHtOdW1iZXJ9IGlkIChvcHRpb25hbCkgVGhlIHNvdW5kIElELiBJZiBub25lIGlzIHBhc3NlZCwgYWxsIGluIGdyb3VwIHdpbGwgYmUgdXBkYXRlZC5cbiAgICogQHJldHVybiB7SG93bC9BcnJheX0gICAgUmV0dXJucyBzZWxmIG9yIHRoZSBjdXJyZW50IDNEIHNwYXRpYWwgb3JpZW50YXRpb246IFt4LCB5LCB6XS5cbiAgICovXG4gIEhvd2wucHJvdG90eXBlLm9yaWVudGF0aW9uID0gZnVuY3Rpb24oeCwgeSwgeiwgaWQpIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICAvLyBTdG9wIHJpZ2h0IGhlcmUgaWYgbm90IHVzaW5nIFdlYiBBdWRpby5cbiAgICBpZiAoIXNlbGYuX3dlYkF1ZGlvKSB7XG4gICAgICByZXR1cm4gc2VsZjtcbiAgICB9XG5cbiAgICAvLyBJZiB0aGUgc291bmQgaGFzbid0IGxvYWRlZCwgYWRkIGl0IHRvIHRoZSBsb2FkIHF1ZXVlIHRvIGNoYW5nZSBvcmllbnRhdGlvbiB3aGVuIGNhcGFibGUuXG4gICAgaWYgKHNlbGYuX3N0YXRlICE9PSAnbG9hZGVkJykge1xuICAgICAgc2VsZi5fcXVldWUucHVzaCh7XG4gICAgICAgIGV2ZW50OiAnb3JpZW50YXRpb24nLFxuICAgICAgICBhY3Rpb246IGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHNlbGYub3JpZW50YXRpb24oeCwgeSwgeiwgaWQpO1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgcmV0dXJuIHNlbGY7XG4gICAgfVxuXG4gICAgLy8gU2V0IHRoZSBkZWZhdWx0cyBmb3Igb3B0aW9uYWwgJ3knICYgJ3onLlxuICAgIHkgPSAodHlwZW9mIHkgIT09ICdudW1iZXInKSA/IHNlbGYuX29yaWVudGF0aW9uWzFdIDogeTtcbiAgICB6ID0gKHR5cGVvZiB6ICE9PSAnbnVtYmVyJykgPyBzZWxmLl9vcmllbnRhdGlvblsyXSA6IHo7XG5cbiAgICAvLyBTZXR1cCB0aGUgZ3JvdXAncyBzcGF0aWFsIG9yaWVudGF0aW9uIGlmIG5vIElEIGlzIHBhc3NlZC5cbiAgICBpZiAodHlwZW9mIGlkID09PSAndW5kZWZpbmVkJykge1xuICAgICAgLy8gUmV0dXJuIHRoZSBncm91cCdzIHNwYXRpYWwgb3JpZW50YXRpb24gaWYgbm8gcGFyYW1ldGVycyBhcmUgcGFzc2VkLlxuICAgICAgaWYgKHR5cGVvZiB4ID09PSAnbnVtYmVyJykge1xuICAgICAgICBzZWxmLl9vcmllbnRhdGlvbiA9IFt4LCB5LCB6XTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBzZWxmLl9vcmllbnRhdGlvbjtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBDaGFuZ2UgdGhlIHNwYXRpYWwgb3JpZW50YXRpb24gb2Ygb25lIG9yIGFsbCBzb3VuZHMgaW4gZ3JvdXAuXG4gICAgdmFyIGlkcyA9IHNlbGYuX2dldFNvdW5kSWRzKGlkKTtcbiAgICBmb3IgKHZhciBpPTA7IGk8aWRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAvLyBHZXQgdGhlIHNvdW5kLlxuICAgICAgdmFyIHNvdW5kID0gc2VsZi5fc291bmRCeUlkKGlkc1tpXSk7XG5cbiAgICAgIGlmIChzb3VuZCkge1xuICAgICAgICBpZiAodHlwZW9mIHggPT09ICdudW1iZXInKSB7XG4gICAgICAgICAgc291bmQuX29yaWVudGF0aW9uID0gW3gsIHksIHpdO1xuXG4gICAgICAgICAgaWYgKHNvdW5kLl9ub2RlKSB7XG4gICAgICAgICAgICAvLyBDaGVjayBpZiB0aGVyZSBpcyBhIHBhbm5lciBzZXR1cCBhbmQgY3JlYXRlIGEgbmV3IG9uZSBpZiBub3QuXG4gICAgICAgICAgICBpZiAoIXNvdW5kLl9wYW5uZXIpIHtcbiAgICAgICAgICAgICAgLy8gTWFrZSBzdXJlIHdlIGhhdmUgYSBwb3NpdGlvbiB0byBzZXR1cCB0aGUgbm9kZSB3aXRoLlxuICAgICAgICAgICAgICBpZiAoIXNvdW5kLl9wb3MpIHtcbiAgICAgICAgICAgICAgICBzb3VuZC5fcG9zID0gc2VsZi5fcG9zIHx8IFswLCAwLCAtMC41XTtcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIHNldHVwUGFubmVyKHNvdW5kLCAnc3BhdGlhbCcpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAodHlwZW9mIHNvdW5kLl9wYW5uZXIub3JpZW50YXRpb25YICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgICBzb3VuZC5fcGFubmVyLm9yaWVudGF0aW9uWC5zZXRWYWx1ZUF0VGltZSh4LCBIb3dsZXIuY3R4LmN1cnJlbnRUaW1lKTtcbiAgICAgICAgICAgICAgc291bmQuX3Bhbm5lci5vcmllbnRhdGlvblkuc2V0VmFsdWVBdFRpbWUoeSwgSG93bGVyLmN0eC5jdXJyZW50VGltZSk7XG4gICAgICAgICAgICAgIHNvdW5kLl9wYW5uZXIub3JpZW50YXRpb25aLnNldFZhbHVlQXRUaW1lKHosIEhvd2xlci5jdHguY3VycmVudFRpbWUpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgc291bmQuX3Bhbm5lci5zZXRPcmllbnRhdGlvbih4LCB5LCB6KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG5cbiAgICAgICAgICBzZWxmLl9lbWl0KCdvcmllbnRhdGlvbicsIHNvdW5kLl9pZCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV0dXJuIHNvdW5kLl9vcmllbnRhdGlvbjtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBzZWxmO1xuICB9O1xuXG4gIC8qKlxuICAgKiBHZXQvc2V0IHRoZSBwYW5uZXIgbm9kZSdzIGF0dHJpYnV0ZXMgZm9yIGEgc291bmQgb3IgZ3JvdXAgb2Ygc291bmRzLlxuICAgKiBUaGlzIG1ldGhvZCBjYW4gb3B0aW9uYWxsIHRha2UgMCwgMSBvciAyIGFyZ3VtZW50cy5cbiAgICogICBwYW5uZXJBdHRyKCkgLT4gUmV0dXJucyB0aGUgZ3JvdXAncyB2YWx1ZXMuXG4gICAqICAgcGFubmVyQXR0cihpZCkgLT4gUmV0dXJucyB0aGUgc291bmQgaWQncyB2YWx1ZXMuXG4gICAqICAgcGFubmVyQXR0cihvKSAtPiBTZXQncyB0aGUgdmFsdWVzIG9mIGFsbCBzb3VuZHMgaW4gdGhpcyBIb3dsIGdyb3VwLlxuICAgKiAgIHBhbm5lckF0dHIobywgaWQpIC0+IFNldCdzIHRoZSB2YWx1ZXMgb2YgcGFzc2VkIHNvdW5kIGlkLlxuICAgKlxuICAgKiAgIEF0dHJpYnV0ZXM6XG4gICAqICAgICBjb25lSW5uZXJBbmdsZSAtICgzNjAgYnkgZGVmYXVsdCkgQSBwYXJhbWV0ZXIgZm9yIGRpcmVjdGlvbmFsIGF1ZGlvIHNvdXJjZXMsIHRoaXMgaXMgYW4gYW5nbGUsIGluIGRlZ3JlZXMsXG4gICAqICAgICAgICAgICAgICAgICAgICAgIGluc2lkZSBvZiB3aGljaCB0aGVyZSB3aWxsIGJlIG5vIHZvbHVtZSByZWR1Y3Rpb24uXG4gICAqICAgICBjb25lT3V0ZXJBbmdsZSAtICgzNjAgYnkgZGVmYXVsdCkgQSBwYXJhbWV0ZXIgZm9yIGRpcmVjdGlvbmFsIGF1ZGlvIHNvdXJjZXMsIHRoaXMgaXMgYW4gYW5nbGUsIGluIGRlZ3JlZXMsXG4gICAqICAgICAgICAgICAgICAgICAgICAgIG91dHNpZGUgb2Ygd2hpY2ggdGhlIHZvbHVtZSB3aWxsIGJlIHJlZHVjZWQgdG8gYSBjb25zdGFudCB2YWx1ZSBvZiBgY29uZU91dGVyR2FpbmAuXG4gICAqICAgICBjb25lT3V0ZXJHYWluIC0gKDAgYnkgZGVmYXVsdCkgQSBwYXJhbWV0ZXIgZm9yIGRpcmVjdGlvbmFsIGF1ZGlvIHNvdXJjZXMsIHRoaXMgaXMgdGhlIGdhaW4gb3V0c2lkZSBvZiB0aGVcbiAgICogICAgICAgICAgICAgICAgICAgICBgY29uZU91dGVyQW5nbGVgLiBJdCBpcyBhIGxpbmVhciB2YWx1ZSBpbiB0aGUgcmFuZ2UgYFswLCAxXWAuXG4gICAqICAgICBkaXN0YW5jZU1vZGVsIC0gKCdpbnZlcnNlJyBieSBkZWZhdWx0KSBEZXRlcm1pbmVzIGFsZ29yaXRobSB1c2VkIHRvIHJlZHVjZSB2b2x1bWUgYXMgYXVkaW8gbW92ZXMgYXdheSBmcm9tXG4gICAqICAgICAgICAgICAgICAgICAgICAgbGlzdGVuZXIuIENhbiBiZSBgbGluZWFyYCwgYGludmVyc2VgIG9yIGBleHBvbmVudGlhbC5cbiAgICogICAgIG1heERpc3RhbmNlIC0gKDEwMDAwIGJ5IGRlZmF1bHQpIFRoZSBtYXhpbXVtIGRpc3RhbmNlIGJldHdlZW4gc291cmNlIGFuZCBsaXN0ZW5lciwgYWZ0ZXIgd2hpY2ggdGhlIHZvbHVtZVxuICAgKiAgICAgICAgICAgICAgICAgICB3aWxsIG5vdCBiZSByZWR1Y2VkIGFueSBmdXJ0aGVyLlxuICAgKiAgICAgcmVmRGlzdGFuY2UgLSAoMSBieSBkZWZhdWx0KSBBIHJlZmVyZW5jZSBkaXN0YW5jZSBmb3IgcmVkdWNpbmcgdm9sdW1lIGFzIHNvdXJjZSBtb3ZlcyBmdXJ0aGVyIGZyb20gdGhlIGxpc3RlbmVyLlxuICAgKiAgICAgICAgICAgICAgICAgICBUaGlzIGlzIHNpbXBseSBhIHZhcmlhYmxlIG9mIHRoZSBkaXN0YW5jZSBtb2RlbCBhbmQgaGFzIGEgZGlmZmVyZW50IGVmZmVjdCBkZXBlbmRpbmcgb24gd2hpY2ggbW9kZWxcbiAgICogICAgICAgICAgICAgICAgICAgaXMgdXNlZCBhbmQgdGhlIHNjYWxlIG9mIHlvdXIgY29vcmRpbmF0ZXMuIEdlbmVyYWxseSwgdm9sdW1lIHdpbGwgYmUgZXF1YWwgdG8gMSBhdCB0aGlzIGRpc3RhbmNlLlxuICAgKiAgICAgcm9sbG9mZkZhY3RvciAtICgxIGJ5IGRlZmF1bHQpIEhvdyBxdWlja2x5IHRoZSB2b2x1bWUgcmVkdWNlcyBhcyBzb3VyY2UgbW92ZXMgZnJvbSBsaXN0ZW5lci4gVGhpcyBpcyBzaW1wbHkgYVxuICAgKiAgICAgICAgICAgICAgICAgICAgIHZhcmlhYmxlIG9mIHRoZSBkaXN0YW5jZSBtb2RlbCBhbmQgY2FuIGJlIGluIHRoZSByYW5nZSBvZiBgWzAsIDFdYCB3aXRoIGBsaW5lYXJgIGFuZCBgWzAsIOKInl1gXG4gICAqICAgICAgICAgICAgICAgICAgICAgd2l0aCBgaW52ZXJzZWAgYW5kIGBleHBvbmVudGlhbGAuXG4gICAqICAgICBwYW5uaW5nTW9kZWwgLSAoJ0hSVEYnIGJ5IGRlZmF1bHQpIERldGVybWluZXMgd2hpY2ggc3BhdGlhbGl6YXRpb24gYWxnb3JpdGhtIGlzIHVzZWQgdG8gcG9zaXRpb24gYXVkaW8uXG4gICAqICAgICAgICAgICAgICAgICAgICAgQ2FuIGJlIGBIUlRGYCBvciBgZXF1YWxwb3dlcmAuXG4gICAqXG4gICAqIEByZXR1cm4ge0hvd2wvT2JqZWN0fSBSZXR1cm5zIHNlbGYgb3IgY3VycmVudCBwYW5uZXIgYXR0cmlidXRlcy5cbiAgICovXG4gIEhvd2wucHJvdG90eXBlLnBhbm5lckF0dHIgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgdmFyIGFyZ3MgPSBhcmd1bWVudHM7XG4gICAgdmFyIG8sIGlkLCBzb3VuZDtcblxuICAgIC8vIFN0b3AgcmlnaHQgaGVyZSBpZiBub3QgdXNpbmcgV2ViIEF1ZGlvLlxuICAgIGlmICghc2VsZi5fd2ViQXVkaW8pIHtcbiAgICAgIHJldHVybiBzZWxmO1xuICAgIH1cblxuICAgIC8vIERldGVybWluZSB0aGUgdmFsdWVzIGJhc2VkIG9uIGFyZ3VtZW50cy5cbiAgICBpZiAoYXJncy5sZW5ndGggPT09IDApIHtcbiAgICAgIC8vIFJldHVybiB0aGUgZ3JvdXAncyBwYW5uZXIgYXR0cmlidXRlIHZhbHVlcy5cbiAgICAgIHJldHVybiBzZWxmLl9wYW5uZXJBdHRyO1xuICAgIH0gZWxzZSBpZiAoYXJncy5sZW5ndGggPT09IDEpIHtcbiAgICAgIGlmICh0eXBlb2YgYXJnc1swXSA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgbyA9IGFyZ3NbMF07XG5cbiAgICAgICAgLy8gU2V0IHRoZSBncm91J3MgcGFubmVyIGF0dHJpYnV0ZSB2YWx1ZXMuXG4gICAgICAgIGlmICh0eXBlb2YgaWQgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgaWYgKCFvLnBhbm5lckF0dHIpIHtcbiAgICAgICAgICAgIG8ucGFubmVyQXR0ciA9IHtcbiAgICAgICAgICAgICAgY29uZUlubmVyQW5nbGU6IG8uY29uZUlubmVyQW5nbGUsXG4gICAgICAgICAgICAgIGNvbmVPdXRlckFuZ2xlOiBvLmNvbmVPdXRlckFuZ2xlLFxuICAgICAgICAgICAgICBjb25lT3V0ZXJHYWluOiBvLmNvbmVPdXRlckdhaW4sXG4gICAgICAgICAgICAgIGRpc3RhbmNlTW9kZWw6IG8uZGlzdGFuY2VNb2RlbCxcbiAgICAgICAgICAgICAgbWF4RGlzdGFuY2U6IG8ubWF4RGlzdGFuY2UsXG4gICAgICAgICAgICAgIHJlZkRpc3RhbmNlOiBvLnJlZkRpc3RhbmNlLFxuICAgICAgICAgICAgICByb2xsb2ZmRmFjdG9yOiBvLnJvbGxvZmZGYWN0b3IsXG4gICAgICAgICAgICAgIHBhbm5pbmdNb2RlbDogby5wYW5uaW5nTW9kZWxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgc2VsZi5fcGFubmVyQXR0ciA9IHtcbiAgICAgICAgICAgIGNvbmVJbm5lckFuZ2xlOiB0eXBlb2Ygby5wYW5uZXJBdHRyLmNvbmVJbm5lckFuZ2xlICE9PSAndW5kZWZpbmVkJyA/IG8ucGFubmVyQXR0ci5jb25lSW5uZXJBbmdsZSA6IHNlbGYuX2NvbmVJbm5lckFuZ2xlLFxuICAgICAgICAgICAgY29uZU91dGVyQW5nbGU6IHR5cGVvZiBvLnBhbm5lckF0dHIuY29uZU91dGVyQW5nbGUgIT09ICd1bmRlZmluZWQnID8gby5wYW5uZXJBdHRyLmNvbmVPdXRlckFuZ2xlIDogc2VsZi5fY29uZU91dGVyQW5nbGUsXG4gICAgICAgICAgICBjb25lT3V0ZXJHYWluOiB0eXBlb2Ygby5wYW5uZXJBdHRyLmNvbmVPdXRlckdhaW4gIT09ICd1bmRlZmluZWQnID8gby5wYW5uZXJBdHRyLmNvbmVPdXRlckdhaW4gOiBzZWxmLl9jb25lT3V0ZXJHYWluLFxuICAgICAgICAgICAgZGlzdGFuY2VNb2RlbDogdHlwZW9mIG8ucGFubmVyQXR0ci5kaXN0YW5jZU1vZGVsICE9PSAndW5kZWZpbmVkJyA/IG8ucGFubmVyQXR0ci5kaXN0YW5jZU1vZGVsIDogc2VsZi5fZGlzdGFuY2VNb2RlbCxcbiAgICAgICAgICAgIG1heERpc3RhbmNlOiB0eXBlb2Ygby5wYW5uZXJBdHRyLm1heERpc3RhbmNlICE9PSAndW5kZWZpbmVkJyA/IG8ucGFubmVyQXR0ci5tYXhEaXN0YW5jZSA6IHNlbGYuX21heERpc3RhbmNlLFxuICAgICAgICAgICAgcmVmRGlzdGFuY2U6IHR5cGVvZiBvLnBhbm5lckF0dHIucmVmRGlzdGFuY2UgIT09ICd1bmRlZmluZWQnID8gby5wYW5uZXJBdHRyLnJlZkRpc3RhbmNlIDogc2VsZi5fcmVmRGlzdGFuY2UsXG4gICAgICAgICAgICByb2xsb2ZmRmFjdG9yOiB0eXBlb2Ygby5wYW5uZXJBdHRyLnJvbGxvZmZGYWN0b3IgIT09ICd1bmRlZmluZWQnID8gby5wYW5uZXJBdHRyLnJvbGxvZmZGYWN0b3IgOiBzZWxmLl9yb2xsb2ZmRmFjdG9yLFxuICAgICAgICAgICAgcGFubmluZ01vZGVsOiB0eXBlb2Ygby5wYW5uZXJBdHRyLnBhbm5pbmdNb2RlbCAhPT0gJ3VuZGVmaW5lZCcgPyBvLnBhbm5lckF0dHIucGFubmluZ01vZGVsIDogc2VsZi5fcGFubmluZ01vZGVsXG4gICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gUmV0dXJuIHRoaXMgc291bmQncyBwYW5uZXIgYXR0cmlidXRlIHZhbHVlcy5cbiAgICAgICAgc291bmQgPSBzZWxmLl9zb3VuZEJ5SWQocGFyc2VJbnQoYXJnc1swXSwgMTApKTtcbiAgICAgICAgcmV0dXJuIHNvdW5kID8gc291bmQuX3Bhbm5lckF0dHIgOiBzZWxmLl9wYW5uZXJBdHRyO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoYXJncy5sZW5ndGggPT09IDIpIHtcbiAgICAgIG8gPSBhcmdzWzBdO1xuICAgICAgaWQgPSBwYXJzZUludChhcmdzWzFdLCAxMCk7XG4gICAgfVxuXG4gICAgLy8gVXBkYXRlIHRoZSB2YWx1ZXMgb2YgdGhlIHNwZWNpZmllZCBzb3VuZHMuXG4gICAgdmFyIGlkcyA9IHNlbGYuX2dldFNvdW5kSWRzKGlkKTtcbiAgICBmb3IgKHZhciBpPTA7IGk8aWRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBzb3VuZCA9IHNlbGYuX3NvdW5kQnlJZChpZHNbaV0pO1xuXG4gICAgICBpZiAoc291bmQpIHtcbiAgICAgICAgLy8gTWVyZ2UgdGhlIG5ldyB2YWx1ZXMgaW50byB0aGUgc291bmQuXG4gICAgICAgIHZhciBwYSA9IHNvdW5kLl9wYW5uZXJBdHRyO1xuICAgICAgICBwYSA9IHtcbiAgICAgICAgICBjb25lSW5uZXJBbmdsZTogdHlwZW9mIG8uY29uZUlubmVyQW5nbGUgIT09ICd1bmRlZmluZWQnID8gby5jb25lSW5uZXJBbmdsZSA6IHBhLmNvbmVJbm5lckFuZ2xlLFxuICAgICAgICAgIGNvbmVPdXRlckFuZ2xlOiB0eXBlb2Ygby5jb25lT3V0ZXJBbmdsZSAhPT0gJ3VuZGVmaW5lZCcgPyBvLmNvbmVPdXRlckFuZ2xlIDogcGEuY29uZU91dGVyQW5nbGUsXG4gICAgICAgICAgY29uZU91dGVyR2FpbjogdHlwZW9mIG8uY29uZU91dGVyR2FpbiAhPT0gJ3VuZGVmaW5lZCcgPyBvLmNvbmVPdXRlckdhaW4gOiBwYS5jb25lT3V0ZXJHYWluLFxuICAgICAgICAgIGRpc3RhbmNlTW9kZWw6IHR5cGVvZiBvLmRpc3RhbmNlTW9kZWwgIT09ICd1bmRlZmluZWQnID8gby5kaXN0YW5jZU1vZGVsIDogcGEuZGlzdGFuY2VNb2RlbCxcbiAgICAgICAgICBtYXhEaXN0YW5jZTogdHlwZW9mIG8ubWF4RGlzdGFuY2UgIT09ICd1bmRlZmluZWQnID8gby5tYXhEaXN0YW5jZSA6IHBhLm1heERpc3RhbmNlLFxuICAgICAgICAgIHJlZkRpc3RhbmNlOiB0eXBlb2Ygby5yZWZEaXN0YW5jZSAhPT0gJ3VuZGVmaW5lZCcgPyBvLnJlZkRpc3RhbmNlIDogcGEucmVmRGlzdGFuY2UsXG4gICAgICAgICAgcm9sbG9mZkZhY3RvcjogdHlwZW9mIG8ucm9sbG9mZkZhY3RvciAhPT0gJ3VuZGVmaW5lZCcgPyBvLnJvbGxvZmZGYWN0b3IgOiBwYS5yb2xsb2ZmRmFjdG9yLFxuICAgICAgICAgIHBhbm5pbmdNb2RlbDogdHlwZW9mIG8ucGFubmluZ01vZGVsICE9PSAndW5kZWZpbmVkJyA/IG8ucGFubmluZ01vZGVsIDogcGEucGFubmluZ01vZGVsXG4gICAgICAgIH07XG5cbiAgICAgICAgLy8gVXBkYXRlIHRoZSBwYW5uZXIgdmFsdWVzIG9yIGNyZWF0ZSBhIG5ldyBwYW5uZXIgaWYgbm9uZSBleGlzdHMuXG4gICAgICAgIHZhciBwYW5uZXIgPSBzb3VuZC5fcGFubmVyO1xuICAgICAgICBpZiAocGFubmVyKSB7XG4gICAgICAgICAgcGFubmVyLmNvbmVJbm5lckFuZ2xlID0gcGEuY29uZUlubmVyQW5nbGU7XG4gICAgICAgICAgcGFubmVyLmNvbmVPdXRlckFuZ2xlID0gcGEuY29uZU91dGVyQW5nbGU7XG4gICAgICAgICAgcGFubmVyLmNvbmVPdXRlckdhaW4gPSBwYS5jb25lT3V0ZXJHYWluO1xuICAgICAgICAgIHBhbm5lci5kaXN0YW5jZU1vZGVsID0gcGEuZGlzdGFuY2VNb2RlbDtcbiAgICAgICAgICBwYW5uZXIubWF4RGlzdGFuY2UgPSBwYS5tYXhEaXN0YW5jZTtcbiAgICAgICAgICBwYW5uZXIucmVmRGlzdGFuY2UgPSBwYS5yZWZEaXN0YW5jZTtcbiAgICAgICAgICBwYW5uZXIucm9sbG9mZkZhY3RvciA9IHBhLnJvbGxvZmZGYWN0b3I7XG4gICAgICAgICAgcGFubmVyLnBhbm5pbmdNb2RlbCA9IHBhLnBhbm5pbmdNb2RlbDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBNYWtlIHN1cmUgd2UgaGF2ZSBhIHBvc2l0aW9uIHRvIHNldHVwIHRoZSBub2RlIHdpdGguXG4gICAgICAgICAgaWYgKCFzb3VuZC5fcG9zKSB7XG4gICAgICAgICAgICBzb3VuZC5fcG9zID0gc2VsZi5fcG9zIHx8IFswLCAwLCAtMC41XTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvLyBDcmVhdGUgYSBuZXcgcGFubmVyIG5vZGUuXG4gICAgICAgICAgc2V0dXBQYW5uZXIoc291bmQsICdzcGF0aWFsJyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gc2VsZjtcbiAgfTtcblxuICAvKiogU2luZ2xlIFNvdW5kIE1ldGhvZHMgKiovXG4gIC8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG5cbiAgLyoqXG4gICAqIEFkZCBuZXcgcHJvcGVydGllcyB0byB0aGUgY29yZSBTb3VuZCBpbml0LlxuICAgKiBAcGFyYW0gIHtGdW5jdGlvbn0gX3N1cGVyIENvcmUgU291bmQgaW5pdCBtZXRob2QuXG4gICAqIEByZXR1cm4ge1NvdW5kfVxuICAgKi9cbiAgU291bmQucHJvdG90eXBlLmluaXQgPSAoZnVuY3Rpb24oX3N1cGVyKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgdmFyIHBhcmVudCA9IHNlbGYuX3BhcmVudDtcblxuICAgICAgLy8gU2V0dXAgdXNlci1kZWZpbmVkIGRlZmF1bHQgcHJvcGVydGllcy5cbiAgICAgIHNlbGYuX29yaWVudGF0aW9uID0gcGFyZW50Ll9vcmllbnRhdGlvbjtcbiAgICAgIHNlbGYuX3N0ZXJlbyA9IHBhcmVudC5fc3RlcmVvO1xuICAgICAgc2VsZi5fcG9zID0gcGFyZW50Ll9wb3M7XG4gICAgICBzZWxmLl9wYW5uZXJBdHRyID0gcGFyZW50Ll9wYW5uZXJBdHRyO1xuXG4gICAgICAvLyBDb21wbGV0ZSBpbml0aWxpemF0aW9uIHdpdGggaG93bGVyLmpzIGNvcmUgU291bmQncyBpbml0IGZ1bmN0aW9uLlxuICAgICAgX3N1cGVyLmNhbGwodGhpcyk7XG5cbiAgICAgIC8vIElmIGEgc3RlcmVvIG9yIHBvc2l0aW9uIHdhcyBzcGVjaWZpZWQsIHNldCBpdCB1cC5cbiAgICAgIGlmIChzZWxmLl9zdGVyZW8pIHtcbiAgICAgICAgcGFyZW50LnN0ZXJlbyhzZWxmLl9zdGVyZW8pO1xuICAgICAgfSBlbHNlIGlmIChzZWxmLl9wb3MpIHtcbiAgICAgICAgcGFyZW50LnBvcyhzZWxmLl9wb3NbMF0sIHNlbGYuX3Bvc1sxXSwgc2VsZi5fcG9zWzJdLCBzZWxmLl9pZCk7XG4gICAgICB9XG4gICAgfTtcbiAgfSkoU291bmQucHJvdG90eXBlLmluaXQpO1xuXG4gIC8qKlxuICAgKiBPdmVycmlkZSB0aGUgU291bmQucmVzZXQgbWV0aG9kIHRvIGNsZWFuIHVwIHByb3BlcnRpZXMgZnJvbSB0aGUgc3BhdGlhbCBwbHVnaW4uXG4gICAqIEBwYXJhbSAge0Z1bmN0aW9ufSBfc3VwZXIgU291bmQgcmVzZXQgbWV0aG9kLlxuICAgKiBAcmV0dXJuIHtTb3VuZH1cbiAgICovXG4gIFNvdW5kLnByb3RvdHlwZS5yZXNldCA9IChmdW5jdGlvbihfc3VwZXIpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICB2YXIgcGFyZW50ID0gc2VsZi5fcGFyZW50O1xuXG4gICAgICAvLyBSZXNldCBhbGwgc3BhdGlhbCBwbHVnaW4gcHJvcGVydGllcyBvbiB0aGlzIHNvdW5kLlxuICAgICAgc2VsZi5fb3JpZW50YXRpb24gPSBwYXJlbnQuX29yaWVudGF0aW9uO1xuICAgICAgc2VsZi5fc3RlcmVvID0gcGFyZW50Ll9zdGVyZW87XG4gICAgICBzZWxmLl9wb3MgPSBwYXJlbnQuX3BvcztcbiAgICAgIHNlbGYuX3Bhbm5lckF0dHIgPSBwYXJlbnQuX3Bhbm5lckF0dHI7XG5cbiAgICAgIC8vIElmIGEgc3RlcmVvIG9yIHBvc2l0aW9uIHdhcyBzcGVjaWZpZWQsIHNldCBpdCB1cC5cbiAgICAgIGlmIChzZWxmLl9zdGVyZW8pIHtcbiAgICAgICAgcGFyZW50LnN0ZXJlbyhzZWxmLl9zdGVyZW8pO1xuICAgICAgfSBlbHNlIGlmIChzZWxmLl9wb3MpIHtcbiAgICAgICAgcGFyZW50LnBvcyhzZWxmLl9wb3NbMF0sIHNlbGYuX3Bvc1sxXSwgc2VsZi5fcG9zWzJdLCBzZWxmLl9pZCk7XG4gICAgICB9IGVsc2UgaWYgKHNlbGYuX3Bhbm5lcikge1xuICAgICAgICAvLyBEaXNjb25uZWN0IHRoZSBwYW5uZXIuXG4gICAgICAgIHNlbGYuX3Bhbm5lci5kaXNjb25uZWN0KDApO1xuICAgICAgICBzZWxmLl9wYW5uZXIgPSB1bmRlZmluZWQ7XG4gICAgICAgIHBhcmVudC5fcmVmcmVzaEJ1ZmZlcihzZWxmKTtcbiAgICAgIH1cblxuICAgICAgLy8gQ29tcGxldGUgcmVzZXR0aW5nIG9mIHRoZSBzb3VuZC5cbiAgICAgIHJldHVybiBfc3VwZXIuY2FsbCh0aGlzKTtcbiAgICB9O1xuICB9KShTb3VuZC5wcm90b3R5cGUucmVzZXQpO1xuXG4gIC8qKiBIZWxwZXIgTWV0aG9kcyAqKi9cbiAgLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cblxuICAvKipcbiAgICogQ3JlYXRlIGEgbmV3IHBhbm5lciBub2RlIGFuZCBzYXZlIGl0IG9uIHRoZSBzb3VuZC5cbiAgICogQHBhcmFtICB7U291bmR9IHNvdW5kIFNwZWNpZmljIHNvdW5kIHRvIHNldHVwIHBhbm5pbmcgb24uXG4gICAqIEBwYXJhbSB7U3RyaW5nfSB0eXBlIFR5cGUgb2YgcGFubmVyIHRvIGNyZWF0ZTogJ3N0ZXJlbycgb3IgJ3NwYXRpYWwnLlxuICAgKi9cbiAgdmFyIHNldHVwUGFubmVyID0gZnVuY3Rpb24oc291bmQsIHR5cGUpIHtcbiAgICB0eXBlID0gdHlwZSB8fCAnc3BhdGlhbCc7XG5cbiAgICAvLyBDcmVhdGUgdGhlIG5ldyBwYW5uZXIgbm9kZS5cbiAgICBpZiAodHlwZSA9PT0gJ3NwYXRpYWwnKSB7XG4gICAgICBzb3VuZC5fcGFubmVyID0gSG93bGVyLmN0eC5jcmVhdGVQYW5uZXIoKTtcbiAgICAgIHNvdW5kLl9wYW5uZXIuY29uZUlubmVyQW5nbGUgPSBzb3VuZC5fcGFubmVyQXR0ci5jb25lSW5uZXJBbmdsZTtcbiAgICAgIHNvdW5kLl9wYW5uZXIuY29uZU91dGVyQW5nbGUgPSBzb3VuZC5fcGFubmVyQXR0ci5jb25lT3V0ZXJBbmdsZTtcbiAgICAgIHNvdW5kLl9wYW5uZXIuY29uZU91dGVyR2FpbiA9IHNvdW5kLl9wYW5uZXJBdHRyLmNvbmVPdXRlckdhaW47XG4gICAgICBzb3VuZC5fcGFubmVyLmRpc3RhbmNlTW9kZWwgPSBzb3VuZC5fcGFubmVyQXR0ci5kaXN0YW5jZU1vZGVsO1xuICAgICAgc291bmQuX3Bhbm5lci5tYXhEaXN0YW5jZSA9IHNvdW5kLl9wYW5uZXJBdHRyLm1heERpc3RhbmNlO1xuICAgICAgc291bmQuX3Bhbm5lci5yZWZEaXN0YW5jZSA9IHNvdW5kLl9wYW5uZXJBdHRyLnJlZkRpc3RhbmNlO1xuICAgICAgc291bmQuX3Bhbm5lci5yb2xsb2ZmRmFjdG9yID0gc291bmQuX3Bhbm5lckF0dHIucm9sbG9mZkZhY3RvcjtcbiAgICAgIHNvdW5kLl9wYW5uZXIucGFubmluZ01vZGVsID0gc291bmQuX3Bhbm5lckF0dHIucGFubmluZ01vZGVsO1xuXG4gICAgICBpZiAodHlwZW9mIHNvdW5kLl9wYW5uZXIucG9zaXRpb25YICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICBzb3VuZC5fcGFubmVyLnBvc2l0aW9uWC5zZXRWYWx1ZUF0VGltZShzb3VuZC5fcG9zWzBdLCBIb3dsZXIuY3R4LmN1cnJlbnRUaW1lKTtcbiAgICAgICAgc291bmQuX3Bhbm5lci5wb3NpdGlvblkuc2V0VmFsdWVBdFRpbWUoc291bmQuX3Bvc1sxXSwgSG93bGVyLmN0eC5jdXJyZW50VGltZSk7XG4gICAgICAgIHNvdW5kLl9wYW5uZXIucG9zaXRpb25aLnNldFZhbHVlQXRUaW1lKHNvdW5kLl9wb3NbMl0sIEhvd2xlci5jdHguY3VycmVudFRpbWUpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc291bmQuX3Bhbm5lci5zZXRQb3NpdGlvbihzb3VuZC5fcG9zWzBdLCBzb3VuZC5fcG9zWzFdLCBzb3VuZC5fcG9zWzJdKTtcbiAgICAgIH1cblxuICAgICAgaWYgKHR5cGVvZiBzb3VuZC5fcGFubmVyLm9yaWVudGF0aW9uWCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgc291bmQuX3Bhbm5lci5vcmllbnRhdGlvblguc2V0VmFsdWVBdFRpbWUoc291bmQuX29yaWVudGF0aW9uWzBdLCBIb3dsZXIuY3R4LmN1cnJlbnRUaW1lKTtcbiAgICAgICAgc291bmQuX3Bhbm5lci5vcmllbnRhdGlvblkuc2V0VmFsdWVBdFRpbWUoc291bmQuX29yaWVudGF0aW9uWzFdLCBIb3dsZXIuY3R4LmN1cnJlbnRUaW1lKTtcbiAgICAgICAgc291bmQuX3Bhbm5lci5vcmllbnRhdGlvblouc2V0VmFsdWVBdFRpbWUoc291bmQuX29yaWVudGF0aW9uWzJdLCBIb3dsZXIuY3R4LmN1cnJlbnRUaW1lKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHNvdW5kLl9wYW5uZXIuc2V0T3JpZW50YXRpb24oc291bmQuX29yaWVudGF0aW9uWzBdLCBzb3VuZC5fb3JpZW50YXRpb25bMV0sIHNvdW5kLl9vcmllbnRhdGlvblsyXSk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHNvdW5kLl9wYW5uZXIgPSBIb3dsZXIuY3R4LmNyZWF0ZVN0ZXJlb1Bhbm5lcigpO1xuICAgICAgc291bmQuX3Bhbm5lci5wYW4uc2V0VmFsdWVBdFRpbWUoc291bmQuX3N0ZXJlbywgSG93bGVyLmN0eC5jdXJyZW50VGltZSk7XG4gICAgfVxuXG4gICAgc291bmQuX3Bhbm5lci5jb25uZWN0KHNvdW5kLl9ub2RlKTtcblxuICAgIC8vIFVwZGF0ZSB0aGUgY29ubmVjdGlvbnMuXG4gICAgaWYgKCFzb3VuZC5fcGF1c2VkKSB7XG4gICAgICBzb3VuZC5fcGFyZW50LnBhdXNlKHNvdW5kLl9pZCwgdHJ1ZSkucGxheShzb3VuZC5faWQsIHRydWUpO1xuICAgIH1cbiAgfTtcbn0pKCk7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./node_modules/howler/dist/howler.js\n");

/***/ }),

/***/ "./src/index.scss":
/*!************************!*\
  !*** ./src/index.scss ***!
  \************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n// extracted by mini-css-extract-plugin\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvaW5kZXguc2Nzcy5qcyIsIm1hcHBpbmdzIjoiO0FBQUEiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9hQV9KU19Qcm9qZWN0Ly4vc3JjL2luZGV4LnNjc3M/OTc0NSJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBleHRyYWN0ZWQgYnkgbWluaS1jc3MtZXh0cmFjdC1wbHVnaW5cbmV4cG9ydCB7fTsiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/index.scss\n");

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId](module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/compat get default export */
/******/ 	!function() {
/******/ 		// getDefaultExport function for compatibility with non-harmony modules
/******/ 		__webpack_require__.n = function(module) {
/******/ 			var getter = module && module.__esModule ?
/******/ 				function() { return module['default']; } :
/******/ 				function() { return module; };
/******/ 			__webpack_require__.d(getter, { a: getter });
/******/ 			return getter;
/******/ 		};
/******/ 	}();
/******/ 	
/******/ 	/* webpack/runtime/define property getters */
/******/ 	!function() {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = function(exports, definition) {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	}();
/******/ 	
/******/ 	/* webpack/runtime/global */
/******/ 	!function() {
/******/ 		__webpack_require__.g = (function() {
/******/ 			if (typeof globalThis === 'object') return globalThis;
/******/ 			try {
/******/ 				return this || new Function('return this')();
/******/ 			} catch (e) {
/******/ 				if (typeof window === 'object') return window;
/******/ 			}
/******/ 		})();
/******/ 	}();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	!function() {
/******/ 		__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }
/******/ 	}();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	!function() {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = function(exports) {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	}();
/******/ 	
/************************************************************************/
/******/ 	
/******/ 	// startup
/******/ 	// Load entry module and return exports
/******/ 	// This entry module can't be inlined because the eval-source-map devtool is used.
/******/ 	__webpack_require__("./src/index.js");
/******/ 	var __webpack_exports__ = __webpack_require__("./src/index.scss");
/******/ 	
/******/ })()
;